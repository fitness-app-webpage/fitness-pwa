var Au=Object.defineProperty;var Cu=(i,t,e)=>t in i?Au(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Q=(i,t,e)=>(Cu(i,typeof t!="symbol"?t+"":t,e),e);function Eu(i,t){for(var e=0;e<t.length;e++){const s=t[e];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in i)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(i,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function e(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=e(o);fetch(o.href,l)}})();function Lr(i){return i=i||[],Array.isArray(i)?i:[i]}function ni(i){return`[Vaadin.Router] ${i}`}function Su(i){if(typeof i!="object")return String(i);const t=Object.prototype.toString.call(i).match(/ (.*)\]$/)[1];return t==="Object"||t==="Array"?`${t} ${JSON.stringify(i)}`:t}const Pr="module",Br="nomodule",Ho=[Pr,Br];function il(i){if(!i.match(/.+\.[m]?js$/))throw new Error(ni(`Unsupported type for bundle "${i}": .js or .mjs expected.`))}function gh(i){if(!i||!ii(i.path))throw new Error(ni('Expected route config to be an object with a "path" string property, or an array of such objects'));const t=i.bundle,e=["component","redirect","bundle"];if(!wn(i.action)&&!Array.isArray(i.children)&&!wn(i.children)&&!Fr(t)&&!e.some(s=>ii(i[s])))throw new Error(ni(`Expected route config "${i.path}" to include either "${e.join('", "')}" or "action" function but none found.`));if(t)if(ii(t))il(t);else if(Ho.some(s=>s in t))Ho.forEach(s=>s in t&&il(t[s]));else throw new Error(ni('Expected route bundle to include either "'+Br+'" or "'+Pr+'" keys, or both'));i.redirect&&["bundle","component"].forEach(s=>{s in i&&console.warn(ni(`Route config "${i.path}" has both "redirect" and "${s}" properties, and "redirect" will always override the latter. Did you mean to only use "${s}"?`))})}function nl(i){Lr(i).forEach(t=>gh(t))}function sl(i,t){let e=document.head.querySelector('script[src="'+i+'"][async]');return e||(e=document.createElement("script"),e.setAttribute("src",i),t===Pr?e.setAttribute("type",Pr):t===Br&&e.setAttribute(Br,""),e.async=!0),new Promise((s,o)=>{e.onreadystatechange=e.onload=l=>{e.__dynamicImportLoaded=!0,s(l)},e.onerror=l=>{e.parentNode&&e.parentNode.removeChild(e),o(l)},e.parentNode===null?document.head.appendChild(e):e.__dynamicImportLoaded&&s()})}function vu(i){return ii(i)?sl(i):Promise.race(Ho.filter(t=>t in i).map(t=>sl(i[t],t)))}function As(i,t){return!window.dispatchEvent(new CustomEvent(`vaadin-router-${i}`,{cancelable:i==="go",detail:t}))}function Fr(i){return typeof i=="object"&&!!i}function wn(i){return typeof i=="function"}function ii(i){return typeof i=="string"}function ph(i){const t=new Error(ni(`Page not found (${i.pathname})`));return t.context=i,t.code=404,t}const Vn=new class{};function Iu(i){const t=i.port,e=i.protocol,l=e==="http:"&&t==="80"||e==="https:"&&t==="443"?i.hostname:i.host;return`${e}//${l}`}function rl(i){if(i.defaultPrevented||i.button!==0||i.shiftKey||i.ctrlKey||i.altKey||i.metaKey)return;let t=i.target;const e=i.composedPath?i.composedPath():i.path||[];for(let f=0;f<e.length;f++){const p=e[f];if(p.nodeName&&p.nodeName.toLowerCase()==="a"){t=p;break}}for(;t&&t.nodeName.toLowerCase()!=="a";)t=t.parentNode;if(!t||t.nodeName.toLowerCase()!=="a"||t.target&&t.target.toLowerCase()!=="_self"||t.hasAttribute("download")||t.hasAttribute("router-ignore")||t.pathname===window.location.pathname&&t.hash!==""||(t.origin||Iu(t))!==window.location.origin)return;const{pathname:o,search:l,hash:d}=t;As("go",{pathname:o,search:l,hash:d})&&(i.preventDefault(),i&&i.type==="click"&&window.scrollTo(0,0))}const Tu={activate(){window.document.addEventListener("click",rl)},inactivate(){window.document.removeEventListener("click",rl)}},Mu=/Trident/.test(navigator.userAgent);Mu&&!wn(window.PopStateEvent)&&(window.PopStateEvent=function(i,t){t=t||{};var e=document.createEvent("Event");return e.initEvent(i,!!t.bubbles,!!t.cancelable),e.state=t.state||null,e},window.PopStateEvent.prototype=window.Event.prototype);function ol(i){if(i.state==="vaadin-router-ignore")return;const{pathname:t,search:e,hash:s}=window.location;As("go",{pathname:t,search:e,hash:s})}const Du={activate(){window.addEventListener("popstate",ol)},inactivate(){window.removeEventListener("popstate",ol)}};var Yn=_h,Ou=ca,ku=Pu,Nu=bh,Ru=wh,mh="/",xh="./",Lu=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function ca(i,t){for(var e=[],s=0,o=0,l="",d=t&&t.delimiter||mh,f=t&&t.delimiters||xh,p=!1,m;(m=Lu.exec(i))!==null;){var y=m[0],w=m[1],A=m.index;if(l+=i.slice(o,A),o=A+y.length,w){l+=w[1],p=!0;continue}var S="",M=i[o],D=m[2],k=m[3],R=m[4],P=m[5];if(!p&&l.length){var V=l.length-1;f.indexOf(l[V])>-1&&(S=l[V],l=l.slice(0,V))}l&&(e.push(l),l="",p=!1);var W=S!==""&&M!==void 0&&M!==S,$=P==="+"||P==="*",G=P==="?"||P==="*",B=S||d,Y=k||R;e.push({name:D||s++,prefix:S,delimiter:B,optional:G,repeat:$,partial:W,pattern:Y?Bu(Y):"[^"+Vi(B)+"]+?"})}return(l||o<i.length)&&e.push(l+i.substr(o)),e}function Pu(i,t){return bh(ca(i,t))}function bh(i){for(var t=new Array(i.length),e=0;e<i.length;e++)typeof i[e]=="object"&&(t[e]=new RegExp("^(?:"+i[e].pattern+")$"));return function(s,o){for(var l="",d=o&&o.encode||encodeURIComponent,f=0;f<i.length;f++){var p=i[f];if(typeof p=="string"){l+=p;continue}var m=s?s[p.name]:void 0,y;if(Array.isArray(m)){if(!p.repeat)throw new TypeError('Expected "'+p.name+'" to not repeat, but got array');if(m.length===0){if(p.optional)continue;throw new TypeError('Expected "'+p.name+'" to not be empty')}for(var w=0;w<m.length;w++){if(y=d(m[w],p),!t[f].test(y))throw new TypeError('Expected all "'+p.name+'" to match "'+p.pattern+'"');l+=(w===0?p.prefix:p.delimiter)+y}continue}if(typeof m=="string"||typeof m=="number"||typeof m=="boolean"){if(y=d(String(m),p),!t[f].test(y))throw new TypeError('Expected "'+p.name+'" to match "'+p.pattern+'", but got "'+y+'"');l+=p.prefix+y;continue}if(p.optional){p.partial&&(l+=p.prefix);continue}throw new TypeError('Expected "'+p.name+'" to be '+(p.repeat?"an array":"a string"))}return l}}function Vi(i){return i.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Bu(i){return i.replace(/([=!:$/()])/g,"\\$1")}function yh(i){return i&&i.sensitive?"":"i"}function Fu(i,t){if(!t)return i;var e=i.source.match(/\((?!\?)/g);if(e)for(var s=0;s<e.length;s++)t.push({name:s,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return i}function Uu(i,t,e){for(var s=[],o=0;o<i.length;o++)s.push(_h(i[o],t,e).source);return new RegExp("(?:"+s.join("|")+")",yh(e))}function Vu(i,t,e){return wh(ca(i,e),t,e)}function wh(i,t,e){e=e||{};for(var s=e.strict,o=e.start!==!1,l=e.end!==!1,d=Vi(e.delimiter||mh),f=e.delimiters||xh,p=[].concat(e.endsWith||[]).map(Vi).concat("$").join("|"),m=o?"^":"",y=i.length===0,w=0;w<i.length;w++){var A=i[w];if(typeof A=="string")m+=Vi(A),y=w===i.length-1&&f.indexOf(A[A.length-1])>-1;else{var S=A.repeat?"(?:"+A.pattern+")(?:"+Vi(A.delimiter)+"(?:"+A.pattern+"))*":A.pattern;t&&t.push(A),A.optional?A.partial?m+=Vi(A.prefix)+"("+S+")?":m+="(?:"+Vi(A.prefix)+"("+S+"))?":m+=Vi(A.prefix)+"("+S+")"}}return l?(s||(m+="(?:"+d+")?"),m+=p==="$"?"$":"(?="+p+")"):(s||(m+="(?:"+d+"(?="+p+"))?"),y||(m+="(?="+d+"|"+p+")")),new RegExp(m,yh(e))}function _h(i,t,e){return i instanceof RegExp?Fu(i,t):Array.isArray(i)?Uu(i,t,e):Vu(i,t,e)}Yn.parse=Ou;Yn.compile=ku;Yn.tokensToFunction=Nu;Yn.tokensToRegExp=Ru;const{hasOwnProperty:zu}=Object.prototype,jo=new Map;jo.set("|false",{keys:[],pattern:/(?:)/});function al(i){try{return decodeURIComponent(i)}catch{return i}}function Hu(i,t,e,s,o){e=!!e;const l=`${i}|${e}`;let d=jo.get(l);if(!d){const m=[];d={keys:m,pattern:Yn(i,m,{end:e,strict:i===""})},jo.set(l,d)}const f=d.pattern.exec(t);if(!f)return null;const p=Object.assign({},o);for(let m=1;m<f.length;m++){const y=d.keys[m-1],w=y.name,A=f[m];(A!==void 0||!zu.call(p,w))&&(y.repeat?p[w]=A?A.split(y.delimiter).map(al):[]:p[w]=A&&al(A))}return{path:f[0],keys:(s||[]).concat(d.keys),params:p}}function Ah(i,t,e,s,o){let l,d,f=0,p=i.path||"";return p.charAt(0)==="/"&&(e&&(p=p.substr(1)),e=!0),{next(m){if(i===m)return{done:!0};const y=i.__children=i.__children||i.children;if(!l&&(l=Hu(p,t,!y,s,o),l))return{done:!1,value:{route:i,keys:l.keys,params:l.params,path:l.path}};if(l&&y)for(;f<y.length;){if(!d){const A=y[f];A.parent=i;let S=l.path.length;S>0&&t.charAt(S)==="/"&&(S+=1),d=Ah(A,t.substr(S),e,l.keys,l.params)}const w=d.next(m);if(!w.done)return{done:!1,value:w.value};d=null,f++}return{done:!0}}}}function ju(i){if(wn(i.route.action))return i.route.action(i)}function Wu(i,t){let e=t;for(;e;)if(e=e.parent,e===i)return!0;return!1}function $u(i){let t=`Path '${i.pathname}' is not properly resolved due to an error.`;const e=(i.route||{}).path;return e&&(t+=` Resolution had failed on route: '${e}'`),t}function Yu(i,t){const{route:e,path:s}=t;if(e&&!e.__synthetic){const o={path:s,route:e};if(!i.chain)i.chain=[];else if(e.parent){let l=i.chain.length;for(;l--&&i.chain[l].route&&i.chain[l].route!==e.parent;)i.chain.pop()}i.chain.push(o)}}class Ds{constructor(t,e={}){if(Object(t)!==t)throw new TypeError("Invalid routes");this.baseUrl=e.baseUrl||"",this.errorHandler=e.errorHandler,this.resolveRoute=e.resolveRoute||ju,this.context=Object.assign({resolver:this},e.context),this.root=Array.isArray(t)?{path:"",__children:t,parent:null,__synthetic:!0}:t,this.root.parent=null}getRoutes(){return[...this.root.__children]}setRoutes(t){nl(t);const e=[...Lr(t)];this.root.__children=e}addRoutes(t){return nl(t),this.root.__children.push(...Lr(t)),this.getRoutes()}removeRoutes(){this.setRoutes([])}resolve(t){const e=Object.assign({},this.context,ii(t)?{pathname:t}:t),s=Ah(this.root,this.__normalizePathname(e.pathname),this.baseUrl),o=this.resolveRoute;let l=null,d=null,f=e;function p(m,y=l.value.route,w){const A=w===null&&l.value.route;return l=d||s.next(A),d=null,!m&&(l.done||!Wu(y,l.value.route))?(d=l,Promise.resolve(Vn)):l.done?Promise.reject(ph(e)):(f=Object.assign(f?{chain:f.chain?f.chain.slice(0):[]}:{},e,l.value),Yu(f,l.value),Promise.resolve(o(f)).then(S=>S!=null&&S!==Vn?(f.result=S.result||S,f):p(m,y,S)))}return e.next=p,Promise.resolve().then(()=>p(!0,this.root)).catch(m=>{const y=$u(f);if(m?console.warn(y):m=new Error(y),m.context=m.context||f,m instanceof DOMException||(m.code=m.code||500),this.errorHandler)return f.result=this.errorHandler(m),f;throw m})}static __createUrl(t,e){return new URL(t,e)}get __effectiveBaseUrl(){return this.baseUrl?this.constructor.__createUrl(this.baseUrl,document.baseURI||document.URL).href.replace(/[^\/]*$/,""):""}__normalizePathname(t){if(!this.baseUrl)return t;const e=this.__effectiveBaseUrl,s=this.constructor.__createUrl(t,e).href;if(s.slice(0,e.length)===e)return s.slice(e.length)}}Ds.pathToRegexp=Yn;const{pathToRegexp:ll}=Ds,cl=new Map;function Ch(i,t,e){const s=t.name||t.component;if(s&&(i.has(s)?i.get(s).push(t):i.set(s,[t])),Array.isArray(e))for(let o=0;o<e.length;o++){const l=e[o];l.parent=t,Ch(i,l,l.__children||l.children)}}function hl(i,t){const e=i.get(t);if(e&&e.length>1)throw new Error(`Duplicate route with name "${t}". Try seting unique 'name' route properties.`);return e&&e[0]}function dl(i){let t=i.path;return t=Array.isArray(t)?t[0]:t,t!==void 0?t:""}function Xu(i,t={}){if(!(i instanceof Ds))throw new TypeError("An instance of Resolver is expected");const e=new Map;return(s,o)=>{let l=hl(e,s);if(!l&&(e.clear(),Ch(e,i.root,i.root.__children),l=hl(e,s),!l))throw new Error(`Route "${s}" not found`);let d=cl.get(l.fullPath);if(!d){let p=dl(l),m=l.parent;for(;m;){const S=dl(m);S&&(p=S.replace(/\/$/,"")+"/"+p.replace(/^\//,"")),m=m.parent}const y=ll.parse(p),w=ll.tokensToFunction(y),A=Object.create(null);for(let S=0;S<y.length;S++)ii(y[S])||(A[y[S].name]=!0);d={toPath:w,keys:A},cl.set(p,d),l.fullPath=p}let f=d.toPath(o,t)||"/";if(t.stringifyQueryParams&&o){const p={},m=Object.keys(o);for(let w=0;w<m.length;w++){const A=m[w];d.keys[A]||(p[A]=o[A])}const y=t.stringifyQueryParams(p);y&&(f+=y.charAt(0)==="?"?y:`?${y}`)}return f}}let ul=[];function Gu(i){ul.forEach(t=>t.inactivate()),i.forEach(t=>t.activate()),ul=i}const qu=i=>{const t=getComputedStyle(i).getPropertyValue("animation-name");return t&&t!=="none"},Zu=(i,t)=>{const e=()=>{i.removeEventListener("animationend",e),t()};i.addEventListener("animationend",e)};function fl(i,t){return i.classList.add(t),new Promise(e=>{if(qu(i)){const s=i.getBoundingClientRect(),o=`height: ${s.bottom-s.top}px; width: ${s.right-s.left}px`;i.setAttribute("style",`position: absolute; ${o}`),Zu(i,()=>{i.classList.remove(t),i.removeAttribute("style"),e()})}else i.classList.remove(t),e()})}const Ku=256;function Eo(i){return i!=null}function Qu(i){const t=Object.assign({},i);return delete t.next,t}function Je({pathname:i="",search:t="",hash:e="",chain:s=[],params:o={},redirectFrom:l,resolver:d},f){const p=s.map(m=>m.route);return{baseUrl:d&&d.baseUrl||"",pathname:i,search:t,hash:e,routes:p,route:f||p.length&&p[p.length-1]||null,params:o,redirectFrom:l,getUrl:(m={})=>Cr(re.pathToRegexp.compile(Eh(p))(Object.assign({},o,m)),d)}}function gl(i,t){const e=Object.assign({},i.params);return{redirect:{pathname:t,from:i.pathname,params:e}}}function Ju(i,t){t.location=Je(i);const e=i.chain.map(s=>s.route).indexOf(i.route);return i.chain[e].element=t,t}function Ar(i,t,e){if(wn(i))return i.apply(e,t)}function pl(i,t,e){return s=>{if(s&&(s.cancel||s.redirect))return s;if(e)return Ar(e[i],t,e)}}function tf(i,t){if(!Array.isArray(i)&&!Fr(i))throw new Error(ni(`Incorrect "children" value for the route ${t.path}: expected array or object, but got ${i}`));t.__children=[];const e=Lr(i);for(let s=0;s<e.length;s++)gh(e[s]),t.__children.push(e[s])}function or(i){if(i&&i.length){const t=i[0].parentNode;for(let e=0;e<i.length;e++)t.removeChild(i[e])}}function Cr(i,t){const e=t.__effectiveBaseUrl;return e?t.constructor.__createUrl(i.replace(/^\//,""),e).pathname:i}function Eh(i){return i.map(t=>t.path).reduce((t,e)=>e.length?t.replace(/\/$/,"")+"/"+e.replace(/^\//,""):t,"")}class re extends Ds{constructor(t,e){const s=document.head.querySelector("base"),o=s&&s.getAttribute("href");super([],Object.assign({baseUrl:o&&Ds.__createUrl(o,document.URL).pathname.replace(/[^\/]*$/,"")},e)),this.resolveRoute=d=>this.__resolveRoute(d);const l=re.NavigationTrigger;re.setTriggers.apply(re,Object.keys(l).map(d=>l[d])),this.baseUrl,this.ready,this.ready=Promise.resolve(t),this.location,this.location=Je({resolver:this}),this.__lastStartedRenderId=0,this.__navigationEventHandler=this.__onNavigationEvent.bind(this),this.setOutlet(t),this.subscribe(),this.__createdByRouter=new WeakMap,this.__addedByRouter=new WeakMap}__resolveRoute(t){const e=t.route;let s=Promise.resolve();wn(e.children)&&(s=s.then(()=>e.children(Qu(t))).then(l=>{!Eo(l)&&!wn(e.children)&&(l=e.children),tf(l,e)}));const o={redirect:l=>gl(t,l),component:l=>{const d=document.createElement(l);return this.__createdByRouter.set(d,!0),d}};return s.then(()=>{if(this.__isLatestRender(t))return Ar(e.action,[t,o],e)}).then(l=>{if(Eo(l)&&(l instanceof HTMLElement||l.redirect||l===Vn))return l;if(ii(e.redirect))return o.redirect(e.redirect);if(e.bundle)return vu(e.bundle).then(()=>{},()=>{throw new Error(ni(`Bundle not found: ${e.bundle}. Check if the file name is correct`))})}).then(l=>{if(Eo(l))return l;if(ii(e.component))return o.component(e.component)})}setOutlet(t){t&&this.__ensureOutlet(t),this.__outlet=t}getOutlet(){return this.__outlet}setRoutes(t,e=!1){return this.__previousContext=void 0,this.__urlForName=void 0,super.setRoutes(t),e||this.__onNavigationEvent(),this.ready}render(t,e){const s=++this.__lastStartedRenderId,o=Object.assign({search:"",hash:""},ii(t)?{pathname:t}:t,{__renderId:s});return this.ready=this.resolve(o).then(l=>this.__fullyResolveChain(l)).then(l=>{if(this.__isLatestRender(l)){const d=this.__previousContext;if(l===d)return this.__updateBrowserHistory(d,!0),this.location;if(this.location=Je(l),e&&this.__updateBrowserHistory(l,s===1),As("location-changed",{router:this,location:this.location}),l.__skipAttach)return this.__copyUnchangedElements(l,d),this.__previousContext=l,this.location;this.__addAppearingContent(l,d);const f=this.__animateIfNeeded(l);return this.__runOnAfterEnterCallbacks(l),this.__runOnAfterLeaveCallbacks(l,d),f.then(()=>{if(this.__isLatestRender(l))return this.__removeDisappearingContent(),this.__previousContext=l,this.location})}}).catch(l=>{if(s===this.__lastStartedRenderId)throw e&&this.__updateBrowserHistory(o),or(this.__outlet&&this.__outlet.children),this.location=Je(Object.assign(o,{resolver:this})),As("error",Object.assign({router:this,error:l},o)),l}),this.ready}__fullyResolveChain(t,e=t){return this.__findComponentContextAfterAllRedirects(e).then(s=>{const l=s!==e?s:t,f=Cr(Eh(s.chain),s.resolver)===s.pathname,p=(m,y=m.route,w)=>m.next(void 0,y,w).then(A=>A===null||A===Vn?f?m:y.parent!==null?p(m,y.parent,A):A:A);return p(s).then(m=>{if(m===null||m===Vn)throw ph(l);return m&&m!==Vn&&m!==s?this.__fullyResolveChain(l,m):this.__amendWithOnBeforeCallbacks(s)})})}__findComponentContextAfterAllRedirects(t){const e=t.result;return e instanceof HTMLElement?(Ju(t,e),Promise.resolve(t)):e.redirect?this.__redirect(e.redirect,t.__redirectCount,t.__renderId).then(s=>this.__findComponentContextAfterAllRedirects(s)):e instanceof Error?Promise.reject(e):Promise.reject(new Error(ni(`Invalid route resolution result for path "${t.pathname}". Expected redirect object or HTML element, but got: "${Su(e)}". Double check the action return value for the route.`)))}__amendWithOnBeforeCallbacks(t){return this.__runOnBeforeCallbacks(t).then(e=>e===this.__previousContext||e===t?e:this.__fullyResolveChain(e))}__runOnBeforeCallbacks(t){const e=this.__previousContext||{},s=e.chain||[],o=t.chain;let l=Promise.resolve();const d=()=>({cancel:!0}),f=p=>gl(t,p);if(t.__divergedChainIndex=0,t.__skipAttach=!1,s.length){for(let p=0;p<Math.min(s.length,o.length)&&!(s[p].route!==o[p].route||s[p].path!==o[p].path&&s[p].element!==o[p].element||!this.__isReusableElement(s[p].element,o[p].element));p=++t.__divergedChainIndex);if(t.__skipAttach=o.length===s.length&&t.__divergedChainIndex==o.length&&this.__isReusableElement(t.result,e.result),t.__skipAttach){for(let p=o.length-1;p>=0;p--)l=this.__runOnBeforeLeaveCallbacks(l,t,{prevent:d},s[p]);for(let p=0;p<o.length;p++)l=this.__runOnBeforeEnterCallbacks(l,t,{prevent:d,redirect:f},o[p]),s[p].element.location=Je(t,s[p].route)}else for(let p=s.length-1;p>=t.__divergedChainIndex;p--)l=this.__runOnBeforeLeaveCallbacks(l,t,{prevent:d},s[p])}if(!t.__skipAttach)for(let p=0;p<o.length;p++)p<t.__divergedChainIndex?p<s.length&&s[p].element&&(s[p].element.location=Je(t,s[p].route)):(l=this.__runOnBeforeEnterCallbacks(l,t,{prevent:d,redirect:f},o[p]),o[p].element&&(o[p].element.location=Je(t,o[p].route)));return l.then(p=>{if(p){if(p.cancel)return this.__previousContext.__renderId=t.__renderId,this.__previousContext;if(p.redirect)return this.__redirect(p.redirect,t.__redirectCount,t.__renderId)}return t})}__runOnBeforeLeaveCallbacks(t,e,s,o){const l=Je(e);return t.then(d=>{if(this.__isLatestRender(e))return pl("onBeforeLeave",[l,s,this],o.element)(d)}).then(d=>{if(!(d||{}).redirect)return d})}__runOnBeforeEnterCallbacks(t,e,s,o){const l=Je(e,o.route);return t.then(d=>{if(this.__isLatestRender(e))return pl("onBeforeEnter",[l,s,this],o.element)(d)})}__isReusableElement(t,e){return t&&e?this.__createdByRouter.get(t)&&this.__createdByRouter.get(e)?t.localName===e.localName:t===e:!1}__isLatestRender(t){return t.__renderId===this.__lastStartedRenderId}__redirect(t,e,s){if(e>Ku)throw new Error(ni(`Too many redirects when rendering ${t.from}`));return this.resolve({pathname:this.urlForPath(t.pathname,t.params),redirectFrom:t.from,__redirectCount:(e||0)+1,__renderId:s})}__ensureOutlet(t=this.__outlet){if(!(t instanceof Node))throw new TypeError(ni(`Expected router outlet to be a valid DOM Node (but got ${t})`))}__updateBrowserHistory({pathname:t,search:e="",hash:s=""},o){if(window.location.pathname!==t||window.location.search!==e||window.location.hash!==s){const l=o?"replaceState":"pushState";window.history[l](null,document.title,t+e+s),window.dispatchEvent(new PopStateEvent("popstate",{state:"vaadin-router-ignore"}))}}__copyUnchangedElements(t,e){let s=this.__outlet;for(let o=0;o<t.__divergedChainIndex;o++){const l=e&&e.chain[o].element;if(l)if(l.parentNode===s)t.chain[o].element=l,s=l;else break}return s}__addAppearingContent(t,e){this.__ensureOutlet(),this.__removeAppearingContent();const s=this.__copyUnchangedElements(t,e);this.__appearingContent=[],this.__disappearingContent=Array.from(s.children).filter(l=>this.__addedByRouter.get(l)&&l!==t.result);let o=s;for(let l=t.__divergedChainIndex;l<t.chain.length;l++){const d=t.chain[l].element;d&&(o.appendChild(d),this.__addedByRouter.set(d,!0),o===s&&this.__appearingContent.push(d),o=d)}}__removeDisappearingContent(){this.__disappearingContent&&or(this.__disappearingContent),this.__disappearingContent=null,this.__appearingContent=null}__removeAppearingContent(){this.__disappearingContent&&this.__appearingContent&&(or(this.__appearingContent),this.__disappearingContent=null,this.__appearingContent=null)}__runOnAfterLeaveCallbacks(t,e){if(e)for(let s=e.chain.length-1;s>=t.__divergedChainIndex&&this.__isLatestRender(t);s--){const o=e.chain[s].element;if(o)try{const l=Je(t);Ar(o.onAfterLeave,[l,{},e.resolver],o)}finally{this.__disappearingContent.indexOf(o)>-1&&or(o.children)}}}__runOnAfterEnterCallbacks(t){for(let e=t.__divergedChainIndex;e<t.chain.length&&this.__isLatestRender(t);e++){const s=t.chain[e].element||{},o=Je(t,t.chain[e].route);Ar(s.onAfterEnter,[o,{},t.resolver],s)}}__animateIfNeeded(t){const e=(this.__disappearingContent||[])[0],s=(this.__appearingContent||[])[0],o=[],l=t.chain;let d;for(let f=l.length;f>0;f--)if(l[f-1].route.animate){d=l[f-1].route.animate;break}if(e&&s&&d){const f=Fr(d)&&d.leave||"leaving",p=Fr(d)&&d.enter||"entering";o.push(fl(e,f)),o.push(fl(s,p))}return Promise.all(o).then(()=>t)}subscribe(){window.addEventListener("vaadin-router-go",this.__navigationEventHandler)}unsubscribe(){window.removeEventListener("vaadin-router-go",this.__navigationEventHandler)}__onNavigationEvent(t){const{pathname:e,search:s,hash:o}=t?t.detail:window.location;ii(this.__normalizePathname(e))&&(t&&t.preventDefault&&t.preventDefault(),this.render({pathname:e,search:s,hash:o},!0))}static setTriggers(...t){Gu(t)}urlForName(t,e){return this.__urlForName||(this.__urlForName=Xu(this)),Cr(this.__urlForName(t,e),this)}urlForPath(t,e){return Cr(re.pathToRegexp.compile(t)(e),this)}static go(t){const{pathname:e,search:s,hash:o}=ii(t)?this.__createUrl(t,"http://a"):t;return As("go",{pathname:e,search:s,hash:o})}}const ef=/\/\*[\*!]\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,Er=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function nf(){function i(){return!0}return Sh(i)}function sf(){try{return rf()?!0:of()?Er?!af():!nf():!1}catch{return!1}}function rf(){return localStorage.getItem("vaadin.developmentmode.force")}function of(){return["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0}function af(){return!!(Er&&Object.keys(Er).map(t=>Er[t]).filter(t=>t.productionMode).length>0)}function Sh(i,t){if(typeof i!="function")return;const e=ef.exec(i.toString());if(e)try{i=new Function(e[1])}catch(s){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",s)}return i(t)}window.Vaadin=window.Vaadin||{};const ml=function(i,t){if(window.Vaadin.developmentMode)return Sh(i,t)};window.Vaadin.developmentMode===void 0&&(window.Vaadin.developmentMode=sf());function lf(){}const cf=function(){if(typeof ml=="function")return ml(lf)};window.Vaadin=window.Vaadin||{};window.Vaadin.registrations=window.Vaadin.registrations||[];window.Vaadin.registrations.push({is:"@vaadin/router",version:"1.7.4"});cf();re.NavigationTrigger={POPSTATE:Du,CLICK:Tu};const ut="/fitness-pwa",hf=document.querySelector("#outlet"),Si=new re(hf);function Di(){if(localStorage.getItem("auth")!==void 0){let i=localStorage.getItem("auth");if(i!==null)return i}}function vh(){if(localStorage.getItem("refresh")!==void 0){let i=localStorage.getItem("refresh");if(i!==null)return i}}class ps extends Error{}ps.prototype.name="InvalidTokenError";function df(i){return decodeURIComponent(atob(i).replace(/(.)/g,(t,e)=>{let s=e.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function uf(i){let t=i.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return df(t)}catch{return atob(t)}}function ff(i,t){if(typeof i!="string")throw new ps("Invalid token specified: must be a string");t||(t={});const e=t.header===!0?0:1,s=i.split(".")[e];if(typeof s!="string")throw new ps(`Invalid token specified: missing part #${e+1}`);let o;try{o=uf(s)}catch(l){throw new ps(`Invalid token specified: invalid base64 for part #${e+1} (${l.message})`)}try{return JSON.parse(o)}catch(l){throw new ps(`Invalid token specified: invalid json for part #${e+1} (${l.message})`)}}const Ki="https://fitness-kcal-api-1706479824946.azurewebsites.net/api",gf="https://fitness-kcal-api-1706479824946.azurewebsites.net/authenticate/refreshtoken",pf="https://fitness-kcal-api-1706479824946.azurewebsites.net/login",mf="https://fitness-kcal-api-1706479824946.azurewebsites.net/register";function Ih(){const i=vh();if(i==null)return!1;let t=ff(i);return new Date(t.exp*1e3)>new Date&&t.iss==="fitness-kcal-api"}function xf(){var i={method:"GET",headers:{Authorization:Di(),refresh_token:vh()}};return fetch(gf,i).then(t=>{if(t.ok){const s=t.headers.get("Authorization").substring(7);return localStorage.setItem("auth",s),t}throw re.go(`${ut}/logout`),new Error("Invalid Token")})}function bf(i,t){return t.headers.Authorization="Bearer "+Di(),fetch(Ki+i,t).then(e=>({response:e}))}function Sn(i,t){return xf().then(e=>{if(e.ok)return bf(i,t).then(s=>s.response)}).catch(e=>e)}function yf(){localStorage.removeItem("auth"),localStorage.removeItem("refresh"),localStorage.removeItem("profileImage")}function Th(i){var t={method:"POST",body:JSON.stringify(i)};return fetch(pf,t).then(e=>{if(e.ok){const o=e.headers.get("Authorization").substring(7),d=e.headers.get("refresh_token").substring(13);window.localStorage.setItem("auth",o),window.localStorage.setItem("refresh",d)}else throw new Error("Incorrect email or password")})}function wf(i){var t={method:"POST",body:JSON.stringify(i),headers:{"Content-type":"application/json; charset=UTF-8"}};return fetch(mf,t).then(e=>{if(e.ok)return e;throw new Error("Something did go wrong")})}function _f(i){var t={method:"GET",headers:{Authorization:"Bearer "+Di()}};return fetch(Ki+i,t).then(e=>{if(e.ok)return e.text();if(e.status===401)return Sn(i,t).then(s=>{if(s.ok)return s.text()}).catch(s=>{throw s});throw new Error("There is no profile picture set")}).then(e=>{localStorage.setItem("profileImage",JSON.stringify({imageBase64:e,date:new Date}))}).catch(e=>{throw localStorage.setItem("profileImage",null),e})}function Af(i,t){var e={method:"POST",headers:{Authorization:"Bearer "+Di()},body:t};return fetch(Ki+i,e).then(s=>{if(s.ok)return s.text();if(s.status===401)return Sn(i,e).then(o=>{if(o.ok)return o.text();throw new Error("Invalid image")}).catch(o=>{throw o});throw new Error("Invalid image")}).then(s=>(localStorage.setItem("profileImage",JSON.stringify({imageBase64:s,date:new Date})),"Succesfully added profile photo")).catch(s=>{throw localStorage.setItem("profileImage",null),s})}function Xn(i){var t={method:"GET",headers:{Authorization:"Bearer "+Di()}};return fetch(Ki+i,t).then(e=>e.ok?e.json():e.status===401?Sn(i,t).then(s=>{if(s.ok)return s.json()}).catch(s=>{throw s}):e.json().then(s=>{throw new Error(JSON.stringify({message:s.message,status:s.status}))}))}function Cf(i,t){var e={method:"POST",headers:{Authorization:"Bearer "+Di()},body:t};return fetch(Ki+i,e).then(s=>{if(s.ok)return s;if(s.status===401)return Sn(i,e).then(o=>o).catch(o=>{throw o});throw new Error("Error cannot add product")})}function ha(i,t){var e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Di()},body:JSON.stringify(t)};return fetch(Ki+i,e).then(s=>{if(s.ok)return s;if(s.status===401)return Sn(i,e).then(o=>o).catch(o=>{throw o});throw new Error("error!")})}function Ef(i,t){var e={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Di()},body:JSON.stringify(t)};return fetch(Ki+i,e).then(s=>{if(s.ok)return s;if(s.status===401)return Sn(i,e).then(o=>o).catch(o=>{throw o});throw new Error("error!")})}function Sf(i){var t={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Di()}};return fetch(Ki+i,t).then(e=>{if(e.ok)return e;if(e.status===401)return Sn(i,t).then(s=>s).catch(s=>{throw s});throw new Error("error!")})}function vf(i){return ha("/userinfo",i)}function Mh(){return _f("/userinfo/profile-picture")}function If(i){return Af("/userinfo/profile-picture",i)}function Tf(i){return Cf("/product",i)}function Mf(){return Xn("/product")}function Dh(i){return Xn("/product/id/"+i)}function Df(i){return ha("/intake",i)}function da(i){return Xn("/product/barcode/"+i)}function Of(i){return Xn("/intake/date/"+i)}function kf(i){return Xn("/intake/"+i)}function Nf(){return Xn("/goal")}function Rf(i){return Sf("/intake/delete/"+i)}function Lf(i,t){return Ef("/intake/"+i,t)}function Pf(i){return ha("/goal",i)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Sr=globalThis,ua=Sr.ShadowRoot&&(Sr.ShadyCSS===void 0||Sr.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,fa=Symbol(),xl=new WeakMap;let Oh=class{constructor(t,e,s){if(this._$cssResult$=!0,s!==fa)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(ua&&t===void 0){const s=e!==void 0&&e.length===1;s&&(t=xl.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),s&&xl.set(e,t))}return t}toString(){return this.cssText}};const Bf=i=>new Oh(typeof i=="string"?i:i+"",void 0,fa),yt=(i,...t)=>{const e=i.length===1?i[0]:t.reduce((s,o,l)=>s+(d=>{if(d._$cssResult$===!0)return d.cssText;if(typeof d=="number")return d;throw Error("Value passed to 'css' function must be a 'css' function result: "+d+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+i[l+1],i[0]);return new Oh(e,i,fa)},Ff=(i,t)=>{if(ua)i.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(const e of t){const s=document.createElement("style"),o=Sr.litNonce;o!==void 0&&s.setAttribute("nonce",o),s.textContent=e.cssText,i.appendChild(s)}},bl=ua?i=>i:i=>i instanceof CSSStyleSheet?(t=>{let e="";for(const s of t.cssRules)e+=s.cssText;return Bf(e)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Uf,defineProperty:Vf,getOwnPropertyDescriptor:zf,getOwnPropertyNames:Hf,getOwnPropertySymbols:jf,getPrototypeOf:Wf}=Object,$i=globalThis,yl=$i.trustedTypes,$f=yl?yl.emptyScript:"",So=$i.reactiveElementPolyfillSupport,Cs=(i,t)=>i,Wo={toAttribute(i,t){switch(t){case Boolean:i=i?$f:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,t){let e=i;switch(t){case Boolean:e=i!==null;break;case Number:e=i===null?null:Number(i);break;case Object:case Array:try{e=JSON.parse(i)}catch{e=null}}return e}},ga=(i,t)=>!Uf(i,t),wl={attribute:!0,type:String,converter:Wo,reflect:!1,hasChanged:ga};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),$i.litPropertyMetadata??($i.litPropertyMetadata=new WeakMap);class Un extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=wl){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const s=Symbol(),o=this.getPropertyDescriptor(t,s,e);o!==void 0&&Vf(this.prototype,t,o)}}static getPropertyDescriptor(t,e,s){const{get:o,set:l}=zf(this.prototype,t)??{get(){return this[e]},set(d){this[e]=d}};return{get(){return o==null?void 0:o.call(this)},set(d){const f=o==null?void 0:o.call(this);l.call(this,d),this.requestUpdate(t,f,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??wl}static _$Ei(){if(this.hasOwnProperty(Cs("elementProperties")))return;const t=Wf(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(Cs("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Cs("properties"))){const e=this.properties,s=[...Hf(e),...jf(e)];for(const o of s)this.createProperty(o,e[o])}const t=this[Symbol.metadata];if(t!==null){const e=litPropertyMetadata.get(t);if(e!==void 0)for(const[s,o]of e)this.elementProperties.set(s,o)}this._$Eh=new Map;for(const[e,s]of this.elementProperties){const o=this._$Eu(e,s);o!==void 0&&this._$Eh.set(o,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const s=new Set(t.flat(1/0).reverse());for(const o of s)e.unshift(bl(o))}else t!==void 0&&e.push(bl(t));return e}static _$Eu(t,e){const s=e.attribute;return s===!1?void 0:typeof s=="string"?s:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$Eg=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$ES(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(e=>e(this))}addController(t){var e;(this._$E_??(this._$E_=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((e=t.hostConnected)==null||e.call(t))}removeController(t){var e;(e=this._$E_)==null||e.delete(t)}_$ES(){const t=new Map,e=this.constructor.elementProperties;for(const s of e.keys())this.hasOwnProperty(s)&&(t.set(s,this[s]),delete this[s]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Ff(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$E_)==null||t.forEach(e=>{var s;return(s=e.hostConnected)==null?void 0:s.call(e)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$E_)==null||t.forEach(e=>{var s;return(s=e.hostDisconnected)==null?void 0:s.call(e)})}attributeChangedCallback(t,e,s){this._$AK(t,s)}_$EO(t,e){var l;const s=this.constructor.elementProperties.get(t),o=this.constructor._$Eu(t,s);if(o!==void 0&&s.reflect===!0){const d=(((l=s.converter)==null?void 0:l.toAttribute)!==void 0?s.converter:Wo).toAttribute(e,s.type);this._$Em=t,d==null?this.removeAttribute(o):this.setAttribute(o,d),this._$Em=null}}_$AK(t,e){var l;const s=this.constructor,o=s._$Eh.get(t);if(o!==void 0&&this._$Em!==o){const d=s.getPropertyOptions(o),f=typeof d.converter=="function"?{fromAttribute:d.converter}:((l=d.converter)==null?void 0:l.fromAttribute)!==void 0?d.converter:Wo;this._$Em=o,this[o]=f.fromAttribute(e,d.type),this._$Em=null}}requestUpdate(t,e,s){if(t!==void 0){if(s??(s=this.constructor.getPropertyOptions(t)),!(s.hasChanged??ga)(this[t],e))return;this.C(t,e,s)}this.isUpdatePending===!1&&(this._$Eg=this._$EP())}C(t,e,s){this._$AL.has(t)||this._$AL.set(t,e),s.reflect===!0&&this._$Em!==t&&(this._$ET??(this._$ET=new Set)).add(t)}async _$EP(){this.isUpdatePending=!0;try{await this._$Eg}catch(e){Promise.reject(e)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var s;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[l,d]of this._$Ep)this[l]=d;this._$Ep=void 0}const o=this.constructor.elementProperties;if(o.size>0)for(const[l,d]of o)d.wrapped!==!0||this._$AL.has(l)||this[l]===void 0||this.C(l,this[l],d)}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),(s=this._$E_)==null||s.forEach(o=>{var l;return(l=o.hostUpdate)==null?void 0:l.call(o)}),this.update(e)):this._$Ej()}catch(o){throw t=!1,this._$Ej(),o}t&&this._$AE(e)}willUpdate(t){}_$AE(t){var e;(e=this._$E_)==null||e.forEach(s=>{var o;return(o=s.hostUpdated)==null?void 0:o.call(s)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ej(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Eg}shouldUpdate(t){return!0}update(t){this._$ET&&(this._$ET=this._$ET.forEach(e=>this._$EO(e,this[e]))),this._$Ej()}updated(t){}firstUpdated(t){}}Un.elementStyles=[],Un.shadowRootOptions={mode:"open"},Un[Cs("elementProperties")]=new Map,Un[Cs("finalized")]=new Map,So==null||So({ReactiveElement:Un}),($i.reactiveElementVersions??($i.reactiveElementVersions=[])).push("2.0.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Es=globalThis,Ur=Es.trustedTypes,_l=Ur?Ur.createPolicy("lit-html",{createHTML:i=>i}):void 0,pa="$lit$",Ei=`lit$${(Math.random()+"").slice(9)}$`,ma="?"+Ei,Yf=`<${ma}>`,_n=document,Os=()=>_n.createComment(""),ks=i=>i===null||typeof i!="object"&&typeof i!="function",kh=Array.isArray,Nh=i=>kh(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",vo=`[ 	
\f\r]`,as=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Al=/-->/g,Cl=/>/g,ln=RegExp(`>|${vo}(?:([^\\s"'>=/]+)(${vo}*=${vo}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),El=/'/g,Sl=/"/g,Rh=/^(?:script|style|textarea|title)$/i,Xf=i=>(t,...e)=>({_$litType$:i,strings:t,values:e}),J=Xf(1),Xi=Symbol.for("lit-noChange"),le=Symbol.for("lit-nothing"),vl=new WeakMap,mn=_n.createTreeWalker(_n,129);function Lh(i,t){if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return _l!==void 0?_l.createHTML(t):t}const Ph=(i,t)=>{const e=i.length-1,s=[];let o,l=t===2?"<svg>":"",d=as;for(let f=0;f<e;f++){const p=i[f];let m,y,w=-1,A=0;for(;A<p.length&&(d.lastIndex=A,y=d.exec(p),y!==null);)A=d.lastIndex,d===as?y[1]==="!--"?d=Al:y[1]!==void 0?d=Cl:y[2]!==void 0?(Rh.test(y[2])&&(o=RegExp("</"+y[2],"g")),d=ln):y[3]!==void 0&&(d=ln):d===ln?y[0]===">"?(d=o??as,w=-1):y[1]===void 0?w=-2:(w=d.lastIndex-y[2].length,m=y[1],d=y[3]===void 0?ln:y[3]==='"'?Sl:El):d===Sl||d===El?d=ln:d===Al||d===Cl?d=as:(d=ln,o=void 0);const S=d===ln&&i[f+1].startsWith("/>")?" ":"";l+=d===as?p+Yf:w>=0?(s.push(m),p.slice(0,w)+pa+p.slice(w)+Ei+S):p+Ei+(w===-2?f:S)}return[Lh(i,l+(i[e]||"<?>")+(t===2?"</svg>":"")),s]};class Ns{constructor({strings:t,_$litType$:e},s){let o;this.parts=[];let l=0,d=0;const f=t.length-1,p=this.parts,[m,y]=Ph(t,e);if(this.el=Ns.createElement(m,s),mn.currentNode=this.el.content,e===2){const w=this.el.content.firstChild;w.replaceWith(...w.childNodes)}for(;(o=mn.nextNode())!==null&&p.length<f;){if(o.nodeType===1){if(o.hasAttributes())for(const w of o.getAttributeNames())if(w.endsWith(pa)){const A=y[d++],S=o.getAttribute(w).split(Ei),M=/([.?@])?(.*)/.exec(A);p.push({type:1,index:l,name:M[2],strings:S,ctor:M[1]==="."?Fh:M[1]==="?"?Uh:M[1]==="@"?Vh:Hs}),o.removeAttribute(w)}else w.startsWith(Ei)&&(p.push({type:6,index:l}),o.removeAttribute(w));if(Rh.test(o.tagName)){const w=o.textContent.split(Ei),A=w.length-1;if(A>0){o.textContent=Ur?Ur.emptyScript:"";for(let S=0;S<A;S++)o.append(w[S],Os()),mn.nextNode(),p.push({type:2,index:++l});o.append(w[A],Os())}}}else if(o.nodeType===8)if(o.data===ma)p.push({type:2,index:l});else{let w=-1;for(;(w=o.data.indexOf(Ei,w+1))!==-1;)p.push({type:7,index:l}),w+=Ei.length-1}l++}}static createElement(t,e){const s=_n.createElement("template");return s.innerHTML=t,s}}function An(i,t,e=i,s){var d,f;if(t===Xi)return t;let o=s!==void 0?(d=e._$Co)==null?void 0:d[s]:e._$Cl;const l=ks(t)?void 0:t._$litDirective$;return(o==null?void 0:o.constructor)!==l&&((f=o==null?void 0:o._$AO)==null||f.call(o,!1),l===void 0?o=void 0:(o=new l(i),o._$AT(i,e,s)),s!==void 0?(e._$Co??(e._$Co=[]))[s]=o:e._$Cl=o),o!==void 0&&(t=An(i,o._$AS(i,t.values),o,s)),t}class Bh{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:s}=this._$AD,o=((t==null?void 0:t.creationScope)??_n).importNode(e,!0);mn.currentNode=o;let l=mn.nextNode(),d=0,f=0,p=s[0];for(;p!==void 0;){if(d===p.index){let m;p.type===2?m=new Gn(l,l.nextSibling,this,t):p.type===1?m=new p.ctor(l,p.name,p.strings,this,t):p.type===6&&(m=new zh(l,this,t)),this._$AV.push(m),p=s[++f]}d!==(p==null?void 0:p.index)&&(l=mn.nextNode(),d++)}return mn.currentNode=_n,o}p(t){let e=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(t,s,e),e+=s.strings.length-2):s._$AI(t[e])),e++}}class Gn{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,e,s,o){this.type=2,this._$AH=le,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=s,this.options=o,this._$Cv=(o==null?void 0:o.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return e!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=An(this,t,e),ks(t)?t===le||t==null||t===""?(this._$AH!==le&&this._$AR(),this._$AH=le):t!==this._$AH&&t!==Xi&&this._(t):t._$litType$!==void 0?this.g(t):t.nodeType!==void 0?this.$(t):Nh(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==le&&ks(this._$AH)?this._$AA.nextSibling.data=t:this.$(_n.createTextNode(t)),this._$AH=t}g(t){var l;const{values:e,_$litType$:s}=t,o=typeof s=="number"?this._$AC(t):(s.el===void 0&&(s.el=Ns.createElement(Lh(s.h,s.h[0]),this.options)),s);if(((l=this._$AH)==null?void 0:l._$AD)===o)this._$AH.p(e);else{const d=new Bh(o,this),f=d.u(this.options);d.p(e),this.$(f),this._$AH=d}}_$AC(t){let e=vl.get(t.strings);return e===void 0&&vl.set(t.strings,e=new Ns(t)),e}T(t){kh(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let s,o=0;for(const l of t)o===e.length?e.push(s=new Gn(this.k(Os()),this.k(Os()),this,this.options)):s=e[o],s._$AI(l),o++;o<e.length&&(this._$AR(s&&s._$AB.nextSibling,o),e.length=o)}_$AR(t=this._$AA.nextSibling,e){var s;for((s=this._$AP)==null?void 0:s.call(this,!1,!0,e);t&&t!==this._$AB;){const o=t.nextSibling;t.remove(),t=o}}setConnected(t){var e;this._$AM===void 0&&(this._$Cv=t,(e=this._$AP)==null||e.call(this,t))}}class Hs{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,s,o,l){this.type=1,this._$AH=le,this._$AN=void 0,this.element=t,this.name=e,this._$AM=o,this.options=l,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=le}_$AI(t,e=this,s,o){const l=this.strings;let d=!1;if(l===void 0)t=An(this,t,e,0),d=!ks(t)||t!==this._$AH&&t!==Xi,d&&(this._$AH=t);else{const f=t;let p,m;for(t=l[0],p=0;p<l.length-1;p++)m=An(this,f[s+p],e,p),m===Xi&&(m=this._$AH[p]),d||(d=!ks(m)||m!==this._$AH[p]),m===le?t=le:t!==le&&(t+=(m??"")+l[p+1]),this._$AH[p]=m}d&&!o&&this.O(t)}O(t){t===le?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Fh extends Hs{constructor(){super(...arguments),this.type=3}O(t){this.element[this.name]=t===le?void 0:t}}class Uh extends Hs{constructor(){super(...arguments),this.type=4}O(t){this.element.toggleAttribute(this.name,!!t&&t!==le)}}class Vh extends Hs{constructor(t,e,s,o,l){super(t,e,s,o,l),this.type=5}_$AI(t,e=this){if((t=An(this,t,e,0)??le)===Xi)return;const s=this._$AH,o=t===le&&s!==le||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,l=t!==le&&(s===le||o);o&&this.element.removeEventListener(this.name,this,s),l&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e;typeof this._$AH=="function"?this._$AH.call(((e=this.options)==null?void 0:e.host)??this.element,t):this._$AH.handleEvent(t)}}class zh{constructor(t,e,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){An(this,t)}}const Gf={j:pa,P:Ei,A:ma,C:1,M:Ph,L:Bh,R:Nh,V:An,D:Gn,I:Hs,H:Uh,N:Vh,U:Fh,B:zh},Io=Es.litHtmlPolyfillSupport;Io==null||Io(Ns,Gn),(Es.litHtmlVersions??(Es.litHtmlVersions=[])).push("3.1.1");const qf=(i,t,e)=>{const s=(e==null?void 0:e.renderBefore)??t;let o=s._$litPart$;if(o===void 0){const l=(e==null?void 0:e.renderBefore)??null;s._$litPart$=o=new Gn(t.insertBefore(Os(),l),l,void 0,e??{})}return o._$AI(i),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let pt=class extends Un{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e;const t=super.createRenderRoot();return(e=this.renderOptions).renderBefore??(e.renderBefore=t.firstChild),t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=qf(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return Xi}};var fh;pt._$litElement$=!0,pt.finalized=!0,(fh=globalThis.litElementHydrateSupport)==null||fh.call(globalThis,{LitElement:pt});const To=globalThis.litElementPolyfillSupport;To==null||To({LitElement:pt});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.0.3");/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{D:Zf}=Gf,Il=()=>document.createComment(""),ls=(i,t,e)=>{var l;const s=i._$AA.parentNode,o=t===void 0?i._$AB:t._$AA;if(e===void 0){const d=s.insertBefore(Il(),o),f=s.insertBefore(Il(),o);e=new Zf(d,f,i,i.options)}else{const d=e._$AB.nextSibling,f=e._$AM,p=f!==i;if(p){let m;(l=e._$AQ)==null||l.call(e,i),e._$AM=i,e._$AP!==void 0&&(m=i._$AU)!==f._$AU&&e._$AP(m)}if(d!==o||p){let m=e._$AA;for(;m!==d;){const y=m.nextSibling;s.insertBefore(m,o),m=y}}}return e},cn=(i,t,e=i)=>(i._$AI(t,e),i),Kf={},Qf=(i,t=Kf)=>i._$AH=t,Jf=i=>i._$AH,Mo=i=>{var s;(s=i._$AP)==null||s.call(i,!1,!0);let t=i._$AA;const e=i._$AB.nextSibling;for(;t!==e;){const o=t.nextSibling;t.remove(),t=o}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t0={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e0=i=>(...t)=>({_$litDirective$:i,values:t});let i0=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,s){this._$Ct=t,this._$AM=e,this._$Ci=s}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};class n0 extends pt{static get properties(){return{src:{type:String,reflect:!0},text:{type:String},nav:{type:String},useSvg:{type:Boolean},active:{type:Boolean,reflect:!0},path:{type:Array},color:{type:String},border:{type:Boolean}}}constructor(){super(),this.src="",this.text="",this.nav="",this.useSvg=!1,this.path=[],this.active=!1,this.color="black",this.border=!1}connectedCallback(){super.connectedCallback(),this.active=ut+this.nav===Si.location.pathname}firstUpdated(){super.firstUpdated(),this._checkActive()}static get styles(){return yt`
        div{
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          margin: 10px 0 0 0;
        }
        ::slotted(img), ::slotted(svg) {
          width: 34px;
          height: 34px;
        }
        a {
          -webkit-tap-highlight-color: transparent;
        }
        span {
          font-size: 70%;
          opacity: 0.6;
        }
        .active {
          opacity: 1;
        }
        .border {
          border-radius: 50%;
          border: 1px solid transparent;
          outline: 1px solid #afadad;
        }
        .container {
          margin: 8px 0 0 0;
        }
        img {
            width: 34px;
            height: 34px;
            object-fit: cover;
            border-radius: 50%;

        }
      `}render(){return this.useSvg?J`<div>
          <a href=${ut+this.nav}>
            <div class="img-container">
              ${this.active?J`<slot name="activeSvg"></slot>`:J`<slot name="svg"></slot>`}
            </div>
          </a>
          <span>${this.text}</span>
        </div>`:J`
    <div>
      <a href=${ut+this.nav}>
        <div class="img-container">
          <img src=${this.src}>
        </div>
      </a>
      <span>${this.text}</span>
    </div>
    `}_checkActive(){this.active&&(this.shadowRoot.querySelector("span").classList.add("active"),this.border&&(this.shadowRoot.querySelector(".img-container").classList.add("border"),this.shadowRoot.querySelector("div").classList.add("container")))}}customElements.define("photo-button",n0);class s0 extends pt{static get properties(){return{_profilePhoto:{state:!0}}}constructor(){super(),this._profilePhoto=JSON.parse(localStorage.getItem("profileImage"))}connectedCallback(){super.connectedCallback(),this.main=this.getRootNode().querySelector("main"),this.main.addEventListener("storage",this._onLocalStorageChange.bind(this))}disconnectedCallback(){super.disconnectedCallback(),this.main.removeEventListener("storage",this._onLocalStorageChange.bind(this))}async firstUpdated(){super.firstUpdated(),(localStorage.getItem("profileImage")===null||localStorage.getItem("profileImage")===void 0)&&await Mh().then(()=>{this._profilePhoto=JSON.parse(localStorage.getItem("profileImage"))}).catch(t=>{})}static get styles(){return yt`
    :host {
      width: 100%;
    }
    footer {
      display: none;
    }
    @media only screen and (max-width: 480px) and (orientation: portrait){
        footer{
            display: block;
            width: 100%;
            height: 100px;
            border-top: 1px solid #afadad;
        }
        nav {
            display: flex;
            justify-content: space-evenly;
        }
        photo-button {
          width: 70px;
        }
    }
    @media only screen and (max-width: 1024px) and (orientation: landscape) {
        footer{
            display: block;
            width: 100%;
            height: 100px;
            border-top: 1px solid #afadad;
        }
        nav {
            display: flex;
            justify-content: space-evenly;
        }
        photo-button {
          width: 70px;
        }
    }
    `}render(){return J`
          <footer>
            <nav>
                <photo-button
                    text="Home"
                    nav="/home" 
                    ?useSvg=${!0}
                >
                <svg slot="svg">
                  <path d="M32.8595 14.7043C27.6204 9.92894 18.1065 1.03238 18.0123 0.942028L17 0L15.9924 0.942028C15.8965 1.03071 6.37809 9.92392 1.06327 14.7428C0.386364 15.4021 0 16.324 0 17.2677C0 19.115 1.38473 20.6142 3.09091 20.6142H4.63636V30.6535C4.63636 32.5008 6.02109 34 7.72727 34C7.72727 34 9.5 34 10.8182 34H23.1818C23.1818 34 24 34 26.2727 34C28 34 29.3636 32.5008 29.3636 30.6535C29.3636 28.8063 29.3636 20.6142 29.3636 20.6142H30.9091C32.6153 20.6142 34 19.115 34 17.2677C34 16.2671 33.575 15.3251 32.8595 14.7043ZM23.1818 34H10.8182C12.7966 34 13.9091 32.5022 13.9091 30.6535C13.9091 28 13.9091 23.4252 13.9091 23.4252H20.0909C20.0909 23.4252 20.0625 28.6717 20.0625 30.6535C20.0625 32.6354 21.5 34 23.1818 34ZM26.2727 17.2677L26.2758 30.6535C26.2727 30.6535 23.1818 30.6535 23.1818 30.6535V20.6142H10.8182V30.6535H7.72727V17.2677H3.08936C7.36255 13.3992 14.3944 6.84852 17 4.41732C19.6056 6.84852 26.6344 13.3975 30.9091 17.2694L26.2727 17.2677Z"></path>
                </svg>
                <svg slot="activeSvg">
                  <path d="M32.8595 14.7043C27.6204 9.92894 18.1065 1.03238 18.0123 0.942028L17 0L15.9924 0.942028C15.8965 1.03071 6.37809 9.92392 1.06327 14.7428C0.386364 15.4021 0 16.324 0 17.2677C0 19.115 1.38473 20.6142 3.09091 20.6142H4.63636V30.6535C4.63636 32.5008 6.02109 34 7.72727 34C7.72727 34 9.5 34 10.8182 34H23.1818C23.1818 34 24 34 26.2727 34C28 34 29.3636 32.5008 29.3636 30.6535C29.3636 28.8063 29.3636 20.6142 29.3636 20.6142H30.9091C32.6153 20.6142 34 19.115 34 17.2677C34 16.2671 33.575 15.3251 32.8595 14.7043ZM23.1818 34H10.8182C12.7966 34 13.9091 32.5022 13.9091 30.6535C13.9091 28 13.9091 23.4252 13.9091 23.4252H20.0909C20.0909 23.4252 20.0625 28.6717 20.0625 30.6535C20.0625 32.6354 21.5 34 23.1818 34Z"></path>
                </svg>
              </photo-button>
                <photo-button
                    text="Dairy"
                    nav="/dairy"
                    ?useSvg=${!0}
                >
                <svg slot="svg">
                  <path d="M8.5 8.50001C8.5 7.71761 9.13427 7.08334 9.91667 7.08334H24.0833C24.8658 7.08334 25.5 7.71761 25.5 8.50001C25.5 9.28241 24.8658 9.91668 24.0833 9.91668H9.91667C9.13426 9.91668 8.5 9.28241 8.5 8.50001Z"></path>
                  <path d="M8.5 14.1667C8.5 13.3843 9.13427 12.75 9.91667 12.75H24.0833C24.8658 12.75 25.5 13.3843 25.5 14.1667C25.5 14.9491 24.8658 15.5833 24.0833 15.5833H9.91667C9.13426 15.5833 8.5 14.9491 8.5 14.1667Z"></path>
                  <path d="M9.91667 18.4167C9.13427 18.4167 8.5 19.0509 8.5 19.8333C8.5 20.6157 9.13426 21.25 9.91667 21.25H24.0833C24.8658 21.25 25.5 20.6157 25.5 19.8333C25.5 19.0509 24.8658 18.4167 24.0833 18.4167H9.91667Z"></path>
                  <path d="M8.5 25.5C8.5 24.7176 9.13427 24.0833 9.91667 24.0833H15.5833C16.3658 24.0833 17 24.7176 17 25.5C17 26.2824 16.3658 26.9167 15.5833 26.9167H9.91667C9.13427 26.9167 8.5 26.2824 8.5 25.5Z"></path>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M2.83334 5.66666C2.83334 3.31945 4.73614 1.41666 7.08334 1.41666H26.9167C29.264 1.41666 31.1667 3.31945 31.1667 5.66666V28.3333C31.1667 30.6806 29.264 32.5833 26.9167 32.5833H7.08334C4.73614 32.5833 2.83334 30.6806 2.83334 28.3333V5.66666ZM7.08334 4.24999H26.9167C27.6991 4.24999 28.3333 4.88425 28.3333 5.66666V28.3333C28.3333 29.1157 27.6991 29.75 26.9167 29.75H7.08334C6.30095 29.75 5.66668 29.1157 5.66668 28.3333V5.66666C5.66668 4.88426 6.30093 4.24999 7.08334 4.24999Z"></path>
                </svg>   
                <svg slot="activeSvg" style="fill: blue;">
                  <path d="M8.5 8.50001C8.5 7.71761 9.13427 7.08334 9.91667 7.08334H24.0833C24.8658 7.08334 25.5 7.71761 25.5 8.50001C25.5 9.28241 24.8658 9.91668 24.0833 9.91668H9.91667C9.13426 9.91668 8.5 9.28241 8.5 8.50001Z"></path>
                  <path d="M8.5 14.1667C8.5 13.3843 9.13427 12.75 9.91667 12.75H24.0833C24.8658 12.75 25.5 13.3843 25.5 14.1667C25.5 14.9491 24.8658 15.5833 24.0833 15.5833H9.91667C9.13426 15.5833 8.5 14.9491 8.5 14.1667Z"></path>
                  <path d="M9.91667 18.4167C9.13427 18.4167 8.5 19.0509 8.5 19.8333C8.5 20.6157 9.13426 21.25 9.91667 21.25H24.0833C24.8658 21.25 25.5 20.6157 25.5 19.8333C25.5 19.0509 24.8658 18.4167 24.0833 18.4167H9.91667Z"></path>
                  <path d="M8.5 25.5C8.5 24.7176 9.13427 24.0833 9.91667 24.0833H15.5833C16.3658 24.0833 17 24.7176 17 25.5C17 26.2824 16.3658 26.9167 15.5833 26.9167H9.91667C9.13427 26.9167 8.5 26.2824 8.5 25.5Z"></path>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M2.83334 5.66666C2.83334 3.31945 4.73614 1.41666 7.08334 1.41666H26.9167C29.264 1.41666 31.1667 3.31945 31.1667 5.66666V28.3333C31.1667 30.6806 29.264 32.5833 26.9167 32.5833H7.08334C4.73614 32.5833 2.83334 30.6806 2.83334 28.3333V5.66666ZM7.08334 4.24999H26.9167C27.6991 4.24999 28.3333 4.88425 28.3333 5.66666V28.3333C28.3333 29.1157 27.6991 29.75 26.9167 29.75H7.08334C6.30095 29.75 5.66668 29.1157 5.66668 28.3333V5.66666C5.66668 4.88426 6.30093 4.24999 7.08334 4.24999Z"></path>
                </svg>  
                </photo-button>
                <photo-button 
                    text="Add a product"
                    nav="/addproduct" 
                    ?useSvg=${!0}
                >
                <svg slot="svg">
                  <path d="M17 0C7.57273 0 0 7.57273 0 17C0 26.4273 7.57273 34 17 34C26.4273 34 34 26.4273 34 17C34 7.57273 26.4273 0 17 0ZM24.7273 20.0909H20.0909V24.7273C20.0909 26.4273 18.7 27.8182 17 27.8182C15.3 27.8182 13.9091 26.4273 13.9091 24.7273V20.0909H9.27273C7.57273 20.0909 6.18182 18.7 6.18182 17C6.18182 15.3 7.57273 13.9091 9.27273 13.9091H13.9091V9.27273C13.9091 7.57273 15.3 6.18182 17 6.18182C18.7 6.18182 20.0909 7.57273 20.0909 9.27273V13.9091H24.7273C26.4273 13.9091 27.8182 15.3 27.8182 17C27.8182 18.7 26.4273 20.0909 24.7273 20.0909Z"/>
                </svg>
                <svg slot="activeSvg" style="fill: blue;">
                  <path d="M17 0C7.57273 0 0 7.57273 0 17C0 26.4273 7.57273 34 17 34C26.4273 34 34 26.4273 34 17C34 7.57273 26.4273 0 17 0ZM24.7273 20.0909H20.0909V24.7273C20.0909 26.4273 18.7 27.8182 17 27.8182C15.3 27.8182 13.9091 26.4273 13.9091 24.7273V20.0909H9.27273C7.57273 20.0909 6.18182 18.7 6.18182 17C6.18182 15.3 7.57273 13.9091 9.27273 13.9091H13.9091V9.27273C13.9091 7.57273 15.3 6.18182 17 6.18182C18.7 6.18182 20.0909 7.57273 20.0909 9.27273V13.9091H24.7273C26.4273 13.9091 27.8182 15.3 27.8182 17C27.8182 18.7 26.4273 20.0909 24.7273 20.0909Z"/>
                </svg>
                </photo-button>
                ${this._profilePhoto!==null?J`<photo-button 
                    text="Profile"
                    ?border="${!0}"
                    nav="/profile" 
                    ?useSvg=${!1}
                    src="data:image/png;base64,${this._profilePhoto.imageBase64}"
                    ></photo-button>`:J`<photo-button 
                    text="Profile"
                    ?border="${!0}"
                    nav="/profile" 
                    ?useSvg=${!0}
                >
                <svg slot="svg" style="fill: #C6DAE6">
                  <path d="M17 0C7.61016 0 0 7.61016 0 17C0 26.3898 7.61016 34 17 34C26.3898 34 34 26.3898 34 17C34 7.61016 26.3898 0 17 0ZM17 8.5C19.641 8.5 21.7812 10.6409 21.7812 13.2812C21.7812 15.9216 19.643 18.0625 17 18.0625C14.3597 18.0625 12.2188 15.9216 12.2188 13.2812C12.2188 10.6409 14.357 8.5 17 8.5ZM17 29.75C13.4851 29.75 10.2996 28.3203 7.98867 26.012C9.06445 23.2355 11.7207 21.25 14.875 21.25H19.125C22.282 21.25 24.9382 23.2342 26.0113 26.012C23.7004 28.3223 20.5129 29.75 17 29.75Z"></path>
                </svg>
                <svg slot="activeSvg" style="fill: #C6DAE6">
                  <path d="M17 0C7.61016 0 0 7.61016 0 17C0 26.3898 7.61016 34 17 34C26.3898 34 34 26.3898 34 17C34 7.61016 26.3898 0 17 0ZM17 8.5C19.641 8.5 21.7812 10.6409 21.7812 13.2812C21.7812 15.9216 19.643 18.0625 17 18.0625C14.3597 18.0625 12.2188 15.9216 12.2188 13.2812C12.2188 10.6409 14.357 8.5 17 8.5ZM17 29.75C13.4851 29.75 10.2996 28.3203 7.98867 26.012C9.06445 23.2355 11.7207 21.25 14.875 21.25H19.125C22.282 21.25 24.9382 23.2342 26.0113 26.012C23.7004 28.3223 20.5129 29.75 17 29.75Z">
                  </svg>
                </photo-button>`}
            </nav>
          </footer>
  `}_onLocalStorageChange(t){this._profilePhoto=JSON.parse(t.newValue)}}customElements.define("footer-nav",s0);class r0 extends pt{static get properties(){return{title:{type:String},checkicon:{type:Boolean},href:{type:String}}}constructor(){super(),this.title="default",this.checkicon=!0,this.href="/home"}connectedCallback(){super.connectedCallback();const t=new URLSearchParams(Si.location.search).get("mealtype");new URLSearchParams(Si.location.search).get("productname"),this._param=t===null||this.href==="/dairy"?"":"?mealtype="+t}static get styles(){return yt`
    @media only screen and (max-width: 480px) and (orientation: portrait) {
      header {
        position: relative;
      }
      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 50px;
        border-bottom: 1px solid #afadad;
      }
      h1 {
        position: absolute;
        font-size: 18px;
        top: 0;
        left: 50%;
        text-align: center;
        transform: translate(-50%);
        width: 75%;
      }
      .back, .select {
        -webkit-tap-highlight-color: transparent;
        -webkit-user-select: none;
        width: 24px;
        height: 24px;
        padding-bottom: 12px;
        padding-top: 14px;
        padding-right: 4px;
        cursor: pointer;
      }
      button {
        height: 100%;
        background-color: transparent;
        border: 0;
        padding: 0;
      }
      a, button {
        -webkit-tap-highlight-color: transparent;
      }
    }
    @media only screen and (max-width: 1024px) and (orientation: landscape) {
       
    }
    `}render(){return J`
        <header>
          <nav>
          <a href="${ut+this.href+this._param}">
            <svg class="back">
              <path d="M15 5.90938L14.0297 5L6 12.5L14.0297 20L15 19.0953L7.94531 12.5L15 5.90938Z" fill="black"/>
            </svg>
          </a>
            <h1>${this.title}</h1>
            ${this.checkicon?J`<button @click="${this.handleClick}">
              <svg class="select">
                <path d="M21.4144 5.99991L9.00015 18.4141L2.58594 11.9999L4.00015 10.5857L9.00015 15.5857L20.0002 4.58569L21.4144 5.99991Z" fill="black"/>
              </svg>
            </button>`:le}
          </nav>
        </header>
    `}handleClick(t){self.dispatchEvent(new CustomEvent("submitProduct",{bubbles:!0,composed:!0}))}}customElements.define("header-bar",r0);class o0 extends pt{static get properties(){return{nonavigation:{type:Boolean},headerbar:{type:Boolean},headerbartitle:{type:String},checkicon:{type:Boolean},location:{type:String}}}constructor(){super(),this.nonavigation=!1,this.headerbar=!1,this._checkicon=!0,this.headerbartitle="",this.checkicon=!1,this.location=""}static get styles(){return yt`
        /* :host {
            position: fixed;
            height: 100vh;
            width: 100vw;
        } */
         @media only screen and (max-width: 480px) { 
            :host {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
        }
        main {
            height: calc(100% - 101px);
            overflow: auto;
        }
    }
        `}render(){return this.nonavigation?J`<main>
                    <slot></slot>
                </main>`:J`
        ${this.headerbar?J`<header-bar title="${this.headerbartitle}" .checkicon="${this.checkicon}" href="${this.location}"></header-bar>`:Xi}
        <main>
            <slot></slot>
        </main>
        <footer-nav></footer-nav>
        `}}customElements.define("page-div",o0);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Tl=(i,t,e)=>{const s=new Map;for(let o=t;o<=e;o++)s.set(i[o],o);return s},Zr=e0(class extends i0{constructor(i){if(super(i),i.type!==t0.CHILD)throw Error("repeat() can only be used in text expressions")}ht(i,t,e){let s;e===void 0?e=t:t!==void 0&&(s=t);const o=[],l=[];let d=0;for(const f of i)o[d]=s?s(f,d):d,l[d]=e(f,d),d++;return{values:l,keys:o}}render(i,t,e){return this.ht(i,t,e).values}update(i,[t,e,s]){const o=Jf(i),{values:l,keys:d}=this.ht(t,e,s);if(!Array.isArray(o))return this.dt=d,l;const f=this.dt??(this.dt=[]),p=[];let m,y,w=0,A=o.length-1,S=0,M=l.length-1;for(;w<=A&&S<=M;)if(o[w]===null)w++;else if(o[A]===null)A--;else if(f[w]===d[S])p[S]=cn(o[w],l[S]),w++,S++;else if(f[A]===d[M])p[M]=cn(o[A],l[M]),A--,M--;else if(f[w]===d[M])p[M]=cn(o[w],l[M]),ls(i,p[M+1],o[w]),w++,M--;else if(f[A]===d[S])p[S]=cn(o[A],l[S]),ls(i,o[w],o[A]),A--,S++;else if(m===void 0&&(m=Tl(d,S,M),y=Tl(f,w,A)),m.has(f[w]))if(m.has(f[A])){const D=y.get(d[S]),k=D!==void 0?o[D]:null;if(k===null){const R=ls(i,o[w]);cn(R,l[S]),p[S]=R}else p[S]=cn(k,l[S]),ls(i,o[w],k),o[D]=null;S++}else Mo(o[A]),A--;else Mo(o[w]),w++;for(;S<=M;){const D=ls(i,p[M+1]);cn(D,l[S]),p[S++]=D}for(;w<=A;){const D=o[w++];D!==null&&Mo(D)}return this.dt=d,Qf(i,p),Xi}});class a0 extends pt{static get properties(){return{_notifications:{type:Array,state:!0},_counter:{type:Number,state:!0}}}constructor(){super(),this._notifications=[],this._counter=1,this._idCounter=1}firstUpdated(){super.firstUpdated(),this._container=this.shadowRoot.querySelector(".container")}updated(){super.updated(),this._notifications.length===0&&(this._container.style="display: none")}static get styles(){return yt`
         @media only screen and (max-width: 480px) {
            .container {
                display: none;
                flex-direction: column-reverse;
                position: relative;
                align-items: flex-end;
                max-height: 100%;
                overflow: hidden;
            }
            .notification {
                overflow: hidden;
                position: relative;
                display: flex;
                margin: 10px 10px 10px 0;
                flex-direction: column;
                align-items: center;
                text-align: center;
                justify-content: center;
                width: 200px;
                height: 65px;
                animation: slideIn 0.5s linear forwards;
                box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
            }
            span {
                text-align: center;

            }
            .timer {
                position: absolute;
                width: 100%;
                height: 100%;
                background: grey;
                opacity: 0.5;
                animation: timer 4s linear forwards;
                transform: translateX(-100%);
            }
            .remove {
                animation: fadeOut 0.5s linear;
            }

            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                }
                to {
                    transform: translateX(0);
                }
            }
            @keyframes fadeOut {
                from {
                    opacity: 1;
                }
                to {
                    opacity: 0;
                }
            }
            @keyframes timer {
                100% {
                    transform: translateX(0);
                }
            }
        }
        `}render(){return J`
        <button @click="${this.handleClick}">aaaa</button>
        <div class="container">
            ${Zr(this._notifications,t=>t.id,t=>t.html)}
            <!-- ${this._notifications} -->
        </div>
        <!-- <button @click="${this._handleNotification}">Notification</button> -->
        `}handleClick(t){this._container.style="display: flex",this._notifications.length>=4?(this._notifications.splice(-1),this._notifications=[...this._notifications,this._makeNotification()]):this._notifications=[...this._notifications,this._makeNotification()],setTimeout(()=>{this._notifications=this._notifications.filter(e=>e.id!==this._idCounter),this._idCounter++},4e3)}_makeNotification(t){return{id:this._counter++,html:J`
            <div class="notification">
                <div class="timer"></div>
                <div>
                    <span>Product added</span>
                    <div class="loading-bar"></div>
                </div>
            </div>`}}}customElements.define("notification-bar",a0);class l0 extends pt{static get styles(){return yt`
        h1 {
            text-align: center;
        }
        `}render(){return J`
        <page-div>
            <notification-bar></notification-bar>
            <!-- <h1>Home</h1> -->

        </page-div>`}}customElements.define("home-view",l0);class c0 extends pt{static get properties(){return{value:{type:String,reflect:!0},name:{type:String,reflect:!0},required:{type:Boolean,reflect:!0},label:{type:String},pattern:{type:String},min:{type:String},max:{type:String},type:{type:String},validity:{type:Object},errormessage:{type:String},ariaLabel:{type:String}}}static get formAssociated(){return!0}constructor(){super(),this.value="",this.name="",this.label="",this.pattern=".{1,}",this.min="",this.max="",this.type="text",this.ariaLabel="",this.validity={},this.errormessage="Field is required",this.internals=this.attachInternals()}connectedCallback(){super.connectedCallback(),this.setAttribute("tabindex","0"),this.addEventListener("focus",this.setFocus.bind(this)),this.internals.setFormValue(this.value),this.required&&this.value===""&&this.internals.setValidity({customError:!0},this.errormessage)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("focus",this)}setFocus(){this.shadowRoot.querySelector("input").focus()}updated(){this.internals.setFormValue(this.value),this.setValidity(this.shadowRoot.querySelector("input"))}formResetCallback(){this.value="",this.internals.setFormValue(this.value)}static get styles(){return yt`
    :host {
      width: 100%;
    }
      .background-div{
        display: flex;
        position: relative;
        padding: 8px;
        margin: 9px 0;
        border-radius: var(--input-field-border-radius, 30px);
        width: var(--input-width);
        /* background-color: var(--input-field-background-color, #e4dfdf); */
        border: #b1afaf solid 2px;
      }
      label {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        color: var(--input-field-label-color, #545454);
        font-weight: normal;
        transition: .4s ease;
        user-select: none;
        cursor: text;
      }
      label, input {
        display: flex;
        align-items: center;
        margin-left: 24px;
        margin-right: 6px;
      }
      input {
        position: relative;
        top: 0px;
        border: none;
        outline: none;
        padding: 0;
        background-color: var(--input-field-background-color, inherit);
        line-height: 2em;
        width: calc(100% - 48px);
      }
      

      input[type="date"]{
        font-size: 16px;
      }

      input:focus + label,
      :host(:not([value=""])) label {
        top: -1.5px;
        background-color: white;
        padding: 0 4px;
        margin-left: 20px;
        font-size: 14px;
      }
      
      input:-webkit-autofill,
      input:-webkit-autofill:hover, 
      input:-webkit-autofill:focus, 
      input:-webkit-autofill:active{
        box-shadow: 0 0 0 30px var(--box-shadow-color, white) inset;
      
      }
      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        -webkit-appearance: none;
      }
      .error-message {
      margin-left: 12px;
      margin-right: 12px;
      color: red;
      visibility: hidden;
     }
     .invalid-input {
      border: 2px solid red;
     }
     #invalid-input {
      animation: shake 0.2s ease-in-out 0s 2;
     }

     @keyframes shake {
        0% {
          margin-left: 0rem;
          margin-right: 0;
        }
        25% {
          margin-left: 0.5rem;
          margin-right: -0.5rem;
        }
        75% {
          margin-left: -0.5rem;
          margin-right: 0.5rem
        }
        100% {
          margin-left: 0rem;
          margin-right: 0;
        }
      }

      `}render(){return J`
    <div class="background-div">
        <input 
        .type=${this.type}
        name=${this.name} 
        id=${this.name} 
        .value="${this.value}" 
        pattern="${this.pattern}"
        min="${this.min}" 
        max="${this.max}"
        aria-label=${this.ariaLabel}
        @input="${this.updateValue}" 
        ?required="${this.required}"
        />

        <label for="${this.name}">${this.label}</label>
    </div>
    <span class="error-message">${this.errormessage}</span>`}updateValue(t){this.shadowRoot.querySelector(".background-div").classList.remove("invalid-input"),this.shadowRoot.querySelector(".error-message").style="visibility: none;",this.value=t.target.value,this.internals.setFormValue(this.value),this.setValidity(t.target),this.dispatchEvent(new CustomEvent("input-changed",{[t.target.name]:t.target.value}))}setValidity(t){t.checkValidity()?this.internals.setValidity({}):this.internals.setValidity({customError:!0},this.errormessage)}checkValidation(){return this.shadowRoot.querySelector("input").checkValidity()?!0:(this.setError(),!1)}setError(){const t=this.shadowRoot.querySelector(".background-div"),e=this.shadowRoot.querySelector(".error-message");t.classList.add("invalid-input"),t.id="invalid-input",e.style="visibility: visible;",setTimeout(()=>{t.id=""},500)}}customElements.define("input-field",c0);class h0 extends pt{static get properties(){return{value:{type:String},disabled:{type:Boolean,Reflect:!0},loading:{type:Boolean,Reflect:!0}}}constructor(){super(),this.value="Button",this.disabled=!1,this.loading=!1}static get styles(){return yt`
        :host([disabled]) button{
            background-color: #cccccc;
            cursor: default;
        }
        button {
        position: relative;
        justify-content: var(--button-div-justify-content, center);
        align-items: var(--button-div-align-items, center);
        border-radius: var(--border-raduis, 40px);
        color: var(--button-div-color, #000000);
        background-color: var(--button-background-color, #4f63f7);
        font-size: var(--button-div-font-size, 16px);
        font-weight: var(--button-div-font-weight, normal);
        transition: var(--button-div-transition, .4s ease-in);
        display: flex;
        padding: var(--button-div-padding, 10px 0);
        width: var(--button-div-width, 100%);
        border: none;
        user-select: none;
        cursor: pointer;
      }
      .loading::after {
        position: absolute;
        content: "";
        width: var(--loading-width, 16px);
        height: var(--loading-height, 16px);
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        margin: var(--loading-margin, auto auto auto 20px);
        border: 4px solid transparent;
        border-radius: 50%;
        border-top-color: #ffffff;
        animation: button-loading 1s ease infinite;
      }
      :host([disabled]) .loading[disabled] {
        background-color: #3648ca;
      }
      @keyframes button-loading{
        from {
          transform: rotate(0turn)
        }
        to {
          transform: rotate(1turn)
        }
      }
      @media (hover: hover) {
        button:hover {
        background-color: var(--button-background-color, #3648ca);
        }
      }`}render(){return this.loading?J`
    <button type="button" ?disabled=${this.disabled} class="loading">
      ${this.value}
    </button>
    
    `:J`
    <button type="button" ?disabled=${this.disabled}>
        ${this.value}
    </button>
    `}}customElements.define("button-div",h0);class d0 extends pt{static get properties(){return{message:{type:String}}}constructor(){super(),this.message=""}static get styles(){return yt`
        span {
            position: relative;
            left: var(--left, .8rem);
            padding: 0 2px;
            font-size: 16px;
            color: #EB0000;
        }
        `}render(){return J`
            <span>${this.message}</span>
        `}}customElements.define("error-message",d0);class u0 extends pt{static get properties(){return{loginData:{type:Object},_disabled:{type:Boolean,state:!0},_errorMessage:{type:String,state:!0},_loadingEnabled:{type:Boolean,state:!0}}}constructor(){super(),this.loginData={},this._disabled=!0,this._errorMessage="",this._loadingEnabled=!1}static get styles(){return yt`
      h1{
        margin: 0 0 20px 0;
        text-align: center;
      }
      .login-div {
        display: flex;
        flex-direction: column;
        margin: 200px auto auto auto;
        background-color: white;
        width: 360px;
        /* padding: 30px 50px 50px 50px; */
        /* border-radius: 10px; */
      }
      .other-links {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      hr {
        margin: 100px 0 0 0;
      }
      a {
        font-weight: bold;
        opacity: 0.85;
        text-decoration: none;
        color: black;
      }
      a:link, a:visited {
        color: black;
      }
      
      @media only screen and (max-width: 480px) {
        h1 {
            font-size: 24px;
            margin-bottom: 0;
        }
      }`}render(){return J`
      <page-div ?nonavigation=${!0}>
        <div class="main-div">
          <div class="login-div" @keyup=${this.enterKeyPressed}>
            <h1>Login</h1>
            <input-field type="email" name="email" @input-changed="${this.listenerInput}" class="email-input" label="Email"></input-field>
            <input-field type="password" name="password" @input-changed="${this.listenerInput}" class="pass-input" label="Password"></input-field>
            <error-message message="${this._errorMessage}"></error-message>
            <button-div @click="${this._login}" value="Login" ?disabled=${this._disabled} ?loading=${this._loadingEnabled}></button-div>
          </div>
          <div class="other-links">
            <hr>
            <a href=${ut+"/register"}>or register here</a>
          </div>
        </div>
      </page-div> 
  `}enterKeyPressed(t){(t.key==="Enter"||t.keyCode===13)&&this._login()}_login(){this.inputFieldsAreEmpty()&&(this._loadingEnabled=!0,this._disabled=!0,Th(this.loginData).then(t=>{re.go(`${ut}/home`)}).catch(t=>{this._errorMessage=t.message}).then(()=>{this._loadingEnabled=!1,this._disabled=!1}))}listenerInput(t){this.loginData[t.target.name]=t.target.value,this._errorMessage="",this._disabled=!this.inputFieldsAreEmpty()}inputFieldsAreEmpty(){return this.shadowRoot.querySelector(".email-input").value!==""&&this.shadowRoot.querySelector(".pass-input").value!==""}}customElements.define("login-div",u0);class f0 extends pt{static get properties(){return{data:{type:Object}}}constructor(){super(),this.data={}}static get styles(){return yt`
    :host {
      width: 100%;
    }
    form {
      display: flex;
      flex-direction: column;
    }
    h1 {
      text-align: center;
    }
    .button-container {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      margin: 10px 0 0 0;
    }
    button-div {
      width: 120px;
    }

    @media only screen and (max-width: 480px) {
            h1 {
                font-size: 24px;
            }
            button-div {
              width: 150px;
            }
            .button-container {
              position: fixed;
              display: flex;
              justify-content: space-between;
              margin: 0;
              bottom: 0;
              width: calc(100% - 54px);
              padding: 40px 0;              
            }
    }
    `}render(){return J`
          <h1>Register</h1>
          <form @submit=${this.submitForm} @keyup=${this.enterKeyPressed} novalidate>
            <input-field type="text" name="username" label="Username" pattern=".{1,}" required></input-field>
            <input-field type="email" name="email" label="Email" pattern=".{1,}" required></input-field>
            <input-field type="password" name="password" label="Password" pattern=".{1,}" required></input-field>
            <input-field type="password" name="confirm_password" label="Confirm password" pattern=".{1,}" errormessage="Passwords do not match" required></input-field>
            <div class="button-container">
              <button-div value="Back" @click=${this.handleBack}></button-div>
              <button-div value="Register" @click=${this.handleSubmit}></button-div>
            </div>
          </form>
  `}submitForm(t){t.preventDefault();const e=t.target;if(e.checkValidity()){const s=new FormData(e);this.data=Object.fromEntries(s.entries()),this.data.password===this.data.confirm_password?this.dispatchEvent(new CustomEvent("submit",{detail:this.data})):this.shadowRoot.querySelector("input-field[name='confirm_password']").setError()}else{let s=!1;Array.from(e.elements).map(o=>{o.checkValidation(),!s&&!o.checkValidation()&&(s=!0,o.focus())})}}handleSubmit(t){this.shadowRoot.querySelector("form").requestSubmit()}handleBack(t){this.dispatchEvent(new Event("back"))}enterKeyPressed(t){(t.key==="Enter"||t.keyCode===13)&&this.handleSubmit()}}customElements.define("register-form",f0);class g0 extends pt{static get properties(){return{options:{type:Array},value:{type:String},name:{type:String},required:{type:Boolean,reflect:!0},label:{type:String},validity:{type:Object},errormessage:{type:String},ariaLabel:{type:String}}}static get formAssociated(){return!0}constructor(){super(),this.name="",this.options=[],this.value="",this.label="",this.ariaLabel="",this.validity={},this.errormessage="Field is required",this.internals=this.attachInternals()}connectedCallback(){super.connectedCallback(),this.setAttribute("tabindex","0"),this.addEventListener("focus",this.setFocus.bind(this)),this.internals.setFormValue(this.value),this.required&&this.value===""&&this.internals.setValidity({customError:!0},this.errormessage)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("focus",this)}setFocus(){this.shadowRoot.querySelector("input").focus()}formResetCallback(){this.value="",this.internals.setFormValue(this.value)}static get styles(){return yt`
        
        .background-div{
            display: flex;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        label {
          height: 6px;
          font-size: 20px;
          display: inline-flex;
          text-align: center;
          align-items: center;
          justify-content: center;
          margin-right: 30px;
          margin-left: -9px;
        }
        .radio-span {
          display: flex;
          align-items: center;
          justify-content: center;
          text-align: center;
          cursor: pointer;
          padding: 9px;
          border-radius: 50%;
        }
        .radio-span:hover {
          background-color: rgb(0 76 255 / 8%);

        }
        input {
            height: 20px;
            width: 20px;
            margin: 0;
            cursor: pointer;
        }
        .error-message {
        /* margin-left: 17px; */
        color: red;
        visibility: hidden;
        }
     `}render(){return J`
    <div class="background-div">

        ${this.options.map(t=>J`<label>
                <span class="radio-span">
                  <input 
                      type="radio"
                      name=${this.name} 
                      id=${this.name} 
                      .value="${t.value}" 
                      aria-label=${this.ariaLabel}
                      @input="${this.updateValue}" 
                      ?required="${this.required}"
                  />
                </span>
                ${t.label}
                </label>`)}
    </div>
    <span class="error-message">${this.errormessage}</span>
    `}updateValue(t){this.shadowRoot.querySelector(".error-message").style="visibility: hidden;",this.value=t.target.value,this.internals.setFormValue(this.value),this.setValidity(t.target),this.dispatchEvent(new CustomEvent("input-changed",{[t.target.name]:t.target.value}))}setValidity(t){t.checkValidity()?this.internals.setValidity({}):(this.validity=t.validity,this.internals.setValidity({customError:!0},this.errormessage))}checkValidation(){const t=this.shadowRoot.querySelector("input"),e=this.shadowRoot.querySelector(".error-message");t.checkValidity()||(e.style="visibility: visible;")}}customElements.define("radio-picker",g0);class p0 extends pt{static get properties(){return{value:{type:String,reflect:!0},name:{type:String,reflect:!0},required:{type:Boolean,reflect:!0},text:{type:String},label:{type:String},pattern:{type:String},min:{type:String},max:{type:String},validity:{type:Object},errormessage:{type:String},ariaLabel:{type:String},_divs:{type:Array,state:!0},_navCalendar:{type:Number,state:!0},_year:{state:!0},_direction:{type:String,state:!0}}}static get formAssociated(){return!0}constructor(){super(),this.value="",this.text="default text",this.name="",this.label="",this.pattern="(0[1-9]|1[0-9]|2[0-9]|3[01])-(0[1-9]|1[012])-[0-9]{4}",this.min=10,this.max=10,this.ariaLabel="",this.validity={},this.errormessage="Field is required",this.internals=this.attachInternals(),this._pickerStatus=!1,this._yearStatus=!1,this._navCalendar=0+new Date().getMonth(),this._divs=[],this._monthAndYear="",this._year=new Date().getFullYear(),this._month="",this._yearDivs=[],this._direction="",this._counter=0,this._id=""}connectedCallback(){super.connectedCallback(),this.setAttribute("tabindex","0"),this.addEventListener("focus",this.setFocus.bind(this)),this._makeYears(),this.internals.setFormValue(this.value),this.required&&this.value===""&&this.internals.setValidity({customError:!0},this.errormessage)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("focus",this)}setFocus(){this.shadowRoot.querySelector("input").focus()}formResetCallback(){this.value="",this.internals.setFormValue(this.value)}updated(){this.internals.setFormValue(this.value),this.setValidity(this.shadowRoot.querySelector("input"))}static get styles(){return yt`
      h1{
        font-size: var(--date-picker-h1-font-size, 18px);
        margin-left: 12px;
      }
      .background-div{
        position: relative;
        padding: 8px;
        margin: 9px 0;
        border-radius: var(--input-field-border-radius, 30px);
        width: var(--date-picker-width);
        /* background-color: var(--input-field-background-color, #e4dfdf); */
        border: #b1afaf solid 2px;
      }
      .invalid-input {
      border: 2px solid red;
      width: 340px;
     }
     #invalid-input {
      animation: shake 0.2s ease-in-out 0s 2;
     }
      label {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        color: var(--input-field-label-color, #545454);
        font-weight: normal;
        transition: .4s ease;
        user-select: none;
        cursor: text;
      }
      label, input {
        display: flex;
        align-items: center;
        margin-left: 24px;
        margin-right: 6px;
      }
      input {
        position: relative;
        top: 0px;
        border: none;
        outline: none;
        padding: 0;
        background-color: var(--input-field-background-color, inherit);
        line-height: 2em;
        width: 80%;
      }
      input:focus + label,
      :host(:not([value=""])) label {
        top: -1.5px;
        background-color: white;
        padding: 0 4px;
        margin-left: 20px;
        font-size: 14px;
      }
      
      input:-webkit-autofill,
      input:-webkit-autofill:hover, 
      input:-webkit-autofill:focus, 
      input:-webkit-autofill:active{
        box-shadow: 0 0 0 30px var(--box-shadow-color, white) inset;
      
      }
      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        -webkit-appearance: none;
      }
      .input-datepicker {
        display: flex;
        align-items: center;
      }
      .date-picker-icon {
        /* position: relative; */
        /* width: 2px; */
        display: flex;
        align-items: center;
        max-height: 2em;
        height: 0.01em;
      }
      button {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        padding: 0;
        background-color: transparent;
        text-align: center;
        border: 0;
        border-radius: 50%;
        cursor: pointer;
        color: black;
        outline: 0;
      }
      button:hover {
        background-color: rgba(0, 0, 0, 0.04);
      }
      button svg{
        height: 24px;
        width: 24px;
      }
      .picker {
        display: none;
        position: absolute;
        z-index: 1;
        /* inset: auto auto 0px 0px; */
        height: 340px;
        width: 320px;
        border-radius: 5px;
        background-color: white;
        box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 5px -3px, rgba(0, 0, 0, 0.14) 0px 8px 10px 1px, rgba(0, 0, 0, 0.12) 0px 3px 14px 2px;
      }
      .container {
        border-radius: inherit;
        height: 100%;
        width: 100%;
        display: flex;
        flex-direction: column;
      }
      .date-picker-icon button {
        padding: 5px;
      }
      .header-picker {
        display: flex;
        min-height: 40px;
        max-height: 40px;
        /* justify-content: space-evenly; */
        align-items: center;
        padding: 0 12px 0 12px;
        margin: 16px 0 8px 0;
        /* background-color: red; */
        /* border-bottom: 2px solid; */
      }
      svg {
        fill: currentColor;
      }
      .header-left {
        display: flex;
        align-items: center;
        margin-right: auto;
      }
      .header-right {
        display: flex;
      }
      .days-row {
        display: flex;
        justify-content: center;
        text-align: center;
        align-items: center;
        flex-wrap: wrap;
      }
      .days-row span {
        display: flex;
        text-align: center;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        opacity: 0.6;
        font-size: 0.75rem;
      }
      .days-picker {
        /* background-color: red; */
        height: 80px;
        width: 80px;
      }
      .month-year {
        font-size: 20px;
        margin-right: 6px;
      }
      .arrow-down-button {
        padding: 5px;
      }
     .header-right button {
      padding: 5px;
     }
     .space {
      height: 34px;
      width: 12px;
     }
     .days-picker-row {
      display: flex;
      justify-content: center;
      text-align: center;
      align-items: center;
      flex-wrap: wrap;
     }
     .day, .placeholder {
      width: 40px;
      height: 40px;
     }
     .body-picker {
      max-height: 276px;
     }
     .year-picker {
      display: flex;
      flex-wrap: wrap;
      overflow-y: auto;
      height: 100%;
      max-height: 100%;
      justify-content: center;
     }
     .year-picker {
      width: 100%;
      flex-wrap: wrap;
     }
     .year-button {
      /* max-width: 300px; */
      display: flex;
      flex-basis: 20%;

      padding: 5px 10px;
      margin: 0 4px;
      font-size: 20px;
      border-radius: 20px;
     }
     .year-button:disabled {
      color: grey;
     }
     .error-message {
      margin-left: 12px;
      color: red;
      visibility: hidden;
     }
     @keyframes shake {
      0% {
        margin-left: 0rem;
      }
      25% {
        margin-left: 0.5rem;
      }
      75% {
        margin-left: -0.5rem;
      }
      100% {
        margin-left: 0rem;
      }
    }

    .days {
      position: relative;
      display: flex;
      justify-content: center;
      /* align-items: center; */
      height: 240px;
      width: 320px;
      
      overflow: hidden;
    }
    .days-number-row {
      position: absolute;
      top: 0;
      right: 0;
      left: 0;
      transition: transform 350ms cubic-bezier(0.35, 0.8, 0.4, 1) 0ms;
    }
    .left {
      left: -100%;
    }
    .right {
      right: -100%;
    }
    .to-left {
      left: 100%;
      right: -100%;
      transform: translate(-100%);
    }
    .to-right {
      left: -100%;
      right: 100%;
      transform: translate(100%)
    }
    .selected {
      border: 2px solid grey;
    }
    .selected-year {
      border: 2px solid grey;
    }
  
      `}render(){return J`
    <h1>${this.text}</h1>
    <div class="background-div">
        <div class="input-datepicker">
          <input 
          type="tel"
          name=${this.name} 
          id=${this.name} 
          .value="${this.value}" 
          pattern=${this.pattern}
          minlength="${this.min}" 
          maxlength="${this.max}"
          aria-label=${this.ariaLabel}
          @input="${this.updateValue}"
          ?required="${this.required}"
          />
          <label for="${this.name}">${this.label}</label>
          <div class="date-picker-icon">
            <button @click="${this.handleDatepicker}">
              <svg>
                <path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z" />
              </svg>
            </button>
        </div>
      </div>
    </div>
    <span class="error-message">${this.errormessage}</span>

    <div class="picker">
      <div tabindex=0></div>
        <div class="container">
          <div class="header-picker">
            <div class="header-left">
              <span class="month-year">${this._monthAndYear}</span>
              <button class="arrow-down-button" @click=${this.changeYear}>
                <svg>
                  <path d="M7 10l5 5 5-5z" />
                </svg>
              </button>
            </div>
            <div class="header-right">
            <button @click=${this.goMonthBack}>
                <svg>
                  <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z" />
                </svg>
              </button>
              <div class="space"></div>
              <button @click=${this.goToNextMonth}>
                <svg>
                  <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z" />
                </svg>
              </button>
            </div>
          </div>
          <div class="body-picker">
            <div class="year-picker" style="display: none">
              ${this._yearDivs}
            </div>
            <div class="body-container">
              <div class="days-row">
                <span>M</span>
                <span>T</span>
                <span>W</span>
                <span>T</span>
                <span>F</span>
                <span>S</span>
                <span>S</span>
              </div>
              <div class="days">
              ${Zr(this._divs,t=>t.id,t=>{if(t.id===this._id)return t.value})}
              </div>
            </div>
          </div>
        </div>
    </div>
    `}updateValue(t){if(this.shadowRoot.querySelector(".background-div").classList.remove("invalid-input"),this.shadowRoot.querySelector(".error-message").style="visibility: none;",isNaN(t.target.value.charAt(t.target.value.lenght-1))){t.target.value=this.value;return}this.value=t.target.value,(this.value.length===2||this.value.length===5)&&(this.value+="-"),this.internals.setFormValue(this.value),this.dispatchEvent(new CustomEvent("input-changed",{[t.target.name]:this.value}))}setValidity(t){t.checkValidity()?this.internals.setValidity({}):this.internals.setValidity({customError:!0},this.errormessage)}checkValidation(){const t=this.shadowRoot.querySelector("input"),e=this.shadowRoot.querySelector(".background-div"),s=this.shadowRoot.querySelector(".error-message");t.checkValidity()||(e.classList.add("invalid-input"),e.id="invalid-input",s.style="visibility: visible;",setTimeout(()=>{e.id=""},500))}handleDatepicker(){this._pickerStatus=!this._pickerStatus,this.shadowRoot.querySelector(".picker").style.display=this._pickerStatus?"block":"none",this._pickerStatus&&this._makeDateDivs()}_makeDateDivs(){const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=new Date(`${this._year}`);e.setMonth(this._navCalendar),(this._navCalendar==-1||this._navCalendar===12)&&(this._navCalendar=e.getMonth(),this._year=e.getFullYear(),e.setFullYear(this._year));let s=[],o=[];e.getDate(),this._month=e.getMonth();const l=e.getFullYear(),d=new Date(l,this._month,1),f=new Date(l,this._month+1,0).getDate(),p=d.toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"numeric",day:"numeric"});let m=t.indexOf(p.split(", ")[0]);this._monthAndYear=`${e.toLocaleDateString("en-us",{month:"long"})} ${l}`,m=m===0?7:m,this._id=this._month+1+"-"+this._year;let y=!1;if(this._divs.map(w=>{w.id===this._id&&(y=!0)}),!y){for(let w=1;w<=m+f;w++){if(w>=m?s=[...s,J`<button class="day" @click=${this.clickDay}>${w-m+1}</button>`]:s=[...s,J`<div class="placeholder"></div>`],w-m+1===f)for(let A=0;s.length<7;A++)s=[...s,J`<div class="placeholder"></div>`];s.length%7===0&&(o=[...o,J`<div class="days-picker-row">${s}</div>`],s=[])}this._divs=[...this._divs,{id:this._id,value:J`
                      <div class="days-number-row">
                        ${o}
                      </div>
                      `}]}}goMonthBack(){this._navCalendar--,this._makeDateDivs()}goToNextMonth(){this._navCalendar++,this._makeDateDivs()}changeYear(){this._yearStatus=!this._yearStatus,this.shadowRoot.querySelector(".arrow-down-button").style=this._yearStatus?"transform: rotateX(180deg)":"transform: rotateX(0eg)",this._yearStatus?(this.shadowRoot.querySelector(".body-container").style.display="none",this.shadowRoot.querySelector(".year-picker").style.display="flex"):(this.shadowRoot.querySelector(".body-container").style.display="block",this.shadowRoot.querySelector(".year-picker").style.display="none",this._makeDateDivs())}_makeYears(){for(let t=1900;t<=2099;t++)this._yearDivs=[...this._yearDivs,J`<button 
                            class="year-button${this._year===t?" selected-year":""}" 
                            ?disabled=${!(new Date().getFullYear()>=t)} 
                            @click=${this.clickOnYear}>${t}</button>
      `]}clickOnYear(t){this._year=Number(t.target.textContent),this.shadowRoot.querySelector(".selected-year").classList.remove("selected-year"),t.target.classList.add("selected-year"),this.changeYear()}async clickDay(t){this._removeSelectedDay(this.shadowRoot.querySelectorAll(".day")),t.target.classList.add("selected"),this._divs.map(s=>{s.id===this._id&&(s.value=this.shadowRoot.querySelector(".days-number-row"),this._divs=[s])});let e=String(this._month+1);this.value=`${t.target.textContent.length===1?0+t.target.textContent:t.target.textContent}-${e.length===1?0+e:e}-${this._year}`,this.shadowRoot.querySelector(".background-div").classList.remove("invalid-input"),this.shadowRoot.querySelector(".error-message").style="visibility: none;",this.handleDatepicker()}_removeSelectedDay(t){for(let e of t)e.classList.contains("selected")&&e.classList.remove("selected")}}customElements.define("date-picker",p0);class m0 extends pt{static get properties(){return{data:{type:Object}}}constructor(){super(),this.data={}}static get styles(){return yt`
    :host {
      width: 100%;
    }
    form {
      display: flex;
      flex-direction: column;
    }
    h1 {
      text-align: center;
    }
    .button-container {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      margin: 10px 0 0 0;
    }
    button-div {
      width: 120px;
    }
    .radio-container {
      padding-left: 12px;
    }

    @media only screen and (max-width: 480px) {
            h1 {
                font-size: 20px;
            }
            button-div {
              width: 150px;
            }
            .button-container {
              position: fixed;
              display: flex;
              justify-content: space-between;
              margin: 0;
              bottom: 0;
              width: calc(100% - 54px);
              padding: 40px 0;               
            }
    }
    `}render(){return J`
          <!-- <h1>Personal info</h1> -->
          <form @submit=${this.submitForm} @keyup=${this.enterKeyPressed} novalidate>
            <date-picker name="birthday" label="dd-mm-yyyy" text="When is your birthday" errormessage=${"Invalid birthday date"} required></date-picker>
            <div class="radio-container">
              <radio-picker name="sex" .options=${[{label:"Male",value:"MALE"},{label:"Female",value:"FEMALE"}]} required></radio-picker>
            </div>
            <div class="button-container">
              <button-div value="Back" @click=${this.handleBack}></button-div>
              <button-div value="Next" @click=${this.handleSubmit}></button-div>
            </div>
          </form>
  `}submitForm(t){t.preventDefault();const e=t.target;if(e.checkValidity()){const s=new FormData(e);this.data=Object.fromEntries(s.entries()),this.dispatchEvent(new CustomEvent("next",{detail:this.data}))}else{let s=!1;Array.from(e.elements).map(o=>{o.checkValidation(),!s&&!o.checkValidation()&&(s=!0,o.focus())})}}handleSubmit(t){this.shadowRoot.querySelector("form").requestSubmit()}handleBack(t){this.dispatchEvent(new Event("back"))}enterKeyPressed(t){(t.key==="Enter"||t.keyCode===13)&&this.handleSubmit()}}customElements.define("userinfo-form",m0);class x0 extends pt{static get properties(){return{value:{type:String,reflect:!0},name:{type:String,reflect:!0},required:{type:Boolean,reflect:!0},label:{type:String},pattern:{type:String},min:{type:String},max:{type:String},type:{type:String},validity:{type:Object},abbreviateType:{type:String},errormessage:{type:String},ariaLabel:{type:String}}}static get formAssociated(){return!0}constructor(){super(),this.value="",this.name="",this.label="",this.pattern="",this.min="",this.max="",this.type="text",this.ariaLabel="",this.validity={},this.abbreviateType="",this.errormessage="Field is required",this.internals=this.attachInternals()}connectedCallback(){super.connectedCallback(),this.setAttribute("tabindex","0"),this.addEventListener("focus",this.setFocus.bind(this)),this.internals.setFormValue(this.value),this.required&&this.value===""&&this.internals.setValidity({customError:!0},this.errormessage)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("focus",this)}setFocus(){this.shadowRoot.querySelector("input").focus()}formResetCallback(){this.value="",this.internals.setFormValue(this.value)}static get styles(){return yt`
      .background-div{
        position: relative;
        display: flex;
        padding: 8px;
        margin: 9px 0;
        border-radius: var(--input-field-border-radius, 30px);
        width: var(--input-width);
        /* background-color: var(--input-field-background-color, #e4dfdf); */
        border: #b1afaf solid 2px;
      }
      label {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        color: var(--input-field-label-color, #545454);
        font-weight: normal;
        transition: .4s ease;
        user-select: none;
        cursor: text;
      }
      label, input {
        display: flex;
        align-items: center;
        margin-left: 24px;
        margin-right: 6px;
      }
      input {
        position: relative;
        top: 0px;
        border: none;
        outline: none;
        padding: 0;
        background-color: var(--input-field-background-color, inherit);
        line-height: 2em;
        width: calc(100% - 48px);
      }
      .abbreviate {
        display: flex;
        margin-left: 20px;
        position: relative;
        top: 0px;
        left: -20px;
        justify-content: center;
        align-self: center;
      }

      input:focus + label,
      :host(:not([value=""])) label {
        top: -1.5px;
        background-color: white;
        padding: 0 4px;
        margin-left: 20px;
        font-size: 14px;
      }
      
      input:-webkit-autofill,
      input:-webkit-autofill:hover, 
      input:-webkit-autofill:focus, 
      input:-webkit-autofill:active{
        box-shadow: 0 0 0 30px var(--box-shadow-color, white) inset;
      
      }
      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        -webkit-appearance: none;
      }
      .error-message {
        margin-left: 12px;
        margin-right: 12px;
        color: red;
        visibility: hidden;
     }
     .invalid-input {
      border: 2px solid red;
     }
     #invalid-input {
      animation: shake 0.2s ease-in-out 0s 2;
     }

     @keyframes shake {
        0% {
          margin-left: 0rem;
          margin-right: 0;
        }
        25% {
          margin-left: 0.5rem;
          margin-right: -0.5rem;
        }
        75% {
          margin-left: -0.5rem;
          margin-right: 0.5rem
        }
        100% {
          margin-left: 0rem;
          margin-right: 0;
        }
      }

      `}render(){return J`
    <div class="background-div">
        <input 
        type="text"
        name=${this.name} 
        id=${this.name} 
        .value="${this.value}" 
        pattern="${this.pattern}"
        min="${this.min}" 
        max="${this.max}"
        aria-label=${this.ariaLabel}
        @change="${this.updateValue}" 
        ?required="${this.required}"
        />

        <label for="${this.name}">${this.label}</label>
        <span class="abbreviate">${this.abbreviateType}</span>
    </div>
    <span class="error-message">${this.errormessage}</span>`}updateValue(t){this.shadowRoot.querySelector(".background-div").classList.remove("invalid-input"),this.shadowRoot.querySelector(".error-message").style="visibility: none;",this.value=t.target.value,this.internals.setFormValue(this.value),this.setValidity(t.target),this.dispatchEvent(new CustomEvent("input-changed",{[t.target.name]:t.target.value}))}setValidity(t){t.checkValidity()?this.internals.setValidity({}):(this.validity=t.validity,this.internals.setValidity({customError:!0},this.errormessage))}checkValidation(){const t=this.shadowRoot.querySelector("input"),e=this.shadowRoot.querySelector(".background-div"),s=this.shadowRoot.querySelector(".error-message");return t.checkValidity()?!0:(e.classList.add("invalid-input"),e.id="invalid-input",s.style="visibility: visible;",setTimeout(()=>{e.id=""},500),!1)}}customElements.define("numberic-input",x0);class b0 extends pt{static get properties(){return{data:{type:Object}}}constructor(){super(),this.data={}}static get styles(){return yt`
    :host {
      width: 100%;
    }
    form {
      display: flex;
      flex-direction: column;
    }
    h1 {
      text-align: center;
    }
    .button-container {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      margin: 10px 0 0 0;
    }
    button-div {
      width: 120px;
    }

    @media only screen and (max-width: 480px) {
            h1 {
                font-size: 24px;
            }
            button-div {
              width: 150px;
            }
            .button-container {
              position: fixed;
              display: flex;
              justify-content: space-between;
              margin: 0;
              bottom: 0;
              width: calc(100% - 54px);
              padding: 40px 0;              
            }
    }
    `}render(){return J`
          <h1>Personal info</h1>
          <form @submit=${this.submitForm} @keyup=${this.enterKeyPressed} novalidate>
            <numberic-input name="weight" label="Weight in kilo grams" pattern="([0-9]{2,3})?([\.][0-9][0-9]?)?" errormessage="Weight must be between" abbreviateType="kg" required></numberic-input>
            <numberic-input name="height" label="Height in centimeters" pattern="[1-4][0-9]{2}" errormessage="Height must be betweem 100cm and 299cm" abbreviateType="cm" required></numberic-input>
            <div class="button-container">
              <button-div value="Back" @click=${this.handleBack}></button-div>
              <button-div value="Next" @click=${this.handleSubmit}></button-div>
            </div>
          </form>
  `}submitForm(t){t.preventDefault();const e=t.target;if(e.checkValidity()){const s=new FormData(e);this.data=Object.fromEntries(s.entries()),this.dispatchEvent(new CustomEvent("next",{detail:this.data}))}else{let s=!1;Array.from(e.elements).map(o=>{o.checkValidation(),!s&&!o.checkValidation()&&(s=!0,o.focus())})}}handleSubmit(t){this.shadowRoot.querySelector("form").requestSubmit()}handleBack(t){this.dispatchEvent(new Event("back"))}enterKeyPressed(t){(t.key==="Enter"||t.keyCode===13)&&this.handleSubmit()}}customElements.define("userinfo2-form",b0);class y0 extends pt{static get properties(){return{value:{type:String,reflect:!0},options:{type:Array,reflect:!0},name:{type:String,reflect:!0},required:{type:Boolean,reflect:!0},label:{type:String},validity:{type:Object},errormessage:{type:String},ariaLabel:{type:String}}}static get formAssociated(){return!0}constructor(){super(),this.value="",this.name="",this.options=[],this.label="",this.ariaLabel="",this.validity={},this.errormessage="Field is required",this.internals=this.attachInternals()}connectedCallback(){super.connectedCallback(),this.setAttribute("tabindex","0"),this.addEventListener("focus",this.setFocus.bind(this)),this.options.map(t=>{t.checked&&(this.value=t.value)}),this.internals.setFormValue(this.value),this.required&&this.value===""&&this.internals.setValidity({customError:!0},this.errormessage)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("focus",this)}setFocus(){this.shadowRoot.querySelector("input").focus()}formResetCallback(){this.value="",this.internals.setFormValue(this.value)}static get styles(){return yt`
        .background-div {
            display: flex;
            flex-direction: var(--flex-direction, column);
            justify-content: var(--justify-content);
        }
        input {
            display: none;
            /* background-color: red; */

        }
        label {
          border: #b1afaf solid 2px;
          border-radius: var(--border-radius, 4px);
          padding: var(--padding, 20px 0);
          margin: 4px 0;
          text-align: center;
          cursor: pointer;
          font-size: var(--font-size, 20px);
          width: var(--width);
          display: flex;
          flex-direction: column;
        }
        label:hover {
            border-color: #8d8a8a;
        }
        input:checked + label {
            border-color: #4056f4;
            color: #4056f4;
            font-weight: bold; 
        }
      .error-message {
      margin-left: 12px;
      color: red;
      visibility: hidden;
      }
      .extra-info {
        font-size: 14px;
        opacity: 0.8;
        color: black;
        font-weight: normal;
      }
      input:checked + label .extra-info {
        opacity: 1;
      }
      `}render(){return J`
    <div class="background-div">
        ${this.options.map(t=>J`
                <input 
                    type="radio"
                    name=${this.name} 
                    id=${t.value} 
                    .value="${t.value}" 
                    aria-label=${this.ariaLabel}
                    @click="${this.updateValue}" 
                    ?required="${this.required}"
                    ?checked="${t.checked}"
                />
                <label for=${t.value}>
                  ${t.label}
                  <span class="extra-info">${t.info}</span>
                </label>`)}

    </div>
    <span class="error-message">${this.errormessage}</span>`}updateValue(t){this.shadowRoot.querySelector(".background-div").classList.remove("invalid-input"),this.shadowRoot.querySelector(".error-message").style="visibility: none;",this.value=t.target.value,this.internals.setFormValue(this.value),this.setValidity(t.target),this.dispatchEvent(new CustomEvent("selection-changed",{[t.target.name]:t.target.value}))}setValidity(t){t.checkValidity()?this.internals.setValidity({}):(this.validity=t.validity,this.internals.setValidity({customError:!0},this.errormessage))}checkValidation(){const t=this.shadowRoot.querySelector("input"),e=this.shadowRoot.querySelector(".background-div"),s=this.shadowRoot.querySelector(".error-message");return t.checkValidity()?!0:(e.classList.add("invalid-input"),e.id="invalid-input",s.style="visibility: visible;",setTimeout(()=>{e.id=""},500),!1)}}customElements.define("selector-picker",y0);let w0=class extends pt{static get properties(){return{data:{type:Object}}}constructor(){super(),this.data={}}static get styles(){return yt`
    :host {
      width: 100%;
    }
    form {
      display: flex;
      flex-direction: column;
    }
    h1 {
      text-align: center;
    }
    .button-container {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      margin: 10px 0 0 0;
    }
    button-div {
      width: 120px;
    }

    @media only screen and (max-width: 480px) {
            h1 {
                font-size: 24px;
            }
            button-div {
              width: 150px;
            }
            .button-container {
              position: fixed;
              display: flex;
              justify-content: space-between;
              margin: 0;
              bottom: 0;
              width: calc(100% - 54px);
              padding: 40px 0;               
            }
            p {
              text-align: center;
            }
            selector-picker {
              --padding: 15px 0;
            }
    }
    `}render(){return J`
          <h1>Goal</h1>
          <p>What do you want to achieve?</p>
          <form @submit=${this.submitForm} @keyup=${this.enterKeyPressed} novalidate>
            <selector-picker 
              name="goal" 
              .options=${[{value:"LOSEWEIGHT",label:"Lose weight",info:"Reduce your daily calories intake by 20%"},{value:"SLOWLYLOSEWEIGHT",label:"Slowly lose weight",info:"Reduce your daily calories intake by 10%"},{value:"MAINTAINWEIGHT",label:"Maintain weight",info:"Maintain your current weight"},{value:"SLOWLYGAINWEIGHT",label:"Slowly gain weight",info:"Increase your daily calories intake by 10%"},{value:"GAINWEIGHT",label:"Gain weight",info:"Increase your daily calories intake by 20%"}]} 
              required>
            </selector-picker>
            <input-field type="text" name="protein" label="Weight per kilo grams protein" pattern="([0-2])?([\.][0-9]?)?" required></input-field>
            <div class="button-container">
              <button-div value="Back" @click=${this.handleBack}></button-div>
              <button-div value="Next" @click=${this.handleSubmit}></button-div>
            </div>
          </form>
  `}submitForm(t){t.preventDefault();const e=t.target;if(e.checkValidity()){const s=new FormData(e);this.data=Object.fromEntries(s.entries()),this.dispatchEvent(new CustomEvent("next",{detail:this.data}))}else{let s=!1;Array.from(e.elements).map(o=>{o.checkValidation(),!s&&!o.checkValidation()&&(s=!0,o.focus())})}}handleSubmit(t){this.shadowRoot.querySelector("form").requestSubmit()}handleBack(t){this.dispatchEvent(new Event("back"))}enterKeyPressed(t){(t.key==="Enter"||t.keyCode===13)&&this.handleSubmit()}};customElements.define("goal-form",w0);class _0 extends pt{static get properties(){return{data:{type:Object}}}constructor(){super(),this.data={}}static get styles(){return yt`
    :host {
      width: 100%;
    }
    form {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    h1 {
      text-align: center;
    }
    .button-container {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      margin: 10px 0 0 0;
    }
    button-div {
      width: 120px;
    }
    @media only screen and (max-width: 480px) {
            h1 {
                font-size: 20px;
            }
            button-div {
              width: 150px;
            }
            .button-container {
              position: fixed;
              display: flex;
              justify-content: space-between;
              margin: 0;
              bottom: 0;
              width: calc(100% - 54px);
              padding: 40px 0;               
            }
    }
    `}render(){return J`
          <h1>What is your first and last name?</h1>
            <form @submit=${this.submitForm} @keyup=${this.enterKeyPressed} novalidate>
              <input-field type="text" name="firstName" label="First name" pattern=".{1,}" required></input-field>
              <input-field type="text" name="lastName" label="Last name" pattern=".{1,}" required></input-field>
              <div class="button-container">
                <button-div value="Login" @click=${this.handleBack}></button-div>
                <button-div value="Next" @click=${this.handleSubmit}></button-div>
              </div>
            </form>
  `}submitForm(t){t.preventDefault();const e=t.target;if(e.checkValidity()){const s=new FormData(e);this.data=Object.fromEntries(s.entries()),this.dispatchEvent(new CustomEvent("next",{detail:this.data}))}else{let s=!1;Array.from(e.elements).map(o=>{o.checkValidation(),!s&&!o.checkValidation()&&(s=!0,o.focus())})}}handleSubmit(t){this.shadowRoot.querySelector("form").requestSubmit()}handleBack(t){this.dispatchEvent(new Event("login"))}enterKeyPressed(t){(t.key==="Enter"||t.keyCode===13)&&this.handleSubmit()}}customElements.define("user-form",_0);class A0 extends pt{static get properties(){return{data:{type:Object}}}constructor(){super(),this.data={}}static get styles(){return yt`
    :host {
      width: 100%;
    }
    form {
      display: flex;
      flex-direction: column;
    }
    h1 {
      text-align: center;
    }
    .button-container {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      margin: 10px 0 0 0;
    }
    button-div {
      width: 120px;
    }

    @media only screen and (max-width: 480px) {
            h1 {
                font-size: 24px;
            }
            button-div {
              width: 150px;
            }
            .button-container {
              position: fixed;
              display: flex;
              justify-content: space-between;
              margin: 0;
              bottom: 0;
              width: calc(100% - 54px);
              padding: 40px 0;                
            }
            selector-picker {
              --padding: 15px 0;
            }
    }
    `}render(){return J`
          <h1>Activity level(pal)</h1>
          <form @submit=${this.submitForm} @keyup=${this.enterKeyPressed} novalidate>
            <selector-picker 
              name="activityLevel" 
              label="Activity level(pal)" 
              .options=${[{value:"LITTLETONONE",label:"little to none",info:"Spend most of the day sitting and does not sport"},{value:"UNDERAVERAGE",label:"Under average",info:"Sports 1-3 days per week"},{value:"AVERAGE",label:"Average",info:"Sports 3-5 days per week"},{value:"SLIGHTLYABOVEAVERAGE",label:"Slightly above average",info:"Sports 5-7 days per week"},{value:"ABOVEAVERAGE",label:"Above average",info:"Sports 7+ days per week"}]} 
              required>
            </selector-picker>
            <div class="button-container">
              <button-div value="Back" @click=${this.handleBack}></button-div>
              <button-div value="Next" @click=${this.handleSubmit}></button-div>
            </div>
          </form>
  `}submitForm(t){t.preventDefault();const e=t.target;if(e.checkValidity()){const s=new FormData(e);this.data=Object.fromEntries(s.entries()),this.dispatchEvent(new CustomEvent("next",{detail:this.data}))}else{let s=!1;Array.from(e.elements).map(o=>{o.checkValidation(),!s&&!o.checkValidation()&&(s=!0,o.focus())})}}handleSubmit(t){this.shadowRoot.querySelector("form").requestSubmit()}handleBack(t){this.dispatchEvent(new Event("back"))}enterKeyPressed(t){(t.key==="Enter"||t.keyCode===13)&&this.handleSubmit()}}customElements.define("activity-form",A0);class C0 extends pt{static get properties(){return{_registerData:{type:Object,state:!0},_stepCounter:{type:Number,state:!0}}}constructor(){super(),this._registerData={register:{username:"",email:"",password:"",firstName:"",lastName:""},personalInfo:{weight:"",height:"",birthday:"",sex:"",activityLevel:"",goal:"",protein:""}},this._formsArray=[J`<user-form @login=${this.handleLogin} @next=${this.handleNext}></user-form>`,J`<userinfo-form @back=${this.handleBack} @next=${this.handleNext}></userinfo-form>`,J`<activity-form @back=${this.handleBack} @next=${this.handleNext}></activity-form>`,J`<goal-form @back=${this.handleBack} @next=${this.handleNext}></goal-form>`,J`<userinfo2-form @back=${this.handleBack} @next=${this.handleNext}></userinfo2-form>`,J`<register-form @back=${this.handleBack} @submit=${this.handleSubmit}></register-form>`],this._stepCounter=0}static get styles(){return yt`
        .container {
            display: flex;
            flex-direction: column;
            margin: 150px auto auto auto;
            background-color: white;
            width: 360px;
            padding: 0 20px;
            overflow: hidden;
            /* border-radius: 10px; */
        }
        .div-container {
          display: flex;
          align-items: center;
          justify-content: center;
          flex-direction: column;
          
        }
        h1 {
          text-align: center;
        }
   
        .loading-bar, .loading-color {
          height: 10px;
          background-color: lightgray;
          border-radius: 10px;
          width: 100%;
        }
        .loading-color {
          position: relative;
          background-color: #4056f4;
          transition: 0.4s linear 0s;
          transform-origin: left center;
        }
        .form-container {
          margin-top: 50px;
          width: 100%;
        }
        @media only screen and (max-width: 480px) {
            h1 {
                font-size: 24px;
                margin-bottom: 0;
            }
            .container {
              margin: 50px auto auto auto;
              padding: 0;
              width: 100vw;
            }
            .loading-bar, .loading-color {
              border-radius: 0;
            } 
            .form-container div{
              padding: 0 27px;
              
            }
    }
    `}onBeforeLeave(t){t.route.data={register:this._registerData}}render(){return J`
      <page-div ?nonavigation=${!0}>
        <div class="container">
          <div class="div-container">
            <div class="loading-bar">
              <div class="loading-color" style="width: ${(this._stepCounter+1)/(this._formsArray.length+1)*100}%;"></div>
            </div>
            <div class="form-container">
              <div>
              ${this._formsArray[this._stepCounter]}
              </div>
            </div>
          </div>
        </div>
      </page-div> 
  `}handleNext(t){this._formsArray[this._stepCounter]=t.target,this._changeObjectValue(t.detail),this._next()}handleBack(){this._back()}handleSubmit(t){this.shadowRoot.querySelector(".loading-color").style="width: 100%;",this._changeObjectValue(t.detail),this._handleRegister()}handleLogin(){re.go(`${ut}/login`)}_next(){this._stepCounter>=this._formsArray.length-1||(this._stepCounter+=1)}_back(){this._stepCounter<=0||(this._stepCounter-=1)}_changeObjectValue(t){Object.keys(this._registerData).map(e=>{Object.keys(this._registerData[e]).map(s=>{t[s]&&(this._registerData[e][s]=t[s])})})}_handleRegister(){wf(this._registerData.register).then(t=>{if(t.ok){const e={email:this._registerData.register.email,password:this._registerData.register.password};Th(e).then(s=>{vf(this._registerData.personalInfo).then(o=>{re.go(`${ut}/home`)}).catch(o=>{console.log(o)})}).catch(s=>{console.log(s)})}})}}customElements.define("register-div",C0);class E0 extends pt{static get properties(){return{data:{type:Object},_error:{type:String},_profilePicture:{state:!0},_disabled:{type:Boolean,state:!0},_loading:{type:Boolean,state:!0}}}constructor(){super(),this.data={},this._error="",this._profilePicture=JSON.parse(localStorage.getItem("profileImage")),this._disabled=!0,this._loading=!1}async firstUpdated(){super.firstUpdated(),(localStorage.getItem("profileImage")===null||localStorage.getItem("profileImage")===void 0)&&await Mh().then(()=>{this._profilePicture=JSON.parse(localStorage.getItem("profileImage"))}).catch(t=>{})}static get styles(){return yt`
      path, img {
        width: 200px;
        height: 200px;
        border-radius: 50%;
      }
    @media only screen and (max-width: 480px) and (orientation: portrait) {
        img {
        width: 200px;
        height: 200px;
        border-radius: 50%;
      }
      img {
        object-fit: cover;
        /* object-position: 25% 75%; */
      }
      form {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }
      label {
        position: relative;
        -webkit-tap-highlight-color: transparent;
      }
      .plus {
        -webkit-tap-highlight-color: transparent;
        position: absolute;
        right: 0px;
        bottom: 20px;
        width: 40px;
        height: 40px;
        background: url("plus.svg") center / contain no-repeat;
        background-color: white;
        border-radius: 50%;
      }
      input {
        display: none;      
      }
      button-div {
        margin: 10px 0 0 0;
        width: 100px;
        --loading-width: 12px;
        --loading-height: 12px;
        --loading-margin: auto auto auto 5px;
      }
    }
      
    `}render(){return J`
          <form @submit=${this.submitForm} @keyup=${this.enterKeyPressed} enctype="multipart/form-data" novalidate>
          <label for="fileImage">${this._profilePicture!==null?J`<img src="data:image/png;base64,${this._profilePicture.imageBase64}" />
                  <svg class="plus"></svg>`:J`<svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_1_2)">
                  <rect width="200" height="200" fill="white"/>
                  <path d="M100 0C44.7656 0 0 44.7656 0 100C0 155.234 44.7656 200 100 200C155.234 200 200 155.234 200 100C200 44.7656 155.234 0 100 0ZM100 50C115.535 50 128.125 62.5938 128.125 78.125C128.125 93.6562 115.547 106.25 100 106.25C84.4688 106.25 71.875 93.6562 71.875 78.125C71.875 62.5938 84.4531 50 100 50ZM100 175C79.3242 175 60.5859 166.59 46.9922 153.012C53.3203 136.68 68.9453 125 87.5 125H112.5C131.07 125 146.695 136.672 153.008 153.012C139.414 166.602 120.664 175 100 175Z" fill="#C6DAE6"/>
                  </g>
                  <defs>
                  <clipPath id="clip0_1_2">
                  <rect width="200" height="200" fill="white"/>
                  </clipPath>
                  </defs>
                </svg>
                <svg class="plus"></svg>`}
                </label>
            <input type="file" name="fileImage" id="fileImage" accept="image/*" @change="${this.handleChange}"/>
            <button-div ?disabled="${this._disabled}" value="Submit" @click=${this.handleSubmit} ?loading="${this._loading}"></button-div>
          </form>
          <error-message message="${this._error}"></error-message>
  `}handleChange(t){if((t.target.files[0].size/1024/1024).toFixed(4)>4){this._disabled=!0,this._error="Image is to big";return}this._disabled=!1;const s=new FileReader;s.readAsBinaryString(t.target.files[0]),s.onload=()=>{this._profilePicture={imageBase64:btoa(s.result)}}}submitForm(t){t.preventDefault();const e=t.target;this.data=new FormData(e),localStorage.setItem("profileImage",JSON.stringify(this._profilePicture)),this._loading=!0,this._disabled=!1,If(this.data).then(s=>{this._error=s}).catch(s=>{this._error=s.message}).then(()=>{this._loading=!1,this._disabled=!0}),this.dispatchEvent(new StorageEvent("storage",{key:"profileImage",newValue:JSON.stringify(this._profilePicture),bubbles:!0,composed:!0})),setTimeout(()=>{this._error=""},2e3)}handleSubmit(t){this.shadowRoot.querySelector("form").requestSubmit()}}customElements.define("profile-form",E0);class S0 extends pt{static get styles(){return yt`
            h1 {
                text-align: center;
            }
        @media only screen and (max-width: 480px) and (orientation: portrait){
            div {
                display: flex; 
                justify-content: center;
            }
            button-div {
                position: absolute;
                bottom: 200px;
                --button-div-width: 200px;
                --button-background-color: #1a1a72;
                --button-div-color: #FFFFFF;
                --button-div-font-weight: bold;
            }
        }
        `}render(){return J`
        <page-div>
            <h1>Profile</h1>
            <profile-form></profile-form>
            <div>
                <button-div value="Logout" @click="${this.handleClick}"></button-div>
            </div>
        </page-div>`}handleClick(){re.go(`${ut}/logout`)}}customElements.define("profile-page",S0);var nt;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(nt||(nt={}));var Ml=new Map([[nt.QR_CODE,"QR_CODE"],[nt.AZTEC,"AZTEC"],[nt.CODABAR,"CODABAR"],[nt.CODE_39,"CODE_39"],[nt.CODE_93,"CODE_93"],[nt.CODE_128,"CODE_128"],[nt.DATA_MATRIX,"DATA_MATRIX"],[nt.MAXICODE,"MAXICODE"],[nt.ITF,"ITF"],[nt.EAN_13,"EAN_13"],[nt.EAN_8,"EAN_8"],[nt.PDF_417,"PDF_417"],[nt.RSS_14,"RSS_14"],[nt.RSS_EXPANDED,"RSS_EXPANDED"],[nt.UPC_A,"UPC_A"],[nt.UPC_E,"UPC_E"],[nt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Dl;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(Dl||(Dl={}));function v0(i){return Object.values(nt).includes(i)}var Gi;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Gi||(Gi={}));var ei=function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[Gi.SCAN_TYPE_CAMERA,Gi.SCAN_TYPE_FILE],i}(),Hh=function(){function i(t,e){this.format=t,this.formatName=e}return i.prototype.toString=function(){return this.formatName},i.create=function(t){if(!Ml.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new i(t,Ml.get(t))},i}(),Ol=function(){function i(){}return i.createFromText=function(t){var e={text:t};return{decodedText:t,result:e}},i.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},i}(),$o;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})($o||($o={}));var jh=function(){function i(){}return i.createFrom=function(t){return{errorMessage:t,type:$o.UNKWOWN_ERROR}},i}(),Wh=function(){function i(t){this.verbose=t}return i.prototype.log=function(t){this.verbose&&console.log(t)},i.prototype.warn=function(t){this.verbose&&console.warn(t)},i.prototype.logError=function(t,e){(this.verbose||e===!0)&&console.error(t)},i.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},i}();function pi(i){return typeof i>"u"||i===null}function I0(i,t,e){return i>e?e:i<t?t:i}var zn=function(){function i(){}return i.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},i.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i}(),Nt=function(){function i(){}return i.scanningStatus=function(){return"Scanning"},i.idleStatus=function(){return"Idle"},i.errorStatus=function(){return"Error"},i.permissionStatus=function(){return"Permission"},i.noCameraFoundErrorStatus=function(){return"No Cameras"},i.lastMatch=function(t){return"Last Match: ".concat(t)},i.codeScannerTitle=function(){return"Code Scanner"},i.cameraPermissionTitle=function(){return"Request Camera Permissions"},i.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},i.noCameraFound=function(){return"No camera found"},i.scanButtonStopScanningText=function(){return"Stop Scanning"},i.scanButtonStartScanningText=function(){return"Start Scanning"},i.torchOnButton=function(){return"Switch On Torch"},i.torchOffButton=function(){return"Switch Off Torch"},i.torchOnFailedMessage=function(){return"Failed to turn on torch"},i.torchOffFailedMessage=function(){return"Failed to turn off torch"},i.scanButtonScanningStarting=function(){return"Launching Camera..."},i.textIfCameraScanSelected=function(){return"Scan an Image File"},i.textIfFileScanSelected=function(){return"Scan using camera directly"},i.selectCamera=function(){return"Select Camera"},i.fileSelectionChooseImage=function(){return"Choose Image"},i.fileSelectionChooseAnother=function(){return"Choose Another"},i.fileSelectionNoImageSelected=function(){return"No image choosen"},i.anonymousCameraPrefix=function(){return"Anonymous Camera"},i.dragAndDropMessage=function(){return"Or drop an image to scan"},i.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},i.zoom=function(){return"zoom"},i.loadingImage=function(){return"Loading image..."},i.cameraScanAltText=function(){return"Camera based scan"},i.fileScanAltText=function(){return"Fule based scan"},i}(),kl=function(){function i(){}return i.poweredBy=function(){return"Powered by "},i.reportIssues=function(){return"Report issues"},i}(),$h=function(){function i(){}return i.isMediaStreamConstraintsValid=function(t,e){if(typeof t!="object"){var s=typeof t;return e.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(o),d=Object.keys(t),f=0,p=d;f<p.length;f++){var m=p[f];if(l.has(m))return e.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},i}(),cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function T0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Yo={exports:{}};(function(i,t){(function(e,s){s(t)})(cs,function(e){function s(C){return C==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,n){C.__proto__=n}||function(C,n){for(var r in n)n.hasOwnProperty(r)&&(C[r]=n[r])};function l(C,n){o(C,n);function r(){this.constructor=C}C.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}function d(C,n){var r=Object.setPrototypeOf;r?r(C,n):C.__proto__=n}function f(C,n){n===void 0&&(n=C.constructor);var r=Error.captureStackTrace;r&&r(C,n)}var p=function(C){l(n,C);function n(r){var a=this.constructor,c=C.call(this,r)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),d(c,a.prototype),f(c),c}return n}(Error);class m extends p{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}m.kind="Exception";class y extends m{}y.kind="ArgumentException";class w extends m{}w.kind="IllegalArgumentException";class A{constructor(n){if(this.binarizer=n,n===null)throw new w("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,r){return this.binarizer.getBlackRow(n,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,r,a,c){const h=this.binarizer.getLuminanceSource().crop(n,r,a,c);return new A(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new A(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new A(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class S extends m{static getChecksumInstance(){return new S}}S.kind="ChecksumException";class M{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(n,r,a,c,h){for(;h--;)a[c++]=n[r++]}static currentTimeMillis(){return Date.now()}}class k extends m{}k.kind="IndexOutOfBoundsException";class R extends k{constructor(n=void 0,r=void 0){super(r),this.index=n,this.message=r}}R.kind="ArrayIndexOutOfBoundsException";class P{static fill(n,r){for(let a=0,c=n.length;a<c;a++)n[a]=r}static fillWithin(n,r,a,c){P.rangeCheck(n.length,r,a);for(let h=r;h<a;h++)n[h]=c}static rangeCheck(n,r,a){if(r>a)throw new w("fromIndex("+r+") > toIndex("+a+")");if(r<0)throw new R(r);if(a>n)throw new R(a)}static asList(...n){return n}static create(n,r,a){return Array.from({length:n}).map(h=>Array.from({length:r}).fill(a))}static createInt32Array(n,r,a){return Array.from({length:n}).map(h=>Int32Array.from({length:r}).fill(a))}static equals(n,r){if(!n||!r||!n.length||!r.length||n.length!==r.length)return!1;for(let a=0,c=n.length;a<c;a++)if(n[a]!==r[a])return!1;return!0}static hashCode(n){if(n===null)return 0;let r=1;for(const a of n)r=31*r+a;return r}static fillUint8Array(n,r){for(let a=0;a!==n.length;a++)n[a]=r}static copyOf(n,r){return n.slice(0,r)}static copyOfUint8Array(n,r){if(n.length<=r){const a=new Uint8Array(r);return a.set(n),a}return n.slice(0,r)}static copyOfRange(n,r,a){const c=a-r,h=new Int32Array(c);return D.arraycopy(n,r,h,0,c),h}static binarySearch(n,r,a){a===void 0&&(a=P.numberComparator);let c=0,h=n.length-1;for(;c<=h;){const u=h+c>>1,g=a(r,n[u]);if(g>0)c=u+1;else if(g<0)h=u-1;else return u}return-c-1}static numberComparator(n,r){return n-r}}class V{static numberOfTrailingZeros(n){let r;if(n===0)return 32;let a=31;return r=n<<16,r!==0&&(a-=16,n=r),r=n<<8,r!==0&&(a-=8,n=r),r=n<<4,r!==0&&(a-=4,n=r),r=n<<2,r!==0&&(a-=2,n=r),a-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let r=1;return n>>>16||(r+=16,n<<=16),n>>>24||(r+=8,n<<=8),n>>>28||(r+=4,n<<=4),n>>>30||(r+=2,n<<=2),r-=n>>>31,r}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,r){return Math.trunc(n/r)}static parseInt(n,r=void 0){return parseInt(n,r)}}V.MIN_VALUE_32_BITS=-2147483648,V.MAX_VALUE=Number.MAX_SAFE_INTEGER;class W{constructor(n,r){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,r==null?this.bits=W.makeArray(n):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const r=W.makeArray(n);D.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const r=this.size;if(n>=r)return r;const a=this.bits;let c=Math.floor(n/32),h=a[c];h&=~((1<<(n&31))-1);const u=a.length;for(;h===0;){if(++c===u)return r;h=a[c]}const g=c*32+V.numberOfTrailingZeros(h);return g>r?r:g}getNextUnset(n){const r=this.size;if(n>=r)return r;const a=this.bits;let c=Math.floor(n/32),h=~a[c];h&=~((1<<(n&31))-1);const u=a.length;for(;h===0;){if(++c===u)return r;h=~a[c]}const g=c*32+V.numberOfTrailingZeros(h);return g>r?r:g}setBulk(n,r){this.bits[Math.floor(n/32)]=r}setRange(n,r){if(r<n||n<0||r>this.size)throw new w;if(r===n)return;r--;const a=Math.floor(n/32),c=Math.floor(r/32),h=this.bits;for(let u=a;u<=c;u++){const g=u>a?0:n&31,b=(2<<(u<c?31:r&31))-(1<<g);h[u]|=b}}clear(){const n=this.bits.length,r=this.bits;for(let a=0;a<n;a++)r[a]=0}isRange(n,r,a){if(r<n||n<0||r>this.size)throw new w;if(r===n)return!0;r--;const c=Math.floor(n/32),h=Math.floor(r/32),u=this.bits;for(let g=c;g<=h;g++){const x=g>c?0:n&31,_=(2<<(g<h?31:r&31))-(1<<x)&4294967295;if((u[g]&_)!==(a?_:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,r){if(r<0||r>32)throw new w("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let a=r;a>0;a--)this.appendBit((n>>a-1&1)===1)}appendBitArray(n){const r=n.size;this.ensureCapacity(this.size+r);for(let a=0;a<r;a++)this.appendBit(n.get(a))}xor(n){if(this.size!==n.size)throw new w("Sizes don't match");const r=this.bits;for(let a=0,c=r.length;a<c;a++)r[a]^=n.bits[a]}toBytes(n,r,a,c){for(let h=0;h<c;h++){let u=0;for(let g=0;g<8;g++)this.get(n)&&(u|=1<<7-g),n++;r[a+h]=u}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),a=r+1,c=this.bits;for(let h=0;h<a;h++){let u=c[h];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,n[r-h]=u}if(this.size!==a*32){const h=a*32-this.size;let u=n[0]>>>h;for(let g=1;g<a;g++){const x=n[g];u|=x<<32-h,n[g-1]=u,u=x>>>h}n[a-1]=u}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof W))return!1;const r=n;return this.size===r.size&&P.equals(this.bits,r.bits)}hashCode(){return 31*this.size+P.hashCode(this.bits)}toString(){let n="";for(let r=0,a=this.size;r<a;r++)r&7||(n+=" "),n+=this.get(r)?"X":".";return n}clone(){return new W(this.size,this.bits.slice())}}var $;(function(C){C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})($||($={}));var G=$;class B extends m{static getFormatInstance(){return new B}}B.kind="FormatException";var Y;(function(C){C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR"})(Y||(Y={}));class j{constructor(n,r,a,...c){this.valueIdentifier=n,this.name=a,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=c,j.VALUE_IDENTIFIER_TO_ECI.set(n,this),j.NAME_TO_ECI.set(a,this);const h=this.values;for(let u=0,g=h.length;u!==g;u++){const x=h[u];j.VALUES_TO_ECI.set(x,this)}for(const u of c)j.NAME_TO_ECI.set(u,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new B("incorect value");const r=j.VALUES_TO_ECI.get(n);if(r===void 0)throw new B("incorect value");return r}static getCharacterSetECIByName(n){const r=j.NAME_TO_ECI.get(n);if(r===void 0)throw new B("incorect value");return r}equals(n){if(!(n instanceof j))return!1;const r=n;return this.getName()===r.getName()}}j.VALUE_IDENTIFIER_TO_ECI=new Map,j.VALUES_TO_ECI=new Map,j.NAME_TO_ECI=new Map,j.Cp437=new j(Y.Cp437,Int32Array.from([0,2]),"Cp437"),j.ISO8859_1=new j(Y.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),j.ISO8859_2=new j(Y.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),j.ISO8859_3=new j(Y.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),j.ISO8859_4=new j(Y.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),j.ISO8859_5=new j(Y.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),j.ISO8859_6=new j(Y.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),j.ISO8859_7=new j(Y.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),j.ISO8859_8=new j(Y.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),j.ISO8859_9=new j(Y.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),j.ISO8859_10=new j(Y.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),j.ISO8859_11=new j(Y.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),j.ISO8859_13=new j(Y.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),j.ISO8859_14=new j(Y.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),j.ISO8859_15=new j(Y.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),j.ISO8859_16=new j(Y.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),j.SJIS=new j(Y.SJIS,20,"SJIS","Shift_JIS"),j.Cp1250=new j(Y.Cp1250,21,"Cp1250","windows-1250"),j.Cp1251=new j(Y.Cp1251,22,"Cp1251","windows-1251"),j.Cp1252=new j(Y.Cp1252,23,"Cp1252","windows-1252"),j.Cp1256=new j(Y.Cp1256,24,"Cp1256","windows-1256"),j.UnicodeBigUnmarked=new j(Y.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),j.UTF8=new j(Y.UTF8,26,"UTF8","UTF-8"),j.ASCII=new j(Y.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),j.Big5=new j(Y.Big5,28,"Big5"),j.GB18030=new j(Y.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),j.EUC_KR=new j(Y.EUC_KR,30,"EUC_KR","EUC-KR");class ft extends m{}ft.kind="UnsupportedOperationException";class at{static decode(n,r){const a=this.encodingName(r);return this.customDecoder?this.customDecoder(n,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(n,a):new TextDecoder(a).decode(n)}static shouldDecodeOnFallback(n){return!at.isBrowser()&&n==="ISO-8859-1"}static encode(n,r){const a=this.encodingName(r);return this.customEncoder?this.customEncoder(n,a):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof j?n:j.getCharacterSetECIByName(n)}static decodeFallback(n,r){const a=this.encodingCharacterSet(r);if(at.isDecodeFallbackSupported(a)){let c="";for(let h=0,u=n.length;h<u;h++){let g=n[h].toString(16);g.length<2&&(g="0"+g),c+="%"+g}return decodeURIComponent(c)}if(a.equals(j.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new ft(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(j.UTF8)||n.equals(j.ISO8859_1)||n.equals(j.ASCII)}static encodeFallback(n){const a=btoa(unescape(encodeURIComponent(n))).split(""),c=[];for(let h=0;h<a.length;h++)c.push(a[h].charCodeAt(0));return new Uint8Array(c)}}class tt{static castAsNonUtf8Char(n,r=null){const a=r?r.getName():this.ISO88591;return at.decode(new Uint8Array([n]),a)}static guessEncoding(n,r){if(r!=null&&r.get(G.CHARACTER_SET)!==void 0)return r.get(G.CHARACTER_SET).toString();const a=n.length;let c=!0,h=!0,u=!0,g=0,x=0,b=0,_=0,E=0,v=0,T=0,O=0,N=0,L=0,H=0;const Z=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let K=0;K<a&&(c||h||u);K++){const q=n[K]&255;u&&(g>0?q&128?g--:u=!1:q&128&&(q&64?(g++,q&32?(g++,q&16?(g++,q&8?u=!1:_++):b++):x++):u=!1)),c&&(q>127&&q<160?c=!1:q>159&&(q<192||q===215||q===247)&&H++),h&&(E>0?q<64||q===127||q>252?h=!1:E--:q===128||q===160||q>239?h=!1:q>160&&q<224?(v++,O=0,T++,T>N&&(N=T)):q>127?(E++,T=0,O++,O>L&&(L=O)):(T=0,O=0))}return u&&g>0&&(u=!1),h&&E>0&&(h=!1),u&&(Z||x+b+_>0)?tt.UTF8:h&&(tt.ASSUME_SHIFT_JIS||N>=3||L>=3)?tt.SHIFT_JIS:c&&h?N===2&&v===2||H*10>=a?tt.SHIFT_JIS:tt.ISO88591:c?tt.ISO88591:h?tt.SHIFT_JIS:u?tt.UTF8:tt.PLATFORM_DEFAULT_ENCODING}static format(n,...r){let a=-1;function c(u,g,x,b,_,E){if(u==="%%")return"%";if(r[++a]===void 0)return;u=b?parseInt(b.substr(1)):void 0;let v=_?parseInt(_.substr(1)):void 0,T;switch(E){case"s":T=r[a];break;case"c":T=r[a][0];break;case"f":T=parseFloat(r[a]).toFixed(u);break;case"p":T=parseFloat(r[a]).toPrecision(u);break;case"e":T=parseFloat(r[a]).toExponential(u);break;case"x":T=parseInt(r[a]).toString(v||16);break;case"d":T=parseFloat(parseInt(r[a],v||10).toPrecision(u)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(v);let O=parseInt(x),N=x&&x[0]+""=="0"?"0":" ";for(;T.length<O;)T=g!==void 0?T+N:N+T;return T}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(h,c)}static getBytes(n,r){return at.encode(n,r)}static getCharCode(n,r=0){return n.charCodeAt(r)}static getCharAt(n){return String.fromCharCode(n)}}tt.SHIFT_JIS=j.SJIS.getName(),tt.GB2312="GB2312",tt.ISO88591=j.ISO8859_1.getName(),tt.EUC_JP="EUC_JP",tt.UTF8=j.UTF8.getName(),tt.PLATFORM_DEFAULT_ENCODING=tt.UTF8,tt.ASSUME_SHIFT_JIS=!1;class gt{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=tt.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,r,a){for(let c=r;r<r+a;c++)this.append(n[c]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,r){this.value=this.value.substr(0,n)+r+this.value.substr(n+1)}substring(n,r){return this.value.substring(n,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,r){this.value=this.value.substr(0,n)+r+this.value.substr(n+r.length)}}class Tt{constructor(n,r,a,c){if(this.width=n,this.height=r,this.rowSize=a,this.bits=c,r==null&&(r=n),this.height=r,n<1||r<1)throw new w("Both dimensions must be greater than 0");a==null&&(a=Math.floor((n+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const r=n.length,a=n[0].length,c=new Tt(a,r);for(let h=0;h<r;h++){const u=n[h];for(let g=0;g<a;g++)u[g]&&c.set(g,h)}return c}static parseFromString(n,r,a){if(n===null)throw new w("stringRepresentation cannot be null");const c=new Array(n.length);let h=0,u=0,g=-1,x=0,b=0;for(;b<n.length;)if(n.charAt(b)===`
`||n.charAt(b)==="\r"){if(h>u){if(g===-1)g=h-u;else if(h-u!==g)throw new w("row lengths do not match");u=h,x++}b++}else if(n.substring(b,b+r.length)===r)b+=r.length,c[h]=!0,h++;else if(n.substring(b,b+a.length)===a)b+=a.length,c[h]=!1,h++;else throw new w("illegal character encountered: "+n.substring(b));if(h>u){if(g===-1)g=h-u;else if(h-u!==g)throw new w("row lengths do not match");x++}const _=new Tt(g,x);for(let E=0;E<h;E++)c[E]&&_.set(Math.floor(E%g),Math.floor(E/g));return _}get(n,r){const a=r*this.rowSize+Math.floor(n/32);return(this.bits[a]>>>(n&31)&1)!==0}set(n,r){const a=r*this.rowSize+Math.floor(n/32);this.bits[a]|=1<<(n&31)&4294967295}unset(n,r){const a=r*this.rowSize+Math.floor(n/32);this.bits[a]&=~(1<<(n&31)&4294967295)}flip(n,r){const a=r*this.rowSize+Math.floor(n/32);this.bits[a]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new w("input matrix dimensions do not match");const r=new W(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let h=0,u=this.height;h<u;h++){const g=h*a,x=n.getRow(h,r).getBitArray();for(let b=0;b<a;b++)c[g+b]^=x[b]}}clear(){const n=this.bits,r=n.length;for(let a=0;a<r;a++)n[a]=0}setRegion(n,r,a,c){if(r<0||n<0)throw new w("Left and top must be nonnegative");if(c<1||a<1)throw new w("Height and width must be at least 1");const h=n+a,u=r+c;if(u>this.height||h>this.width)throw new w("The region must fit inside the matrix");const g=this.rowSize,x=this.bits;for(let b=r;b<u;b++){const _=b*g;for(let E=n;E<h;E++)x[_+Math.floor(E/32)]|=1<<(E&31)&4294967295}}getRow(n,r){r==null||r.getSize()<this.width?r=new W(this.width):r.clear();const a=this.rowSize,c=this.bits,h=n*a;for(let u=0;u<a;u++)r.setBulk(u*32,c[h+u]);return r}setRow(n,r){D.arraycopy(r.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),r=this.getHeight();let a=new W(n),c=new W(n);for(let h=0,u=Math.floor((r+1)/2);h<u;h++)a=this.getRow(h,a),c=this.getRow(r-1-h,c),a.reverse(),c.reverse(),this.setRow(h,c),this.setRow(r-1-h,a)}getEnclosingRectangle(){const n=this.width,r=this.height,a=this.rowSize,c=this.bits;let h=n,u=r,g=-1,x=-1;for(let b=0;b<r;b++)for(let _=0;_<a;_++){const E=c[b*a+_];if(E!==0){if(b<u&&(u=b),b>x&&(x=b),_*32<h){let v=0;for(;!(E<<31-v&4294967295);)v++;_*32+v<h&&(h=_*32+v)}if(_*32+31>g){let v=31;for(;!(E>>>v);)v--;_*32+v>g&&(g=_*32+v)}}}return g<h||x<u?null:Int32Array.from([h,u,g-h+1,x-u+1])}getTopLeftOnBit(){const n=this.rowSize,r=this.bits;let a=0;for(;a<r.length&&r[a]===0;)a++;if(a===r.length)return null;const c=a/n;let h=a%n*32;const u=r[a];let g=0;for(;!(u<<31-g&4294967295);)g++;return h+=g,Int32Array.from([h,c])}getBottomRightOnBit(){const n=this.rowSize,r=this.bits;let a=r.length-1;for(;a>=0&&r[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/n);let h=Math.floor(a%n)*32;const u=r[a];let g=31;for(;!(u>>>g);)g--;return h+=g,Int32Array.from([h,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof Tt))return!1;const r=n;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&P.equals(this.bits,r.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+P.hashCode(this.bits),n}toString(n="X ",r="  ",a=`
`){return this.buildToString(n,r,a)}buildToString(n,r,a){let c=new gt;for(let h=0,u=this.height;h<u;h++){for(let g=0,x=this.width;g<x;g++)c.append(this.get(g,h)?n:r);c.append(a)}return c.toString()}clone(){return new Tt(this.width,this.height,this.rowSize,this.bits.slice())}}class U extends m{static getNotFoundInstance(){return new U}}U.kind="NotFoundException";class mt extends M{constructor(n){super(n),this.luminances=mt.EMPTY,this.buckets=new Int32Array(mt.LUMINANCE_BUCKETS)}getBlackRow(n,r){const a=this.getLuminanceSource(),c=a.getWidth();r==null||r.getSize()<c?r=new W(c):r.clear(),this.initArrays(c);const h=a.getRow(n,this.luminances),u=this.buckets;for(let x=0;x<c;x++)u[(h[x]&255)>>mt.LUMINANCE_SHIFT]++;const g=mt.estimateBlackPoint(u);if(c<3)for(let x=0;x<c;x++)(h[x]&255)<g&&r.set(x);else{let x=h[0]&255,b=h[1]&255;for(let _=1;_<c-1;_++){const E=h[_+1]&255;(b*4-x-E)/2<g&&r.set(_),x=b,b=E}}return r}getBlackMatrix(){const n=this.getLuminanceSource(),r=n.getWidth(),a=n.getHeight(),c=new Tt(r,a);this.initArrays(r);const h=this.buckets;for(let x=1;x<5;x++){const b=Math.floor(a*x/5),_=n.getRow(b,this.luminances),E=Math.floor(r*4/5);for(let v=Math.floor(r/5);v<E;v++){const T=_[v]&255;h[T>>mt.LUMINANCE_SHIFT]++}}const u=mt.estimateBlackPoint(h),g=n.getMatrix();for(let x=0;x<a;x++){const b=x*r;for(let _=0;_<r;_++)(g[b+_]&255)<u&&c.set(_,x)}return c}createBinarizer(n){return new mt(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const r=this.buckets;for(let a=0;a<mt.LUMINANCE_BUCKETS;a++)r[a]=0}static estimateBlackPoint(n){const r=n.length;let a=0,c=0,h=0;for(let _=0;_<r;_++)n[_]>h&&(c=_,h=n[_]),n[_]>a&&(a=n[_]);let u=0,g=0;for(let _=0;_<r;_++){const E=_-c,v=n[_]*E*E;v>g&&(u=_,g=v)}if(c>u){const _=c;c=u,u=_}if(u-c<=r/16)throw new U;let x=u-1,b=-1;for(let _=u-1;_>c;_--){const E=_-c,v=E*E*(u-_)*(a-n[_]);v>b&&(x=_,b=v)}return x<<mt.LUMINANCE_SHIFT}}mt.LUMINANCE_BITS=5,mt.LUMINANCE_SHIFT=8-mt.LUMINANCE_BITS,mt.LUMINANCE_BUCKETS=1<<mt.LUMINANCE_BITS,mt.EMPTY=Uint8ClampedArray.from([0]);class st extends mt{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),r=n.getWidth(),a=n.getHeight();if(r>=st.MINIMUM_DIMENSION&&a>=st.MINIMUM_DIMENSION){const c=n.getMatrix();let h=r>>st.BLOCK_SIZE_POWER;r&st.BLOCK_SIZE_MASK&&h++;let u=a>>st.BLOCK_SIZE_POWER;a&st.BLOCK_SIZE_MASK&&u++;const g=st.calculateBlackPoints(c,h,u,r,a),x=new Tt(r,a);st.calculateThresholdForBlock(c,h,u,r,a,g,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new st(n)}static calculateThresholdForBlock(n,r,a,c,h,u,g){const x=h-st.BLOCK_SIZE,b=c-st.BLOCK_SIZE;for(let _=0;_<a;_++){let E=_<<st.BLOCK_SIZE_POWER;E>x&&(E=x);const v=st.cap(_,2,a-3);for(let T=0;T<r;T++){let O=T<<st.BLOCK_SIZE_POWER;O>b&&(O=b);const N=st.cap(T,2,r-3);let L=0;for(let Z=-2;Z<=2;Z++){const K=u[v+Z];L+=K[N-2]+K[N-1]+K[N]+K[N+1]+K[N+2]}const H=L/25;st.thresholdBlock(n,O,E,H,c,g)}}}static cap(n,r,a){return n<r?r:n>a?a:n}static thresholdBlock(n,r,a,c,h,u){for(let g=0,x=a*h+r;g<st.BLOCK_SIZE;g++,x+=h)for(let b=0;b<st.BLOCK_SIZE;b++)(n[x+b]&255)<=c&&u.set(r+b,a+g)}static calculateBlackPoints(n,r,a,c,h){const u=h-st.BLOCK_SIZE,g=c-st.BLOCK_SIZE,x=new Array(a);for(let b=0;b<a;b++){x[b]=new Int32Array(r);let _=b<<st.BLOCK_SIZE_POWER;_>u&&(_=u);for(let E=0;E<r;E++){let v=E<<st.BLOCK_SIZE_POWER;v>g&&(v=g);let T=0,O=255,N=0;for(let H=0,Z=_*c+v;H<st.BLOCK_SIZE;H++,Z+=c){for(let K=0;K<st.BLOCK_SIZE;K++){const q=n[Z+K]&255;T+=q,q<O&&(O=q),q>N&&(N=q)}if(N-O>st.MIN_DYNAMIC_RANGE)for(H++,Z+=c;H<st.BLOCK_SIZE;H++,Z+=c)for(let K=0;K<st.BLOCK_SIZE;K++)T+=n[Z+K]&255}let L=T>>st.BLOCK_SIZE_POWER*2;if(N-O<=st.MIN_DYNAMIC_RANGE&&(L=O/2,b>0&&E>0)){const H=(x[b-1][E]+2*x[b][E-1]+x[b-1][E-1])/4;O<H&&(L=H)}x[b][E]=L}}return x}}st.BLOCK_SIZE_POWER=3,st.BLOCK_SIZE=1<<st.BLOCK_SIZE_POWER,st.BLOCK_SIZE_MASK=st.BLOCK_SIZE-1,st.MINIMUM_DIMENSION=st.BLOCK_SIZE*5,st.MIN_DYNAMIC_RANGE=24;class xe{constructor(n,r){this.width=n,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,r,a,c){throw new ft("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ft("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ft("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let r=new gt;for(let a=0;a<this.height;a++){const c=this.getRow(a,n);for(let h=0;h<this.width;h++){const u=c[h]&255;let g;u<64?g="#":u<128?g="+":u<192?g=".":g=" ",r.append(g)}r.append(`
`)}return r.toString()}}class Ht extends xe{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,r){const a=this.delegate.getRow(n,r),c=this.getWidth();for(let h=0;h<c;h++)a[h]=255-(a[h]&255);return a}getMatrix(){const n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(r);for(let c=0;c<r;c++)a[c]=255-(n[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(n,r,a,c){return new Ht(this.delegate.crop(n,r,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ht(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ht(this.delegate.rotateCounterClockwise45())}}class Ie extends xe{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=Ie.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const r=n.getContext("2d").getImageData(0,0,n.width,n.height);return Ie.toGrayscaleBuffer(r.data,n.width,n.height)}static toGrayscaleBuffer(n,r,a){const c=new Uint8ClampedArray(r*a);for(let h=0,u=0,g=n.length;h<g;h+=4,u++){let x;if(n[h+3]===0)x=255;else{const _=n[h],E=n[h+1],v=n[h+2];x=306*_+601*E+117*v+512>>10}c[u]=x}return c}getRow(n,r){if(n<0||n>=this.getHeight())throw new w("Requested row is outside the image: "+n);const a=this.getWidth(),c=n*a;return r===null?r=this.buffer.slice(c,c+a):(r.length<a&&(r=new Uint8ClampedArray(a)),r.set(this.buffer.slice(c,c+a))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,r,a,c){return super.crop(n,r,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const r=this.getTempCanvasElement(),a=r.getContext("2d"),c=n*Ie.DEGREE_TO_RADIANS,h=this.canvas.width,u=this.canvas.height,g=Math.ceil(Math.abs(Math.cos(c))*h+Math.abs(Math.sin(c))*u),x=Math.ceil(Math.abs(Math.sin(c))*h+Math.abs(Math.cos(c))*u);return r.width=g,r.height=x,a.translate(g/2,x/2),a.rotate(c),a.drawImage(this.canvas,h/-2,u/-2),this.buffer=Ie.makeBufferFromCanvasImageData(r),this}invert(){return new Ht(this)}}Ie.DEGREE_TO_RADIANS=Math.PI/180;class Ji{constructor(n,r,a){this.deviceId=n,this.label=r,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ie=(typeof globalThis<"u"?globalThis:typeof cs<"u"?cs:typeof self<"u"?self:typeof window<"u"?window:{}).__awaiter||function(C,n,r,a){function c(h){return h instanceof r?h:new r(function(u){u(h)})}return new(r||(r=Promise))(function(h,u){function g(_){try{b(a.next(_))}catch(E){u(E)}}function x(_){try{b(a.throw(_))}catch(E){u(E)}}function b(_){_.done?h(_.value):c(_.value).then(g,x)}b((a=a.apply(C,n||[])).next())})};class Te{constructor(n,r=500,a){this.reader=n,this.timeBetweenScansMillis=r,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return ie(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const a of n){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const h=a.deviceId||a.id,u=a.label||`Video device ${r.length+1}`,g=a.groupId,x={deviceId:h,label:u,kind:c,groupId:g};r.push(x)}return r})}getVideoInputDevices(){return ie(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new Ji(r.deviceId,r.label))})}findDeviceById(n){return ie(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(a=>a.deviceId===n):null})}decodeFromInputVideoDevice(n,r){return ie(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,r)})}decodeOnceFromVideoDevice(n,r){return ie(this,void 0,void 0,function*(){this.reset();let a;n?a={deviceId:{exact:n}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,r)})}decodeOnceFromConstraints(n,r){return ie(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(a,r)})}decodeOnceFromStream(n,r){return ie(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(n,r);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(n,r,a){return ie(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,r,a)})}decodeFromVideoDevice(n,r,a){return ie(this,void 0,void 0,function*(){let c;n?c={deviceId:{exact:n}}:c={facingMode:"environment"};const h={video:c};return yield this.decodeFromConstraints(h,r,a)})}decodeFromConstraints(n,r,a){return ie(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(c,r,a)})}decodeFromStream(n,r,a){return ie(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(n,r);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,r){return ie(this,void 0,void 0,function*(){const a=this.prepareVideoElement(r);return this.addVideoSource(a,n),this.videoElement=a,this.stream=n,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(n){return new Promise((r,a)=>this.playVideoOnLoad(n,()=>r()))}playVideoOnLoad(n,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",r),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return ie(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,r){const a=document.getElementById(n);if(!a)throw new y(`element with id '${n}' not found`);if(a.nodeName.toLowerCase()!==r.toLowerCase())throw new y(`element with id '${n}' must be an ${r} element`);return a}decodeFromImage(n,r){if(!n&&!r)throw new y("either imageElement with a src set or an url must be provided");return r&&!n?this.decodeFromImageUrl(r):this.decodeFromImageElement(n)}decodeFromVideo(n,r){if(!n&&!r)throw new y("Either an element with a src set or an URL must be provided");return r&&!n?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,r,a){if(n===void 0&&r===void 0)throw new y("Either an element with a src set or an URL must be provided");return r&&!n?this.decodeFromVideoUrlContinuously(r,a):this.decodeFromVideoElementContinuously(n,a)}decodeFromImageElement(n){if(!n)throw new y("An image element must be provided.");this.reset();const r=this.prepareImageElement(n);this.imageElement=r;let a;return this.isImageLoaded(r)?a=this.decodeOnce(r,!1,!0):a=this._decodeOnLoadImage(r),a}decodeFromVideoElement(n){const r=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(n,r){const a=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(a,r)}_decodeFromVideoElementSetup(n){if(!n)throw new y("A video element must be provided.");this.reset();const r=this.prepareVideoElement(n);return this.videoElement=r,r}decodeFromImageUrl(n){if(!n)throw new y("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const a=this._decodeOnLoadImage(r);return r.src=n,a}decodeFromVideoUrl(n){if(!n)throw new y("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),a=this.decodeFromVideoElement(r);return r.src=n,a}decodeFromVideoUrlContinuously(n,r){if(!n)throw new y("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,r);return a.src=n,c}_decodeOnLoadImage(n){return new Promise((r,a)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(r,a),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return ie(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,r){return ie(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,r)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let r;return typeof n>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof n=="string"&&(r=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(r=n),r}prepareVideoElement(n){let r;return!n&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof n=="string"&&(r=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(r=n),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(n,r=!0,a=!0){this._stopAsyncDecode=!1;const c=(h,u)=>{if(this._stopAsyncDecode){u(new U("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const g=this.decode(n);h(g)}catch(g){const x=r&&g instanceof U,_=(g instanceof S||g instanceof B)&&a;if(x||_)return setTimeout(c,this._timeBetweenDecodingAttempts,h,u);u(g)}};return new Promise((h,u)=>c(h,u))}decodeContinuously(n,r){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(n);r(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){r(null,c);const h=c instanceof S||c instanceof B,u=c instanceof U;(h||u)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(n){const r=this.createBinaryBitmap(n);return this.decodeBitmap(r)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,r,a){r||(r={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(n,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(n,r,a=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(n,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const r=this.getCaptureCanvas(n),a=new Ie(r),c=new st(a);return new A(c)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const r=this.createCaptureCanvas(n);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let a,c;return typeof n<"u"&&(n instanceof HTMLVideoElement?(a=n.videoWidth,c=n.videoHeight):n instanceof HTMLImageElement&&(a=n.naturalWidth||n.width,c=n.naturalHeight||n.height)),r.style.width=a+"px",r.style.height=c+"px",r.width=a,r.height=c,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,r){try{n.srcObject=r}catch{n.src=URL.createObjectURL(r)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class ne{constructor(n,r,a=r==null?0:8*r.length,c,h,u=D.currentTimeMillis()){this.text=n,this.rawBytes=r,this.numBits=a,this.resultPoints=c,this.format=h,this.timestamp=u,this.text=n,this.rawBytes=r,a==null?this.numBits=r==null?0:8*r.length:this.numBits=a,this.resultPoints=c,this.format=h,this.resultMetadata=null,u==null?this.timestamp=D.currentTimeMillis():this.timestamp=u}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,r)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const r=this.resultPoints;if(r===null)this.resultPoints=n;else if(n!==null&&n.length>0){const a=new Array(r.length+n.length);D.arraycopy(r,0,a,0,r.length),D.arraycopy(n,0,a,r.length,n.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var qe;(function(C){C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(qe||(qe={}));var ct=qe,io;(function(C){C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(io||(io={}));var fe=io;class qn{constructor(n,r,a,c,h=-1,u=-1){this.rawBytes=n,this.text=r,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=u,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Zn{exp(n){return this.expTable[n]}log(n){if(n===0)throw new w;return this.logTable[n]}static addOrSubtract(n,r){return n^r}}class Oe{constructor(n,r){if(r.length===0)throw new w;this.field=n;const a=r.length;if(a>1&&r[0]===0){let c=1;for(;c<a&&r[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),D.arraycopy(r,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const r=this.coefficients;let a;if(n===1){a=0;for(let u=0,g=r.length;u!==g;u++){const x=r[u];a=Zn.addOrSubtract(a,x)}return a}a=r[0];const c=r.length,h=this.field;for(let u=1;u<c;u++)a=Zn.addOrSubtract(h.multiply(n,a),r[u]);return a}addOrSubtract(n){if(!this.field.equals(n.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let r=this.coefficients,a=n.coefficients;if(r.length>a.length){const u=r;r=a,a=u}let c=new Int32Array(a.length);const h=a.length-r.length;D.arraycopy(a,0,c,0,h);for(let u=h;u<a.length;u++)c[u]=Zn.addOrSubtract(r[u-h],a[u]);return new Oe(this.field,c)}multiply(n){if(!this.field.equals(n.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const r=this.coefficients,a=r.length,c=n.coefficients,h=c.length,u=new Int32Array(a+h-1),g=this.field;for(let x=0;x<a;x++){const b=r[x];for(let _=0;_<h;_++)u[x+_]=Zn.addOrSubtract(u[x+_],g.multiply(b,c[_]))}return new Oe(g,u)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const r=this.coefficients.length,a=this.field,c=new Int32Array(r),h=this.coefficients;for(let u=0;u<r;u++)c[u]=a.multiply(h[u],n);return new Oe(a,c)}multiplyByMonomial(n,r){if(n<0)throw new w;if(r===0)return this.field.getZero();const a=this.coefficients,c=a.length,h=new Int32Array(c+n),u=this.field;for(let g=0;g<c;g++)h[g]=u.multiply(a[g],r);return new Oe(u,h)}divide(n){if(!this.field.equals(n.field))throw new w("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new w("Divide by 0");const r=this.field;let a=r.getZero(),c=this;const h=n.getCoefficient(n.getDegree()),u=r.inverse(h);for(;c.getDegree()>=n.getDegree()&&!c.isZero();){const g=c.getDegree()-n.getDegree(),x=r.multiply(c.getCoefficient(c.getDegree()),u),b=n.multiplyByMonomial(g,x),_=r.buildMonomial(g,x);a=a.addOrSubtract(_),c=c.addOrSubtract(b)}return[a,c]}toString(){let n="";for(let r=this.getDegree();r>=0;r--){let a=this.getCoefficient(r);if(a!==0){if(a<0?(n+=" - ",a=-a):n.length>0&&(n+=" + "),r===0||a!==1){const c=this.field.log(a);c===0?n+="1":c===1?n+="a":(n+="a^",n+=c)}r!==0&&(r===1?n+="x":(n+="x^",n+=r))}}return n}}class Xs extends m{}Xs.kind="ArithmeticException";class Mt extends Zn{constructor(n,r,a){super(),this.primitive=n,this.size=r,this.generatorBase=a;const c=new Int32Array(r);let h=1;for(let g=0;g<r;g++)c[g]=h,h*=2,h>=r&&(h^=n,h&=r-1);this.expTable=c;const u=new Int32Array(r);for(let g=0;g<r-1;g++)u[c[g]]=g;this.logTable=u,this.zero=new Oe(this,Int32Array.from([0])),this.one=new Oe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,r){if(n<0)throw new w;if(r===0)return this.zero;const a=new Int32Array(n+1);return a[0]=r,new Oe(this,a)}inverse(n){if(n===0)throw new Xs;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+V.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Mt.AZTEC_DATA_12=new Mt(4201,4096,1),Mt.AZTEC_DATA_10=new Mt(1033,1024,1),Mt.AZTEC_DATA_6=new Mt(67,64,1),Mt.AZTEC_PARAM=new Mt(19,16,1),Mt.QR_CODE_FIELD_256=new Mt(285,256,0),Mt.DATA_MATRIX_FIELD_256=new Mt(301,256,1),Mt.AZTEC_DATA_8=Mt.DATA_MATRIX_FIELD_256,Mt.MAXICODE_FIELD_64=Mt.AZTEC_DATA_6;class In extends m{}In.kind="ReedSolomonException";class oi extends m{}oi.kind="IllegalStateException";class Kn{constructor(n){this.field=n}decode(n,r){const a=this.field,c=new Oe(a,n),h=new Int32Array(r);let u=!0;for(let T=0;T<r;T++){const O=c.evaluateAt(a.exp(T+a.getGeneratorBase()));h[h.length-1-T]=O,O!==0&&(u=!1)}if(u)return;const g=new Oe(a,h),x=this.runEuclideanAlgorithm(a.buildMonomial(r,1),g,r),b=x[0],_=x[1],E=this.findErrorLocations(b),v=this.findErrorMagnitudes(_,E);for(let T=0;T<E.length;T++){const O=n.length-1-a.log(E[T]);if(O<0)throw new In("Bad error location");n[O]=Mt.addOrSubtract(n[O],v[T])}}runEuclideanAlgorithm(n,r,a){if(n.getDegree()<r.getDegree()){const T=n;n=r,r=T}const c=this.field;let h=n,u=r,g=c.getZero(),x=c.getOne();for(;u.getDegree()>=(a/2|0);){let T=h,O=g;if(h=u,g=x,h.isZero())throw new In("r_{i-1} was zero");u=T;let N=c.getZero();const L=h.getCoefficient(h.getDegree()),H=c.inverse(L);for(;u.getDegree()>=h.getDegree()&&!u.isZero();){const Z=u.getDegree()-h.getDegree(),K=c.multiply(u.getCoefficient(u.getDegree()),H);N=N.addOrSubtract(c.buildMonomial(Z,K)),u=u.addOrSubtract(h.multiplyByMonomial(Z,K))}if(x=N.multiply(g).addOrSubtract(O),u.getDegree()>=h.getDegree())throw new oi("Division algorithm failed to reduce polynomial?")}const b=x.getCoefficient(0);if(b===0)throw new In("sigmaTilde(0) was zero");const _=c.inverse(b),E=x.multiplyScalar(_),v=u.multiplyScalar(_);return[E,v]}findErrorLocations(n){const r=n.getDegree();if(r===1)return Int32Array.from([n.getCoefficient(1)]);const a=new Int32Array(r);let c=0;const h=this.field;for(let u=1;u<h.getSize()&&c<r;u++)n.evaluateAt(u)===0&&(a[c]=h.inverse(u),c++);if(c!==r)throw new In("Error locator degree does not match number of roots");return a}findErrorMagnitudes(n,r){const a=r.length,c=new Int32Array(a),h=this.field;for(let u=0;u<a;u++){const g=h.inverse(r[u]);let x=1;for(let b=0;b<a;b++)if(u!==b){const _=h.multiply(r[b],g),E=_&1?_&-2:_|1;x=h.multiply(x,E)}c[u]=h.multiply(n.evaluateAt(g),h.inverse(x)),h.getGeneratorBase()!==0&&(c[u]=h.multiply(c[u],g))}return c}}var be;(function(C){C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY"})(be||(be={}));class Ut{decode(n){this.ddata=n;let r=n.getBits(),a=this.extractBits(r),c=this.correctBits(a),h=Ut.convertBoolArrayToByteArray(c),u=Ut.getEncodedData(c),g=new qn(h,u,null,null);return g.setNumBits(c.length),g}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let r=n.length,a=be.UPPER,c=be.UPPER,h="",u=0;for(;u<r;)if(c===be.BINARY){if(r-u<5)break;let g=Ut.readCode(n,u,5);if(u+=5,g===0){if(r-u<11)break;g=Ut.readCode(n,u,11)+31,u+=11}for(let x=0;x<g;x++){if(r-u<8){u=r;break}const b=Ut.readCode(n,u,8);h+=tt.castAsNonUtf8Char(b),u+=8}c=a}else{let g=c===be.DIGIT?4:5;if(r-u<g)break;let x=Ut.readCode(n,u,g);u+=g;let b=Ut.getCharacter(c,x);b.startsWith("CTRL_")?(a=c,c=Ut.getTable(b.charAt(5)),b.charAt(6)==="L"&&(a=c)):(h+=b,c=a)}return h}static getTable(n){switch(n){case"L":return be.LOWER;case"P":return be.PUNCT;case"M":return be.MIXED;case"D":return be.DIGIT;case"B":return be.BINARY;case"U":default:return be.UPPER}}static getCharacter(n,r){switch(n){case be.UPPER:return Ut.UPPER_TABLE[r];case be.LOWER:return Ut.LOWER_TABLE[r];case be.MIXED:return Ut.MIXED_TABLE[r];case be.PUNCT:return Ut.PUNCT_TABLE[r];case be.DIGIT:return Ut.DIGIT_TABLE[r];default:throw new oi("Bad table")}}correctBits(n){let r,a;this.ddata.getNbLayers()<=2?(a=6,r=Mt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,r=Mt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,r=Mt.AZTEC_DATA_10):(a=12,r=Mt.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),h=n.length/a;if(h<c)throw new B;let u=n.length%a,g=new Int32Array(h);for(let v=0;v<h;v++,u+=a)g[v]=Ut.readCode(n,u,a);try{new Kn(r).decode(g,h-c)}catch(v){throw new B(v)}let x=(1<<a)-1,b=0;for(let v=0;v<c;v++){let T=g[v];if(T===0||T===x)throw new B;(T===1||T===x-1)&&b++}let _=new Array(c*a-b),E=0;for(let v=0;v<c;v++){let T=g[v];if(T===1||T===x-1)_.fill(T>1,E,E+a-1),E+=a-1;else for(let O=a-1;O>=0;--O)_[E++]=(T&1<<O)!==0}return _}extractBits(n){let r=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(r?11:14)+a*4,h=new Int32Array(c),u=new Array(this.totalBitsInLayer(a,r));if(r)for(let g=0;g<h.length;g++)h[g]=g;else{let g=c+1+2*V.truncDivision(V.truncDivision(c,2)-1,15),x=c/2,b=V.truncDivision(g,2);for(let _=0;_<x;_++){let E=_+V.truncDivision(_,15);h[x-_-1]=b-E-1,h[x+_]=b+E+1}}for(let g=0,x=0;g<a;g++){let b=(a-g)*4+(r?9:12),_=g*2,E=c-1-_;for(let v=0;v<b;v++){let T=v*2;for(let O=0;O<2;O++)u[x+T+O]=n.get(h[_+O],h[_+v]),u[x+2*b+T+O]=n.get(h[_+v],h[E-O]),u[x+4*b+T+O]=n.get(h[E-O],h[E-v]),u[x+6*b+T+O]=n.get(h[E-v],h[_+O])}x+=b*8}return u}static readCode(n,r,a){let c=0;for(let h=r;h<r+a;h++)c<<=1,n[h]&&(c|=1);return c}static readByte(n,r){let a=n.length-r;return a>=8?Ut.readCode(n,r,8):Ut.readCode(n,r,a)<<8-a}static convertBoolArrayToByteArray(n){let r=new Uint8Array((n.length+7)/8);for(let a=0;a<r.length;a++)r[a]=Ut.readByte(n,8*a);return r}totalBitsInLayer(n,r){return((r?88:112)+16*n)*n}}Ut.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ut.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ut.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ut.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ut.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class St{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,r,a,c){const h=n-a,u=r-c;return Math.sqrt(h*h+u*u)}static sum(n){let r=0;for(let a=0,c=n.length;a!==c;a++){const h=n[a];r+=h}return r}}class Gs{static floatToIntBits(n){return n}}Gs.MAX_VALUE=Number.MAX_SAFE_INTEGER;class rt{constructor(n,r){this.x=n,this.y=r}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof rt){const r=n;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Gs.floatToIntBits(this.x)+Gs.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const r=this.distance(n[0],n[1]),a=this.distance(n[1],n[2]),c=this.distance(n[0],n[2]);let h,u,g;if(a>=r&&a>=c?(u=n[0],h=n[1],g=n[2]):c>=a&&c>=r?(u=n[1],h=n[0],g=n[2]):(u=n[2],h=n[0],g=n[1]),this.crossProductZ(h,u,g)<0){const x=h;h=g,g=x}n[0]=h,n[1]=u,n[2]=g}static distance(n,r){return St.distance(n.x,n.y,r.x,r.y)}static crossProductZ(n,r,a){const c=r.x,h=r.y;return(a.x-c)*(n.y-h)-(a.y-h)*(n.x-c)}}class qs{constructor(n,r){this.bits=n,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Pa extends qs{constructor(n,r,a,c,h){super(n,r),this.compact=a,this.nbDatablocks=c,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class bi{constructor(n,r,a,c){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),r==null&&(r=bi.INIT_SIZE),a==null&&(a=n.getWidth()/2|0),c==null&&(c=n.getHeight()/2|0);const h=r/2|0;if(this.leftInit=a-h,this.rightInit=a+h,this.upInit=c-h,this.downInit=c+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new U}detect(){let n=this.leftInit,r=this.rightInit,a=this.upInit,c=this.downInit,h=!1,u=!0,g=!1,x=!1,b=!1,_=!1,E=!1;const v=this.width,T=this.height;for(;u;){u=!1;let O=!0;for(;(O||!x)&&r<v;)O=this.containsBlackPoint(a,c,r,!1),O?(r++,u=!0,x=!0):x||r++;if(r>=v){h=!0;break}let N=!0;for(;(N||!b)&&c<T;)N=this.containsBlackPoint(n,r,c,!0),N?(c++,u=!0,b=!0):b||c++;if(c>=T){h=!0;break}let L=!0;for(;(L||!_)&&n>=0;)L=this.containsBlackPoint(a,c,n,!1),L?(n--,u=!0,_=!0):_||n--;if(n<0){h=!0;break}let H=!0;for(;(H||!E)&&a>=0;)H=this.containsBlackPoint(n,r,a,!0),H?(a--,u=!0,E=!0):E||a--;if(a<0){h=!0;break}u&&(g=!0)}if(!h&&g){const O=r-n;let N=null;for(let K=1;N===null&&K<O;K++)N=this.getBlackPointOnSegment(n,c-K,n+K,c);if(N==null)throw new U;let L=null;for(let K=1;L===null&&K<O;K++)L=this.getBlackPointOnSegment(n,a+K,n+K,a);if(L==null)throw new U;let H=null;for(let K=1;H===null&&K<O;K++)H=this.getBlackPointOnSegment(r,a+K,r-K,a);if(H==null)throw new U;let Z=null;for(let K=1;Z===null&&K<O;K++)Z=this.getBlackPointOnSegment(r,c-K,r-K,c);if(Z==null)throw new U;return this.centerEdges(Z,N,H,L)}else throw new U}getBlackPointOnSegment(n,r,a,c){const h=St.round(St.distance(n,r,a,c)),u=(a-n)/h,g=(c-r)/h,x=this.image;for(let b=0;b<h;b++){const _=St.round(n+b*u),E=St.round(r+b*g);if(x.get(_,E))return new rt(_,E)}return null}centerEdges(n,r,a,c){const h=n.getX(),u=n.getY(),g=r.getX(),x=r.getY(),b=a.getX(),_=a.getY(),E=c.getX(),v=c.getY(),T=bi.CORR;return h<this.width/2?[new rt(E-T,v+T),new rt(g+T,x+T),new rt(b-T,_-T),new rt(h+T,u-T)]:[new rt(E+T,v+T),new rt(g+T,x-T),new rt(b-T,_+T),new rt(h-T,u-T)]}containsBlackPoint(n,r,a,c){const h=this.image;if(c){for(let u=n;u<=r;u++)if(h.get(u,a))return!0}else for(let u=n;u<=r;u++)if(h.get(a,u))return!0;return!1}}bi.INIT_SIZE=10,bi.CORR=1;class no{static checkAndNudgePoints(n,r){const a=n.getWidth(),c=n.getHeight();let h=!0;for(let u=0;u<r.length&&h;u+=2){const g=Math.floor(r[u]),x=Math.floor(r[u+1]);if(g<-1||g>a||x<-1||x>c)throw new U;h=!1,g===-1?(r[u]=0,h=!0):g===a&&(r[u]=a-1,h=!0),x===-1?(r[u+1]=0,h=!0):x===c&&(r[u+1]=c-1,h=!0)}h=!0;for(let u=r.length-2;u>=0&&h;u-=2){const g=Math.floor(r[u]),x=Math.floor(r[u+1]);if(g<-1||g>a||x<-1||x>c)throw new U;h=!1,g===-1?(r[u]=0,h=!0):g===a&&(r[u]=a-1,h=!0),x===-1?(r[u+1]=0,h=!0):x===c&&(r[u+1]=c-1,h=!0)}}}class Ze{constructor(n,r,a,c,h,u,g,x,b){this.a11=n,this.a21=r,this.a31=a,this.a12=c,this.a22=h,this.a32=u,this.a13=g,this.a23=x,this.a33=b}static quadrilateralToQuadrilateral(n,r,a,c,h,u,g,x,b,_,E,v,T,O,N,L){const H=Ze.quadrilateralToSquare(n,r,a,c,h,u,g,x);return Ze.squareToQuadrilateral(b,_,E,v,T,O,N,L).times(H)}transformPoints(n){const r=n.length,a=this.a11,c=this.a12,h=this.a13,u=this.a21,g=this.a22,x=this.a23,b=this.a31,_=this.a32,E=this.a33;for(let v=0;v<r;v+=2){const T=n[v],O=n[v+1],N=h*T+x*O+E;n[v]=(a*T+u*O+b)/N,n[v+1]=(c*T+g*O+_)/N}}transformPointsWithValues(n,r){const a=this.a11,c=this.a12,h=this.a13,u=this.a21,g=this.a22,x=this.a23,b=this.a31,_=this.a32,E=this.a33,v=n.length;for(let T=0;T<v;T++){const O=n[T],N=r[T],L=h*O+x*N+E;n[T]=(a*O+u*N+b)/L,r[T]=(c*O+g*N+_)/L}}static squareToQuadrilateral(n,r,a,c,h,u,g,x){const b=n-a+h-g,_=r-c+u-x;if(b===0&&_===0)return new Ze(a-n,h-a,n,c-r,u-c,r,0,0,1);{const E=a-h,v=g-h,T=c-u,O=x-u,N=E*O-v*T,L=(b*O-v*_)/N,H=(E*_-b*T)/N;return new Ze(a-n+L*a,g-n+H*g,n,c-r+L*c,x-r+H*x,r,L,H,1)}}static quadrilateralToSquare(n,r,a,c,h,u,g,x){return Ze.squareToQuadrilateral(n,r,a,c,h,u,g,x).buildAdjoint()}buildAdjoint(){return new Ze(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new Ze(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class Ba extends no{sampleGrid(n,r,a,c,h,u,g,x,b,_,E,v,T,O,N,L,H,Z,K){const q=Ze.quadrilateralToQuadrilateral(c,h,u,g,x,b,_,E,v,T,O,N,L,H,Z,K);return this.sampleGridWithTransform(n,r,a,q)}sampleGridWithTransform(n,r,a,c){if(r<=0||a<=0)throw new U;const h=new Tt(r,a),u=new Float32Array(2*r);for(let g=0;g<a;g++){const x=u.length,b=g+.5;for(let _=0;_<x;_+=2)u[_]=_/2+.5,u[_+1]=b;c.transformPoints(u),no.checkAndNudgePoints(n,u);try{for(let _=0;_<x;_+=2)n.get(Math.floor(u[_]),Math.floor(u[_+1]))&&h.set(_/2,g)}catch{throw new U}}return h}}class ki{static setGridSampler(n){ki.gridSampler=n}static getInstance(){return ki.gridSampler}}ki.gridSampler=new Ba;class Me{constructor(n,r){this.x=n,this.y=r}toResultPoint(){return new rt(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Fa{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let r=this.getMatrixCenter(),a=this.getBullsEyeCorners(r);if(n){let u=a[0];a[0]=a[2],a[2]=u}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),h=this.getMatrixCornerPoints(a);return new Pa(c,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new U;let r=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(n[0],n[1],r),this.sampleLine(n[1],n[2],r),this.sampleLine(n[2],n[3],r),this.sampleLine(n[3],n[0],r)]);this.shift=this.getRotation(a,r);let c=0;for(let u=0;u<4;u++){let g=a[(this.shift+u)%4];this.compact?(c<<=7,c+=g>>1&127):(c<<=10,c+=(g>>2&992)+(g>>1&31))}let h=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(n,r){let a=0;n.forEach((c,h,u)=>{let g=(c>>r-2<<1)+(c&1);a=(a<<3)+g}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(V.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new U}getCorrectedParameterData(n,r){let a,c;r?(a=7,c=2):(a=10,c=4);let h=a-c,u=new Int32Array(a);for(let x=a-1;x>=0;--x)u[x]=n&15,n>>=4;try{new Kn(Mt.AZTEC_PARAM).decode(u,h)}catch{throw new U}let g=0;for(let x=0;x<c;x++)g=(g<<4)+u[x];return g}getBullsEyeCorners(n){let r=n,a=n,c=n,h=n,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let E=this.getFirstDifferent(r,u,1,-1),v=this.getFirstDifferent(a,u,1,1),T=this.getFirstDifferent(c,u,-1,1),O=this.getFirstDifferent(h,u,-1,-1);if(this.nbCenterLayers>2){let N=this.distancePoint(O,E)*this.nbCenterLayers/(this.distancePoint(h,r)*(this.nbCenterLayers+2));if(N<.75||N>1.25||!this.isWhiteOrBlackRectangle(E,v,T,O))break}r=E,a=v,c=T,h=O,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new U;this.compact=this.nbCenterLayers===5;let g=new rt(r.getX()+.5,r.getY()-.5),x=new rt(a.getX()+.5,a.getY()+.5),b=new rt(c.getX()-.5,c.getY()+.5),_=new rt(h.getX()-.5,h.getY()-.5);return this.expandSquare([g,x,b,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,r,a,c;try{let g=new bi(this.image).detect();n=g[0],r=g[1],a=g[2],c=g[3]}catch{let x=this.image.getWidth()/2,b=this.image.getHeight()/2;n=this.getFirstDifferent(new Me(x+7,b-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Me(x+7,b+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Me(x-7,b+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Me(x-7,b-7),!1,-1,-1).toResultPoint()}let h=St.round((n.getX()+c.getX()+r.getX()+a.getX())/4),u=St.round((n.getY()+c.getY()+r.getY()+a.getY())/4);try{let g=new bi(this.image,15,h,u).detect();n=g[0],r=g[1],a=g[2],c=g[3]}catch{n=this.getFirstDifferent(new Me(h+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Me(h+7,u+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Me(h-7,u+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Me(h-7,u-7),!1,-1,-1).toResultPoint()}return h=St.round((n.getX()+c.getX()+r.getX()+a.getX())/4),u=St.round((n.getY()+c.getY()+r.getY()+a.getY())/4),new Me(h,u)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,r,a,c,h){let u=ki.getInstance(),g=this.getDimension(),x=g/2-this.nbCenterLayers,b=g/2+this.nbCenterLayers;return u.sampleGrid(n,g,g,x,x,b,x,b,b,x,b,r.getX(),r.getY(),a.getX(),a.getY(),c.getX(),c.getY(),h.getX(),h.getY())}sampleLine(n,r,a){let c=0,h=this.distanceResultPoint(n,r),u=h/a,g=n.getX(),x=n.getY(),b=u*(r.getX()-n.getX())/h,_=u*(r.getY()-n.getY())/h;for(let E=0;E<a;E++)this.image.get(St.round(g+E*b),St.round(x+E*_))&&(c|=1<<a-E-1);return c}isWhiteOrBlackRectangle(n,r,a,c){let h=3;n=new Me(n.getX()-h,n.getY()+h),r=new Me(r.getX()-h,r.getY()-h),a=new Me(a.getX()+h,a.getY()-h),c=new Me(c.getX()+h,c.getY()+h);let u=this.getColor(c,n);if(u===0)return!1;let g=this.getColor(n,r);return g!==u||(g=this.getColor(r,a),g!==u)?!1:(g=this.getColor(a,c),g===u)}getColor(n,r){let a=this.distancePoint(n,r),c=(r.getX()-n.getX())/a,h=(r.getY()-n.getY())/a,u=0,g=n.getX(),x=n.getY(),b=this.image.get(n.getX(),n.getY()),_=Math.ceil(a);for(let v=0;v<_;v++)g+=c,x+=h,this.image.get(St.round(g),St.round(x))!==b&&u++;let E=u/a;return E>.1&&E<.9?0:E<=.1===b?1:-1}getFirstDifferent(n,r,a,c){let h=n.getX()+a,u=n.getY()+c;for(;this.isValid(h,u)&&this.image.get(h,u)===r;)h+=a,u+=c;for(h-=a,u-=c;this.isValid(h,u)&&this.image.get(h,u)===r;)h+=a;for(h-=a;this.isValid(h,u)&&this.image.get(h,u)===r;)u+=c;return u-=c,new Me(h,u)}expandSquare(n,r,a){let c=a/(2*r),h=n[0].getX()-n[2].getX(),u=n[0].getY()-n[2].getY(),g=(n[0].getX()+n[2].getX())/2,x=(n[0].getY()+n[2].getY())/2,b=new rt(g+c*h,x+c*u),_=new rt(g-c*h,x-c*u);h=n[1].getX()-n[3].getX(),u=n[1].getY()-n[3].getY(),g=(n[1].getX()+n[3].getX())/2,x=(n[1].getY()+n[3].getY())/2;let E=new rt(g+c*h,x+c*u),v=new rt(g-c*h,x-c*u);return[b,E,_,v]}isValid(n,r){return n>=0&&n<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(n){let r=St.round(n.getX()),a=St.round(n.getY());return this.isValid(r,a)}distancePoint(n,r){return St.distance(n.getX(),n.getY(),r.getX(),r.getY())}distanceResultPoint(n,r){return St.distance(n.getX(),n.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(V.truncDivision(this.nbLayers-4,8)+1)+15}}class Zs{decode(n,r=null){let a=null,c=new Fa(n.getBlackMatrix()),h=null,u=null;try{let _=c.detectMirror(!1);h=_.getPoints(),this.reportFoundResultPoints(r,h),u=new Ut().decode(_)}catch(_){a=_}if(u==null)try{let _=c.detectMirror(!0);h=_.getPoints(),this.reportFoundResultPoints(r,h),u=new Ut().decode(_)}catch(_){throw a??_}let g=new ne(u.getText(),u.getRawBytes(),u.getNumBits(),h,ct.AZTEC,D.currentTimeMillis()),x=u.getByteSegments();x!=null&&g.putMetadata(fe.BYTE_SEGMENTS,x);let b=u.getECLevel();return b!=null&&g.putMetadata(fe.ERROR_CORRECTION_LEVEL,b),g}reportFoundResultPoints(n,r){if(n!=null){let a=n.get(G.NEED_RESULT_POINT_CALLBACK);a!=null&&r.forEach((c,h,u)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class $d extends Te{constructor(n=500){super(new Zs,n)}}class ae{decode(n,r){try{return this.doDecode(n,r)}catch{if(r&&r.get(G.TRY_HARDER)===!0&&n.isRotateSupported()){const h=n.rotateCounterClockwise(),u=this.doDecode(h,r),g=u.getResultMetadata();let x=270;g!==null&&g.get(fe.ORIENTATION)===!0&&(x=x+g.get(fe.ORIENTATION)%360),u.putMetadata(fe.ORIENTATION,x);const b=u.getResultPoints();if(b!==null){const _=h.getHeight();for(let E=0;E<b.length;E++)b[E]=new rt(_-b[E].getY()-1,b[E].getX())}return u}else throw new U}}reset(){}doDecode(n,r){const a=n.getWidth(),c=n.getHeight();let h=new W(a);const u=r&&r.get(G.TRY_HARDER)===!0,g=Math.max(1,c>>(u?8:5));let x;u?x=c:x=15;const b=Math.trunc(c/2);for(let _=0;_<x;_++){const E=Math.trunc((_+1)/2),v=(_&1)===0,T=b+g*(v?E:-E);if(T<0||T>=c)break;try{h=n.getBlackRow(T,h)}catch{continue}for(let O=0;O<2;O++){if(O===1&&(h.reverse(),r&&r.get(G.NEED_RESULT_POINT_CALLBACK)===!0)){const N=new Map;r.forEach((L,H)=>N.set(H,L)),N.delete(G.NEED_RESULT_POINT_CALLBACK),r=N}try{const N=this.decodeRow(T,h,r);if(O===1){N.putMetadata(fe.ORIENTATION,180);const L=N.getResultPoints();L!==null&&(L[0]=new rt(a-L[0].getX()-1,L[0].getY()),L[1]=new rt(a-L[1].getX()-1,L[1].getY()))}return N}catch{}}}throw new U}static recordPattern(n,r,a){const c=a.length;for(let b=0;b<c;b++)a[b]=0;const h=n.getSize();if(r>=h)throw new U;let u=!n.get(r),g=0,x=r;for(;x<h;){if(n.get(x)!==u)a[g]++;else{if(++g===c)break;a[g]=1,u=!u}x++}if(!(g===c||g===c-1&&x===h))throw new U}static recordPatternInReverse(n,r,a){let c=a.length,h=n.get(r);for(;r>0&&c>=0;)n.get(--r)!==h&&(c--,h=!h);if(c>=0)throw new U;ae.recordPattern(n,r+1,a)}static patternMatchVariance(n,r,a){const c=n.length;let h=0,u=0;for(let b=0;b<c;b++)h+=n[b],u+=r[b];if(h<u)return Number.POSITIVE_INFINITY;const g=h/u;a*=g;let x=0;for(let b=0;b<c;b++){const _=n[b],E=r[b]*g,v=_>E?_-E:E-_;if(v>a)return Number.POSITIVE_INFINITY;x+=v}return x/h}}class et extends ae{static findStartPattern(n){const r=n.getSize(),a=n.getNextSet(0);let c=0,h=Int32Array.from([0,0,0,0,0,0]),u=a,g=!1;const x=6;for(let b=a;b<r;b++)if(n.get(b)!==g)h[c]++;else{if(c===x-1){let _=et.MAX_AVG_VARIANCE,E=-1;for(let v=et.CODE_START_A;v<=et.CODE_START_C;v++){const T=ae.patternMatchVariance(h,et.CODE_PATTERNS[v],et.MAX_INDIVIDUAL_VARIANCE);T<_&&(_=T,E=v)}if(E>=0&&n.isRange(Math.max(0,u-(b-u)/2),u,!1))return Int32Array.from([u,b,E]);u+=h[0]+h[1],h=h.slice(2,h.length-1),h[c-1]=0,h[c]=0,c--}else c++;h[c]=1,g=!g}throw new U}static decodeCode(n,r,a){ae.recordPattern(n,a,r);let c=et.MAX_AVG_VARIANCE,h=-1;for(let u=0;u<et.CODE_PATTERNS.length;u++){const g=et.CODE_PATTERNS[u],x=this.patternMatchVariance(r,g,et.MAX_INDIVIDUAL_VARIANCE);x<c&&(c=x,h=u)}if(h>=0)return h;throw new U}decodeRow(n,r,a){const c=a&&a.get(G.ASSUME_GS1)===!0,h=et.findStartPattern(r),u=h[2];let g=0;const x=new Uint8Array(20);x[g++]=u;let b;switch(u){case et.CODE_START_A:b=et.CODE_CODE_A;break;case et.CODE_START_B:b=et.CODE_CODE_B;break;case et.CODE_START_C:b=et.CODE_CODE_C;break;default:throw new B}let _=!1,E=!1,v="",T=h[0],O=h[1];const N=Int32Array.from([0,0,0,0,0,0]);let L=0,H=0,Z=u,K=0,q=!0,At=!1,xt=!1;for(;!_;){const Pn=E;switch(E=!1,L=H,H=et.decodeCode(r,N,O),x[g++]=H,H!==et.CODE_STOP&&(q=!0),H!==et.CODE_STOP&&(K++,Z+=K*H),T=O,O+=N.reduce((wu,_u)=>wu+_u,0),H){case et.CODE_START_A:case et.CODE_START_B:case et.CODE_START_C:throw new B}switch(b){case et.CODE_CODE_A:if(H<64)xt===At?v+=String.fromCharCode(32+H):v+=String.fromCharCode(32+H+128),xt=!1;else if(H<96)xt===At?v+=String.fromCharCode(H-64):v+=String.fromCharCode(H+64),xt=!1;else switch(H!==et.CODE_STOP&&(q=!1),H){case et.CODE_FNC_1:c&&(v.length===0?v+="]C1":v+="");break;case et.CODE_FNC_2:case et.CODE_FNC_3:break;case et.CODE_FNC_4_A:!At&&xt?(At=!0,xt=!1):At&&xt?(At=!1,xt=!1):xt=!0;break;case et.CODE_SHIFT:E=!0,b=et.CODE_CODE_B;break;case et.CODE_CODE_B:b=et.CODE_CODE_B;break;case et.CODE_CODE_C:b=et.CODE_CODE_C;break;case et.CODE_STOP:_=!0;break}break;case et.CODE_CODE_B:if(H<96)xt===At?v+=String.fromCharCode(32+H):v+=String.fromCharCode(32+H+128),xt=!1;else switch(H!==et.CODE_STOP&&(q=!1),H){case et.CODE_FNC_1:c&&(v.length===0?v+="]C1":v+="");break;case et.CODE_FNC_2:case et.CODE_FNC_3:break;case et.CODE_FNC_4_B:!At&&xt?(At=!0,xt=!1):At&&xt?(At=!1,xt=!1):xt=!0;break;case et.CODE_SHIFT:E=!0,b=et.CODE_CODE_A;break;case et.CODE_CODE_A:b=et.CODE_CODE_A;break;case et.CODE_CODE_C:b=et.CODE_CODE_C;break;case et.CODE_STOP:_=!0;break}break;case et.CODE_CODE_C:if(H<100)H<10&&(v+="0"),v+=H;else switch(H!==et.CODE_STOP&&(q=!1),H){case et.CODE_FNC_1:c&&(v.length===0?v+="]C1":v+="");break;case et.CODE_CODE_A:b=et.CODE_CODE_A;break;case et.CODE_CODE_B:b=et.CODE_CODE_B;break;case et.CODE_STOP:_=!0;break}break}Pn&&(b=b===et.CODE_CODE_A?et.CODE_CODE_B:et.CODE_CODE_A)}const Le=O-T;if(O=r.getNextUnset(O),!r.isRange(O,Math.min(r.getSize(),O+(O-T)/2),!1))throw new U;if(Z-=K*L,Z%103!==L)throw new S;const Qe=v.length;if(Qe===0)throw new U;Qe>0&&q&&(b===et.CODE_CODE_C?v=v.substring(0,Qe-2):v=v.substring(0,Qe-1));const Pe=(h[1]+h[0])/2,Ft=T+Le/2,_e=x.length,Ue=new Uint8Array(_e);for(let Pn=0;Pn<_e;Pn++)Ue[Pn]=x[Pn];const Ln=[new rt(Pe,n),new rt(Ft,n)];return new ne(v,Ue,0,Ln,ct.CODE_128,new Date().getTime())}}et.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],et.MAX_AVG_VARIANCE=.25,et.MAX_INDIVIDUAL_VARIANCE=.7,et.CODE_SHIFT=98,et.CODE_CODE_C=99,et.CODE_CODE_B=100,et.CODE_CODE_A=101,et.CODE_FNC_1=102,et.CODE_FNC_2=97,et.CODE_FNC_3=96,et.CODE_FNC_4_A=101,et.CODE_FNC_4_B=100,et.CODE_START_A=103,et.CODE_START_B=104,et.CODE_START_C=105,et.CODE_STOP=106;class ce extends ae{constructor(n=!1,r=!1){super(),this.usingCheckDigit=n,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,r,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let h=ce.findAsteriskPattern(r,c),u=r.getNextSet(h[1]),g=r.getSize(),x,b;do{ce.recordPattern(r,u,c);let N=ce.toNarrowWidePattern(c);if(N<0)throw new U;x=ce.patternToChar(N),this.decodeRowResult+=x,b=u;for(let L of c)u+=L;u=r.getNextSet(u)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let _=0;for(let N of c)_+=N;let E=u-b-_;if(u!==g&&E*2<_)throw new U;if(this.usingCheckDigit){let N=this.decodeRowResult.length-1,L=0;for(let H=0;H<N;H++)L+=ce.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(H));if(this.decodeRowResult.charAt(N)!==ce.ALPHABET_STRING.charAt(L%43))throw new S;this.decodeRowResult=this.decodeRowResult.substring(0,N)}if(this.decodeRowResult.length===0)throw new U;let v;this.extendedMode?v=ce.decodeExtended(this.decodeRowResult):v=this.decodeRowResult;let T=(h[1]+h[0])/2,O=b+_/2;return new ne(v,null,0,[new rt(T,n),new rt(O,n)],ct.CODE_39,new Date().getTime())}static findAsteriskPattern(n,r){let a=n.getSize(),c=n.getNextSet(0),h=0,u=c,g=!1,x=r.length;for(let b=c;b<a;b++)if(n.get(b)!==g)r[h]++;else{if(h===x-1){if(this.toNarrowWidePattern(r)===ce.ASTERISK_ENCODING&&n.isRange(Math.max(0,u-Math.floor((b-u)/2)),u,!1))return[u,b];u+=r[0]+r[1],r.copyWithin(0,2,2+h-1),r[h-1]=0,r[h]=0,h--}else h++;r[h]=1,g=!g}throw new U}static toNarrowWidePattern(n){let r=n.length,a=0,c;do{let h=2147483647;for(let x of n)x<h&&x>a&&(h=x);a=h,c=0;let u=0,g=0;for(let x=0;x<r;x++){let b=n[x];b>a&&(g|=1<<r-1-x,c++,u+=b)}if(c===3){for(let x=0;x<r&&c>0;x++){let b=n[x];if(b>a&&(c--,b*2>=u))return-1}return g}}while(c>3);return-1}static patternToChar(n){for(let r=0;r<ce.CHARACTER_ENCODINGS.length;r++)if(ce.CHARACTER_ENCODINGS[r]===n)return ce.ALPHABET_STRING.charAt(r);if(n===ce.ASTERISK_ENCODING)return"*";throw new U}static decodeExtended(n){let r=n.length,a="";for(let c=0;c<r;c++){let h=n.charAt(c);if(h==="+"||h==="$"||h==="%"||h==="/"){let u=n.charAt(c+1),g="\0";switch(h){case"+":if(u>="A"&&u<="Z")g=String.fromCharCode(u.charCodeAt(0)+32);else throw new B;break;case"$":if(u>="A"&&u<="Z")g=String.fromCharCode(u.charCodeAt(0)-64);else throw new B;break;case"%":if(u>="A"&&u<="E")g=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")g=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")g=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")g=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")g="\0";else if(u==="V")g="@";else if(u==="W")g="`";else if(u==="X"||u==="Y"||u==="Z")g="";else throw new B;break;case"/":if(u>="A"&&u<="O")g=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")g=":";else throw new B;break}a+=g,c++}else a+=h}return a}}ce.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ce.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ce.ASTERISK_ENCODING=148;class Pt extends ae{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,r,a){let c=this.decodeStart(r),h=this.decodeEnd(r),u=new gt;Pt.decodeMiddle(r,c[1],h[0],u);let g=u.toString(),x=null;a!=null&&(x=a.get(G.ALLOWED_LENGTHS)),x==null&&(x=Pt.DEFAULT_ALLOWED_LENGTHS);let b=g.length,_=!1,E=0;for(let O of x){if(b===O){_=!0;break}O>E&&(E=O)}if(!_&&b>E&&(_=!0),!_)throw new B;const v=[new rt(c[1],n),new rt(h[0],n)];return new ne(g,null,0,v,ct.ITF,new Date().getTime())}static decodeMiddle(n,r,a,c){let h=new Int32Array(10),u=new Int32Array(5),g=new Int32Array(5);for(h.fill(0),u.fill(0),g.fill(0);r<a;){ae.recordPattern(n,r,h);for(let b=0;b<5;b++){let _=2*b;u[b]=h[_],g[b]=h[_+1]}let x=Pt.decodeDigit(u);c.append(x.toString()),x=this.decodeDigit(g),c.append(x.toString()),h.forEach(function(b){r+=b})}}decodeStart(n){let r=Pt.skipWhiteSpace(n),a=Pt.findGuardPattern(n,r,Pt.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(n,a[0]),a}validateQuietZone(n,r){let a=this.narrowLineWidth*10;a=a<r?a:r;for(let c=r-1;a>0&&c>=0&&!n.get(c);c--)a--;if(a!==0)throw new U}static skipWhiteSpace(n){const r=n.getSize(),a=n.getNextSet(0);if(a===r)throw new U;return a}decodeEnd(n){n.reverse();try{let r=Pt.skipWhiteSpace(n),a;try{a=Pt.findGuardPattern(n,r,Pt.END_PATTERN_REVERSED[0])}catch(h){h instanceof U&&(a=Pt.findGuardPattern(n,r,Pt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,a[0]);let c=a[0];return a[0]=n.getSize()-a[1],a[1]=n.getSize()-c,a}finally{n.reverse()}}static findGuardPattern(n,r,a){let c=a.length,h=new Int32Array(c),u=n.getSize(),g=!1,x=0,b=r;h.fill(0);for(let _=r;_<u;_++)if(n.get(_)!==g)h[x]++;else{if(x===c-1){if(ae.patternMatchVariance(h,a,Pt.MAX_INDIVIDUAL_VARIANCE)<Pt.MAX_AVG_VARIANCE)return[b,_];b+=h[0]+h[1],D.arraycopy(h,2,h,0,x-1),h[x-1]=0,h[x]=0,x--}else x++;h[x]=1,g=!g}throw new U}static decodeDigit(n){let r=Pt.MAX_AVG_VARIANCE,a=-1,c=Pt.PATTERNS.length;for(let h=0;h<c;h++){let u=Pt.PATTERNS[h],g=ae.patternMatchVariance(n,u,Pt.MAX_INDIVIDUAL_VARIANCE);g<r?(r=g,a=h):g===r&&(a=-1)}if(a>=0)return a%10;throw new U}}Pt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Pt.MAX_AVG_VARIANCE=.38,Pt.MAX_INDIVIDUAL_VARIANCE=.5,Pt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Pt.START_PATTERN=Int32Array.from([1,1,1,1]),Pt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Zt extends ae{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let r=!1,a,c=0,h=Int32Array.from([0,0,0]);for(;!r;){h=Int32Array.from([0,0,0]),a=Zt.findGuardPattern(n,c,!1,this.START_END_PATTERN,h);let u=a[0];c=a[1];let g=u-(c-u);g>=0&&(r=n.isRange(g,u,!1))}return a}static checkChecksum(n){return Zt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let r=n.length;if(r===0)return!1;let a=parseInt(n.charAt(r-1),10);return Zt.getStandardUPCEANChecksum(n.substring(0,r-1))===a}static getStandardUPCEANChecksum(n){let r=n.length,a=0;for(let c=r-1;c>=0;c-=2){let h=n.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new B;a+=h}a*=3;for(let c=r-2;c>=0;c-=2){let h=n.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new B;a+=h}return(1e3-a)%10}static decodeEnd(n,r){return Zt.findGuardPattern(n,r,!1,Zt.START_END_PATTERN,new Int32Array(Zt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,r,a,c){return this.findGuardPattern(n,r,a,c,new Int32Array(c.length))}static findGuardPattern(n,r,a,c,h){let u=n.getSize();r=a?n.getNextUnset(r):n.getNextSet(r);let g=0,x=r,b=c.length,_=a;for(let E=r;E<u;E++)if(n.get(E)!==_)h[g]++;else{if(g===b-1){if(ae.patternMatchVariance(h,c,Zt.MAX_INDIVIDUAL_VARIANCE)<Zt.MAX_AVG_VARIANCE)return Int32Array.from([x,E]);x+=h[0]+h[1];let v=h.slice(2,h.length-1);for(let T=0;T<g-1;T++)h[T]=v[T];h[g-1]=0,h[g]=0,g--}else g++;h[g]=1,_=!_}throw new U}static decodeDigit(n,r,a,c){this.recordPattern(n,a,r);let h=this.MAX_AVG_VARIANCE,u=-1,g=c.length;for(let x=0;x<g;x++){let b=c[x],_=ae.patternMatchVariance(r,b,Zt.MAX_INDIVIDUAL_VARIANCE);_<h&&(h=_,u=x)}if(u>=0)return u;throw new U}}Zt.MAX_AVG_VARIANCE=.48,Zt.MAX_INDIVIDUAL_VARIANCE=.7,Zt.START_END_PATTERN=Int32Array.from([1,1,1]),Zt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Zt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Zt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Qn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,r,a){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(r,a,c),u=c.toString(),g=Qn.parseExtensionString(u),x=[new rt((a[0]+a[1])/2,n),new rt(h,n)],b=new ne(u,null,0,x,ct.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&b.putAllMetadata(g),b}decodeMiddle(n,r,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),u=r[1],g=0;for(let b=0;b<5&&u<h;b++){let _=Zt.decodeDigit(n,c,u,Zt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+_%10);for(let E of c)u+=E;_>=10&&(g|=1<<4-b),b!==4&&(u=n.getNextSet(u),u=n.getNextUnset(u))}if(a.length!==5)throw new U;let x=this.determineCheckDigit(g);if(Qn.extensionChecksum(a.toString())!==x)throw new U;return u}static extensionChecksum(n){let r=n.length,a=0;for(let c=r-2;c>=0;c-=2)a+=n.charAt(c).charCodeAt(0)-48;a*=3;for(let c=r-1;c>=0;c-=2)a+=n.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(n){for(let r=0;r<10;r++)if(n===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new U}static parseExtensionString(n){if(n.length!==5)return null;let r=Qn.parseExtension5String(n);return r==null?null:new Map([[fe.SUGGESTED_PRICE,r]])}static parseExtension5String(n){let r;switch(n.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let a=parseInt(n.substring(1)),c=(a/100).toString(),h=a%100,u=h<10?"0"+h:h.toString();return r+c+"."+u}}class so{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,r,a){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(r,a,c),u=c.toString(),g=so.parseExtensionString(u),x=[new rt((a[0]+a[1])/2,n),new rt(h,n)],b=new ne(u,null,0,x,ct.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&b.putAllMetadata(g),b}decodeMiddle(n,r,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),u=r[1],g=0;for(let x=0;x<2&&u<h;x++){let b=Zt.decodeDigit(n,c,u,Zt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+b%10);for(let _ of c)u+=_;b>=10&&(g|=1<<1-x),x!==1&&(u=n.getNextSet(u),u=n.getNextUnset(u))}if(a.length!==2)throw new U;if(parseInt(a.toString())%4!==g)throw new U;return u}static parseExtensionString(n){return n.length!==2?null:new Map([[fe.ISSUE_NUMBER,parseInt(n)]])}}class Ua{static decodeRow(n,r,a){let c=Zt.findGuardPattern(r,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Qn().decodeRow(n,r,c)}catch{return new so().decodeRow(n,r,c)}}}Ua.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Dt extends Zt{constructor(){super(),this.decodeRowStringBuffer="",Dt.L_AND_G_PATTERNS=Dt.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let r=Dt.L_PATTERNS[n-10],a=new Int32Array(r.length);for(let c=0;c<r.length;c++)a[c]=r[r.length-c-1];Dt.L_AND_G_PATTERNS[n]=a}}decodeRow(n,r,a){let c=Dt.findStartGuardPattern(r),h=a==null?null:a.get(G.NEED_RESULT_POINT_CALLBACK);if(h!=null){const q=new rt((c[0]+c[1])/2,n);h.foundPossibleResultPoint(q)}let u=this.decodeMiddle(r,c,this.decodeRowStringBuffer),g=u.rowOffset,x=u.resultString;if(h!=null){const q=new rt(g,n);h.foundPossibleResultPoint(q)}let b=this.decodeEnd(r,g);if(h!=null){const q=new rt((b[0]+b[1])/2,n);h.foundPossibleResultPoint(q)}let _=b[1],E=_+(_-b[0]);if(E>=r.getSize()||!r.isRange(_,E,!1))throw new U;let v=x.toString();if(v.length<8)throw new B;if(!Dt.checkChecksum(v))throw new S;let T=(c[1]+c[0])/2,O=(b[1]+b[0])/2,N=this.getBarcodeFormat(),L=[new rt(T,n),new rt(O,n)],H=new ne(v,null,0,L,N,new Date().getTime()),Z=0;try{let q=Ua.decodeRow(n,r,b[1]);H.putMetadata(fe.UPC_EAN_EXTENSION,q.getText()),H.putAllMetadata(q.getResultMetadata()),H.addResultPoints(q.getResultPoints()),Z=q.getText().length}catch{}let K=a==null?null:a.get(G.ALLOWED_EAN_EXTENSIONS);if(K!=null){let q=!1;for(let At in K)if(Z.toString()===At){q=!0;break}if(!q)throw new U}return H}decodeEnd(n,r){return Dt.findGuardPattern(n,r,!1,Dt.START_END_PATTERN,new Int32Array(Dt.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return Dt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let r=n.length;if(r===0)return!1;let a=parseInt(n.charAt(r-1),10);return Dt.getStandardUPCEANChecksum(n.substring(0,r-1))===a}static getStandardUPCEANChecksum(n){let r=n.length,a=0;for(let c=r-1;c>=0;c-=2){let h=n.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new B;a+=h}a*=3;for(let c=r-2;c>=0;c-=2){let h=n.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new B;a+=h}return(1e3-a)%10}}class en extends Dt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,r,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),u=r[1],g=0;for(let b=0;b<6&&u<h;b++){let _=Dt.decodeDigit(n,c,u,Dt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+_%10);for(let E of c)u+=E;_>=10&&(g|=1<<5-b)}a=en.determineFirstDigit(a,g),u=Dt.findGuardPattern(n,u,!0,Dt.MIDDLE_PATTERN,new Int32Array(Dt.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<6&&u<h;b++){let _=Dt.decodeDigit(n,c,u,Dt.L_PATTERNS);a+=String.fromCharCode(48+_);for(let E of c)u+=E}return{rowOffset:u,resultString:a}}getBarcodeFormat(){return ct.EAN_13}static determineFirstDigit(n,r){for(let a=0;a<10;a++)if(r===this.FIRST_DIGIT_ENCODINGS[a])return n=String.fromCharCode(48+a)+n,n;throw new U}}en.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Va extends Dt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,r,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),u=r[1];for(let x=0;x<4&&u<h;x++){let b=Dt.decodeDigit(n,c,u,Dt.L_PATTERNS);a+=String.fromCharCode(48+b);for(let _ of c)u+=_}u=Dt.findGuardPattern(n,u,!0,Dt.MIDDLE_PATTERN,new Int32Array(Dt.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&u<h;x++){let b=Dt.decodeDigit(n,c,u,Dt.L_PATTERNS);a+=String.fromCharCode(48+b);for(let _ of c)u+=_}return{rowOffset:u,resultString:a}}getBarcodeFormat(){return ct.EAN_8}}class za extends Dt{constructor(){super(...arguments),this.ean13Reader=new en}getBarcodeFormat(){return ct.UPC_A}decode(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,r,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,a))}decodeMiddle(n,r,a){return this.ean13Reader.decodeMiddle(n,r,a)}maybeReturnResult(n){let r=n.getText();if(r.charAt(0)==="0"){let a=new ne(r.substring(1),null,null,n.getResultPoints(),ct.UPC_A);return n.getResultMetadata()!=null&&a.putAllMetadata(n.getResultMetadata()),a}else throw new U}reset(){this.ean13Reader.reset()}}class Ke extends Dt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,r,a){const c=this.decodeMiddleCounters.map(b=>b);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const h=n.getSize();let u=r[1],g=0;for(let b=0;b<6&&u<h;b++){const _=Ke.decodeDigit(n,c,u,Ke.L_AND_G_PATTERNS);a+=String.fromCharCode(48+_%10);for(let E of c)u+=E;_>=10&&(g|=1<<5-b)}let x=Ke.determineNumSysAndCheckDigit(a,g);return{rowOffset:u,resultString:x}}decodeEnd(n,r){return Ke.findGuardPatternWithoutCounters(n,r,!0,Ke.MIDDLE_END_PATTERN)}checkChecksum(n){return Dt.checkChecksum(Ke.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,r){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let h=String.fromCharCode(48+a),u=String.fromCharCode(48+c);return h+n+u}throw U.getNotFoundInstance()}getBarcodeFormat(){return ct.UPC_E}static convertUPCEtoUPCA(n){const r=n.slice(1,7).split("").map(h=>h.charCodeAt(0)),a=new gt;a.append(n.charAt(0));let c=r[5];switch(c){case 0:case 1:case 2:a.appendChars(r,0,2),a.append(c),a.append("0000"),a.appendChars(r,2,3);break;case 3:a.appendChars(r,0,3),a.append("00000"),a.appendChars(r,3,2);break;case 4:a.appendChars(r,0,4),a.append("00000"),a.append(r[4]);break;default:a.appendChars(r,0,5),a.append("0000"),a.append(c);break}return n.length>=8&&a.append(n.charAt(7)),a.toString()}}Ke.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ke.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ro extends ae{constructor(n){super();let r=n==null?null:n.get(G.POSSIBLE_FORMATS),a=[];s(r)?(a.push(new en),a.push(new za),a.push(new Va),a.push(new Ke)):(r.indexOf(ct.EAN_13)>-1&&a.push(new en),r.indexOf(ct.UPC_A)>-1&&a.push(new za),r.indexOf(ct.EAN_8)>-1&&a.push(new Va),r.indexOf(ct.UPC_E)>-1&&a.push(new Ke)),this.readers=a}decodeRow(n,r,a){for(let c of this.readers)try{const h=c.decodeRow(n,r,a),u=h.getBarcodeFormat()===ct.EAN_13&&h.getText().charAt(0)==="0",g=a==null?null:a.get(G.POSSIBLE_FORMATS),x=g==null||g.includes(ct.UPC_A);if(u&&x){const b=h.getRawBytes(),_=new ne(h.getText().substring(1),b,b?b.length:null,h.getResultPoints(),ct.UPC_A);return _.putAllMetadata(h.getResultMetadata()),_}return h}catch{}throw new U}reset(){for(let n of this.readers)n.reset()}}class Ae extends ae{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,r){for(let a=0;a<r.length;a++)if(ae.patternMatchVariance(n,r[a],Ae.MAX_INDIVIDUAL_VARIANCE)<Ae.MAX_AVG_VARIANCE)return a;throw new U}static count(n){return St.sum(new Int32Array(n))}static increment(n,r){let a=0,c=r[0];for(let h=1;h<n.length;h++)r[h]>c&&(c=r[h],a=h);n[a]++}static decrement(n,r){let a=0,c=r[0];for(let h=1;h<n.length;h++)r[h]<c&&(c=r[h],a=h);n[a]--}static isFinderPattern(n){let r=n[0]+n[1],a=r+n[2]+n[3],c=r/a;if(c>=Ae.MIN_FINDER_PATTERN_RATIO&&c<=Ae.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;for(let g of n)g>u&&(u=g),g<h&&(h=g);return u<10*h}return!1}}Ae.MAX_AVG_VARIANCE=.2,Ae.MAX_INDIVIDUAL_VARIANCE=.45,Ae.MIN_FINDER_PATTERN_RATIO=9.5/12,Ae.MAX_FINDER_PATTERN_RATIO=12.5/14;class Tn{constructor(n,r){this.value=n,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof Tn))return!1;const r=n;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ks{constructor(n,r,a,c,h){this.value=n,this.startEnd=r,this.value=n,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new rt(a,h)),this.resultPoints.push(new rt(c,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof Ks))return!1;const r=n;return this.value===r.value}hashCode(){return this.value}}class ai{constructor(){}static getRSSvalue(n,r,a){let c=0;for(let x of n)c+=x;let h=0,u=0,g=n.length;for(let x=0;x<g-1;x++){let b;for(b=1,u|=1<<x;b<n[x];b++,u&=~(1<<x)){let _=ai.combins(c-b-1,g-x-2);if(a&&u===0&&c-b-(g-x-1)>=g-x-1&&(_-=ai.combins(c-b-(g-x),g-x-2)),g-x-1>1){let E=0;for(let v=c-b-(g-x-2);v>r;v--)E+=ai.combins(c-b-v-1,g-x-3);_-=E*(g-1-x)}else c-b>r&&_--;h+=_}c-=b}return h}static combins(n,r){let a,c;n-r>r?(c=r,a=n-r):(c=n-r,a=r);let h=1,u=1;for(let g=n;g>a;g--)h*=g,u<=c&&(h/=u,u++);for(;u<=c;)h/=u,u++;return h}}class Yd{static buildBitArray(n){let r=n.length*2-1;n[n.length-1].getRightChar()==null&&(r-=1);let a=12*r,c=new W(a),h=0,g=n[0].getRightChar().getValue();for(let x=11;x>=0;--x)g&1<<x&&c.set(h),h++;for(let x=1;x<n.length;++x){let b=n[x],_=b.getLeftChar().getValue();for(let E=11;E>=0;--E)_&1<<E&&c.set(h),h++;if(b.getRightChar()!=null){let E=b.getRightChar().getValue();for(let v=11;v>=0;--v)E&1<<v&&c.set(h),h++}}return c}}class nn{constructor(n,r){r?this.decodedInformation=null:(this.finished=n,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class oo{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class ke extends oo{constructor(n,r){super(n),this.value=r}getValue(){return this.value}isFNC1(){return this.value===ke.FNC1}}ke.FNC1="$";class sn extends oo{constructor(n,r,a){super(n),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class We extends oo{constructor(n,r,a){if(super(n),r<0||r>10||a<0||a>10)throw new B;this.firstDigit=r,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===We.FNC1}isSecondDigitFNC1(){return this.secondDigit===We.FNC1}isAnyFNC1(){return this.firstDigit===We.FNC1||this.secondDigit===We.FNC1}}We.FNC1=10;class it{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new U;let r=n.substring(0,2);for(let h of it.TWO_DIGIT_DATA_LENGTH)if(h[0]===r)return h[1]===it.VARIABLE_LENGTH?it.processVariableAI(2,h[2],n):it.processFixedAI(2,h[1],n);if(n.length<3)throw new U;let a=n.substring(0,3);for(let h of it.THREE_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===it.VARIABLE_LENGTH?it.processVariableAI(3,h[2],n):it.processFixedAI(3,h[1],n);for(let h of it.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===it.VARIABLE_LENGTH?it.processVariableAI(4,h[2],n):it.processFixedAI(4,h[1],n);if(n.length<4)throw new U;let c=n.substring(0,4);for(let h of it.FOUR_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===it.VARIABLE_LENGTH?it.processVariableAI(4,h[2],n):it.processFixedAI(4,h[1],n);throw new U}static processFixedAI(n,r,a){if(a.length<n)throw new U;let c=a.substring(0,n);if(a.length<n+r)throw new U;let h=a.substring(n,n+r),u=a.substring(n+r),g="("+c+")"+h,x=it.parseFieldsInGeneralPurpose(u);return x==null?g:g+x}static processVariableAI(n,r,a){let c=a.substring(0,n),h;a.length<n+r?h=a.length:h=n+r;let u=a.substring(n,h),g=a.substring(h),x="("+c+")"+u,b=it.parseFieldsInGeneralPurpose(g);return b==null?x:x+b}}it.VARIABLE_LENGTH=[],it.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",it.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",it.VARIABLE_LENGTH,20],["22",it.VARIABLE_LENGTH,29],["30",it.VARIABLE_LENGTH,8],["37",it.VARIABLE_LENGTH,8],["90",it.VARIABLE_LENGTH,30],["91",it.VARIABLE_LENGTH,30],["92",it.VARIABLE_LENGTH,30],["93",it.VARIABLE_LENGTH,30],["94",it.VARIABLE_LENGTH,30],["95",it.VARIABLE_LENGTH,30],["96",it.VARIABLE_LENGTH,30],["97",it.VARIABLE_LENGTH,3],["98",it.VARIABLE_LENGTH,30],["99",it.VARIABLE_LENGTH,30]],it.THREE_DIGIT_DATA_LENGTH=[["240",it.VARIABLE_LENGTH,30],["241",it.VARIABLE_LENGTH,30],["242",it.VARIABLE_LENGTH,6],["250",it.VARIABLE_LENGTH,30],["251",it.VARIABLE_LENGTH,30],["253",it.VARIABLE_LENGTH,17],["254",it.VARIABLE_LENGTH,20],["400",it.VARIABLE_LENGTH,30],["401",it.VARIABLE_LENGTH,30],["402",17],["403",it.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",it.VARIABLE_LENGTH,20],["421",it.VARIABLE_LENGTH,15],["422",3],["423",it.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],it.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",it.VARIABLE_LENGTH,15],["391",it.VARIABLE_LENGTH,18],["392",it.VARIABLE_LENGTH,15],["393",it.VARIABLE_LENGTH,18],["703",it.VARIABLE_LENGTH,30]],it.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",it.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",it.VARIABLE_LENGTH,20],["8003",it.VARIABLE_LENGTH,30],["8004",it.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",it.VARIABLE_LENGTH,30],["8008",it.VARIABLE_LENGTH,12],["8018",18],["8020",it.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",it.VARIABLE_LENGTH,70],["8200",it.VARIABLE_LENGTH,70]];class Mn{constructor(n){this.buffer=new gt,this.information=n}decodeAllCodes(n,r){let a=r,c=null;do{let h=this.decodeGeneralPurposeField(a,c),u=it.parseFieldsInGeneralPurpose(h.getNewString());if(u!=null&&n.append(u),h.isRemaining()?c=""+h.getRemainingValue():c=null,a===h.getNewPosition())break;a=h.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let r=n;r<n+3;++r)if(this.information.get(r))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(n,4);return h===0?new We(this.information.getSize(),We.FNC1,We.FNC1):new We(this.information.getSize(),h-1,We.FNC1)}let r=this.extractNumericValueFromBitArray(n,7),a=(r-8)/11,c=(r-8)%11;return new We(n+7,a,c)}extractNumericValueFromBitArray(n,r){return Mn.extractNumericValueFromBitArray(this.information,n,r)}static extractNumericValueFromBitArray(n,r,a){let c=0;for(let h=0;h<a;++h)n.get(r+h)&&(c|=1<<a-h-1);return c}decodeGeneralPurposeField(n,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(n);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new sn(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new sn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,r;do{let a=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),n=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),n=r.isFinished()):(r=this.parseNumericBlock(),n=r.isFinished()),!(a!==this.current.getPosition())&&!n)break}while(!n);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let r;return n.isSecondDigitFNC1()?r=new sn(this.current.getPosition(),this.buffer.toString()):r=new sn(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new nn(!0,r)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let r=new sn(this.current.getPosition(),this.buffer.toString());return new nn(!0,r)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new nn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let r=new sn(this.current.getPosition(),this.buffer.toString());return new nn(!0,r)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new nn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let r=new sn(this.current.getPosition(),this.buffer.toString());return new nn(!0,r)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new nn(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(n,5);if(r>=5&&r<16)return!0;if(n+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,7);if(a>=64&&a<116)return!0;if(n+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(n,8);return c>=232&&c<253}decodeIsoIec646(n){let r=this.extractNumericValueFromBitArray(n,5);if(r===15)return new ke(n+5,ke.FNC1);if(r>=5&&r<15)return new ke(n+5,"0"+(r-5));let a=this.extractNumericValueFromBitArray(n,7);if(a>=64&&a<90)return new ke(n+7,""+(a+1));if(a>=90&&a<116)return new ke(n+7,""+(a+7));let c=this.extractNumericValueFromBitArray(n,8),h;switch(c){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new B}return new ke(n+8,h)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(n,5);if(r>=5&&r<16)return!0;if(n+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,6);return a>=16&&a<63}decodeAlphanumeric(n){let r=this.extractNumericValueFromBitArray(n,5);if(r===15)return new ke(n+5,ke.FNC1);if(r>=5&&r<15)return new ke(n+5,"0"+(r-5));let a=this.extractNumericValueFromBitArray(n,6);if(a>=32&&a<58)return new ke(n+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new oi("Decoding invalid alphanumeric value: "+a)}return new ke(n+6,c)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let r=0;r<5&&r+n<this.information.getSize();++r)if(r===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+r))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let r=n;r<n+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let r=0;r<4&&r+n<this.information.getSize();++r)if(this.information.get(n+r))return!1;return!0}}class ao{constructor(n){this.information=n,this.generalDecoder=new Mn(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ne extends ao{constructor(n){super(n)}encodeCompressedGtin(n,r){n.append("(01)");let a=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,a)}encodeCompressedGtinWithoutAI(n,r,a){for(let c=0;c<4;++c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*c,10);h/100===0&&n.append("0"),h/10===0&&n.append("0"),n.append(h)}Ne.appendCheckDigit(n,a)}static appendCheckDigit(n,r){let a=0;for(let c=0;c<13;c++){let h=n.charAt(c+r).charCodeAt(0)-48;a+=c&1?h:3*h}a=10-a%10,a===10&&(a=0),n.append(a)}}Ne.GTIN_SIZE=40;class Dn extends Ne{constructor(n){super(n)}parseInformation(){let n=new gt;n.append("(01)");let r=n.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(Dn.HEADER_SIZE,4);return n.append(a),this.encodeCompressedGtinWithoutAI(n,Dn.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,Dn.HEADER_SIZE+44)}}Dn.HEADER_SIZE=4;class Qs extends ao{constructor(n){super(n)}parseInformation(){let n=new gt;return this.getGeneralDecoder().decodeAllCodes(n,Qs.HEADER_SIZE)}}Qs.HEADER_SIZE=5;class Js extends Ne{constructor(n){super(n)}encodeCompressedWeight(n,r,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(r,a);this.addWeightCode(n,c);let h=this.checkWeight(c),u=1e5;for(let g=0;g<5;++g)h/u===0&&n.append("0"),u/=10;n.append(h)}}class li extends Js{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=li.HEADER_SIZE+Js.GTIN_SIZE+li.WEIGHT_SIZE)throw new U;let n=new gt;return this.encodeCompressedGtin(n,li.HEADER_SIZE),this.encodeCompressedWeight(n,li.HEADER_SIZE+Js.GTIN_SIZE,li.WEIGHT_SIZE),n.toString()}}li.HEADER_SIZE=5,li.WEIGHT_SIZE=15;class Xd extends li{constructor(n){super(n)}addWeightCode(n,r){n.append("(3103)")}checkWeight(n){return n}}class Gd extends li{constructor(n){super(n)}addWeightCode(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class ci extends Ne{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<ci.HEADER_SIZE+Ne.GTIN_SIZE)throw new U;let n=new gt;this.encodeCompressedGtin(n,ci.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(ci.HEADER_SIZE+Ne.GTIN_SIZE,ci.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(ci.HEADER_SIZE+Ne.GTIN_SIZE+ci.LAST_DIGIT_SIZE,null);return n.append(a.getNewString()),n.toString()}}ci.HEADER_SIZE=8,ci.LAST_DIGIT_SIZE=2;class De extends Ne{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<De.HEADER_SIZE+Ne.GTIN_SIZE)throw new U;let n=new gt;this.encodeCompressedGtin(n,De.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(De.HEADER_SIZE+Ne.GTIN_SIZE,De.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(De.HEADER_SIZE+Ne.GTIN_SIZE+De.LAST_DIGIT_SIZE,De.FIRST_THREE_DIGITS_SIZE);a/100==0&&n.append("0"),a/10==0&&n.append("0"),n.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(De.HEADER_SIZE+Ne.GTIN_SIZE+De.LAST_DIGIT_SIZE+De.FIRST_THREE_DIGITS_SIZE,null);return n.append(c.getNewString()),n.toString()}}De.HEADER_SIZE=8,De.LAST_DIGIT_SIZE=2,De.FIRST_THREE_DIGITS_SIZE=10;class Gt extends Js{constructor(n,r,a){super(n),this.dateCode=a,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=Gt.HEADER_SIZE+Gt.GTIN_SIZE+Gt.WEIGHT_SIZE+Gt.DATE_SIZE)throw new U;let n=new gt;return this.encodeCompressedGtin(n,Gt.HEADER_SIZE),this.encodeCompressedWeight(n,Gt.HEADER_SIZE+Gt.GTIN_SIZE,Gt.WEIGHT_SIZE),this.encodeCompressedDate(n,Gt.HEADER_SIZE+Gt.GTIN_SIZE+Gt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,r){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,Gt.DATE_SIZE);if(a==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let c=a%32;a/=32;let h=a%12+1;a/=12;let u=a;u/10==0&&n.append("0"),n.append(u),h/10==0&&n.append("0"),n.append(h),c/10==0&&n.append("0"),n.append(c)}addWeightCode(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")}checkWeight(n){return n%1e5}}Gt.HEADER_SIZE=8,Gt.WEIGHT_SIZE=20,Gt.DATE_SIZE=16;function Ha(C){try{if(C.get(1))return new Dn(C);if(!C.get(2))return new Qs(C);switch(Mn.extractNumericValueFromBitArray(C,1,4)){case 4:return new Xd(C);case 5:return new Gd(C)}switch(Mn.extractNumericValueFromBitArray(C,1,5)){case 12:return new ci(C);case 13:return new De(C)}switch(Mn.extractNumericValueFromBitArray(C,1,7)){case 56:return new Gt(C,"310","11");case 57:return new Gt(C,"320","11");case 58:return new Gt(C,"310","13");case 59:return new Gt(C,"320","13");case 60:return new Gt(C,"310","15");case 61:return new Gt(C,"320","15");case 62:return new Gt(C,"310","17");case 63:return new Gt(C,"320","17")}}catch(n){throw console.log(n),new oi("unknown decoder: "+C)}}class Ni{constructor(n,r,a,c){this.leftchar=n,this.rightchar=r,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,r){return n instanceof Ni?Ni.equalsOrNull(n.leftchar,r.leftchar)&&Ni.equalsOrNull(n.rightchar,r.rightchar)&&Ni.equalsOrNull(n.finderpattern,r.finderpattern):!1}static equalsOrNull(n,r){return n===null?r===null:Ni.equals(n,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class lo{constructor(n,r,a){this.pairs=n,this.rowNumber=r,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,r){return n instanceof lo?this.checkEqualitity(n,r)&&n.wasReversed===r.wasReversed:!1}checkEqualitity(n,r){if(!n||!r)return;let a;return n.forEach((c,h)=>{r.forEach(u=>{c.getLeftChar().getValue()===u.getLeftChar().getValue()&&c.getRightChar().getValue()===u.getRightChar().getValue()&&c.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(a=!0)})}),a}}class X extends Ae{constructor(n){super(...arguments),this.pairs=new Array(X.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,r,a){this.pairs.length=0,this.startFromEven=!1;try{return X.constructResult(this.decodeRow2pairs(n,r))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,X.constructResult(this.decodeRow2pairs(n,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,r){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(h){if(h instanceof U){if(!this.pairs.length)throw new U;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(n,!1),c){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new U}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return n&&(this.rows=this.rows.reverse()),r}checkRows(n,r){for(let a=r;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let u of n)this.pairs.push(u.getPairs());if(this.pairs.push(c.getPairs()),!X.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(n);h.push(c);try{return this.checkRows(h,a+1)}catch(u){this.verbose&&console.log(u)}}throw new U}static isValidSequence(n){for(let r of X.FINDER_PATTERN_SEQUENCES){if(n.length>r.length)continue;let a=!0;for(let c=0;c<n.length;c++)if(n[c].getFinderPattern().getValue()!=r[c]){a=!1;break}if(a)return!0}return!1}storeRow(n,r){let a=0,c=!1,h=!1;for(;a<this.rows.length;){let u=this.rows[a];if(u.getRowNumber()>n){h=u.isEquivalent(this.pairs);break}c=u.isEquivalent(this.pairs),a++}h||c||X.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new lo(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,r){for(let a of r)if(a.getPairs().length!==n.length){for(let c of a.getPairs())for(let h of n)if(Ni.equals(c,h))break}}static isPartialRow(n,r){for(let a of r){let c=!0;for(let h of n){let u=!1;for(let g of a.getPairs())if(h.equals(g)){u=!0;break}if(!u){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(n){let r=Yd.buildBitArray(n),c=Ha(r).parseInformation(),h=n[0].getFinderPattern().getResultPoints(),u=n[n.length-1].getFinderPattern().getResultPoints(),g=[h[0],h[1],u[0],u[1]];return new ne(c,null,null,g,ct.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),r=n.getLeftChar(),a=n.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),h=2;for(let g=1;g<this.pairs.size();++g){let x=this.pairs.get(g);c+=x.getLeftChar().getChecksumPortion(),h++;let b=x.getRightChar();b!=null&&(c+=b.getChecksumPortion(),h++)}return c%=211,211*(h-4)+c==r.getValue()}static getNextSecondBar(n,r){let a;return n.get(r)?(a=n.getNextUnset(r),a=n.getNextSet(a)):(a=n.getNextSet(r),a=n.getNextUnset(a)),a}retrieveNextPair(n,r,a){let c=r.length%2==0;this.startFromEven&&(c=!c);let h,u=!0,g=-1;do this.findNextPair(n,r,g),h=this.parseFoundFinderPattern(n,a,c),h==null?g=X.getNextSecondBar(n,this.startEnd[0]):u=!1;while(u);let x=this.decodeDataCharacter(n,h,c,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new U;let b;try{b=this.decodeDataCharacter(n,h,c,!1)}catch(_){b=null,this.verbose&&console.log(_)}return new Ni(x,b,h,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,r,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),u;a>=0?u=a:this.isEmptyPair(r)?u=0:u=r[r.length-1].getFinderPattern().getStartEnd()[1];let g=r.length%2!=0;this.startFromEven&&(g=!g);let x=!1;for(;u<h&&(x=!n.get(u),!!x);)u++;let b=0,_=u;for(let E=u;E<h;E++)if(n.get(E)!=x)c[b]++;else{if(b==3){if(g&&X.reverseCounters(c),X.isFinderPattern(c)){this.startEnd[0]=_,this.startEnd[1]=E;return}g&&X.reverseCounters(c),_+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,b--}else b++;c[b]=1,x=!x}throw new U}static reverseCounters(n){let r=n.length;for(let a=0;a<r/2;++a){let c=n[a];n[a]=n[r-a-1],n[r-a-1]=c}}parseFoundFinderPattern(n,r,a){let c,h,u;if(a){let b=this.startEnd[0]-1;for(;b>=0&&!n.get(b);)b--;b++,c=this.startEnd[0]-b,h=b,u=this.startEnd[1]}else h=this.startEnd[0],u=n.getNextUnset(this.startEnd[1]+1),c=u-this.startEnd[1];let g=this.getDecodeFinderCounters();D.arraycopy(g,0,g,1,g.length-1),g[0]=c;let x;try{x=this.parseFinderValue(g,X.FINDER_PATTERNS)}catch{return null}return new Ks(x,[h,u],h,u,r)}decodeDataCharacter(n,r,a,c){let h=this.getDataCharacterCounters();for(let Ft=0;Ft<h.length;Ft++)h[Ft]=0;if(c)X.recordPatternInReverse(n,r.getStartEnd()[0],h);else{X.recordPattern(n,r.getStartEnd()[1],h);for(let Ft=0,_e=h.length-1;Ft<_e;Ft++,_e--){let Ue=h[Ft];h[Ft]=h[_e],h[_e]=Ue}}let u=17,g=St.sum(new Int32Array(h))/u,x=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-x)/x>.3)throw new U;let b=this.getOddCounts(),_=this.getEvenCounts(),E=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let Ft=0;Ft<h.length;Ft++){let _e=1*h[Ft]/g,Ue=_e+.5;if(Ue<1){if(_e<.3)throw new U;Ue=1}else if(Ue>8){if(_e>8.7)throw new U;Ue=8}let Ln=Ft/2;Ft&1?(_[Ln]=Ue,v[Ln]=_e-Ue):(b[Ln]=Ue,E[Ln]=_e-Ue)}this.adjustOddEvenCounts(u);let T=4*r.getValue()+(a?0:2)+(c?0:1)-1,O=0,N=0;for(let Ft=b.length-1;Ft>=0;Ft--){if(X.isNotA1left(r,a,c)){let _e=X.WEIGHTS[T][2*Ft];N+=b[Ft]*_e}O+=b[Ft]}let L=0;for(let Ft=_.length-1;Ft>=0;Ft--)if(X.isNotA1left(r,a,c)){let _e=X.WEIGHTS[T][2*Ft+1];L+=_[Ft]*_e}let H=N+L;if(O&1||O>13||O<4)throw new U;let Z=(13-O)/2,K=X.SYMBOL_WIDEST[Z],q=9-K,At=ai.getRSSvalue(b,K,!0),xt=ai.getRSSvalue(_,q,!1),Le=X.EVEN_TOTAL_SUBSET[Z],Qe=X.GSUM[Z],Pe=At*Le+xt+Qe;return new Tn(Pe,H)}static isNotA1left(n,r,a){return!(n.getValue()==0&&r&&a)}adjustOddEvenCounts(n){let r=St.sum(new Int32Array(this.getOddCounts())),a=St.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1;r>13?h=!0:r<4&&(c=!0);let u=!1,g=!1;a>13?g=!0:a<4&&(u=!0);let x=r+a-n,b=(r&1)==1,_=(a&1)==0;if(x==1)if(b){if(_)throw new U;h=!0}else{if(!_)throw new U;g=!0}else if(x==-1)if(b){if(_)throw new U;c=!0}else{if(!_)throw new U;u=!0}else if(x==0){if(b){if(!_)throw new U;r<a?(c=!0,g=!0):(h=!0,u=!0)}else if(_)throw new U}else throw new U;if(c){if(h)throw new U;X.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&X.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(g)throw new U;X.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&X.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}X.SYMBOL_WIDEST=[7,5,4,3,1],X.EVEN_TOTAL_SUBSET=[4,20,52,104,204],X.GSUM=[0,348,1388,2948,3988],X.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],X.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],X.FINDER_PAT_A=0,X.FINDER_PAT_B=1,X.FINDER_PAT_C=2,X.FINDER_PAT_D=3,X.FINDER_PAT_E=4,X.FINDER_PAT_F=5,X.FINDER_PATTERN_SEQUENCES=[[X.FINDER_PAT_A,X.FINDER_PAT_A],[X.FINDER_PAT_A,X.FINDER_PAT_B,X.FINDER_PAT_B],[X.FINDER_PAT_A,X.FINDER_PAT_C,X.FINDER_PAT_B,X.FINDER_PAT_D],[X.FINDER_PAT_A,X.FINDER_PAT_E,X.FINDER_PAT_B,X.FINDER_PAT_D,X.FINDER_PAT_C],[X.FINDER_PAT_A,X.FINDER_PAT_E,X.FINDER_PAT_B,X.FINDER_PAT_D,X.FINDER_PAT_D,X.FINDER_PAT_F],[X.FINDER_PAT_A,X.FINDER_PAT_E,X.FINDER_PAT_B,X.FINDER_PAT_D,X.FINDER_PAT_E,X.FINDER_PAT_F,X.FINDER_PAT_F],[X.FINDER_PAT_A,X.FINDER_PAT_A,X.FINDER_PAT_B,X.FINDER_PAT_B,X.FINDER_PAT_C,X.FINDER_PAT_C,X.FINDER_PAT_D,X.FINDER_PAT_D],[X.FINDER_PAT_A,X.FINDER_PAT_A,X.FINDER_PAT_B,X.FINDER_PAT_B,X.FINDER_PAT_C,X.FINDER_PAT_C,X.FINDER_PAT_D,X.FINDER_PAT_E,X.FINDER_PAT_E],[X.FINDER_PAT_A,X.FINDER_PAT_A,X.FINDER_PAT_B,X.FINDER_PAT_B,X.FINDER_PAT_C,X.FINDER_PAT_C,X.FINDER_PAT_D,X.FINDER_PAT_E,X.FINDER_PAT_F,X.FINDER_PAT_F],[X.FINDER_PAT_A,X.FINDER_PAT_A,X.FINDER_PAT_B,X.FINDER_PAT_B,X.FINDER_PAT_C,X.FINDER_PAT_D,X.FINDER_PAT_D,X.FINDER_PAT_E,X.FINDER_PAT_E,X.FINDER_PAT_F,X.FINDER_PAT_F]],X.MAX_PAIRS=11;class qd extends Tn{constructor(n,r,a){super(n,r),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Kt extends Ae{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,r,a){const c=this.decodePair(r,!1,n,a);Kt.addOrTally(this.possibleLeftPairs,c),r.reverse();let h=this.decodePair(r,!0,n,a);Kt.addOrTally(this.possibleRightPairs,h),r.reverse();for(let u of this.possibleLeftPairs)if(u.getCount()>1){for(let g of this.possibleRightPairs)if(g.getCount()>1&&Kt.checkChecksum(u,g))return Kt.constructResult(u,g)}throw new U}static addOrTally(n,r){if(r==null)return;let a=!1;for(let c of n)if(c.getValue()===r.getValue()){c.incrementCount(),a=!0;break}a||n.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,r){let a=4537077*n.getValue()+r.getValue(),c=new String(a).toString(),h=new gt;for(let b=13-c.length;b>0;b--)h.append("0");h.append(c);let u=0;for(let b=0;b<13;b++){let _=h.charAt(b).charCodeAt(0)-48;u+=b&1?_:3*_}u=10-u%10,u===10&&(u=0),h.append(u.toString());let g=n.getFinderPattern().getResultPoints(),x=r.getFinderPattern().getResultPoints();return new ne(h.toString(),null,0,[g[0],g[1],x[0],x[1]],ct.RSS_14,new Date().getTime())}static checkChecksum(n,r){let a=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,c=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(n,r,a,c){try{let h=this.findFinderPattern(n,r),u=this.parseFoundFinderPattern(n,a,r,h),g=c==null?null:c.get(G.NEED_RESULT_POINT_CALLBACK);if(g!=null){let _=(h[0]+h[1])/2;r&&(_=n.getSize()-1-_),g.foundPossibleResultPoint(new rt(_,a))}let x=this.decodeDataCharacter(n,u,!0),b=this.decodeDataCharacter(n,u,!1);return new qd(1597*x.getValue()+b.getValue(),x.getChecksumPortion()+4*b.getChecksumPortion(),u)}catch{return null}}decodeDataCharacter(n,r,a){let c=this.getDataCharacterCounters();for(let L=0;L<c.length;L++)c[L]=0;if(a)ae.recordPatternInReverse(n,r.getStartEnd()[0],c);else{ae.recordPattern(n,r.getStartEnd()[1]+1,c);for(let L=0,H=c.length-1;L<H;L++,H--){let Z=c[L];c[L]=c[H],c[H]=Z}}let h=a?16:15,u=St.sum(new Int32Array(c))/h,g=this.getOddCounts(),x=this.getEvenCounts(),b=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors();for(let L=0;L<c.length;L++){let H=c[L]/u,Z=Math.floor(H+.5);Z<1?Z=1:Z>8&&(Z=8);let K=Math.floor(L/2);L&1?(x[K]=Z,_[K]=H-Z):(g[K]=Z,b[K]=H-Z)}this.adjustOddEvenCounts(a,h);let E=0,v=0;for(let L=g.length-1;L>=0;L--)v*=9,v+=g[L],E+=g[L];let T=0,O=0;for(let L=x.length-1;L>=0;L--)T*=9,T+=x[L],O+=x[L];let N=v+3*T;if(a){if(E&1||E>12||E<4)throw new U;let L=(12-E)/2,H=Kt.OUTSIDE_ODD_WIDEST[L],Z=9-H,K=ai.getRSSvalue(g,H,!1),q=ai.getRSSvalue(x,Z,!0),At=Kt.OUTSIDE_EVEN_TOTAL_SUBSET[L],xt=Kt.OUTSIDE_GSUM[L];return new Tn(K*At+q+xt,N)}else{if(O&1||O>10||O<4)throw new U;let L=(10-O)/2,H=Kt.INSIDE_ODD_WIDEST[L],Z=9-H,K=ai.getRSSvalue(g,H,!0),q=ai.getRSSvalue(x,Z,!1),At=Kt.INSIDE_ODD_TOTAL_SUBSET[L],xt=Kt.INSIDE_GSUM[L];return new Tn(q*At+K+xt,N)}}findFinderPattern(n,r){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=n.getSize(),h=!1,u=0;for(;u<c&&(h=!n.get(u),r!==h);)u++;let g=0,x=u;for(let b=u;b<c;b++)if(n.get(b)!==h)a[g]++;else{if(g===3){if(Ae.isFinderPattern(a))return[x,b];x+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,h=!h}throw new U}parseFoundFinderPattern(n,r,a,c){let h=n.get(c[0]),u=c[0]-1;for(;u>=0&&h!==n.get(u);)u--;u++;const g=c[0]-u,x=this.getDecodeFinderCounters(),b=new Int32Array(x.length);D.arraycopy(x,0,b,1,x.length-1),b[0]=g;const _=this.parseFinderValue(b,Kt.FINDER_PATTERNS);let E=u,v=c[1];return a&&(E=n.getSize()-1-E,v=n.getSize()-1-v),new Ks(_,[u,c[1]],E,v,r)}adjustOddEvenCounts(n,r){let a=St.sum(new Int32Array(this.getOddCounts())),c=St.sum(new Int32Array(this.getEvenCounts())),h=!1,u=!1,g=!1,x=!1;n?(a>12?u=!0:a<4&&(h=!0),c>12?x=!0:c<4&&(g=!0)):(a>11?u=!0:a<5&&(h=!0),c>10?x=!0:c<4&&(g=!0));let b=a+c-r,_=(a&1)===(n?1:0),E=(c&1)===1;if(b===1)if(_){if(E)throw new U;u=!0}else{if(!E)throw new U;x=!0}else if(b===-1)if(_){if(E)throw new U;h=!0}else{if(!E)throw new U;g=!0}else if(b===0){if(_){if(!E)throw new U;a<c?(h=!0,x=!0):(u=!0,g=!0)}else if(E)throw new U}else throw new U;if(h){if(u)throw new U;Ae.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&Ae.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(x)throw new U;Ae.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Ae.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Kt.OUTSIDE_GSUM=[0,161,961,2015,2715],Kt.INSIDE_GSUM=[0,336,1036,1516],Kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Kt.INSIDE_ODD_WIDEST=[2,4,6,8],Kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class On extends ae{constructor(n,r){super(),this.readers=[],this.verbose=r===!0;const a=n?n.get(G.POSSIBLE_FORMATS):null,c=n&&n.get(G.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(ct.EAN_13)||a.includes(ct.UPC_A)||a.includes(ct.EAN_8)||a.includes(ct.UPC_E))&&this.readers.push(new ro(n)),a.includes(ct.CODE_39)&&this.readers.push(new ce(c)),a.includes(ct.CODE_128)&&this.readers.push(new et),a.includes(ct.ITF)&&this.readers.push(new Pt),a.includes(ct.RSS_14)&&this.readers.push(new Kt),a.includes(ct.RSS_EXPANDED)&&this.readers.push(new X(this.verbose))):(this.readers.push(new ro(n)),this.readers.push(new ce),this.readers.push(new ro(n)),this.readers.push(new et),this.readers.push(new Pt),this.readers.push(new Kt),this.readers.push(new X(this.verbose)))}decodeRow(n,r,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(n,r,a)}catch{}throw new U}reset(){this.readers.forEach(n=>n.reset())}}class Zd extends Te{constructor(n=500,r){super(new On(r),n,r)}}class kt{constructor(n,r,a){this.ecCodewords=n,this.ecBlocks=[r],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ot{constructor(n,r){this.count=n,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Et{constructor(n,r,a,c,h,u){this.versionNumber=n,this.symbolSizeRows=r,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=h,this.ecBlocks=u;let g=0;const x=u.getECCodewords(),b=u.getECBlocks();for(let _ of b)g+=_.getCount()*(_.getDataCodewords()+x);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,r){if(n&1||r&1)throw new B;for(let a of Et.VERSIONS)if(a.symbolSizeRows===n&&a.symbolSizeColumns===r)return a;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new Et(1,10,10,8,8,new kt(5,new Ot(1,3))),new Et(2,12,12,10,10,new kt(7,new Ot(1,5))),new Et(3,14,14,12,12,new kt(10,new Ot(1,8))),new Et(4,16,16,14,14,new kt(12,new Ot(1,12))),new Et(5,18,18,16,16,new kt(14,new Ot(1,18))),new Et(6,20,20,18,18,new kt(18,new Ot(1,22))),new Et(7,22,22,20,20,new kt(20,new Ot(1,30))),new Et(8,24,24,22,22,new kt(24,new Ot(1,36))),new Et(9,26,26,24,24,new kt(28,new Ot(1,44))),new Et(10,32,32,14,14,new kt(36,new Ot(1,62))),new Et(11,36,36,16,16,new kt(42,new Ot(1,86))),new Et(12,40,40,18,18,new kt(48,new Ot(1,114))),new Et(13,44,44,20,20,new kt(56,new Ot(1,144))),new Et(14,48,48,22,22,new kt(68,new Ot(1,174))),new Et(15,52,52,24,24,new kt(42,new Ot(2,102))),new Et(16,64,64,14,14,new kt(56,new Ot(2,140))),new Et(17,72,72,16,16,new kt(36,new Ot(4,92))),new Et(18,80,80,18,18,new kt(48,new Ot(4,114))),new Et(19,88,88,20,20,new kt(56,new Ot(4,144))),new Et(20,96,96,22,22,new kt(68,new Ot(4,174))),new Et(21,104,104,24,24,new kt(56,new Ot(6,136))),new Et(22,120,120,18,18,new kt(68,new Ot(6,175))),new Et(23,132,132,20,20,new kt(62,new Ot(8,163))),new Et(24,144,144,22,22,new kt(62,new Ot(8,156),new Ot(2,155))),new Et(25,8,18,6,16,new kt(7,new Ot(1,5))),new Et(26,8,32,6,14,new kt(11,new Ot(1,10))),new Et(27,12,26,10,24,new kt(14,new Ot(1,16))),new Et(28,12,36,10,16,new kt(18,new Ot(1,22))),new Et(29,16,36,14,16,new kt(24,new Ot(1,32))),new Et(30,16,48,14,22,new kt(28,new Ot(1,49)))]}}Et.VERSIONS=Et.buildVersions();class co{constructor(n){const r=n.getHeight();if(r<8||r>144||r&1)throw new B;this.version=co.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new Tt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const r=n.getHeight(),a=n.getWidth();return Et.getVersionForDimensions(r,a)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let r=0,a=4,c=0;const h=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth();let g=!1,x=!1,b=!1,_=!1;do if(a===h&&c===0&&!g)n[r++]=this.readCorner1(h,u)&255,a-=2,c+=2,g=!0;else if(a===h-2&&c===0&&u&3&&!x)n[r++]=this.readCorner2(h,u)&255,a-=2,c+=2,x=!0;else if(a===h+4&&c===2&&!(u&7)&&!b)n[r++]=this.readCorner3(h,u)&255,a-=2,c+=2,b=!0;else if(a===h-2&&c===0&&(u&7)===4&&!_)n[r++]=this.readCorner4(h,u)&255,a-=2,c+=2,_=!0;else{do a<h&&c>=0&&!this.readMappingMatrix.get(c,a)&&(n[r++]=this.readUtah(a,c,h,u)&255),a-=2,c+=2;while(a>=0&&c<u);a+=1,c+=3;do a>=0&&c<u&&!this.readMappingMatrix.get(c,a)&&(n[r++]=this.readUtah(a,c,h,u)&255),a+=2,c-=2;while(a<h&&c>=0);a+=3,c+=1}while(a<h||c<u);if(r!==this.version.getTotalCodewords())throw new B;return n}readModule(n,r,a,c){return n<0&&(n+=a,r+=4-(a+4&7)),r<0&&(r+=c,n+=4-(c+4&7)),this.readMappingMatrix.set(r,n),this.mappingBitMatrix.get(r,n)}readUtah(n,r,a,c){let h=0;return this.readModule(n-2,r-2,a,c)&&(h|=1),h<<=1,this.readModule(n-2,r-1,a,c)&&(h|=1),h<<=1,this.readModule(n-1,r-2,a,c)&&(h|=1),h<<=1,this.readModule(n-1,r-1,a,c)&&(h|=1),h<<=1,this.readModule(n-1,r,a,c)&&(h|=1),h<<=1,this.readModule(n,r-2,a,c)&&(h|=1),h<<=1,this.readModule(n,r-1,a,c)&&(h|=1),h<<=1,this.readModule(n,r,a,c)&&(h|=1),h}readCorner1(n,r){let a=0;return this.readModule(n-1,0,n,r)&&(a|=1),a<<=1,this.readModule(n-1,1,n,r)&&(a|=1),a<<=1,this.readModule(n-1,2,n,r)&&(a|=1),a<<=1,this.readModule(0,r-2,n,r)&&(a|=1),a<<=1,this.readModule(0,r-1,n,r)&&(a|=1),a<<=1,this.readModule(1,r-1,n,r)&&(a|=1),a<<=1,this.readModule(2,r-1,n,r)&&(a|=1),a<<=1,this.readModule(3,r-1,n,r)&&(a|=1),a}readCorner2(n,r){let a=0;return this.readModule(n-3,0,n,r)&&(a|=1),a<<=1,this.readModule(n-2,0,n,r)&&(a|=1),a<<=1,this.readModule(n-1,0,n,r)&&(a|=1),a<<=1,this.readModule(0,r-4,n,r)&&(a|=1),a<<=1,this.readModule(0,r-3,n,r)&&(a|=1),a<<=1,this.readModule(0,r-2,n,r)&&(a|=1),a<<=1,this.readModule(0,r-1,n,r)&&(a|=1),a<<=1,this.readModule(1,r-1,n,r)&&(a|=1),a}readCorner3(n,r){let a=0;return this.readModule(n-1,0,n,r)&&(a|=1),a<<=1,this.readModule(n-1,r-1,n,r)&&(a|=1),a<<=1,this.readModule(0,r-3,n,r)&&(a|=1),a<<=1,this.readModule(0,r-2,n,r)&&(a|=1),a<<=1,this.readModule(0,r-1,n,r)&&(a|=1),a<<=1,this.readModule(1,r-3,n,r)&&(a|=1),a<<=1,this.readModule(1,r-2,n,r)&&(a|=1),a<<=1,this.readModule(1,r-1,n,r)&&(a|=1),a}readCorner4(n,r){let a=0;return this.readModule(n-3,0,n,r)&&(a|=1),a<<=1,this.readModule(n-2,0,n,r)&&(a|=1),a<<=1,this.readModule(n-1,0,n,r)&&(a|=1),a<<=1,this.readModule(0,r-2,n,r)&&(a|=1),a<<=1,this.readModule(0,r-1,n,r)&&(a|=1),a<<=1,this.readModule(1,r-1,n,r)&&(a|=1),a<<=1,this.readModule(2,r-1,n,r)&&(a|=1),a<<=1,this.readModule(3,r-1,n,r)&&(a|=1),a}extractDataRegion(n){const r=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(n.getHeight()!==r)throw new w("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),u=r/c|0,g=a/h|0,x=u*c,b=g*h,_=new Tt(b,x);for(let E=0;E<u;++E){const v=E*c;for(let T=0;T<g;++T){const O=T*h;for(let N=0;N<c;++N){const L=E*(c+2)+1+N,H=v+N;for(let Z=0;Z<h;++Z){const K=T*(h+2)+1+Z;if(n.get(K,L)){const q=O+Z;_.set(q,H)}}}}}return _}}class ho{constructor(n,r){this.numDataCodewords=n,this.codewords=r}static getDataBlocks(n,r){const a=r.getECBlocks();let c=0;const h=a.getECBlocks();for(let N of h)c+=N.getCount();const u=new Array(c);let g=0;for(let N of h)for(let L=0;L<N.getCount();L++){const H=N.getDataCodewords(),Z=a.getECCodewords()+H;u[g++]=new ho(H,new Uint8Array(Z))}const b=u[0].codewords.length-a.getECCodewords(),_=b-1;let E=0;for(let N=0;N<_;N++)for(let L=0;L<g;L++)u[L].codewords[N]=n[E++];const v=r.getVersionNumber()===24,T=v?8:g;for(let N=0;N<T;N++)u[N].codewords[b-1]=n[E++];const O=u[0].codewords.length;for(let N=b;N<O;N++)for(let L=0;L<g;L++){const H=v?(L+8)%g:L,Z=v&&H>7?N-1:N;u[H].codewords[Z]=n[E++]}if(E!==n.length)throw new w;return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class uo{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new w(""+n);let r=0,a=this.bitOffset,c=this.byteOffset;const h=this.bytes;if(a>0){const u=8-a,g=n<u?n:u,x=u-g,b=255>>8-g<<x;r=(h[c]&b)>>x,n-=g,a+=g,a===8&&(a=0,c++)}if(n>0){for(;n>=8;)r=r<<8|h[c]&255,c++,n-=8;if(n>0){const u=8-n,g=255>>u<<u;r=r<<n|(h[c]&g)>>u,a+=n}}return this.bitOffset=a,this.byteOffset=c,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var he;(function(C){C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE"})(he||(he={}));class Ri{static decode(n){const r=new uo(n),a=new gt,c=new gt,h=new Array;let u=he.ASCII_ENCODE;do if(u===he.ASCII_ENCODE)u=this.decodeAsciiSegment(r,a,c);else{switch(u){case he.C40_ENCODE:this.decodeC40Segment(r,a);break;case he.TEXT_ENCODE:this.decodeTextSegment(r,a);break;case he.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,a);break;case he.EDIFACT_ENCODE:this.decodeEdifactSegment(r,a);break;case he.BASE256_ENCODE:this.decodeBase256Segment(r,a,h);break;default:throw new B}u=he.ASCII_ENCODE}while(u!==he.PAD_ENCODE&&r.available()>0);return c.length()>0&&a.append(c.toString()),new qn(n,a.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(n,r,a){let c=!1;do{let h=n.readBits(8);if(h===0)throw new B;if(h<=128)return c&&(h+=128),r.append(String.fromCharCode(h-1)),he.ASCII_ENCODE;if(h===129)return he.PAD_ENCODE;if(h<=229){const u=h-130;u<10&&r.append("0"),r.append(""+u)}else switch(h){case 230:return he.C40_ENCODE;case 231:return he.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:r.append("[)>05"),a.insert(0,"");break;case 237:r.append("[)>06"),a.insert(0,"");break;case 238:return he.ANSIX12_ENCODE;case 239:return he.TEXT_ENCODE;case 240:return he.EDIFACT_ENCODE;case 241:break;default:if(h!==254||n.available()!==0)throw new B;break}}while(n.available()>0);return he.ASCII_ENCODE}static decodeC40Segment(n,r){let a=!1;const c=[];let h=0;do{if(n.available()===8)return;const u=n.readBits(8);if(u===254)return;this.parseTwoBytes(u,n.readBits(8),c);for(let g=0;g<3;g++){const x=c[g];switch(h){case 0:if(x<3)h=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const b=this.C40_BASIC_SET_CHARS[x];a?(r.append(String.fromCharCode(b.charCodeAt(0)+128)),a=!1):r.append(b)}else throw new B;break;case 1:a?(r.append(String.fromCharCode(x+128)),a=!1):r.append(String.fromCharCode(x)),h=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const b=this.C40_SHIFT2_SET_CHARS[x];a?(r.append(String.fromCharCode(b.charCodeAt(0)+128)),a=!1):r.append(b)}else switch(x){case 27:r.append("");break;case 30:a=!0;break;default:throw new B}h=0;break;case 3:a?(r.append(String.fromCharCode(x+224)),a=!1):r.append(String.fromCharCode(x+96)),h=0;break;default:throw new B}}}while(n.available()>0)}static decodeTextSegment(n,r){let a=!1,c=[],h=0;do{if(n.available()===8)return;const u=n.readBits(8);if(u===254)return;this.parseTwoBytes(u,n.readBits(8),c);for(let g=0;g<3;g++){const x=c[g];switch(h){case 0:if(x<3)h=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const b=this.TEXT_BASIC_SET_CHARS[x];a?(r.append(String.fromCharCode(b.charCodeAt(0)+128)),a=!1):r.append(b)}else throw new B;break;case 1:a?(r.append(String.fromCharCode(x+128)),a=!1):r.append(String.fromCharCode(x)),h=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const b=this.TEXT_SHIFT2_SET_CHARS[x];a?(r.append(String.fromCharCode(b.charCodeAt(0)+128)),a=!1):r.append(b)}else switch(x){case 27:r.append("");break;case 30:a=!0;break;default:throw new B}h=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const b=this.TEXT_SHIFT3_SET_CHARS[x];a?(r.append(String.fromCharCode(b.charCodeAt(0)+128)),a=!1):r.append(b),h=0}else throw new B;break;default:throw new B}}}while(n.available()>0)}static decodeAnsiX12Segment(n,r){const a=[];do{if(n.available()===8)return;const c=n.readBits(8);if(c===254)return;this.parseTwoBytes(c,n.readBits(8),a);for(let h=0;h<3;h++){const u=a[h];switch(u){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(u<14)r.append(String.fromCharCode(u+44));else if(u<40)r.append(String.fromCharCode(u+51));else throw new B;break}}}while(n.available()>0)}static parseTwoBytes(n,r,a){let c=(n<<8)+r-1,h=Math.floor(c/1600);a[0]=h,c-=h*1600,h=Math.floor(c/40),a[1]=h,a[2]=c-h*40}static decodeEdifactSegment(n,r){do{if(n.available()<=16)return;for(let a=0;a<4;a++){let c=n.readBits(6);if(c===31){const h=8-n.getBitOffset();h!==8&&n.readBits(h);return}c&32||(c|=64),r.append(String.fromCharCode(c))}}while(n.available()>0)}static decodeBase256Segment(n,r,a){let c=1+n.getByteOffset();const h=this.unrandomize255State(n.readBits(8),c++);let u;if(h===0?u=n.available()/8|0:h<250?u=h:u=250*(h-249)+this.unrandomize255State(n.readBits(8),c++),u<0)throw new B;const g=new Uint8Array(u);for(let x=0;x<u;x++){if(n.available()<8)throw new B;g[x]=this.unrandomize255State(n.readBits(8),c++)}a.push(g);try{r.append(at.decode(g,tt.ISO88591))}catch(x){throw new oi("Platform does not support required encoding: "+x.message)}}static unrandomize255State(n,r){const a=149*r%255+1,c=n-a;return c>=0?c:c+256}}Ri.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ri.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ri.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ri.TEXT_SHIFT2_SET_CHARS=Ri.C40_SHIFT2_SET_CHARS,Ri.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Kd{constructor(){this.rsDecoder=new Kn(Mt.DATA_MATRIX_FIELD_256)}decode(n){const r=new co(n),a=r.getVersion(),c=r.readCodewords(),h=ho.getDataBlocks(c,a);let u=0;for(let b of h)u+=b.getNumDataCodewords();const g=new Uint8Array(u),x=h.length;for(let b=0;b<x;b++){const _=h[b],E=_.getCodewords(),v=_.getNumDataCodewords();this.correctErrors(E,v);for(let T=0;T<v;T++)g[T*x+b]=E[T]}return Ri.decode(g)}correctErrors(n,r){const a=new Int32Array(n);try{this.rsDecoder.decode(a,n.length-r)}catch{throw new S}for(let c=0;c<r;c++)n[c]=a[c]}}class se{constructor(n){this.image=n,this.rectangleDetector=new bi(this.image)}detect(){const n=this.rectangleDetector.detect();let r=this.detectSolid1(n);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new U;r=this.shiftToModuleCenter(r);const a=r[0],c=r[1],h=r[2],u=r[3];let g=this.transitionsBetween(a,u)+1,x=this.transitionsBetween(h,u)+1;(g&1)===1&&(g+=1),(x&1)===1&&(x+=1),4*g<7*x&&4*x<7*g&&(g=x=Math.max(g,x));let b=se.sampleGrid(this.image,a,c,h,u,g,x);return new qs(b,[a,c,h,u])}static shiftPoint(n,r,a){let c=(r.getX()-n.getX())/(a+1),h=(r.getY()-n.getY())/(a+1);return new rt(n.getX()+c,n.getY()+h)}static moveAway(n,r,a){let c=n.getX(),h=n.getY();return c<r?c-=1:c+=1,h<a?h-=1:h+=1,new rt(c,h)}detectSolid1(n){let r=n[0],a=n[1],c=n[3],h=n[2],u=this.transitionsBetween(r,a),g=this.transitionsBetween(a,c),x=this.transitionsBetween(c,h),b=this.transitionsBetween(h,r),_=u,E=[h,r,a,c];return _>g&&(_=g,E[0]=r,E[1]=a,E[2]=c,E[3]=h),_>x&&(_=x,E[0]=a,E[1]=c,E[2]=h,E[3]=r),_>b&&(E[0]=c,E[1]=h,E[2]=r,E[3]=a),E}detectSolid2(n){let r=n[0],a=n[1],c=n[2],h=n[3],u=this.transitionsBetween(r,h),g=se.shiftPoint(a,c,(u+1)*4),x=se.shiftPoint(c,a,(u+1)*4),b=this.transitionsBetween(g,r),_=this.transitionsBetween(x,h);return b<_?(n[0]=r,n[1]=a,n[2]=c,n[3]=h):(n[0]=a,n[1]=c,n[2]=h,n[3]=r),n}correctTopRight(n){let r=n[0],a=n[1],c=n[2],h=n[3],u=this.transitionsBetween(r,h),g=this.transitionsBetween(a,h),x=se.shiftPoint(r,a,(g+1)*4),b=se.shiftPoint(c,a,(u+1)*4);u=this.transitionsBetween(x,h),g=this.transitionsBetween(b,h);let _=new rt(h.getX()+(c.getX()-a.getX())/(u+1),h.getY()+(c.getY()-a.getY())/(u+1)),E=new rt(h.getX()+(r.getX()-a.getX())/(g+1),h.getY()+(r.getY()-a.getY())/(g+1));if(!this.isValid(_))return this.isValid(E)?E:null;if(!this.isValid(E))return _;let v=this.transitionsBetween(x,_)+this.transitionsBetween(b,_),T=this.transitionsBetween(x,E)+this.transitionsBetween(b,E);return v>T?_:E}shiftToModuleCenter(n){let r=n[0],a=n[1],c=n[2],h=n[3],u=this.transitionsBetween(r,h)+1,g=this.transitionsBetween(c,h)+1,x=se.shiftPoint(r,a,g*4),b=se.shiftPoint(c,a,u*4);u=this.transitionsBetween(x,h)+1,g=this.transitionsBetween(b,h)+1,(u&1)===1&&(u+=1),(g&1)===1&&(g+=1);let _=(r.getX()+a.getX()+c.getX()+h.getX())/4,E=(r.getY()+a.getY()+c.getY()+h.getY())/4;r=se.moveAway(r,_,E),a=se.moveAway(a,_,E),c=se.moveAway(c,_,E),h=se.moveAway(h,_,E);let v,T;return x=se.shiftPoint(r,a,g*4),x=se.shiftPoint(x,h,u*4),v=se.shiftPoint(a,r,g*4),v=se.shiftPoint(v,c,u*4),b=se.shiftPoint(c,h,g*4),b=se.shiftPoint(b,a,u*4),T=se.shiftPoint(h,c,g*4),T=se.shiftPoint(T,r,u*4),[x,v,b,T]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,r,a,c,h,u,g){return ki.getInstance().sampleGrid(n,u,g,.5,.5,u-.5,.5,u-.5,g-.5,.5,g-.5,r.getX(),r.getY(),h.getX(),h.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(n,r){let a=Math.trunc(n.getX()),c=Math.trunc(n.getY()),h=Math.trunc(r.getX()),u=Math.trunc(r.getY()),g=Math.abs(u-c)>Math.abs(h-a);if(g){let N=a;a=c,c=N,N=h,h=u,u=N}let x=Math.abs(h-a),b=Math.abs(u-c),_=-x/2,E=c<u?1:-1,v=a<h?1:-1,T=0,O=this.image.get(g?c:a,g?a:c);for(let N=a,L=c;N!==h;N+=v){let H=this.image.get(g?L:N,g?N:L);if(H!==O&&(T++,O=H),_+=b,_>0){if(L===u)break;L+=E,_-=x}}return T}}class Li{constructor(){this.decoder=new Kd}decode(n,r=null){let a,c;if(r!=null&&r.has(G.PURE_BARCODE)){const b=Li.extractPureBits(n.getBlackMatrix());a=this.decoder.decode(b),c=Li.NO_POINTS}else{const b=new se(n.getBlackMatrix()).detect();a=this.decoder.decode(b.getBits()),c=b.getPoints()}const h=a.getRawBytes(),u=new ne(a.getText(),h,8*h.length,c,ct.DATA_MATRIX,D.currentTimeMillis()),g=a.getByteSegments();g!=null&&u.putMetadata(fe.BYTE_SEGMENTS,g);const x=a.getECLevel();return x!=null&&u.putMetadata(fe.ERROR_CORRECTION_LEVEL,x),u}reset(){}static extractPureBits(n){const r=n.getTopLeftOnBit(),a=n.getBottomRightOnBit();if(r==null||a==null)throw new U;const c=this.moduleSize(r,n);let h=r[1];const u=a[1];let g=r[0];const b=(a[0]-g+1)/c,_=(u-h+1)/c;if(b<=0||_<=0)throw new U;const E=c/2;h+=E,g+=E;const v=new Tt(b,_);for(let T=0;T<_;T++){const O=h+T*c;for(let N=0;N<b;N++)n.get(g+N*c,O)&&v.set(N,T)}return v}static moduleSize(n,r){const a=r.getWidth();let c=n[0];const h=n[1];for(;c<a&&r.get(c,h);)c++;if(c===a)throw new U;const u=c-n[0];if(u===0)throw new U;return u}}Li.NO_POINTS=[];class Qd extends Te{constructor(n=500){super(new Li,n)}}var kn;(function(C){C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H"})(kn||(kn={}));class Vt{constructor(n,r,a){this.value=n,this.stringValue=r,this.bits=a,Vt.FOR_BITS.set(a,this),Vt.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return Vt.L;case"M":return Vt.M;case"Q":return Vt.Q;case"H":return Vt.H;default:throw new y(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof Vt))return!1;const r=n;return this.value===r.value}static forBits(n){if(n<0||n>=Vt.FOR_BITS.size)throw new w;return Vt.FOR_BITS.get(n)}}Vt.FOR_BITS=new Map,Vt.FOR_VALUE=new Map,Vt.L=new Vt(kn.L,"L",1),Vt.M=new Vt(kn.M,"M",0),Vt.Q=new Vt(kn.Q,"Q",3),Vt.H=new Vt(kn.H,"H",2);class Ce{constructor(n){this.errorCorrectionLevel=Vt.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,r){return V.bitCount(n^r)}static decodeFormatInformation(n,r){const a=Ce.doDecodeFormatInformation(n,r);return a!==null?a:Ce.doDecodeFormatInformation(n^Ce.FORMAT_INFO_MASK_QR,r^Ce.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,r){let a=Number.MAX_SAFE_INTEGER,c=0;for(const h of Ce.FORMAT_INFO_DECODE_LOOKUP){const u=h[0];if(u===n||u===r)return new Ce(h[1]);let g=Ce.numBitsDiffering(n,u);g<a&&(c=h[1],a=g),n!==r&&(g=Ce.numBitsDiffering(r,u),g<a&&(c=h[1],a=g))}return a<=3?new Ce(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Ce))return!1;const r=n;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}Ce.FORMAT_INFO_MASK_QR=21522,Ce.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class F{constructor(n,...r){this.ecCodewordsPerBlock=n,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const r=this.ecBlocks;for(const a of r)n+=a.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class I{constructor(n,r){this.count=n,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ot{constructor(n,r,...a){this.versionNumber=n,this.alignmentPatternCenters=r,this.ecBlocks=a;let c=0;const h=a[0].getECCodewordsPerBlock(),u=a[0].getECBlocks();for(const g of u)c+=g.getCount()*(g.getDataCodewords()+h);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new B;try{return this.getVersionForNumber((n-17)/4)}catch{throw new B}}static getVersionForNumber(n){if(n<1||n>40)throw new w;return ot.VERSIONS[n-1]}static decodeVersionInformation(n){let r=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<ot.VERSION_DECODE_INFO.length;c++){const h=ot.VERSION_DECODE_INFO[c];if(h===n)return ot.getVersionForNumber(c+7);const u=Ce.numBitsDiffering(n,h);u<r&&(a=c+7,r=u)}return r<=3?ot.getVersionForNumber(a):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),r=new Tt(n);r.setRegion(0,0,9,9),r.setRegion(n-8,0,8,9),r.setRegion(0,n-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const h=this.alignmentPatternCenters[c]-2;for(let u=0;u<a;u++)c===0&&(u===0||u===a-1)||c===a-1&&u===0||r.setRegion(this.alignmentPatternCenters[u]-2,h,5,5)}return r.setRegion(6,9,1,n-17),r.setRegion(9,6,n-17,1),this.versionNumber>6&&(r.setRegion(n-11,0,3,6),r.setRegion(0,n-11,6,3)),r}toString(){return""+this.versionNumber}}ot.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ot.VERSIONS=[new ot(1,new Int32Array(0),new F(7,new I(1,19)),new F(10,new I(1,16)),new F(13,new I(1,13)),new F(17,new I(1,9))),new ot(2,Int32Array.from([6,18]),new F(10,new I(1,34)),new F(16,new I(1,28)),new F(22,new I(1,22)),new F(28,new I(1,16))),new ot(3,Int32Array.from([6,22]),new F(15,new I(1,55)),new F(26,new I(1,44)),new F(18,new I(2,17)),new F(22,new I(2,13))),new ot(4,Int32Array.from([6,26]),new F(20,new I(1,80)),new F(18,new I(2,32)),new F(26,new I(2,24)),new F(16,new I(4,9))),new ot(5,Int32Array.from([6,30]),new F(26,new I(1,108)),new F(24,new I(2,43)),new F(18,new I(2,15),new I(2,16)),new F(22,new I(2,11),new I(2,12))),new ot(6,Int32Array.from([6,34]),new F(18,new I(2,68)),new F(16,new I(4,27)),new F(24,new I(4,19)),new F(28,new I(4,15))),new ot(7,Int32Array.from([6,22,38]),new F(20,new I(2,78)),new F(18,new I(4,31)),new F(18,new I(2,14),new I(4,15)),new F(26,new I(4,13),new I(1,14))),new ot(8,Int32Array.from([6,24,42]),new F(24,new I(2,97)),new F(22,new I(2,38),new I(2,39)),new F(22,new I(4,18),new I(2,19)),new F(26,new I(4,14),new I(2,15))),new ot(9,Int32Array.from([6,26,46]),new F(30,new I(2,116)),new F(22,new I(3,36),new I(2,37)),new F(20,new I(4,16),new I(4,17)),new F(24,new I(4,12),new I(4,13))),new ot(10,Int32Array.from([6,28,50]),new F(18,new I(2,68),new I(2,69)),new F(26,new I(4,43),new I(1,44)),new F(24,new I(6,19),new I(2,20)),new F(28,new I(6,15),new I(2,16))),new ot(11,Int32Array.from([6,30,54]),new F(20,new I(4,81)),new F(30,new I(1,50),new I(4,51)),new F(28,new I(4,22),new I(4,23)),new F(24,new I(3,12),new I(8,13))),new ot(12,Int32Array.from([6,32,58]),new F(24,new I(2,92),new I(2,93)),new F(22,new I(6,36),new I(2,37)),new F(26,new I(4,20),new I(6,21)),new F(28,new I(7,14),new I(4,15))),new ot(13,Int32Array.from([6,34,62]),new F(26,new I(4,107)),new F(22,new I(8,37),new I(1,38)),new F(24,new I(8,20),new I(4,21)),new F(22,new I(12,11),new I(4,12))),new ot(14,Int32Array.from([6,26,46,66]),new F(30,new I(3,115),new I(1,116)),new F(24,new I(4,40),new I(5,41)),new F(20,new I(11,16),new I(5,17)),new F(24,new I(11,12),new I(5,13))),new ot(15,Int32Array.from([6,26,48,70]),new F(22,new I(5,87),new I(1,88)),new F(24,new I(5,41),new I(5,42)),new F(30,new I(5,24),new I(7,25)),new F(24,new I(11,12),new I(7,13))),new ot(16,Int32Array.from([6,26,50,74]),new F(24,new I(5,98),new I(1,99)),new F(28,new I(7,45),new I(3,46)),new F(24,new I(15,19),new I(2,20)),new F(30,new I(3,15),new I(13,16))),new ot(17,Int32Array.from([6,30,54,78]),new F(28,new I(1,107),new I(5,108)),new F(28,new I(10,46),new I(1,47)),new F(28,new I(1,22),new I(15,23)),new F(28,new I(2,14),new I(17,15))),new ot(18,Int32Array.from([6,30,56,82]),new F(30,new I(5,120),new I(1,121)),new F(26,new I(9,43),new I(4,44)),new F(28,new I(17,22),new I(1,23)),new F(28,new I(2,14),new I(19,15))),new ot(19,Int32Array.from([6,30,58,86]),new F(28,new I(3,113),new I(4,114)),new F(26,new I(3,44),new I(11,45)),new F(26,new I(17,21),new I(4,22)),new F(26,new I(9,13),new I(16,14))),new ot(20,Int32Array.from([6,34,62,90]),new F(28,new I(3,107),new I(5,108)),new F(26,new I(3,41),new I(13,42)),new F(30,new I(15,24),new I(5,25)),new F(28,new I(15,15),new I(10,16))),new ot(21,Int32Array.from([6,28,50,72,94]),new F(28,new I(4,116),new I(4,117)),new F(26,new I(17,42)),new F(28,new I(17,22),new I(6,23)),new F(30,new I(19,16),new I(6,17))),new ot(22,Int32Array.from([6,26,50,74,98]),new F(28,new I(2,111),new I(7,112)),new F(28,new I(17,46)),new F(30,new I(7,24),new I(16,25)),new F(24,new I(34,13))),new ot(23,Int32Array.from([6,30,54,78,102]),new F(30,new I(4,121),new I(5,122)),new F(28,new I(4,47),new I(14,48)),new F(30,new I(11,24),new I(14,25)),new F(30,new I(16,15),new I(14,16))),new ot(24,Int32Array.from([6,28,54,80,106]),new F(30,new I(6,117),new I(4,118)),new F(28,new I(6,45),new I(14,46)),new F(30,new I(11,24),new I(16,25)),new F(30,new I(30,16),new I(2,17))),new ot(25,Int32Array.from([6,32,58,84,110]),new F(26,new I(8,106),new I(4,107)),new F(28,new I(8,47),new I(13,48)),new F(30,new I(7,24),new I(22,25)),new F(30,new I(22,15),new I(13,16))),new ot(26,Int32Array.from([6,30,58,86,114]),new F(28,new I(10,114),new I(2,115)),new F(28,new I(19,46),new I(4,47)),new F(28,new I(28,22),new I(6,23)),new F(30,new I(33,16),new I(4,17))),new ot(27,Int32Array.from([6,34,62,90,118]),new F(30,new I(8,122),new I(4,123)),new F(28,new I(22,45),new I(3,46)),new F(30,new I(8,23),new I(26,24)),new F(30,new I(12,15),new I(28,16))),new ot(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new I(3,117),new I(10,118)),new F(28,new I(3,45),new I(23,46)),new F(30,new I(4,24),new I(31,25)),new F(30,new I(11,15),new I(31,16))),new ot(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new I(7,116),new I(7,117)),new F(28,new I(21,45),new I(7,46)),new F(30,new I(1,23),new I(37,24)),new F(30,new I(19,15),new I(26,16))),new ot(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new I(5,115),new I(10,116)),new F(28,new I(19,47),new I(10,48)),new F(30,new I(15,24),new I(25,25)),new F(30,new I(23,15),new I(25,16))),new ot(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new I(13,115),new I(3,116)),new F(28,new I(2,46),new I(29,47)),new F(30,new I(42,24),new I(1,25)),new F(30,new I(23,15),new I(28,16))),new ot(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new I(17,115)),new F(28,new I(10,46),new I(23,47)),new F(30,new I(10,24),new I(35,25)),new F(30,new I(19,15),new I(35,16))),new ot(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new I(17,115),new I(1,116)),new F(28,new I(14,46),new I(21,47)),new F(30,new I(29,24),new I(19,25)),new F(30,new I(11,15),new I(46,16))),new ot(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new I(13,115),new I(6,116)),new F(28,new I(14,46),new I(23,47)),new F(30,new I(44,24),new I(7,25)),new F(30,new I(59,16),new I(1,17))),new ot(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new I(12,121),new I(7,122)),new F(28,new I(12,47),new I(26,48)),new F(30,new I(39,24),new I(14,25)),new F(30,new I(22,15),new I(41,16))),new ot(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new I(6,121),new I(14,122)),new F(28,new I(6,47),new I(34,48)),new F(30,new I(46,24),new I(10,25)),new F(30,new I(2,15),new I(64,16))),new ot(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new I(17,122),new I(4,123)),new F(28,new I(29,46),new I(14,47)),new F(30,new I(49,24),new I(10,25)),new F(30,new I(24,15),new I(46,16))),new ot(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new I(4,122),new I(18,123)),new F(28,new I(13,46),new I(32,47)),new F(30,new I(48,24),new I(14,25)),new F(30,new I(42,15),new I(32,16))),new ot(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new I(20,117),new I(4,118)),new F(28,new I(40,47),new I(7,48)),new F(30,new I(43,24),new I(22,25)),new F(30,new I(10,15),new I(67,16))),new ot(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new I(19,118),new I(6,119)),new F(28,new I(18,47),new I(31,48)),new F(30,new I(34,24),new I(34,25)),new F(30,new I(20,15),new I(61,16)))];var ge;(function(C){C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111"})(ge||(ge={}));class $e{constructor(n,r){this.value=n,this.isMasked=r}unmaskBitMatrix(n,r){for(let a=0;a<r;a++)for(let c=0;c<r;c++)this.isMasked(a,c)&&n.flip(c,a)}}$e.values=new Map([[ge.DATA_MASK_000,new $e(ge.DATA_MASK_000,(C,n)=>(C+n&1)===0)],[ge.DATA_MASK_001,new $e(ge.DATA_MASK_001,(C,n)=>(C&1)===0)],[ge.DATA_MASK_010,new $e(ge.DATA_MASK_010,(C,n)=>n%3===0)],[ge.DATA_MASK_011,new $e(ge.DATA_MASK_011,(C,n)=>(C+n)%3===0)],[ge.DATA_MASK_100,new $e(ge.DATA_MASK_100,(C,n)=>(Math.floor(C/2)+Math.floor(n/3)&1)===0)],[ge.DATA_MASK_101,new $e(ge.DATA_MASK_101,(C,n)=>C*n%6===0)],[ge.DATA_MASK_110,new $e(ge.DATA_MASK_110,(C,n)=>C*n%6<3)],[ge.DATA_MASK_111,new $e(ge.DATA_MASK_111,(C,n)=>(C+n+C*n%3&1)===0)]]);class Jd{constructor(n){const r=n.getHeight();if(r<21||(r&3)!==1)throw new B;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let h=0;h<6;h++)n=this.copyBit(h,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let h=5;h>=0;h--)n=this.copyBit(8,h,n);const r=this.bitMatrix.getHeight();let a=0;const c=r-7;for(let h=r-1;h>=c;h--)a=this.copyBit(8,h,a);for(let h=r-8;h<r;h++)a=this.copyBit(h,8,a);if(this.parsedFormatInfo=Ce.decodeFormatInformation(n,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),r=Math.floor((n-17)/4);if(r<=6)return ot.getVersionForNumber(r);let a=0;const c=n-11;for(let u=5;u>=0;u--)for(let g=n-9;g>=c;g--)a=this.copyBit(g,u,a);let h=ot.decodeVersionInformation(a);if(h!==null&&h.getDimensionForVersion()===n)return this.parsedVersion=h,h;a=0;for(let u=5;u>=0;u--)for(let g=n-9;g>=c;g--)a=this.copyBit(u,g,a);if(h=ot.decodeVersionInformation(a),h!==null&&h.getDimensionForVersion()===n)return this.parsedVersion=h,h;throw new B}copyBit(n,r,a){return(this.isMirror?this.bitMatrix.get(r,n):this.bitMatrix.get(n,r))?a<<1|1:a<<1}readCodewords(){const n=this.readFormatInformation(),r=this.readVersion(),a=$e.values.get(n.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const h=r.buildFunctionPattern();let u=!0;const g=new Uint8Array(r.getTotalCodewords());let x=0,b=0,_=0;for(let E=c-1;E>0;E-=2){E===6&&E--;for(let v=0;v<c;v++){const T=u?c-1-v:v;for(let O=0;O<2;O++)h.get(E-O,T)||(_++,b<<=1,this.bitMatrix.get(E-O,T)&&(b|=1),_===8&&(g[x++]=b,_=0,b=0))}u=!u}if(x!==r.getTotalCodewords())throw new B;return g}remask(){if(this.parsedFormatInfo===null)return;const n=$e.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let r=0,a=n.getWidth();r<a;r++)for(let c=r+1,h=n.getHeight();c<h;c++)n.get(r,c)!==n.get(c,r)&&(n.flip(c,r),n.flip(r,c))}}class fo{constructor(n,r){this.numDataCodewords=n,this.codewords=r}static getDataBlocks(n,r,a){if(n.length!==r.getTotalCodewords())throw new w;const c=r.getECBlocksForLevel(a);let h=0;const u=c.getECBlocks();for(const O of u)h+=O.getCount();const g=new Array(h);let x=0;for(const O of u)for(let N=0;N<O.getCount();N++){const L=O.getDataCodewords(),H=c.getECCodewordsPerBlock()+L;g[x++]=new fo(L,new Uint8Array(H))}const b=g[0].codewords.length;let _=g.length-1;for(;_>=0&&g[_].codewords.length!==b;)_--;_++;const E=b-c.getECCodewordsPerBlock();let v=0;for(let O=0;O<E;O++)for(let N=0;N<x;N++)g[N].codewords[O]=n[v++];for(let O=_;O<x;O++)g[O].codewords[E]=n[v++];const T=g[0].codewords.length;for(let O=E;O<T;O++)for(let N=0;N<x;N++){const L=N<_?O:O+1;g[N].codewords[L]=n[v++]}return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ye;(function(C){C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI"})(Ye||(Ye={}));class lt{constructor(n,r,a,c){this.value=n,this.stringValue=r,this.characterCountBitsForVersions=a,this.bits=c,lt.FOR_BITS.set(c,this),lt.FOR_VALUE.set(n,this)}static forBits(n){const r=lt.FOR_BITS.get(n);if(r===void 0)throw new w;return r}getCharacterCountBits(n){const r=n.getVersionNumber();let a;return r<=9?a=0:r<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof lt))return!1;const r=n;return this.value===r.value}toString(){return this.stringValue}}lt.FOR_BITS=new Map,lt.FOR_VALUE=new Map,lt.TERMINATOR=new lt(Ye.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),lt.NUMERIC=new lt(Ye.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),lt.ALPHANUMERIC=new lt(Ye.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),lt.STRUCTURED_APPEND=new lt(Ye.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),lt.BYTE=new lt(Ye.BYTE,"BYTE",Int32Array.from([8,16,16]),4),lt.ECI=new lt(Ye.ECI,"ECI",Int32Array.from([0,0,0]),7),lt.KANJI=new lt(Ye.KANJI,"KANJI",Int32Array.from([8,10,12]),8),lt.FNC1_FIRST_POSITION=new lt(Ye.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),lt.FNC1_SECOND_POSITION=new lt(Ye.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),lt.HANZI=new lt(Ye.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class qt{static decode(n,r,a,c){const h=new uo(n);let u=new gt;const g=new Array;let x=-1,b=-1;try{let _=null,E=!1,v;do{if(h.available()<4)v=lt.TERMINATOR;else{const T=h.readBits(4);v=lt.forBits(T)}switch(v){case lt.TERMINATOR:break;case lt.FNC1_FIRST_POSITION:case lt.FNC1_SECOND_POSITION:E=!0;break;case lt.STRUCTURED_APPEND:if(h.available()<16)throw new B;x=h.readBits(8),b=h.readBits(8);break;case lt.ECI:const T=qt.parseECIValue(h);if(_=j.getCharacterSetECIByValue(T),_===null)throw new B;break;case lt.HANZI:const O=h.readBits(4),N=h.readBits(v.getCharacterCountBits(r));O===qt.GB2312_SUBSET&&qt.decodeHanziSegment(h,u,N);break;default:const L=h.readBits(v.getCharacterCountBits(r));switch(v){case lt.NUMERIC:qt.decodeNumericSegment(h,u,L);break;case lt.ALPHANUMERIC:qt.decodeAlphanumericSegment(h,u,L,E);break;case lt.BYTE:qt.decodeByteSegment(h,u,L,_,g,c);break;case lt.KANJI:qt.decodeKanjiSegment(h,u,L);break;default:throw new B}break}}while(v!==lt.TERMINATOR)}catch{throw new B}return new qn(n,u.toString(),g.length===0?null:g,a===null?null:a.toString(),x,b)}static decodeHanziSegment(n,r,a){if(a*13>n.available())throw new B;const c=new Uint8Array(2*a);let h=0;for(;a>0;){const u=n.readBits(13);let g=u/96<<8&4294967295|u%96;g<959?g+=41377:g+=42657,c[h]=g>>8&255,c[h+1]=g&255,h+=2,a--}try{r.append(at.decode(c,tt.GB2312))}catch(u){throw new B(u)}}static decodeKanjiSegment(n,r,a){if(a*13>n.available())throw new B;const c=new Uint8Array(2*a);let h=0;for(;a>0;){const u=n.readBits(13);let g=u/192<<8&4294967295|u%192;g<7936?g+=33088:g+=49472,c[h]=g>>8,c[h+1]=g,h+=2,a--}try{r.append(at.decode(c,tt.SHIFT_JIS))}catch(u){throw new B(u)}}static decodeByteSegment(n,r,a,c,h,u){if(8*a>n.available())throw new B;const g=new Uint8Array(a);for(let b=0;b<a;b++)g[b]=n.readBits(8);let x;c===null?x=tt.guessEncoding(g,u):x=c.getName();try{r.append(at.decode(g,x))}catch(b){throw new B(b)}h.push(g)}static toAlphaNumericChar(n){if(n>=qt.ALPHANUMERIC_CHARS.length)throw new B;return qt.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,r,a,c){const h=r.length();for(;a>1;){if(n.available()<11)throw new B;const u=n.readBits(11);r.append(qt.toAlphaNumericChar(Math.floor(u/45))),r.append(qt.toAlphaNumericChar(u%45)),a-=2}if(a===1){if(n.available()<6)throw new B;r.append(qt.toAlphaNumericChar(n.readBits(6)))}if(c)for(let u=h;u<r.length();u++)r.charAt(u)==="%"&&(u<r.length()-1&&r.charAt(u+1)==="%"?r.deleteCharAt(u+1):r.setCharAt(u,""))}static decodeNumericSegment(n,r,a){for(;a>=3;){if(n.available()<10)throw new B;const c=n.readBits(10);if(c>=1e3)throw new B;r.append(qt.toAlphaNumericChar(Math.floor(c/100))),r.append(qt.toAlphaNumericChar(Math.floor(c/10)%10)),r.append(qt.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(n.available()<7)throw new B;const c=n.readBits(7);if(c>=100)throw new B;r.append(qt.toAlphaNumericChar(Math.floor(c/10))),r.append(qt.toAlphaNumericChar(c%10))}else if(a===1){if(n.available()<4)throw new B;const c=n.readBits(4);if(c>=10)throw new B;r.append(qt.toAlphaNumericChar(c))}}static parseECIValue(n){const r=n.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const a=n.readBits(8);return(r&63)<<8&4294967295|a}if((r&224)===192){const a=n.readBits(16);return(r&31)<<16&4294967295|a}throw new B}}qt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",qt.GB2312_SUBSET=1;class ja{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const r=n[0];n[0]=n[2],n[2]=r}}class tu{constructor(){this.rsDecoder=new Kn(Mt.QR_CODE_FIELD_256)}decodeBooleanArray(n,r){return this.decodeBitMatrix(Tt.parseFromBooleanArray(n),r)}decodeBitMatrix(n,r){const a=new Jd(n);let c=null;try{return this.decodeBitMatrixParser(a,r)}catch(h){c=h}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const h=this.decodeBitMatrixParser(a,r);return h.setOther(new ja(!0)),h}catch(h){throw c!==null?c:h}}decodeBitMatrixParser(n,r){const a=n.readVersion(),c=n.readFormatInformation().getErrorCorrectionLevel(),h=n.readCodewords(),u=fo.getDataBlocks(h,a,c);let g=0;for(const _ of u)g+=_.getNumDataCodewords();const x=new Uint8Array(g);let b=0;for(const _ of u){const E=_.getCodewords(),v=_.getNumDataCodewords();this.correctErrors(E,v);for(let T=0;T<v;T++)x[b++]=E[T]}return qt.decode(x,a,c,r)}correctErrors(n,r){const a=new Int32Array(n);try{this.rsDecoder.decode(a,n.length-r)}catch{throw new S}for(let c=0;c<r;c++)n[c]=a[c]}}class go extends rt{constructor(n,r,a){super(n,r),this.estimatedModuleSize=a}aboutEquals(n,r,a){if(Math.abs(r-this.getY())<=n&&Math.abs(a-this.getX())<=n){const c=Math.abs(n-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(n,r,a){const c=(this.getX()+r)/2,h=(this.getY()+n)/2,u=(this.estimatedModuleSize+a)/2;return new go(c,h,u)}}class tr{constructor(n,r,a,c,h,u,g){this.image=n,this.startX=r,this.startY=a,this.width=c,this.height=h,this.moduleSize=u,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,r=this.height,a=this.width,c=n+a,h=this.startY+r/2,u=new Int32Array(3),g=this.image;for(let x=0;x<r;x++){const b=h+(x&1?-Math.floor((x+1)/2):Math.floor((x+1)/2));u[0]=0,u[1]=0,u[2]=0;let _=n;for(;_<c&&!g.get(_,b);)_++;let E=0;for(;_<c;){if(g.get(_,b))if(E===1)u[1]++;else if(E===2){if(this.foundPatternCross(u)){const v=this.handlePossibleCenter(u,b,_);if(v!==null)return v}u[0]=u[2],u[1]=1,u[2]=0,E=1}else u[++E]++;else E===1&&E++,u[E]++;_++}if(this.foundPatternCross(u)){const v=this.handlePossibleCenter(u,b,c);if(v!==null)return v}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new U}static centerFromEnd(n,r){return r-n[2]-n[1]/2}foundPatternCross(n){const r=this.moduleSize,a=r/2;for(let c=0;c<3;c++)if(Math.abs(r-n[c])>=a)return!1;return!0}crossCheckVertical(n,r,a,c){const h=this.image,u=h.getHeight(),g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;let x=n;for(;x>=0&&h.get(r,x)&&g[1]<=a;)g[1]++,x--;if(x<0||g[1]>a)return NaN;for(;x>=0&&!h.get(r,x)&&g[0]<=a;)g[0]++,x--;if(g[0]>a)return NaN;for(x=n+1;x<u&&h.get(r,x)&&g[1]<=a;)g[1]++,x++;if(x===u||g[1]>a)return NaN;for(;x<u&&!h.get(r,x)&&g[2]<=a;)g[2]++,x++;if(g[2]>a)return NaN;const b=g[0]+g[1]+g[2];return 5*Math.abs(b-c)>=2*c?NaN:this.foundPatternCross(g)?tr.centerFromEnd(g,x):NaN}handlePossibleCenter(n,r,a){const c=n[0]+n[1]+n[2],h=tr.centerFromEnd(n,a),u=this.crossCheckVertical(r,h,2*n[1],c);if(!isNaN(u)){const g=(n[0]+n[1]+n[2])/3;for(const b of this.possibleCenters)if(b.aboutEquals(g,u,h))return b.combineEstimate(u,h,g);const x=new go(h,u,g);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class po extends rt{constructor(n,r,a,c){super(n,r),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,r,a){if(Math.abs(r-this.getY())<=n&&Math.abs(a-this.getX())<=n){const c=Math.abs(n-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(n,r,a){const c=this.count+1,h=(this.count*this.getX()+r)/c,u=(this.count*this.getY()+n)/c,g=(this.count*this.estimatedModuleSize+a)/c;return new po(h,u,g,c)}}class eu{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class pe{constructor(n,r){this.image=n,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const r=n!=null&&n.get(G.TRY_HARDER)!==void 0,a=n!=null&&n.get(G.PURE_BARCODE)!==void 0,c=this.image,h=c.getHeight(),u=c.getWidth();let g=Math.floor(3*h/(4*pe.MAX_MODULES));(g<pe.MIN_SKIP||r)&&(g=pe.MIN_SKIP);let x=!1;const b=new Int32Array(5);for(let E=g-1;E<h&&!x;E+=g){b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0;let v=0;for(let T=0;T<u;T++)if(c.get(T,E))(v&1)===1&&v++,b[v]++;else if(v&1)b[v]++;else if(v===4)if(pe.foundPatternCross(b)){if(this.handlePossibleCenter(b,E,T,a)===!0)if(g=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const N=this.findRowSkip();N>b[2]&&(E+=N-b[2]-g,T=u-1)}else{b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,v=3;continue}v=0,b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0}else b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,v=3;else b[++v]++;pe.foundPatternCross(b)&&this.handlePossibleCenter(b,E,u,a)===!0&&(g=b[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const _=this.selectBestPatterns();return rt.orderBestPatterns(_),new eu(_)}static centerFromEnd(n,r){return r-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let r=0;for(let h=0;h<5;h++){const u=n[h];if(u===0)return!1;r+=u}if(r<7)return!1;const a=r/7,c=a/2;return Math.abs(a-n[0])<c&&Math.abs(a-n[1])<c&&Math.abs(3*a-n[2])<3*c&&Math.abs(a-n[3])<c&&Math.abs(a-n[4])<c}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,r,a,c){const h=this.getCrossCheckStateCount();let u=0;const g=this.image;for(;n>=u&&r>=u&&g.get(r-u,n-u);)h[2]++,u++;if(n<u||r<u)return!1;for(;n>=u&&r>=u&&!g.get(r-u,n-u)&&h[1]<=a;)h[1]++,u++;if(n<u||r<u||h[1]>a)return!1;for(;n>=u&&r>=u&&g.get(r-u,n-u)&&h[0]<=a;)h[0]++,u++;if(h[0]>a)return!1;const x=g.getHeight(),b=g.getWidth();for(u=1;n+u<x&&r+u<b&&g.get(r+u,n+u);)h[2]++,u++;if(n+u>=x||r+u>=b)return!1;for(;n+u<x&&r+u<b&&!g.get(r+u,n+u)&&h[3]<a;)h[3]++,u++;if(n+u>=x||r+u>=b||h[3]>=a)return!1;for(;n+u<x&&r+u<b&&g.get(r+u,n+u)&&h[4]<a;)h[4]++,u++;if(h[4]>=a)return!1;const _=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(_-c)<2*c&&pe.foundPatternCross(h)}crossCheckVertical(n,r,a,c){const h=this.image,u=h.getHeight(),g=this.getCrossCheckStateCount();let x=n;for(;x>=0&&h.get(r,x);)g[2]++,x--;if(x<0)return NaN;for(;x>=0&&!h.get(r,x)&&g[1]<=a;)g[1]++,x--;if(x<0||g[1]>a)return NaN;for(;x>=0&&h.get(r,x)&&g[0]<=a;)g[0]++,x--;if(g[0]>a)return NaN;for(x=n+1;x<u&&h.get(r,x);)g[2]++,x++;if(x===u)return NaN;for(;x<u&&!h.get(r,x)&&g[3]<a;)g[3]++,x++;if(x===u||g[3]>=a)return NaN;for(;x<u&&h.get(r,x)&&g[4]<a;)g[4]++,x++;if(g[4]>=a)return NaN;const b=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(b-c)>=2*c?NaN:pe.foundPatternCross(g)?pe.centerFromEnd(g,x):NaN}crossCheckHorizontal(n,r,a,c){const h=this.image,u=h.getWidth(),g=this.getCrossCheckStateCount();let x=n;for(;x>=0&&h.get(x,r);)g[2]++,x--;if(x<0)return NaN;for(;x>=0&&!h.get(x,r)&&g[1]<=a;)g[1]++,x--;if(x<0||g[1]>a)return NaN;for(;x>=0&&h.get(x,r)&&g[0]<=a;)g[0]++,x--;if(g[0]>a)return NaN;for(x=n+1;x<u&&h.get(x,r);)g[2]++,x++;if(x===u)return NaN;for(;x<u&&!h.get(x,r)&&g[3]<a;)g[3]++,x++;if(x===u||g[3]>=a)return NaN;for(;x<u&&h.get(x,r)&&g[4]<a;)g[4]++,x++;if(g[4]>=a)return NaN;const b=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(b-c)>=c?NaN:pe.foundPatternCross(g)?pe.centerFromEnd(g,x):NaN}handlePossibleCenter(n,r,a,c){const h=n[0]+n[1]+n[2]+n[3]+n[4];let u=pe.centerFromEnd(n,a),g=this.crossCheckVertical(r,Math.floor(u),n[2],h);if(!isNaN(g)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(g),n[2],h),!isNaN(u)&&(!c||this.crossCheckDiagonal(Math.floor(g),Math.floor(u),n[2],h)))){const x=h/7;let b=!1;const _=this.possibleCenters;for(let E=0,v=_.length;E<v;E++){const T=_[E];if(T.aboutEquals(x,g,u)){_[E]=T.combineEstimate(g,u,x),b=!0;break}}if(!b){const E=new po(u,g,x);_.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const a of this.possibleCenters)if(a.getCount()>=pe.CENTER_QUORUM)if(r==null)r=a;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-a.getX())-Math.abs(r.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,r=0;const a=this.possibleCenters.length;for(const u of this.possibleCenters)u.getCount()>=pe.CENTER_QUORUM&&(n++,r+=u.getEstimatedModuleSize());if(n<3)return!1;const c=r/a;let h=0;for(const u of this.possibleCenters)h+=Math.abs(u.getEstimatedModuleSize()-c);return h<=.05*r}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new U;const r=this.possibleCenters;let a;if(n>3){let c=0,h=0;for(const x of this.possibleCenters){const b=x.getEstimatedModuleSize();c+=b,h+=b*b}a=c/n;let u=Math.sqrt(h/n-a*a);r.sort((x,b)=>{const _=Math.abs(b.getEstimatedModuleSize()-a),E=Math.abs(x.getEstimatedModuleSize()-a);return _<E?-1:_>E?1:0});const g=Math.max(.2*a,u);for(let x=0;x<r.length&&r.length>3;x++){const b=r[x];Math.abs(b.getEstimatedModuleSize()-a)>g&&(r.splice(x,1),x--)}}if(r.length>3){let c=0;for(const h of r)c+=h.getEstimatedModuleSize();a=c/r.length,r.sort((h,u)=>{if(u.getCount()===h.getCount()){const g=Math.abs(u.getEstimatedModuleSize()-a),x=Math.abs(h.getEstimatedModuleSize()-a);return g<x?1:g>x?-1:0}else return u.getCount()-h.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}pe.CENTER_QUORUM=2,pe.MIN_SKIP=3,pe.MAX_MODULES=57;class Jn{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(G.NEED_RESULT_POINT_CALLBACK);const a=new pe(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(a)}processFinderPatternInfo(n){const r=n.getTopLeft(),a=n.getTopRight(),c=n.getBottomLeft(),h=this.calculateModuleSize(r,a,c);if(h<1)throw new U("No pattern found in proccess finder.");const u=Jn.computeDimension(r,a,c,h),g=ot.getProvisionalVersionForDimension(u),x=g.getDimensionForVersion()-7;let b=null;if(g.getAlignmentPatternCenters().length>0){const T=a.getX()-r.getX()+c.getX(),O=a.getY()-r.getY()+c.getY(),N=1-3/x,L=Math.floor(r.getX()+N*(T-r.getX())),H=Math.floor(r.getY()+N*(O-r.getY()));for(let Z=4;Z<=16;Z<<=1)try{b=this.findAlignmentInRegion(h,L,H,Z);break}catch(K){if(!(K instanceof U))throw K}}const _=Jn.createTransform(r,a,c,b,u),E=Jn.sampleGrid(this.image,_,u);let v;return b===null?v=[c,r,a]:v=[c,r,a,b],new qs(E,v)}static createTransform(n,r,a,c,h){const u=h-3.5;let g,x,b,_;return c!==null?(g=c.getX(),x=c.getY(),b=u-3,_=b):(g=r.getX()-n.getX()+a.getX(),x=r.getY()-n.getY()+a.getY(),b=u,_=u),Ze.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,b,_,3.5,u,n.getX(),n.getY(),r.getX(),r.getY(),g,x,a.getX(),a.getY())}static sampleGrid(n,r,a){return ki.getInstance().sampleGridWithTransform(n,a,a,r)}static computeDimension(n,r,a,c){const h=St.round(rt.distance(n,r)/c),u=St.round(rt.distance(n,a)/c);let g=Math.floor((h+u)/2)+7;switch(g&3){case 0:g++;break;case 2:g--;break;case 3:throw new U("Dimensions could be not found.")}return g}calculateModuleSize(n,r,a){return(this.calculateModuleSizeOneWay(n,r)+this.calculateModuleSizeOneWay(n,a))/2}calculateModuleSizeOneWay(n,r){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(r.getX()),Math.floor(r.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(n,r,a,c){let h=this.sizeOfBlackWhiteBlackRun(n,r,a,c),u=1,g=n-(a-n);g<0?(u=n/(n-g),g=0):g>=this.image.getWidth()&&(u=(this.image.getWidth()-1-n)/(g-n),g=this.image.getWidth()-1);let x=Math.floor(r-(c-r)*u);return u=1,x<0?(u=r/(r-x),x=0):x>=this.image.getHeight()&&(u=(this.image.getHeight()-1-r)/(x-r),x=this.image.getHeight()-1),g=Math.floor(n+(g-n)*u),h+=this.sizeOfBlackWhiteBlackRun(n,r,g,x),h-1}sizeOfBlackWhiteBlackRun(n,r,a,c){const h=Math.abs(c-r)>Math.abs(a-n);if(h){let T=n;n=r,r=T,T=a,a=c,c=T}const u=Math.abs(a-n),g=Math.abs(c-r);let x=-u/2;const b=n<a?1:-1,_=r<c?1:-1;let E=0;const v=a+b;for(let T=n,O=r;T!==v;T+=b){const N=h?O:T,L=h?T:O;if(E===1===this.image.get(N,L)){if(E===2)return St.distance(T,O,n,r);E++}if(x+=g,x>0){if(O===c)break;O+=_,x-=u}}return E===2?St.distance(a+b,c,n,r):NaN}findAlignmentInRegion(n,r,a,c){const h=Math.floor(c*n),u=Math.max(0,r-h),g=Math.min(this.image.getWidth()-1,r+h);if(g-u<n*3)throw new U("Alignment top exceeds estimated module size.");const x=Math.max(0,a-h),b=Math.min(this.image.getHeight()-1,a+h);if(b-x<n*3)throw new U("Alignment bottom exceeds estimated module size.");return new tr(this.image,u,x,g-u,b-x,n,this.resultPointCallback).find()}}class Pi{constructor(){this.decoder=new tu}getDecoder(){return this.decoder}decode(n,r){let a,c;if(r!=null&&r.get(G.PURE_BARCODE)!==void 0){const x=Pi.extractPureBits(n.getBlackMatrix());a=this.decoder.decodeBitMatrix(x,r),c=Pi.NO_POINTS}else{const x=new Jn(n.getBlackMatrix()).detect(r);a=this.decoder.decodeBitMatrix(x.getBits(),r),c=x.getPoints()}a.getOther()instanceof ja&&a.getOther().applyMirroredCorrection(c);const h=new ne(a.getText(),a.getRawBytes(),void 0,c,ct.QR_CODE,void 0),u=a.getByteSegments();u!==null&&h.putMetadata(fe.BYTE_SEGMENTS,u);const g=a.getECLevel();return g!==null&&h.putMetadata(fe.ERROR_CORRECTION_LEVEL,g),a.hasStructuredAppend()&&(h.putMetadata(fe.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),h.putMetadata(fe.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),h}reset(){}static extractPureBits(n){const r=n.getTopLeftOnBit(),a=n.getBottomRightOnBit();if(r===null||a===null)throw new U;const c=this.moduleSize(r,n);let h=r[1],u=a[1],g=r[0],x=a[0];if(g>=x||h>=u)throw new U;if(u-h!==x-g&&(x=g+(u-h),x>=n.getWidth()))throw new U;const b=Math.round((x-g+1)/c),_=Math.round((u-h+1)/c);if(b<=0||_<=0)throw new U;if(_!==b)throw new U;const E=Math.floor(c/2);h+=E,g+=E;const v=g+Math.floor((b-1)*c)-x;if(v>0){if(v>E)throw new U;g-=v}const T=h+Math.floor((_-1)*c)-u;if(T>0){if(T>E)throw new U;h-=T}const O=new Tt(b,_);for(let N=0;N<_;N++){const L=h+Math.floor(N*c);for(let H=0;H<b;H++)n.get(g+Math.floor(H*c),L)&&O.set(H,N)}return O}static moduleSize(n,r){const a=r.getHeight(),c=r.getWidth();let h=n[0],u=n[1],g=!0,x=0;for(;h<c&&u<a;){if(g!==r.get(h,u)){if(++x===5)break;g=!g}h++,u++}if(h===c||u===a)throw new U;return(h-n[0])/7}}Pi.NO_POINTS=new Array;class dt{PDF417Common(){}static getBitCountSum(n){return St.sum(n)}static toIntArray(n){if(n==null||!n.length)return dt.EMPTY_INT_ARRAY;const r=new Int32Array(n.length);let a=0;for(const c of n)r[a++]=c;return r}static getCodeword(n){const r=P.binarySearch(dt.SYMBOL_TABLE,n&262143);return r<0?-1:(dt.CODEWORD_TABLE[r]-1)%dt.NUMBER_OF_CODEWORDS}}dt.NUMBER_OF_CODEWORDS=929,dt.MAX_CODEWORDS_IN_BARCODE=dt.NUMBER_OF_CODEWORDS-1,dt.MIN_ROWS_IN_BARCODE=3,dt.MAX_ROWS_IN_BARCODE=90,dt.MODULES_IN_CODEWORD=17,dt.MODULES_IN_STOP_PATTERN=18,dt.BARS_IN_MODULE=8,dt.EMPTY_INT_ARRAY=new Int32Array([]),dt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),dt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class iu{constructor(n,r){this.bits=n,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class wt{static detectMultiple(n,r,a){let c=n.getBlackMatrix(),h=wt.detect(a,c);return h.length||(c=c.clone(),c.rotate180(),h=wt.detect(a,c)),new iu(c,h)}static detect(n,r){const a=new Array;let c=0,h=0,u=!1;for(;c<r.getHeight();){const g=wt.findVertices(r,c,h);if(g[0]==null&&g[3]==null){if(!u)break;u=!1,h=0;for(const x of a)x[1]!=null&&(c=Math.trunc(Math.max(c,x[1].getY()))),x[3]!=null&&(c=Math.max(c,Math.trunc(x[3].getY())));c+=wt.ROW_STEP;continue}if(u=!0,a.push(g),!n)break;g[2]!=null?(h=Math.trunc(g[2].getX()),c=Math.trunc(g[2].getY())):(h=Math.trunc(g[4].getX()),c=Math.trunc(g[4].getY()))}return a}static findVertices(n,r,a){const c=n.getHeight(),h=n.getWidth(),u=new Array(8);return wt.copyToResult(u,wt.findRowsWithPattern(n,c,h,r,a,wt.START_PATTERN),wt.INDEXES_START_PATTERN),u[4]!=null&&(a=Math.trunc(u[4].getX()),r=Math.trunc(u[4].getY())),wt.copyToResult(u,wt.findRowsWithPattern(n,c,h,r,a,wt.STOP_PATTERN),wt.INDEXES_STOP_PATTERN),u}static copyToResult(n,r,a){for(let c=0;c<a.length;c++)n[a[c]]=r[c]}static findRowsWithPattern(n,r,a,c,h,u){const g=new Array(4);let x=!1;const b=new Int32Array(u.length);for(;c<r;c+=wt.ROW_STEP){let E=wt.findGuardPattern(n,h,c,a,!1,u,b);if(E!=null){for(;c>0;){const v=wt.findGuardPattern(n,h,--c,a,!1,u,b);if(v!=null)E=v;else{c++;break}}g[0]=new rt(E[0],c),g[1]=new rt(E[1],c),x=!0;break}}let _=c+1;if(x){let E=0,v=Int32Array.from([Math.trunc(g[0].getX()),Math.trunc(g[1].getX())]);for(;_<r;_++){const T=wt.findGuardPattern(n,v[0],_,a,!1,u,b);if(T!=null&&Math.abs(v[0]-T[0])<wt.MAX_PATTERN_DRIFT&&Math.abs(v[1]-T[1])<wt.MAX_PATTERN_DRIFT)v=T,E=0;else{if(E>wt.SKIPPED_ROW_COUNT_MAX)break;E++}}_-=E+1,g[2]=new rt(v[0],_),g[3]=new rt(v[1],_)}return _-c<wt.BARCODE_MIN_HEIGHT&&P.fill(g,null),g}static findGuardPattern(n,r,a,c,h,u,g){P.fillWithin(g,0,g.length,0);let x=r,b=0;for(;n.get(x,a)&&x>0&&b++<wt.MAX_PIXEL_DRIFT;)x--;let _=x,E=0,v=u.length;for(let T=h;_<c;_++)if(n.get(_,a)!==T)g[E]++;else{if(E===v-1){if(wt.patternMatchVariance(g,u,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return new Int32Array([x,_]);x+=g[0]+g[1],D.arraycopy(g,2,g,0,E-1),g[E-1]=0,g[E]=0,E--}else E++;g[E]=1,T=!T}return E===v-1&&wt.patternMatchVariance(g,u,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE?new Int32Array([x,_-1]):null}static patternMatchVariance(n,r,a){let c=n.length,h=0,u=0;for(let b=0;b<c;b++)h+=n[b],u+=r[b];if(h<u)return 1/0;let g=h/u;a*=g;let x=0;for(let b=0;b<c;b++){let _=n[b],E=r[b]*g,v=_>E?_-E:E-_;if(v>a)return 1/0;x+=v}return x/h}}wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),wt.MAX_AVG_VARIANCE=.42,wt.MAX_INDIVIDUAL_VARIANCE=.8,wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),wt.MAX_PIXEL_DRIFT=3,wt.MAX_PATTERN_DRIFT=5,wt.SKIPPED_ROW_COUNT_MAX=25,wt.ROW_STEP=5,wt.BARCODE_MIN_HEIGHT=10;class ye{constructor(n,r){if(r.length===0)throw new w;this.field=n;let a=r.length;if(a>1&&r[0]===0){let c=1;for(;c<a&&r[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),D.arraycopy(r,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let c=0;for(let h of this.coefficients)c=this.field.add(c,h);return c}let r=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)r=this.field.add(this.field.multiply(n,r),this.coefficients[c]);return r}add(n){if(!this.field.equals(n.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let r=this.coefficients,a=n.coefficients;if(r.length>a.length){let u=r;r=a,a=u}let c=new Int32Array(a.length),h=a.length-r.length;D.arraycopy(a,0,c,0,h);for(let u=h;u<a.length;u++)c[u]=this.field.add(r[u-h],a[u]);return new ye(this.field,c)}subtract(n){if(!this.field.equals(n.field))throw new w("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof ye?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new ye(this.field,new Int32Array([0]));let r=this.coefficients,a=r.length,c=n.coefficients,h=c.length,u=new Int32Array(a+h-1);for(let g=0;g<a;g++){let x=r[g];for(let b=0;b<h;b++)u[g+b]=this.field.add(u[g+b],this.field.multiply(x,c[b]))}return new ye(this.field,u)}negative(){let n=this.coefficients.length,r=new Int32Array(n);for(let a=0;a<n;a++)r[a]=this.field.subtract(0,this.coefficients[a]);return new ye(this.field,r)}multiplyScalar(n){if(n===0)return new ye(this.field,new Int32Array([0]));if(n===1)return this;let r=this.coefficients.length,a=new Int32Array(r);for(let c=0;c<r;c++)a[c]=this.field.multiply(this.coefficients[c],n);return new ye(this.field,a)}multiplyByMonomial(n,r){if(n<0)throw new w;if(r===0)return new ye(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+n);for(let h=0;h<a;h++)c[h]=this.field.multiply(this.coefficients[h],r);return new ye(this.field,c)}toString(){let n=new gt;for(let r=this.getDegree();r>=0;r--){let a=this.getCoefficient(r);a!==0&&(a<0?(n.append(" - "),a=-a):n.length()>0&&n.append(" + "),(r===0||a!==1)&&n.append(a),r!==0&&(r===1?n.append("x"):(n.append("x^"),n.append(r))))}return n.toString()}}class nu{add(n,r){return(n+r)%this.modulus}subtract(n,r){return(this.modulus+n-r)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new w;return this.logTable[n]}inverse(n){if(n===0)throw new Xs;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class mo extends nu{constructor(n,r){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let a=1;for(let c=0;c<n;c++)this.expTable[c]=a,a=a*r%n;for(let c=0;c<n-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new ye(this,new Int32Array([0])),this.one=new ye(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,r){if(n<0)throw new w;if(r===0)return this.zero;let a=new Int32Array(n+1);return a[0]=r,new ye(this,a)}}mo.PDF417_GF=new mo(dt.NUMBER_OF_CODEWORDS,3);class Wa{constructor(){this.field=mo.PDF417_GF}decode(n,r,a){let c=new ye(this.field,n),h=new Int32Array(r),u=!1;for(let O=r;O>0;O--){let N=c.evaluateAt(this.field.exp(O));h[r-O]=N,N!==0&&(u=!0)}if(!u)return 0;let g=this.field.getOne();if(a!=null)for(const O of a){let N=this.field.exp(n.length-1-O),L=new ye(this.field,new Int32Array([this.field.subtract(0,N),1]));g=g.multiply(L)}let x=new ye(this.field,h),b=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),_=b[0],E=b[1],v=this.findErrorLocations(_),T=this.findErrorMagnitudes(E,_,v);for(let O=0;O<v.length;O++){let N=n.length-1-this.field.log(v[O]);if(N<0)throw S.getChecksumInstance();n[N]=this.field.subtract(n[N],T[O])}return v.length}runEuclideanAlgorithm(n,r,a){if(n.getDegree()<r.getDegree()){let v=n;n=r,r=v}let c=n,h=r,u=this.field.getZero(),g=this.field.getOne();for(;h.getDegree()>=Math.round(a/2);){let v=c,T=u;if(c=h,u=g,c.isZero())throw S.getChecksumInstance();h=v;let O=this.field.getZero(),N=c.getCoefficient(c.getDegree()),L=this.field.inverse(N);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){let H=h.getDegree()-c.getDegree(),Z=this.field.multiply(h.getCoefficient(h.getDegree()),L);O=O.add(this.field.buildMonomial(H,Z)),h=h.subtract(c.multiplyByMonomial(H,Z))}g=O.multiply(u).subtract(T).negative()}let x=g.getCoefficient(0);if(x===0)throw S.getChecksumInstance();let b=this.field.inverse(x),_=g.multiply(b),E=h.multiply(b);return[_,E]}findErrorLocations(n){let r=n.getDegree(),a=new Int32Array(r),c=0;for(let h=1;h<this.field.getSize()&&c<r;h++)n.evaluateAt(h)===0&&(a[c]=this.field.inverse(h),c++);if(c!==r)throw S.getChecksumInstance();return a}findErrorMagnitudes(n,r,a){let c=r.getDegree(),h=new Int32Array(c);for(let b=1;b<=c;b++)h[c-b]=this.field.multiply(b,r.getCoefficient(b));let u=new ye(this.field,h),g=a.length,x=new Int32Array(g);for(let b=0;b<g;b++){let _=this.field.inverse(a[b]),E=this.field.subtract(0,n.evaluateAt(_)),v=this.field.inverse(u.evaluateAt(_));x[b]=this.field.multiply(E,v)}return x}}class rn{constructor(n,r,a,c,h){n instanceof rn?this.constructor_2(n):this.constructor_1(n,r,a,c,h)}constructor_1(n,r,a,c,h){const u=r==null||a==null,g=c==null||h==null;if(u&&g)throw new U;u?(r=new rt(0,c.getY()),a=new rt(0,h.getY())):g&&(c=new rt(n.getWidth()-1,r.getY()),h=new rt(n.getWidth()-1,a.getY())),this.image=n,this.topLeft=r,this.bottomLeft=a,this.topRight=c,this.bottomRight=h,this.minX=Math.trunc(Math.min(r.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),h.getX())),this.minY=Math.trunc(Math.min(r.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),h.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,r){return n==null?r:r==null?n:new rn(n.image,n.topLeft,n.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(n,r,a){let c=this.topLeft,h=this.bottomLeft,u=this.topRight,g=this.bottomRight;if(n>0){let x=a?this.topLeft:this.topRight,b=Math.trunc(x.getY()-n);b<0&&(b=0);let _=new rt(x.getX(),b);a?c=_:u=_}if(r>0){let x=a?this.bottomLeft:this.bottomRight,b=Math.trunc(x.getY()+r);b>=this.image.getHeight()&&(b=this.image.getHeight()-1);let _=new rt(x.getX(),b);a?h=_:g=_}return new rn(this.image,c,h,u,g)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class su{constructor(n,r,a,c){this.columnCount=n,this.errorCorrectionLevel=c,this.rowCountUpperPart=r,this.rowCountLowerPart=a,this.rowCount=r+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ts{constructor(){this.buffer=""}static form(n,r){let a=-1;function c(u,g,x,b,_,E){if(u==="%%")return"%";if(r[++a]===void 0)return;u=b?parseInt(b.substr(1)):void 0;let v=_?parseInt(_.substr(1)):void 0,T;switch(E){case"s":T=r[a];break;case"c":T=r[a][0];break;case"f":T=parseFloat(r[a]).toFixed(u);break;case"p":T=parseFloat(r[a]).toPrecision(u);break;case"e":T=parseFloat(r[a]).toExponential(u);break;case"x":T=parseInt(r[a]).toString(v||16);break;case"d":T=parseFloat(parseInt(r[a],v||10).toPrecision(u)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(v);let O=parseInt(x),N=x&&x[0]+""=="0"?"0":" ";for(;T.length<O;)T=g!==void 0?T+N:N+T;return T}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(h,c)}format(n,...r){this.buffer+=ts.form(n,r)}toString(){return this.buffer}}class es{constructor(n){this.boundingBox=new rn(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let r=this.getCodeword(n);if(r!=null)return r;for(let a=1;a<es.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(n)-a;if(c>=0&&(r=this.codewords[c],r!=null)||(c=this.imageRowToCodewordIndex(n)+a,c<this.codewords.length&&(r=this.codewords[c],r!=null)))return r}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,r){this.codewords[this.imageRowToCodewordIndex(n)]=r}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new ts;let r=0;for(const a of this.codewords){if(a==null){n.format("%3d:    |   %n",r++);continue}n.format("%3d: %3d|%3d%n",r++,a.getRowNumber(),a.getValue())}return n.toString()}}es.MAX_NEARBY_DISTANCE=5;class is{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let r=this.values.get(n);r==null&&(r=0),r++,this.values.set(n,r)}getValue(){let n=-1,r=new Array;for(const[a,c]of this.values.entries()){const h={getKey:()=>a,getValue:()=>c};h.getValue()>n?(n=h.getValue(),r=[],r.push(h.getKey())):h.getValue()===n&&r.push(h.getKey())}return dt.toIntArray(r)}getConfidence(n){return this.values.get(n)}}class $a extends es{constructor(n,r){super(n),this._isLeft=r}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=-1,b=1,_=0;for(let E=u;E<g;E++){if(r[E]==null)continue;let v=r[E],T=v.getRowNumber()-x;if(T===0)_++;else if(T===1)b=Math.max(b,_),_=1,x=v.getRowNumber();else if(T<0||v.getRowNumber()>=n.getRowCount()||T>E)r[E]=null;else{let O;b>2?O=(b-2)*T:O=T;let N=O>=E;for(let L=1;L<=O&&!N;L++)N=r[E-L]!=null;N?r[E]=null:(x=v.getRowNumber(),_=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let r=new Int32Array(n.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=r.length)continue;r[c]++}return r}adjustIncompleteIndicatorColumnRowNumbers(n){let r=this.getBoundingBox(),a=this._isLeft?r.getTopLeft():r.getTopRight(),c=this._isLeft?r.getBottomLeft():r.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=this.getCodewords(),x=-1;for(let b=h;b<u;b++){if(g[b]==null)continue;let _=g[b];_.setRowNumberAsRowIndicatorColumn();let E=_.getRowNumber()-x;E===0||(E===1?x=_.getRowNumber():_.getRowNumber()>=n.getRowCount()?g[b]=null:x=_.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),r=new is,a=new is,c=new is,h=new is;for(let g of n){if(g==null)continue;g.setRowNumberAsRowIndicatorColumn();let x=g.getValue()%30,b=g.getRowNumber();switch(this._isLeft||(b+=2),b%3){case 0:a.setValue(x*3+1);break;case 1:h.setValue(x/3),c.setValue(x%3);break;case 2:r.setValue(x+1);break}}if(r.getValue().length===0||a.getValue().length===0||c.getValue().length===0||h.getValue().length===0||r.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<dt.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>dt.MAX_ROWS_IN_BARCODE)return null;let u=new su(r.getValue()[0],a.getValue()[0],c.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(n,u),u}removeIncorrectCodewords(n,r){for(let a=0;a<n.length;a++){let c=n[a];if(n[a]==null)continue;let h=c.getValue()%30,u=c.getRowNumber();if(u>r.getRowCount()){n[a]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:h*3+1!==r.getRowCountUpperPart()&&(n[a]=null);break;case 1:(Math.trunc(h/3)!==r.getErrorCorrectionLevel()||h%3!==r.getRowCountLowerPart())&&(n[a]=null);break;case 2:h+1!==r.getColumnCount()&&(n[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ns{constructor(n,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=dt.MAX_CODEWORDS_IN_BARCODE,r;do r=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let a=this.detectionResultColumns[r].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(r,c,a))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<n.length;a++)if(n[a]!=null&&r[a]!=null&&n[a].getRowNumber()===r[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let h=this.detectionResultColumns[c].getCodewords()[a];h!=null&&(h.setRowNumber(n[a].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++){if(r[a]==null)continue;let c=r[a].getRowNumber(),h=0;for(let u=this.barcodeColumnCount+1;u>0&&h<this.ADJUST_ROW_NUMBER_SKIP;u--){let g=this.detectionResultColumns[u].getCodewords()[a];g!=null&&(h=ns.adjustRowNumberIfValid(c,h,g),g.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,r=this.detectionResultColumns[0].getCodewords();for(let a=0;a<r.length;a++){if(r[a]==null)continue;let c=r[a].getRowNumber(),h=0;for(let u=1;u<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;u++){let g=this.detectionResultColumns[u].getCodewords()[a];g!=null&&(h=ns.adjustRowNumberIfValid(c,h,g),g.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,r,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(n)?(a.setRowNumber(n),r=0):++r),r}adjustRowNumbers(n,r,a){if(!this.detectionResultColumns[n-1])return;let c=a[r],h=this.detectionResultColumns[n-1].getCodewords(),u=h;this.detectionResultColumns[n+1]!=null&&(u=this.detectionResultColumns[n+1].getCodewords());let g=new Array(14);g[2]=h[r],g[3]=u[r],r>0&&(g[0]=a[r-1],g[4]=h[r-1],g[5]=u[r-1]),r>1&&(g[8]=a[r-2],g[10]=h[r-2],g[11]=u[r-2]),r<a.length-1&&(g[1]=a[r+1],g[6]=h[r+1],g[7]=u[r+1]),r<a.length-2&&(g[9]=a[r+2],g[12]=h[r+2],g[13]=u[r+2]);for(let x of g)if(ns.adjustRowNumber(c,x))return}static adjustRowNumber(n,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===n.getBucket()?(n.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,r){this.detectionResultColumns[n]=r}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new ts;for(let a=0;a<n.getCodewords().length;a++){r.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){r.format("    |   ");continue}let h=this.detectionResultColumns[c].getCodewords()[a];if(h==null){r.format("    |   ");continue}r.format(" %3d|%3d",h.getRowNumber(),h.getValue())}r.format("%n")}return r.toString()}}class ss{constructor(n,r,a,c){this.rowNumber=ss.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(r),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==ss.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}ss.BARCODE_ROW_UNKNOWN=-1;class Re{static initialize(){for(let n=0;n<dt.SYMBOL_TABLE.length;n++){let r=dt.SYMBOL_TABLE[n],a=r&1;for(let c=0;c<dt.BARS_IN_MODULE;c++){let h=0;for(;(r&1)===a;)h+=1,r>>=1;a=r&1,Re.RATIOS_TABLE[n]||(Re.RATIOS_TABLE[n]=new Array(dt.BARS_IN_MODULE)),Re.RATIOS_TABLE[n][dt.BARS_IN_MODULE-c-1]=Math.fround(h/dt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let r=Re.getDecodedCodewordValue(Re.sampleBitCounts(n));return r!==-1?r:Re.getClosestDecodedValue(n)}static sampleBitCounts(n){let r=St.sum(n),a=new Int32Array(dt.BARS_IN_MODULE),c=0,h=0;for(let u=0;u<dt.MODULES_IN_CODEWORD;u++){let g=r/(2*dt.MODULES_IN_CODEWORD)+u*r/dt.MODULES_IN_CODEWORD;h+n[c]<=g&&(h+=n[c],c++),a[c]++}return a}static getDecodedCodewordValue(n){let r=Re.getBitValue(n);return dt.getCodeword(r)===-1?-1:r}static getBitValue(n){let r=0;for(let a=0;a<n.length;a++)for(let c=0;c<n[a];c++)r=r<<1|(a%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(n){let r=St.sum(n),a=new Array(dt.BARS_IN_MODULE);if(r>1)for(let u=0;u<a.length;u++)a[u]=Math.fround(n[u]/r);let c=Gs.MAX_VALUE,h=-1;this.bSymbolTableReady||Re.initialize();for(let u=0;u<Re.RATIOS_TABLE.length;u++){let g=0,x=Re.RATIOS_TABLE[u];for(let b=0;b<dt.BARS_IN_MODULE;b++){let _=Math.fround(x[b]-a[b]);if(g+=Math.fround(_*_),g>=c)break}g<c&&(c=g,h=dt.SYMBOL_TABLE[u])}return h}}Re.bSymbolTableReady=!1,Re.RATIOS_TABLE=new Array(dt.SYMBOL_TABLE.length).map(C=>new Array(dt.BARS_IN_MODULE));class Ya{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Xa{static parseLong(n,r=void 0){return parseInt(n,r)}}class Ga extends m{}Ga.kind="NullPointerException";class ru{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,r,a){if(n==null)throw new Ga;if(r<0||r>n.length||a<0||r+a>n.length||r+a<0)throw new k;if(a===0)return;for(let c=0;c<a;c++)this.write(n[r+c])}flush(){}close(){}}class ou extends m{}class au extends ru{constructor(n=32){if(super(),this.count=0,n<0)throw new w("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let a=this.buf.length<<1;if(a-n<0&&(a=n),a<0){if(n<0)throw new ou;a=V.MAX_VALUE}this.buf=P.copyOfUint8Array(this.buf,a)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,r,a){if(r<0||r>n.length||a<0||r+a-n.length>0)throw new k;this.ensureCapacity(this.count+a),D.arraycopy(n,r,this.buf,this.count,a),this.count+=a}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return P.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Lt;(function(C){C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Lt||(Lt={}));function qa(){if(typeof window<"u")return window.BigInt||null;if(typeof cs<"u")return cs.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let er;function Bi(C){if(typeof er>"u"&&(er=qa()),er===null)throw new Error("BigInt is not supported!");return er(C)}function lu(){let C=[];C[0]=Bi(1);let n=Bi(900);C[1]=n;for(let r=2;r<16;r++)C[r]=C[r-1]*n;return C}class z{static decode(n,r){let a=new gt(""),c=j.ISO8859_1;a.enableDecoding(c);let h=1,u=n[h++],g=new Ya;for(;h<n[0];){switch(u){case z.TEXT_COMPACTION_MODE_LATCH:h=z.textCompaction(n,h,a);break;case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:h=z.byteCompaction(u,n,c,h,a);break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[h++]);break;case z.NUMERIC_COMPACTION_MODE_LATCH:h=z.numericCompaction(n,h,a);break;case z.ECI_CHARSET:j.getCharacterSetECIByValue(n[h++]);break;case z.ECI_GENERAL_PURPOSE:h+=2;break;case z.ECI_USER_DEFINED:h++;break;case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=z.decodeMacroBlock(n,h,g);break;case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:throw new B;default:h--,h=z.textCompaction(n,h,a);break}if(h<n.length)u=n[h++];else throw B.getFormatInstance()}if(a.length()===0)throw B.getFormatInstance();let x=new qn(null,a.toString(),null,r);return x.setOther(g),x}static decodeMacroBlock(n,r,a){if(r+z.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw B.getFormatInstance();let c=new Int32Array(z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let g=0;g<z.NUMBER_OF_SEQUENCE_CODEWORDS;g++,r++)c[g]=n[r];a.setSegmentIndex(V.parseInt(z.decodeBase900toBase10(c,z.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new gt;r=z.textCompaction(n,r,h),a.setFileId(h.toString());let u=-1;for(n[r]===z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=r+1);r<n[0];)switch(n[r]){case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,n[r]){case z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let g=new gt;r=z.textCompaction(n,r+1,g),a.setFileName(g.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new gt;r=z.textCompaction(n,r+1,x),a.setSender(x.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let b=new gt;r=z.textCompaction(n,r+1,b),a.setAddressee(b.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let _=new gt;r=z.numericCompaction(n,r+1,_),a.setSegmentCount(V.parseInt(_.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let E=new gt;r=z.numericCompaction(n,r+1,E),a.setTimestamp(Xa.parseLong(E.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let v=new gt;r=z.numericCompaction(n,r+1,v),a.setChecksum(V.parseInt(v.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let T=new gt;r=z.numericCompaction(n,r+1,T),a.setFileSize(Xa.parseLong(T.toString()));break;default:throw B.getFormatInstance()}break;case z.MACRO_PDF417_TERMINATOR:r++,a.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(u!==-1){let g=r-u;a.isLastSegment()&&g--,a.setOptionalData(P.copyOfRange(n,u,u+g))}return r}static textCompaction(n,r,a){let c=new Int32Array((n[0]-r)*2),h=new Int32Array((n[0]-r)*2),u=0,g=!1;for(;r<n[0]&&!g;){let x=n[r++];if(x<z.TEXT_COMPACTION_MODE_LATCH)c[u]=x/30,c[u+1]=x%30,u+=2;else switch(x){case z.TEXT_COMPACTION_MODE_LATCH:c[u++]=z.TEXT_COMPACTION_MODE_LATCH;break;case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:r--,g=!0;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[u]=z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=n[r++],h[u]=x,u++;break}}return z.decodeTextCompaction(c,h,u,a),r}static decodeTextCompaction(n,r,a,c){let h=Lt.ALPHA,u=Lt.ALPHA,g=0;for(;g<a;){let x=n[g],b="";switch(h){case Lt.ALPHA:if(x<26)b=String.fromCharCode(65+x);else switch(x){case 26:b=" ";break;case z.LL:h=Lt.LOWER;break;case z.ML:h=Lt.MIXED;break;case z.PS:u=h,h=Lt.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(r[g]);break;case z.TEXT_COMPACTION_MODE_LATCH:h=Lt.ALPHA;break}break;case Lt.LOWER:if(x<26)b=String.fromCharCode(97+x);else switch(x){case 26:b=" ";break;case z.AS:u=h,h=Lt.ALPHA_SHIFT;break;case z.ML:h=Lt.MIXED;break;case z.PS:u=h,h=Lt.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(r[g]);break;case z.TEXT_COMPACTION_MODE_LATCH:h=Lt.ALPHA;break}break;case Lt.MIXED:if(x<z.PL)b=z.MIXED_CHARS[x];else switch(x){case z.PL:h=Lt.PUNCT;break;case 26:b=" ";break;case z.LL:h=Lt.LOWER;break;case z.AL:h=Lt.ALPHA;break;case z.PS:u=h,h=Lt.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(r[g]);break;case z.TEXT_COMPACTION_MODE_LATCH:h=Lt.ALPHA;break}break;case Lt.PUNCT:if(x<z.PAL)b=z.PUNCT_CHARS[x];else switch(x){case z.PAL:h=Lt.ALPHA;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(r[g]);break;case z.TEXT_COMPACTION_MODE_LATCH:h=Lt.ALPHA;break}break;case Lt.ALPHA_SHIFT:if(h=u,x<26)b=String.fromCharCode(65+x);else switch(x){case 26:b=" ";break;case z.TEXT_COMPACTION_MODE_LATCH:h=Lt.ALPHA;break}break;case Lt.PUNCT_SHIFT:if(h=u,x<z.PAL)b=z.PUNCT_CHARS[x];else switch(x){case z.PAL:h=Lt.ALPHA;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(r[g]);break;case z.TEXT_COMPACTION_MODE_LATCH:h=Lt.ALPHA;break}break}b!==""&&c.append(b),g++}}static byteCompaction(n,r,a,c,h){let u=new au,g=0,x=0,b=!1;switch(n){case z.BYTE_COMPACTION_MODE_LATCH:let _=new Int32Array(6),E=r[c++];for(;c<r[0]&&!b;)switch(_[g++]=E,x=900*x+E,E=r[c++],E){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:c--,b=!0;break;default:if(g%5===0&&g>0){for(let v=0;v<6;++v)u.write(Number(Bi(x)>>Bi(8*(5-v))));x=0,g=0}break}c===r[0]&&E<z.TEXT_COMPACTION_MODE_LATCH&&(_[g++]=E);for(let v=0;v<g;v++)u.write(_[v]);break;case z.BYTE_COMPACTION_MODE_LATCH_6:for(;c<r[0]&&!b;){let v=r[c++];if(v<z.TEXT_COMPACTION_MODE_LATCH)g++,x=900*x+v;else switch(v){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:c--,b=!0;break}if(g%5===0&&g>0){for(let T=0;T<6;++T)u.write(Number(Bi(x)>>Bi(8*(5-T))));x=0,g=0}}break}return h.append(at.decode(u.toByteArray(),a)),c}static numericCompaction(n,r,a){let c=0,h=!1,u=new Int32Array(z.MAX_NUMERIC_CODEWORDS);for(;r<n[0]&&!h;){let g=n[r++];if(r===n[0]&&(h=!0),g<z.TEXT_COMPACTION_MODE_LATCH)u[c]=g,c++;else switch(g){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:r--,h=!0;break}(c%z.MAX_NUMERIC_CODEWORDS===0||g===z.NUMERIC_COMPACTION_MODE_LATCH||h)&&c>0&&(a.append(z.decodeBase900toBase10(u,c)),c=0)}return r}static decodeBase900toBase10(n,r){let a=Bi(0);for(let h=0;h<r;h++)a+=z.EXP900[r-h-1]*Bi(n[h]);let c=a.toString();if(c.charAt(0)!=="1")throw new B;return c.substring(1)}}z.TEXT_COMPACTION_MODE_LATCH=900,z.BYTE_COMPACTION_MODE_LATCH=901,z.NUMERIC_COMPACTION_MODE_LATCH=902,z.BYTE_COMPACTION_MODE_LATCH_6=924,z.ECI_USER_DEFINED=925,z.ECI_GENERAL_PURPOSE=926,z.ECI_CHARSET=927,z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,z.MACRO_PDF417_TERMINATOR=922,z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,z.MAX_NUMERIC_CODEWORDS=15,z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,z.PL=25,z.LL=27,z.AS=27,z.ML=28,z.AL=28,z.PS=29,z.PAL=29,z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",z.EXP900=qa()?lu():[],z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _t{constructor(){}static decode(n,r,a,c,h,u,g){let x=new rn(n,r,a,c,h),b=null,_=null,E;for(let O=!0;;O=!1){if(r!=null&&(b=_t.getRowIndicatorColumn(n,x,r,!0,u,g)),c!=null&&(_=_t.getRowIndicatorColumn(n,x,c,!1,u,g)),E=_t.merge(b,_),E==null)throw U.getNotFoundInstance();let N=E.getBoundingBox();if(O&&N!=null&&(N.getMinY()<x.getMinY()||N.getMaxY()>x.getMaxY()))x=N;else break}E.setBoundingBox(x);let v=E.getBarcodeColumnCount()+1;E.setDetectionResultColumn(0,b),E.setDetectionResultColumn(v,_);let T=b!=null;for(let O=1;O<=v;O++){let N=T?O:v-O;if(E.getDetectionResultColumn(N)!==void 0)continue;let L;N===0||N===v?L=new $a(x,N===0):L=new es(x),E.setDetectionResultColumn(N,L);let H=-1,Z=H;for(let K=x.getMinY();K<=x.getMaxY();K++){if(H=_t.getStartColumn(E,N,K,T),H<0||H>x.getMaxX()){if(Z===-1)continue;H=Z}let q=_t.detectCodeword(n,x.getMinX(),x.getMaxX(),T,H,K,u,g);q!=null&&(L.setCodeword(K,q),Z=H,u=Math.min(u,q.getWidth()),g=Math.max(g,q.getWidth()))}}return _t.createDecoderResult(E)}static merge(n,r){if(n==null&&r==null)return null;let a=_t.getBarcodeMetadata(n,r);if(a==null)return null;let c=rn.merge(_t.adjustBoundingBox(n),_t.adjustBoundingBox(r));return new ns(a,c)}static adjustBoundingBox(n){if(n==null)return null;let r=n.getRowHeights();if(r==null)return null;let a=_t.getMax(r),c=0;for(let g of r)if(c+=a-g,g>0)break;let h=n.getCodewords();for(let g=0;c>0&&h[g]==null;g++)c--;let u=0;for(let g=r.length-1;g>=0&&(u+=a-r[g],!(r[g]>0));g--);for(let g=h.length-1;u>0&&h[g]==null;g--)u--;return n.getBoundingBox().addMissingRows(c,u,n.isLeft())}static getMax(n){let r=-1;for(let a of n)r=Math.max(r,a);return r}static getBarcodeMetadata(n,r){let a;if(n==null||(a=n.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let c;return r==null||(c=r.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(n,r,a,c,h,u){let g=new $a(r,c);for(let x=0;x<2;x++){let b=x===0?1:-1,_=Math.trunc(Math.trunc(a.getX()));for(let E=Math.trunc(Math.trunc(a.getY()));E<=r.getMaxY()&&E>=r.getMinY();E+=b){let v=_t.detectCodeword(n,0,n.getWidth(),c,_,E,h,u);v!=null&&(g.setCodeword(E,v),c?_=v.getStartX():_=v.getEndX())}}return g}static adjustCodewordCount(n,r){let a=r[0][1],c=a.getValue(),h=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-_t.getNumberOfECCodeWords(n.getBarcodeECLevel());if(c.length===0){if(h<1||h>dt.MAX_CODEWORDS_IN_BARCODE)throw U.getNotFoundInstance();a.setValue(h)}else c[0]!==h&&a.setValue(h)}static createDecoderResult(n){let r=_t.createBarcodeMatrix(n);_t.adjustCodewordCount(n,r);let a=new Array,c=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),h=[],u=new Array;for(let x=0;x<n.getBarcodeRowCount();x++)for(let b=0;b<n.getBarcodeColumnCount();b++){let _=r[x][b+1].getValue(),E=x*n.getBarcodeColumnCount()+b;_.length===0?a.push(E):_.length===1?c[E]=_[0]:(u.push(E),h.push(_))}let g=new Array(h.length);for(let x=0;x<g.length;x++)g[x]=h[x];return _t.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),c,dt.toIntArray(a),dt.toIntArray(u),g)}static createDecoderResultFromAmbiguousValues(n,r,a,c,h){let u=new Int32Array(c.length),g=100;for(;g-- >0;){for(let x=0;x<u.length;x++)r[c[x]]=h[x][u[x]];try{return _t.decodeCodewords(r,n,a)}catch(x){if(!(x instanceof S))throw x}if(u.length===0)throw S.getChecksumInstance();for(let x=0;x<u.length;x++)if(u[x]<h[x].length-1){u[x]++;break}else if(u[x]=0,x===u.length-1)throw S.getChecksumInstance()}throw S.getChecksumInstance()}static createBarcodeMatrix(n){let r=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let c=0;c<r.length;c++)for(let h=0;h<r[c].length;h++)r[c][h]=new is;let a=0;for(let c of n.getDetectionResultColumns()){if(c!=null){for(let h of c.getCodewords())if(h!=null){let u=h.getRowNumber();if(u>=0){if(u>=r.length)continue;r[u][a].setValue(h.getValue())}}}a++}return r}static isValidBarcodeColumn(n,r){return r>=0&&r<=n.getBarcodeColumnCount()+1}static getStartColumn(n,r,a,c){let h=c?1:-1,u=null;if(_t.isValidBarcodeColumn(n,r-h)&&(u=n.getDetectionResultColumn(r-h).getCodeword(a)),u!=null)return c?u.getEndX():u.getStartX();if(u=n.getDetectionResultColumn(r).getCodewordNearby(a),u!=null)return c?u.getStartX():u.getEndX();if(_t.isValidBarcodeColumn(n,r-h)&&(u=n.getDetectionResultColumn(r-h).getCodewordNearby(a)),u!=null)return c?u.getEndX():u.getStartX();let g=0;for(;_t.isValidBarcodeColumn(n,r-h);){r-=h;for(let x of n.getDetectionResultColumn(r).getCodewords())if(x!=null)return(c?x.getEndX():x.getStartX())+h*g*(x.getEndX()-x.getStartX());g++}return c?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,r,a,c,h,u,g,x){h=_t.adjustCodewordStartColumn(n,r,a,c,h,u);let b=_t.getModuleBitCount(n,r,a,c,h,u);if(b==null)return null;let _,E=St.sum(b);if(c)_=h+E;else{for(let O=0;O<b.length/2;O++){let N=b[O];b[O]=b[b.length-1-O],b[b.length-1-O]=N}_=h,h=_-E}if(!_t.checkCodewordSkew(E,g,x))return null;let v=Re.getDecodedValue(b),T=dt.getCodeword(v);return T===-1?null:new ss(h,_,_t.getCodewordBucketNumber(v),T)}static getModuleBitCount(n,r,a,c,h,u){let g=h,x=new Int32Array(8),b=0,_=c?1:-1,E=c;for(;(c?g<a:g>=r)&&b<x.length;)n.get(g,u)===E?(x[b]++,g+=_):(b++,E=!E);return b===x.length||g===(c?a:r)&&b===x.length-1?x:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,r,a,c,h,u){let g=h,x=c?-1:1;for(let b=0;b<2;b++){for(;(c?g>=r:g<a)&&c===n.get(g,u);){if(Math.abs(h-g)>_t.CODEWORD_SKEW_SIZE)return h;g+=x}x=-x,c=!c}return g}static checkCodewordSkew(n,r,a){return r-_t.CODEWORD_SKEW_SIZE<=n&&n<=a+_t.CODEWORD_SKEW_SIZE}static decodeCodewords(n,r,a){if(n.length===0)throw B.getFormatInstance();let c=1<<r+1,h=_t.correctErrors(n,a,c);_t.verifyCodewordCount(n,c);let u=z.decode(n,""+r);return u.setErrorsCorrected(h),u.setErasures(a.length),u}static correctErrors(n,r,a){if(r!=null&&r.length>a/2+_t.MAX_ERRORS||a<0||a>_t.MAX_EC_CODEWORDS)throw S.getChecksumInstance();return _t.errorCorrection.decode(n,a,r)}static verifyCodewordCount(n,r){if(n.length<4)throw B.getFormatInstance();let a=n[0];if(a>n.length)throw B.getFormatInstance();if(a===0)if(r<n.length)n[0]=n.length-r;else throw B.getFormatInstance()}static getBitCountForCodeword(n){let r=new Int32Array(8),a=0,c=r.length-1;for(;!((n&1)!==a&&(a=n&1,c--,c<0));)r[c]++,n>>=1;return r}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return _t.getCodewordBucketNumber(_t.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let r=new ts;for(let a=0;a<n.length;a++){r.format("Row %2d: ",a);for(let c=0;c<n[a].length;c++){let h=n[a][c];h.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}r.format("%n")}return r.toString()}}_t.CODEWORD_SKEW_SIZE=2,_t.MAX_ERRORS=3,_t.MAX_EC_CODEWORDS=512,_t.errorCorrection=new Wa;class we{decode(n,r=null){let a=we.decode(n,r,!1);if(a==null||a.length===0||a[0]==null)throw U.getNotFoundInstance();return a[0]}decodeMultiple(n,r=null){try{return we.decode(n,r,!0)}catch(a){throw a instanceof B||a instanceof S?U.getNotFoundInstance():a}}static decode(n,r,a){const c=new Array,h=wt.detectMultiple(n,r,a);for(const u of h.getPoints()){const g=_t.decode(h.getBits(),u[4],u[5],u[6],u[7],we.getMinCodewordWidth(u),we.getMaxCodewordWidth(u)),x=new ne(g.getText(),g.getRawBytes(),void 0,u,ct.PDF_417);x.putMetadata(fe.ERROR_CORRECTION_LEVEL,g.getECLevel());const b=g.getOther();b!=null&&x.putMetadata(fe.PDF417_EXTRA_METADATA,b),c.push(x)}return c.map(u=>u)}static getMaxWidth(n,r){return n==null||r==null?0:Math.trunc(Math.abs(n.getX()-r.getX()))}static getMinWidth(n,r){return n==null||r==null?V.MAX_VALUE:Math.trunc(Math.abs(n.getX()-r.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(we.getMaxWidth(n[0],n[4]),we.getMaxWidth(n[6],n[2])*dt.MODULES_IN_CODEWORD/dt.MODULES_IN_STOP_PATTERN),Math.max(we.getMaxWidth(n[1],n[5]),we.getMaxWidth(n[7],n[3])*dt.MODULES_IN_CODEWORD/dt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(we.getMinWidth(n[0],n[4]),we.getMinWidth(n[6],n[2])*dt.MODULES_IN_CODEWORD/dt.MODULES_IN_STOP_PATTERN),Math.min(we.getMinWidth(n[1],n[5]),we.getMinWidth(n[7],n[3])*dt.MODULES_IN_CODEWORD/dt.MODULES_IN_STOP_PATTERN)))}reset(){}}class ir extends m{}ir.kind="ReaderException";class Za{constructor(n,r){this.verbose=n===!0,r&&this.setHints(r)}decode(n,r){return r&&this.setHints(r),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const r=!s(n)&&n.get(G.TRY_HARDER)===!0,a=s(n)?null:n.get(G.POSSIBLE_FORMATS),c=new Array;if(!s(a)){const h=a.some(u=>u===ct.UPC_A||u===ct.UPC_E||u===ct.EAN_13||u===ct.EAN_8||u===ct.CODABAR||u===ct.CODE_39||u===ct.CODE_93||u===ct.CODE_128||u===ct.ITF||u===ct.RSS_14||u===ct.RSS_EXPANDED);h&&!r&&c.push(new On(n,this.verbose)),a.includes(ct.QR_CODE)&&c.push(new Pi),a.includes(ct.DATA_MATRIX)&&c.push(new Li),a.includes(ct.AZTEC)&&c.push(new Zs),a.includes(ct.PDF_417)&&c.push(new we),h&&r&&c.push(new On(n,this.verbose))}c.length===0&&(r||c.push(new On(n,this.verbose)),c.push(new Pi),c.push(new Li),c.push(new Zs),c.push(new we),r&&c.push(new On(n,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new ir("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(n,this.hints)}catch(a){if(a instanceof ir)continue}throw new U("No MultiFormat Readers were able to detect the code.")}}class cu extends Te{constructor(n=null,r=500){const a=new Za;a.setHints(n),super(a,r)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class hu extends Te{constructor(n=500){super(new we,n)}}class du extends Te{constructor(n=500){super(new Pi,n)}}var xo;(function(C){C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION"})(xo||(xo={}));var de=xo;class bo{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new Oe(n,Int32Array.from([1])))}buildGenerator(n){const r=this.cachedGenerators;if(n>=r.length){let a=r[r.length-1];const c=this.field;for(let h=r.length;h<=n;h++){const u=a.multiply(new Oe(c,Int32Array.from([1,c.exp(h-1+c.getGeneratorBase())])));r.push(u),a=u}}return r[n]}encode(n,r){if(r===0)throw new w("No error correction bytes");const a=n.length-r;if(a<=0)throw new w("No data bytes provided");const c=this.buildGenerator(r),h=new Int32Array(a);D.arraycopy(n,0,h,0,a);let u=new Oe(this.field,h);u=u.multiplyByMonomial(r,1);const x=u.divide(c)[1].getCoefficients(),b=r-x.length;for(let _=0;_<b;_++)n[a+_]=0;D.arraycopy(x,0,n,a+b,x.length)}}class Qt{constructor(){}static applyMaskPenaltyRule1(n){return Qt.applyMaskPenaltyRule1Internal(n,!0)+Qt.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let r=0;const a=n.getArray(),c=n.getWidth(),h=n.getHeight();for(let u=0;u<h-1;u++){const g=a[u];for(let x=0;x<c-1;x++){const b=g[x];b===g[x+1]&&b===a[u+1][x]&&b===a[u+1][x+1]&&r++}}return Qt.N2*r}static applyMaskPenaltyRule3(n){let r=0;const a=n.getArray(),c=n.getWidth(),h=n.getHeight();for(let u=0;u<h;u++)for(let g=0;g<c;g++){const x=a[u];g+6<c&&x[g]===1&&x[g+1]===0&&x[g+2]===1&&x[g+3]===1&&x[g+4]===1&&x[g+5]===0&&x[g+6]===1&&(Qt.isWhiteHorizontal(x,g-4,g)||Qt.isWhiteHorizontal(x,g+7,g+11))&&r++,u+6<h&&a[u][g]===1&&a[u+1][g]===0&&a[u+2][g]===1&&a[u+3][g]===1&&a[u+4][g]===1&&a[u+5][g]===0&&a[u+6][g]===1&&(Qt.isWhiteVertical(a,g,u-4,u)||Qt.isWhiteVertical(a,g,u+7,u+11))&&r++}return r*Qt.N3}static isWhiteHorizontal(n,r,a){r=Math.max(r,0),a=Math.min(a,n.length);for(let c=r;c<a;c++)if(n[c]===1)return!1;return!0}static isWhiteVertical(n,r,a,c){a=Math.max(a,0),c=Math.min(c,n.length);for(let h=a;h<c;h++)if(n[h][r]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let r=0;const a=n.getArray(),c=n.getWidth(),h=n.getHeight();for(let x=0;x<h;x++){const b=a[x];for(let _=0;_<c;_++)b[_]===1&&r++}const u=n.getHeight()*n.getWidth();return Math.floor(Math.abs(r*2-u)*10/u)*Qt.N4}static getDataMaskBit(n,r,a){let c,h;switch(n){case 0:c=a+r&1;break;case 1:c=a&1;break;case 2:c=r%3;break;case 3:c=(a+r)%3;break;case 4:c=Math.floor(a/2)+Math.floor(r/3)&1;break;case 5:h=a*r,c=(h&1)+h%3;break;case 6:h=a*r,c=(h&1)+h%3&1;break;case 7:h=a*r,c=h%3+(a+r&1)&1;break;default:throw new w("Invalid mask pattern: "+n)}return c===0}static applyMaskPenaltyRule1Internal(n,r){let a=0;const c=r?n.getHeight():n.getWidth(),h=r?n.getWidth():n.getHeight(),u=n.getArray();for(let g=0;g<c;g++){let x=0,b=-1;for(let _=0;_<h;_++){const E=r?u[g][_]:u[_][g];E===b?x++:(x>=5&&(a+=Qt.N1+(x-5)),x=1,b=E)}x>=5&&(a+=Qt.N1+(x-5))}return a}}Qt.N1=3,Qt.N2=3,Qt.N3=40,Qt.N4=10;class nr{constructor(n,r){this.width=n,this.height=r;const a=new Array(r);for(let c=0;c!==r;c++)a[c]=new Uint8Array(n);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(n,r){return this.bytes[r][n]}getArray(){return this.bytes}setNumber(n,r,a){this.bytes[r][n]=a}setBoolean(n,r,a){this.bytes[r][n]=a?1:0}clear(n){for(const r of this.bytes)P.fill(r,n)}equals(n){if(!(n instanceof nr))return!1;const r=n;if(this.width!==r.width||this.height!==r.height)return!1;for(let a=0,c=this.height;a<c;++a){const h=this.bytes[a],u=r.bytes[a];for(let g=0,x=this.width;g<x;++g)if(h[g]!==u[g])return!1}return!0}toString(){const n=new gt;for(let r=0,a=this.height;r<a;++r){const c=this.bytes[r];for(let h=0,u=this.width;h<u;++h)switch(c[h]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class on{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new gt;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<on.NUM_MASK_PATTERNS}}on.NUM_MASK_PATTERNS=8;class Bt extends m{}Bt.kind="WriterException";class ht{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,r,a,c,h){ht.clearMatrix(h),ht.embedBasicPatterns(a,h),ht.embedTypeInfo(r,c,h),ht.maybeEmbedVersionInfo(a,h),ht.embedDataBits(n,c,h)}static embedBasicPatterns(n,r){ht.embedPositionDetectionPatternsAndSeparators(r),ht.embedDarkDotAtLeftBottomCorner(r),ht.maybeEmbedPositionAdjustmentPatterns(n,r),ht.embedTimingPatterns(r)}static embedTypeInfo(n,r,a){const c=new W;ht.makeTypeInfoBits(n,r,c);for(let h=0,u=c.getSize();h<u;++h){const g=c.get(c.getSize()-1-h),x=ht.TYPE_INFO_COORDINATES[h],b=x[0],_=x[1];if(a.setBoolean(b,_,g),h<8){const E=a.getWidth()-h-1;a.setBoolean(E,8,g)}else{const v=a.getHeight()-7+(h-8);a.setBoolean(8,v,g)}}}static maybeEmbedVersionInfo(n,r){if(n.getVersionNumber()<7)return;const a=new W;ht.makeVersionInfoBits(n,a);let c=6*3-1;for(let h=0;h<6;++h)for(let u=0;u<3;++u){const g=a.get(c);c--,r.setBoolean(h,r.getHeight()-11+u,g),r.setBoolean(r.getHeight()-11+u,h,g)}}static embedDataBits(n,r,a){let c=0,h=-1,u=a.getWidth()-1,g=a.getHeight()-1;for(;u>0;){for(u===6&&(u-=1);g>=0&&g<a.getHeight();){for(let x=0;x<2;++x){const b=u-x;if(!ht.isEmpty(a.get(b,g)))continue;let _;c<n.getSize()?(_=n.get(c),++c):_=!1,r!==255&&Qt.getDataMaskBit(r,b,g)&&(_=!_),a.setBoolean(b,g,_)}g+=h}h=-h,g+=h,u-=2}if(c!==n.getSize())throw new Bt("Not all bits consumed: "+c+"/"+n.getSize())}static findMSBSet(n){return 32-V.numberOfLeadingZeros(n)}static calculateBCHCode(n,r){if(r===0)throw new w("0 polynomial");const a=ht.findMSBSet(r);for(n<<=a-1;ht.findMSBSet(n)>=a;)n^=r<<ht.findMSBSet(n)-a;return n}static makeTypeInfoBits(n,r,a){if(!on.isValidMaskPattern(r))throw new Bt("Invalid mask pattern");const c=n.getBits()<<3|r;a.appendBits(c,5);const h=ht.calculateBCHCode(c,ht.TYPE_INFO_POLY);a.appendBits(h,10);const u=new W;if(u.appendBits(ht.TYPE_INFO_MASK_PATTERN,15),a.xor(u),a.getSize()!==15)throw new Bt("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(n,r){r.appendBits(n.getVersionNumber(),6);const a=ht.calculateBCHCode(n.getVersionNumber(),ht.VERSION_INFO_POLY);if(r.appendBits(a,12),r.getSize()!==18)throw new Bt("should not happen but we got: "+r.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let r=8;r<n.getWidth()-8;++r){const a=(r+1)%2;ht.isEmpty(n.get(r,6))&&n.setNumber(r,6,a),ht.isEmpty(n.get(6,r))&&n.setNumber(6,r,a)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new Bt;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,r,a){for(let c=0;c<8;++c){if(!ht.isEmpty(a.get(n+c,r)))throw new Bt;a.setNumber(n+c,r,0)}}static embedVerticalSeparationPattern(n,r,a){for(let c=0;c<7;++c){if(!ht.isEmpty(a.get(n,r+c)))throw new Bt;a.setNumber(n,r+c,0)}}static embedPositionAdjustmentPattern(n,r,a){for(let c=0;c<5;++c){const h=ht.POSITION_ADJUSTMENT_PATTERN[c];for(let u=0;u<5;++u)a.setNumber(n+u,r+c,h[u])}}static embedPositionDetectionPattern(n,r,a){for(let c=0;c<7;++c){const h=ht.POSITION_DETECTION_PATTERN[c];for(let u=0;u<7;++u)a.setNumber(n+u,r+c,h[u])}}static embedPositionDetectionPatternsAndSeparators(n){const r=ht.POSITION_DETECTION_PATTERN[0].length;ht.embedPositionDetectionPattern(0,0,n),ht.embedPositionDetectionPattern(n.getWidth()-r,0,n),ht.embedPositionDetectionPattern(0,n.getWidth()-r,n);const a=8;ht.embedHorizontalSeparationPattern(0,a-1,n),ht.embedHorizontalSeparationPattern(n.getWidth()-a,a-1,n),ht.embedHorizontalSeparationPattern(0,n.getWidth()-a,n);const c=7;ht.embedVerticalSeparationPattern(c,0,n),ht.embedVerticalSeparationPattern(n.getHeight()-c-1,0,n),ht.embedVerticalSeparationPattern(c,n.getHeight()-c,n)}static maybeEmbedPositionAdjustmentPatterns(n,r){if(n.getVersionNumber()<2)return;const a=n.getVersionNumber()-1,c=ht.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let h=0,u=c.length;h!==u;h++){const g=c[h];if(g>=0)for(let x=0;x!==u;x++){const b=c[x];b>=0&&ht.isEmpty(r.get(b,g))&&ht.embedPositionAdjustmentPattern(b-2,g-2,r)}}}}ht.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ht.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ht.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ht.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ht.VERSION_INFO_POLY=7973,ht.TYPE_INFO_POLY=1335,ht.TYPE_INFO_MASK_PATTERN=21522;class uu{constructor(n,r){this.dataBytes=n,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class jt{constructor(){}static calculateMaskPenalty(n){return Qt.applyMaskPenaltyRule1(n)+Qt.applyMaskPenaltyRule2(n)+Qt.applyMaskPenaltyRule3(n)+Qt.applyMaskPenaltyRule4(n)}static encode(n,r,a=null){let c=jt.DEFAULT_BYTE_MODE_ENCODING;const h=a!==null&&a.get(de.CHARACTER_SET)!==void 0;h&&(c=a.get(de.CHARACTER_SET).toString());const u=this.chooseMode(n,c),g=new W;if(u===lt.BYTE&&(h||jt.DEFAULT_BYTE_MODE_ENCODING!==c)){const K=j.getCharacterSetECIByName(c);K!==void 0&&this.appendECI(K,g)}this.appendModeInfo(u,g);const x=new W;this.appendBytes(n,u,x,c);let b;if(a!==null&&a.get(de.QR_VERSION)!==void 0){const K=Number.parseInt(a.get(de.QR_VERSION).toString(),10);b=ot.getVersionForNumber(K);const q=this.calculateBitsNeeded(u,g,x,b);if(!this.willFit(q,b,r))throw new Bt("Data too big for requested version")}else b=this.recommendVersion(r,u,g,x);const _=new W;_.appendBitArray(g);const E=u===lt.BYTE?x.getSizeInBytes():n.length;this.appendLengthInfo(E,b,u,_),_.appendBitArray(x);const v=b.getECBlocksForLevel(r),T=b.getTotalCodewords()-v.getTotalECCodewords();this.terminateBits(T,_);const O=this.interleaveWithECBytes(_,b.getTotalCodewords(),T,v.getNumBlocks()),N=new on;N.setECLevel(r),N.setMode(u),N.setVersion(b);const L=b.getDimensionForVersion(),H=new nr(L,L),Z=this.chooseMaskPattern(O,r,b,H);return N.setMaskPattern(Z),ht.buildMatrix(O,r,b,Z,H),N.setMatrix(H),N}static recommendVersion(n,r,a,c){const h=this.calculateBitsNeeded(r,a,c,ot.getVersionForNumber(1)),u=this.chooseVersion(h,n),g=this.calculateBitsNeeded(r,a,c,u);return this.chooseVersion(g,n)}static calculateBitsNeeded(n,r,a,c){return r.getSize()+n.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(n){return n<jt.ALPHANUMERIC_TABLE.length?jt.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,r=null){if(j.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(n))return lt.KANJI;let a=!1,c=!1;for(let h=0,u=n.length;h<u;++h){const g=n.charAt(h);if(jt.isDigit(g))a=!0;else if(this.getAlphanumericCode(g.charCodeAt(0))!==-1)c=!0;else return lt.BYTE}return c?lt.ALPHANUMERIC:a?lt.NUMERIC:lt.BYTE}static isOnlyDoubleByteKanji(n){let r;try{r=at.encode(n,j.SJIS)}catch{return!1}const a=r.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const h=r[c]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(n,r,a,c){let h=Number.MAX_SAFE_INTEGER,u=-1;for(let g=0;g<on.NUM_MASK_PATTERNS;g++){ht.buildMatrix(n,r,a,g,c);let x=this.calculateMaskPenalty(c);x<h&&(h=x,u=g)}return u}static chooseVersion(n,r){for(let a=1;a<=40;a++){const c=ot.getVersionForNumber(a);if(jt.willFit(n,c,r))return c}throw new Bt("Data too big")}static willFit(n,r,a){const c=r.getTotalCodewords(),u=r.getECBlocksForLevel(a).getTotalECCodewords(),g=c-u,x=(n+7)/8;return g>=x}static terminateBits(n,r){const a=n*8;if(r.getSize()>a)throw new Bt("data bits cannot fit in the QR Code"+r.getSize()+" > "+a);for(let u=0;u<4&&r.getSize()<a;++u)r.appendBit(!1);const c=r.getSize()&7;if(c>0)for(let u=c;u<8;u++)r.appendBit(!1);const h=n-r.getSizeInBytes();for(let u=0;u<h;++u)r.appendBits(u&1?17:236,8);if(r.getSize()!==a)throw new Bt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,r,a,c,h,u){if(c>=a)throw new Bt("Block ID too large");const g=n%a,x=a-g,b=Math.floor(n/a),_=b+1,E=Math.floor(r/a),v=E+1,T=b-E,O=_-v;if(T!==O)throw new Bt("EC bytes mismatch");if(a!==x+g)throw new Bt("RS blocks mismatch");if(n!==(E+T)*x+(v+O)*g)throw new Bt("Total bytes mismatch");c<x?(h[0]=E,u[0]=T):(h[0]=v,u[0]=O)}static interleaveWithECBytes(n,r,a,c){if(n.getSizeInBytes()!==a)throw new Bt("Number of bits and data bytes does not match");let h=0,u=0,g=0;const x=new Array;for(let _=0;_<c;++_){const E=new Int32Array(1),v=new Int32Array(1);jt.getNumDataBytesAndNumECBytesForBlockID(r,a,c,_,E,v);const T=E[0],O=new Uint8Array(T);n.toBytes(8*h,O,0,T);const N=jt.generateECBytes(O,v[0]);x.push(new uu(O,N)),u=Math.max(u,T),g=Math.max(g,N.length),h+=E[0]}if(a!==h)throw new Bt("Data bytes does not match offset");const b=new W;for(let _=0;_<u;++_)for(const E of x){const v=E.getDataBytes();_<v.length&&b.appendBits(v[_],8)}for(let _=0;_<g;++_)for(const E of x){const v=E.getErrorCorrectionBytes();_<v.length&&b.appendBits(v[_],8)}if(r!==b.getSizeInBytes())throw new Bt("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b}static generateECBytes(n,r){const a=n.length,c=new Int32Array(a+r);for(let u=0;u<a;u++)c[u]=n[u]&255;new bo(Mt.QR_CODE_FIELD_256).encode(c,r);const h=new Uint8Array(r);for(let u=0;u<r;u++)h[u]=c[a+u];return h}static appendModeInfo(n,r){r.appendBits(n.getBits(),4)}static appendLengthInfo(n,r,a,c){const h=a.getCharacterCountBits(r);if(n>=1<<h)throw new Bt(n+" is bigger than "+((1<<h)-1));c.appendBits(n,h)}static appendBytes(n,r,a,c){switch(r){case lt.NUMERIC:jt.appendNumericBytes(n,a);break;case lt.ALPHANUMERIC:jt.appendAlphanumericBytes(n,a);break;case lt.BYTE:jt.append8BitBytes(n,a,c);break;case lt.KANJI:jt.appendKanjiBytes(n,a);break;default:throw new Bt("Invalid mode: "+r)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const r=jt.getDigit(n);return r>=0&&r<=9}static appendNumericBytes(n,r){const a=n.length;let c=0;for(;c<a;){const h=jt.getDigit(n.charAt(c));if(c+2<a){const u=jt.getDigit(n.charAt(c+1)),g=jt.getDigit(n.charAt(c+2));r.appendBits(h*100+u*10+g,10),c+=3}else if(c+1<a){const u=jt.getDigit(n.charAt(c+1));r.appendBits(h*10+u,7),c+=2}else r.appendBits(h,4),c++}}static appendAlphanumericBytes(n,r){const a=n.length;let c=0;for(;c<a;){const h=jt.getAlphanumericCode(n.charCodeAt(c));if(h===-1)throw new Bt;if(c+1<a){const u=jt.getAlphanumericCode(n.charCodeAt(c+1));if(u===-1)throw new Bt;r.appendBits(h*45+u,11),c+=2}else r.appendBits(h,6),c++}}static append8BitBytes(n,r,a){let c;try{c=at.encode(n,a)}catch(h){throw new Bt(h)}for(let h=0,u=c.length;h!==u;h++){const g=c[h];r.appendBits(g,8)}}static appendKanjiBytes(n,r){let a;try{a=at.encode(n,j.SJIS)}catch(h){throw new Bt(h)}const c=a.length;for(let h=0;h<c;h+=2){const u=a[h]&255,g=a[h+1]&255,x=u<<8&4294967295|g;let b=-1;if(x>=33088&&x<=40956?b=x-33088:x>=57408&&x<=60351&&(b=x-49472),b===-1)throw new Bt("Invalid byte sequence");const _=(b>>8)*192+(b&255);r.appendBits(_,13)}}static appendECI(n,r){r.appendBits(lt.ECI.getBits(),4),r.appendBits(n.getValue(),8)}}jt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),jt.DEFAULT_BYTE_MODE_ENCODING=j.UTF8.getName();class an{write(n,r,a,c=null){if(n.length===0)throw new w("Found empty contents");if(r<0||a<0)throw new w("Requested dimensions are too small: "+r+"x"+a);let h=Vt.L,u=an.QUIET_ZONE_SIZE;c!==null&&(c.get(de.ERROR_CORRECTION)!==void 0&&(h=Vt.fromString(c.get(de.ERROR_CORRECTION).toString())),c.get(de.MARGIN)!==void 0&&(u=Number.parseInt(c.get(de.MARGIN).toString(),10)));const g=jt.encode(n,h,c);return this.renderResult(g,r,a,u)}writeToDom(n,r,a,c,h=null){typeof n=="string"&&(n=document.querySelector(n));const u=this.write(r,a,c,h);n&&n.appendChild(u)}renderResult(n,r,a,c){const h=n.getMatrix();if(h===null)throw new oi;const u=h.getWidth(),g=h.getHeight(),x=u+c*2,b=g+c*2,_=Math.max(r,x),E=Math.max(a,b),v=Math.min(Math.floor(_/x),Math.floor(E/b)),T=Math.floor((_-u*v)/2),O=Math.floor((E-g*v)/2),N=this.createSVGElement(_,E);for(let L=0,H=O;L<g;L++,H+=v)for(let Z=0,K=T;Z<u;Z++,K+=v)if(h.get(Z,L)===1){const q=this.createSvgRectElement(K,H,v,v);N.appendChild(q)}return N}createSVGElement(n,r){const a=document.createElementNS(an.SVG_NS,"svg");return a.setAttributeNS(null,"height",n.toString()),a.setAttributeNS(null,"width",r.toString()),a}createSvgRectElement(n,r,a,c){const h=document.createElementNS(an.SVG_NS,"rect");return h.setAttributeNS(null,"x",n.toString()),h.setAttributeNS(null,"y",r.toString()),h.setAttributeNS(null,"height",a.toString()),h.setAttributeNS(null,"width",c.toString()),h.setAttributeNS(null,"fill","#000000"),h}}an.QUIET_ZONE_SIZE=4,an.SVG_NS="http://www.w3.org/2000/svg";class Nn{encode(n,r,a,c,h){if(n.length===0)throw new w("Found empty contents");if(r!==ct.QR_CODE)throw new w("Can only encode QR_CODE, but got "+r);if(a<0||c<0)throw new w(`Requested dimensions are too small: ${a}x${c}`);let u=Vt.L,g=Nn.QUIET_ZONE_SIZE;h!==null&&(h.get(de.ERROR_CORRECTION)!==void 0&&(u=Vt.fromString(h.get(de.ERROR_CORRECTION).toString())),h.get(de.MARGIN)!==void 0&&(g=Number.parseInt(h.get(de.MARGIN).toString(),10)));const x=jt.encode(n,u,h);return Nn.renderResult(x,a,c,g)}static renderResult(n,r,a,c){const h=n.getMatrix();if(h===null)throw new oi;const u=h.getWidth(),g=h.getHeight(),x=u+c*2,b=g+c*2,_=Math.max(r,x),E=Math.max(a,b),v=Math.min(Math.floor(_/x),Math.floor(E/b)),T=Math.floor((_-u*v)/2),O=Math.floor((E-g*v)/2),N=new Tt(_,E);for(let L=0,H=O;L<g;L++,H+=v)for(let Z=0,K=T;Z<u;Z++,K+=v)h.get(Z,L)===1&&N.setRegion(K,H,v,v);return N}}Nn.QUIET_ZONE_SIZE=4;class fu{encode(n,r,a,c,h){let u;switch(r){case ct.QR_CODE:u=new Nn;break;default:throw new w("No encoder available for format "+r)}return u.encode(n,r,a,c,h)}}class hi extends xe{constructor(n,r,a,c,h,u,g,x){if(super(u,g),this.yuvData=n,this.dataWidth=r,this.dataHeight=a,this.left=c,this.top=h,c+u>r||h+g>a)throw new w("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(u,g)}getRow(n,r){if(n<0||n>=this.getHeight())throw new w("Requested row is outside the image: "+n);const a=this.getWidth();(r==null||r.length<a)&&(r=new Uint8ClampedArray(a));const c=(n+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,c,r,0,a),r}getMatrix(){const n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;const a=n*r,c=new Uint8ClampedArray(a);let h=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return D.arraycopy(this.yuvData,h,c,0,a),c;for(let u=0;u<r;u++){const g=u*n;D.arraycopy(this.yuvData,h,c,g,n),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(n,r,a,c){return new hi(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,a,c,!1)}renderThumbnail(){const n=this.getWidth()/hi.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/hi.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(n*r),c=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let u=0;u<r;u++){const g=u*n;for(let x=0;x<n;x++){const b=c[h+x*hi.THUMBNAIL_SCALE_FACTOR]&255;a[g+x]=4278190080|b*65793}h+=this.dataWidth*hi.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/hi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/hi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,r){const a=this.yuvData;for(let c=0,h=this.top*this.dataWidth+this.left;c<r;c++,h+=this.dataWidth){const u=h+n/2;for(let g=h,x=h+n-1;g<u;g++,x--){const b=a[g];a[g]=a[x],a[x]=b}}}invert(){return new Ht(this)}}hi.THUMBNAIL_SCALE_FACTOR=2;class yo extends xe{constructor(n,r,a,c,h,u,g){if(super(r,a),this.dataWidth=c,this.dataHeight=h,this.left=u,this.top=g,n.BYTES_PER_ELEMENT===4){const x=r*a,b=new Uint8ClampedArray(x);for(let _=0;_<x;_++){const E=n[_],v=E>>16&255,T=E>>7&510,O=E&255;b[_]=(v+T+O)/4&255}this.luminances=b}else this.luminances=n;if(c===void 0&&(this.dataWidth=r),h===void 0&&(this.dataHeight=a),u===void 0&&(this.left=0),g===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+a>this.dataHeight)throw new w("Crop rectangle does not fit within image data.")}getRow(n,r){if(n<0||n>=this.getHeight())throw new w("Requested row is outside the image: "+n);const a=this.getWidth();(r==null||r.length<a)&&(r=new Uint8ClampedArray(a));const c=(n+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,c,r,0,a),r}getMatrix(){const n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;const a=n*r,c=new Uint8ClampedArray(a);let h=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return D.arraycopy(this.luminances,h,c,0,a),c;for(let u=0;u<r;u++){const g=u*n;D.arraycopy(this.luminances,h,c,g,n),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(n,r,a,c){return new yo(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+n,this.top+r)}invert(){return new Ht(this)}}class Ka extends j{static forName(n){return this.getCharacterSetECIByName(n)}}class wo{}wo.ISO_8859_1=j.ISO8859_1;class Qa{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Ja{static singletonList(n){return[n]}static min(n,r){return n.sort(r)[0]}}class gu{constructor(n){this.previous=n}getPrevious(){return this.previous}}class Rn extends gu{constructor(n,r,a){super(n),this.value=r,this.bitCount=a}appendTo(n,r){n.appendBits(this.value,this.bitCount)}add(n,r){return new Rn(this,n,r)}addBinaryShift(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Rn(this,n,r)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+V.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class _o extends Rn{constructor(n,r,a){super(n,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=a}appendTo(n,r){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):a===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+a],8)}addBinaryShift(n,r){return new _o(this,n,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function pu(C,n,r){return new _o(C,n,r)}function rs(C,n,r){return new Rn(C,n,r)}const mu=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Fi=0,sr=1,Xe=2,tl=3,di=4,xu=new Rn(null,0,0),Ao=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function bu(C){for(let n of C)P.fill(n,-1);return C[Fi][di]=0,C[sr][di]=0,C[sr][Fi]=28,C[tl][di]=0,C[Xe][di]=0,C[Xe][Fi]=15,C}const el=bu(P.createInt32Array(6,6));class ui{constructor(n,r,a,c){this.token=n,this.mode=r,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,r){let a=this.bitCount,c=this.token;if(n!==this.mode){let u=Ao[this.mode][n];c=rs(c,u&65535,u>>16),a+=u>>16}let h=n===Xe?4:5;return c=rs(c,r,h),new ui(c,n,0,a+h)}shiftAndAppend(n,r){let a=this.token,c=this.mode===Xe?4:5;return a=rs(a,el[this.mode][n],c),a=rs(a,r,5),new ui(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(n){let r=this.token,a=this.mode,c=this.bitCount;if(this.mode===di||this.mode===Xe){let g=Ao[a][Fi];r=rs(r,g&65535,g>>16),c+=g>>16,a=Fi}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new ui(r,a,this.binaryShiftByteCount+1,c+h);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(n+1)),u}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=pu(r,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new ui(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let r=this.bitCount+(Ao[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?r+=ui.calculateBinaryShiftCost(n)-ui.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(r+=10),r<=n.bitCount}toBitArray(n){let r=[];for(let c=this.endBinaryShift(n.length).token;c!==null;c=c.getPrevious())r.unshift(c);let a=new W;for(const c of r)c.appendTo(a,n);return a}toString(){return tt.format("%s bits=%d bytes=%d",mu[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}ui.INITIAL_STATE=new ui(xu,Fi,0,0);function yu(C){const n=tt.getCharCode(" "),r=tt.getCharCode("."),a=tt.getCharCode(",");C[Fi][n]=1;const c=tt.getCharCode("Z"),h=tt.getCharCode("A");for(let v=h;v<=c;v++)C[Fi][v]=v-h+2;C[sr][n]=1;const u=tt.getCharCode("z"),g=tt.getCharCode("a");for(let v=g;v<=u;v++)C[sr][v]=v-g+2;C[Xe][n]=1;const x=tt.getCharCode("9"),b=tt.getCharCode("0");for(let v=b;v<=x;v++)C[Xe][v]=v-b+2;C[Xe][a]=12,C[Xe][r]=13;const _=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let v=0;v<_.length;v++)C[tl][tt.getCharCode(_[v])]=v;const E=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let v=0;v<E.length;v++)tt.getCharCode(E[v])>0&&(C[di][tt.getCharCode(E[v])]=v);return C}const Co=yu(P.createInt32Array(5,256));class os{constructor(n){this.text=n}encode(){const n=tt.getCharCode(" "),r=tt.getCharCode(`
`);let a=Ja.singletonList(ui.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let u,g=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case tt.getCharCode("\r"):u=g===r?2:0;break;case tt.getCharCode("."):u=g===n?3:0;break;case tt.getCharCode(","):u=g===n?4:0;break;case tt.getCharCode(":"):u=g===n?5:0;break;default:u=0}u>0?(a=os.updateStateListForPair(a,h,u),h++):a=this.updateStateListForChar(a,h)}return Ja.min(a,(h,u)=>h.getBitCount()-u.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,r){const a=[];for(let c of n)this.updateStateForChar(c,r,a);return os.simplifyStates(a)}updateStateForChar(n,r,a){let c=this.text[r]&255,h=Co[n.getMode()][c]>0,u=null;for(let g=0;g<=di;g++){let x=Co[g][c];if(x>0){if(u==null&&(u=n.endBinaryShift(r)),!h||g===n.getMode()||g===Xe){const b=u.latchAndAppend(g,x);a.push(b)}if(!h&&el[n.getMode()][g]>=0){const b=u.shiftAndAppend(g,x);a.push(b)}}}if(n.getBinaryShiftByteCount()>0||Co[n.getMode()][c]===0){let g=n.addBinaryShiftChar(r);a.push(g)}}static updateStateListForPair(n,r,a){const c=[];for(let h of n)this.updateStateForPair(h,r,a,c);return this.simplifyStates(c)}static updateStateForPair(n,r,a,c){let h=n.endBinaryShift(r);if(c.push(h.latchAndAppend(di,a)),n.getMode()!==di&&c.push(h.shiftAndAppend(di,a)),a===3||a===4){let u=h.latchAndAppend(Xe,16-a).latchAndAppend(Xe,1);c.push(u)}if(n.getBinaryShiftByteCount()>0){let u=n.addBinaryShiftChar(r).addBinaryShiftChar(r+1);c.push(u)}}static simplifyStates(n){let r=[];for(const a of n){let c=!0;for(const h of r){if(h.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(h)&&(r=r.filter(u=>u!==h))}c&&r.push(a)}return r}}class vt{constructor(){}static encodeBytes(n){return vt.encode(n,vt.DEFAULT_EC_PERCENT,vt.DEFAULT_AZTEC_LAYERS)}static encode(n,r,a){let c=new os(n).encode(),h=V.truncDivision(c.getSize()*r,100)+11,u=c.getSize()+h,g,x,b,_,E;if(a!==vt.DEFAULT_AZTEC_LAYERS){if(g=a<0,x=Math.abs(a),x>(g?vt.MAX_NB_BITS_COMPACT:vt.MAX_NB_BITS))throw new w(tt.format("Illegal value %s for layers",a));b=vt.totalBitsInLayer(x,g),_=vt.WORD_SIZE[x];let q=b-b%_;if(E=vt.stuffBits(c,_),E.getSize()+h>q)throw new w("Data to large for user specified layer");if(g&&E.getSize()>_*64)throw new w("Data to large for user specified layer")}else{_=0,E=null;for(let q=0;;q++){if(q>vt.MAX_NB_BITS)throw new w("Data too large for an Aztec code");if(g=q<=3,x=g?q+1:q,b=vt.totalBitsInLayer(x,g),u>b)continue;(E==null||_!==vt.WORD_SIZE[x])&&(_=vt.WORD_SIZE[x],E=vt.stuffBits(c,_));let At=b-b%_;if(!(g&&E.getSize()>_*64)&&E.getSize()+h<=At)break}}let v=vt.generateCheckWords(E,b,_),T=E.getSize()/_,O=vt.generateModeMessage(g,x,T),N=(g?11:14)+x*4,L=new Int32Array(N),H;if(g){H=N;for(let q=0;q<L.length;q++)L[q]=q}else{H=N+1+2*V.truncDivision(V.truncDivision(N,2)-1,15);let q=V.truncDivision(N,2),At=V.truncDivision(H,2);for(let xt=0;xt<q;xt++){let Le=xt+V.truncDivision(xt,15);L[q-xt-1]=At-Le-1,L[q+xt]=At+Le+1}}let Z=new Tt(H);for(let q=0,At=0;q<x;q++){let xt=(x-q)*4+(g?9:12);for(let Le=0;Le<xt;Le++){let Qe=Le*2;for(let Pe=0;Pe<2;Pe++)v.get(At+Qe+Pe)&&Z.set(L[q*2+Pe],L[q*2+Le]),v.get(At+xt*2+Qe+Pe)&&Z.set(L[q*2+Le],L[N-1-q*2-Pe]),v.get(At+xt*4+Qe+Pe)&&Z.set(L[N-1-q*2-Pe],L[N-1-q*2-Le]),v.get(At+xt*6+Qe+Pe)&&Z.set(L[N-1-q*2-Le],L[q*2+Pe])}At+=xt*8}if(vt.drawModeMessage(Z,g,H,O),g)vt.drawBullsEye(Z,V.truncDivision(H,2),5);else{vt.drawBullsEye(Z,V.truncDivision(H,2),7);for(let q=0,At=0;q<V.truncDivision(N,2)-1;q+=15,At+=16)for(let xt=V.truncDivision(H,2)&1;xt<H;xt+=2)Z.set(V.truncDivision(H,2)-At,xt),Z.set(V.truncDivision(H,2)+At,xt),Z.set(xt,V.truncDivision(H,2)-At),Z.set(xt,V.truncDivision(H,2)+At)}let K=new Qa;return K.setCompact(g),K.setSize(H),K.setLayers(x),K.setCodeWords(T),K.setMatrix(Z),K}static drawBullsEye(n,r,a){for(let c=0;c<a;c+=2)for(let h=r-c;h<=r+c;h++)n.set(h,r-c),n.set(h,r+c),n.set(r-c,h),n.set(r+c,h);n.set(r-a,r-a),n.set(r-a+1,r-a),n.set(r-a,r-a+1),n.set(r+a,r-a),n.set(r+a,r-a+1),n.set(r+a,r+a-1)}static generateModeMessage(n,r,a){let c=new W;return n?(c.appendBits(r-1,2),c.appendBits(a-1,6),c=vt.generateCheckWords(c,28,4)):(c.appendBits(r-1,5),c.appendBits(a-1,11),c=vt.generateCheckWords(c,40,4)),c}static drawModeMessage(n,r,a,c){let h=V.truncDivision(a,2);if(r)for(let u=0;u<7;u++){let g=h-3+u;c.get(u)&&n.set(g,h-5),c.get(u+7)&&n.set(h+5,g),c.get(20-u)&&n.set(g,h+5),c.get(27-u)&&n.set(h-5,g)}else for(let u=0;u<10;u++){let g=h-5+u+V.truncDivision(u,5);c.get(u)&&n.set(g,h-7),c.get(u+10)&&n.set(h+7,g),c.get(29-u)&&n.set(g,h+7),c.get(39-u)&&n.set(h-7,g)}}static generateCheckWords(n,r,a){let c=n.getSize()/a,h=new bo(vt.getGF(a)),u=V.truncDivision(r,a),g=vt.bitsToWords(n,a,u);h.encode(g,u-c);let x=r%a,b=new W;b.appendBits(0,x);for(const _ of Array.from(g))b.appendBits(_,a);return b}static bitsToWords(n,r,a){let c=new Int32Array(a),h,u;for(h=0,u=n.getSize()/r;h<u;h++){let g=0;for(let x=0;x<r;x++)g|=n.get(h*r+x)?1<<r-x-1:0;c[h]=g}return c}static getGF(n){switch(n){case 4:return Mt.AZTEC_PARAM;case 6:return Mt.AZTEC_DATA_6;case 8:return Mt.AZTEC_DATA_8;case 10:return Mt.AZTEC_DATA_10;case 12:return Mt.AZTEC_DATA_12;default:throw new w("Unsupported word size "+n)}}static stuffBits(n,r){let a=new W,c=n.getSize(),h=(1<<r)-2;for(let u=0;u<c;u+=r){let g=0;for(let x=0;x<r;x++)(u+x>=c||n.get(u+x))&&(g|=1<<r-1-x);(g&h)===h?(a.appendBits(g&h,r),u--):g&h?a.appendBits(g,r):(a.appendBits(g|1,r),u--)}return a}static totalBitsInLayer(n,r){return((r?88:112)+16*n)*n}}vt.DEFAULT_EC_PERCENT=33,vt.DEFAULT_AZTEC_LAYERS=0,vt.MAX_NB_BITS=32,vt.MAX_NB_BITS_COMPACT=4,vt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class rr{encode(n,r,a,c){return this.encodeWithHints(n,r,a,c,null)}encodeWithHints(n,r,a,c,h){let u=wo.ISO_8859_1,g=vt.DEFAULT_EC_PERCENT,x=vt.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(de.CHARACTER_SET)&&(u=Ka.forName(h.get(de.CHARACTER_SET).toString())),h.has(de.ERROR_CORRECTION)&&(g=V.parseInt(h.get(de.ERROR_CORRECTION).toString())),h.has(de.AZTEC_LAYERS)&&(x=V.parseInt(h.get(de.AZTEC_LAYERS).toString()))),rr.encodeLayers(n,r,a,c,u,g,x)}static encodeLayers(n,r,a,c,h,u,g){if(r!==ct.AZTEC)throw new w("Can only encode AZTEC, but got "+r);let x=vt.encode(tt.getBytes(n,h),u,g);return rr.renderResult(x,a,c)}static renderResult(n,r,a){let c=n.getMatrix();if(c==null)throw new oi;let h=c.getWidth(),u=c.getHeight(),g=Math.max(r,h),x=Math.max(a,u),b=Math.min(g/h,x/u),_=(g-h*b)/2,E=(x-u*b)/2,v=new Tt(g,x);for(let T=0,O=E;T<u;T++,O+=b)for(let N=0,L=_;N<h;N++,L+=b)c.get(N,T)&&v.setRegion(L,O,b,b);return v}}e.AbstractExpandedDecoder=ao,e.ArgumentException=y,e.ArithmeticException=Xs,e.AztecCode=Qa,e.AztecCodeReader=Zs,e.AztecCodeWriter=rr,e.AztecDecoder=Ut,e.AztecDetector=Fa,e.AztecDetectorResult=Pa,e.AztecEncoder=vt,e.AztecHighLevelEncoder=os,e.AztecPoint=Me,e.BarcodeFormat=ct,e.Binarizer=M,e.BinaryBitmap=A,e.BitArray=W,e.BitMatrix=Tt,e.BitSource=uo,e.BrowserAztecCodeReader=$d,e.BrowserBarcodeReader=Zd,e.BrowserCodeReader=Te,e.BrowserDatamatrixCodeReader=Qd,e.BrowserMultiFormatReader=cu,e.BrowserPDF417Reader=hu,e.BrowserQRCodeReader=du,e.BrowserQRCodeSvgWriter=an,e.CharacterSetECI=j,e.ChecksumException=S,e.Code128Reader=et,e.Code39Reader=ce,e.DataMatrixDecodedBitStreamParser=Ri,e.DataMatrixReader=Li,e.DecodeHintType=G,e.DecoderResult=qn,e.DefaultGridSampler=Ba,e.DetectorResult=qs,e.EAN13Reader=en,e.EncodeHintType=de,e.Exception=m,e.FormatException=B,e.GenericGF=Mt,e.GenericGFPoly=Oe,e.GlobalHistogramBinarizer=mt,e.GridSampler=no,e.GridSamplerInstance=ki,e.HTMLCanvasElementLuminanceSource=Ie,e.HybridBinarizer=st,e.ITFReader=Pt,e.IllegalArgumentException=w,e.IllegalStateException=oi,e.InvertedLuminanceSource=Ht,e.LuminanceSource=xe,e.MathUtils=St,e.MultiFormatOneDReader=On,e.MultiFormatReader=Za,e.MultiFormatWriter=fu,e.NotFoundException=U,e.OneDReader=ae,e.PDF417DecodedBitStreamParser=z,e.PDF417DecoderErrorCorrection=Wa,e.PDF417Reader=we,e.PDF417ResultMetadata=Ya,e.PerspectiveTransform=Ze,e.PlanarYUVLuminanceSource=hi,e.QRCodeByteMatrix=nr,e.QRCodeDataMask=$e,e.QRCodeDecodedBitStreamParser=qt,e.QRCodeDecoderErrorCorrectionLevel=Vt,e.QRCodeDecoderFormatInformation=Ce,e.QRCodeEncoder=jt,e.QRCodeEncoderQRCode=on,e.QRCodeMaskUtil=Qt,e.QRCodeMatrixUtil=ht,e.QRCodeMode=lt,e.QRCodeReader=Pi,e.QRCodeVersion=ot,e.QRCodeWriter=Nn,e.RGBLuminanceSource=yo,e.RSS14Reader=Kt,e.RSSExpandedReader=X,e.ReaderException=ir,e.ReedSolomonDecoder=Kn,e.ReedSolomonEncoder=bo,e.ReedSolomonException=In,e.Result=ne,e.ResultMetadataType=fe,e.ResultPoint=rt,e.StringUtils=tt,e.UnsupportedOperationException=ft,e.VideoInputDevice=Ji,e.WhiteRectangleDetector=bi,e.WriterException=Bt,e.ZXingArrays=P,e.ZXingCharset=Ka,e.ZXingInteger=V,e.ZXingStandardCharsets=wo,e.ZXingStringBuilder=gt,e.ZXingStringEncoding=at,e.ZXingSystem=D,e.createAbstractExpandedDecoder=Ha,Object.defineProperty(e,"__esModule",{value:!0})})})(Yo,Yo.exports);var Wt=Yo.exports;const M0=T0(Wt),D0=Eu({__proto__:null,default:M0},[Wt]);var Nl=function(){function i(t,e,s){if(this.formatMap=new Map([[nt.QR_CODE,Wt.BarcodeFormat.QR_CODE],[nt.AZTEC,Wt.BarcodeFormat.AZTEC],[nt.CODABAR,Wt.BarcodeFormat.CODABAR],[nt.CODE_39,Wt.BarcodeFormat.CODE_39],[nt.CODE_93,Wt.BarcodeFormat.CODE_93],[nt.CODE_128,Wt.BarcodeFormat.CODE_128],[nt.DATA_MATRIX,Wt.BarcodeFormat.DATA_MATRIX],[nt.MAXICODE,Wt.BarcodeFormat.MAXICODE],[nt.ITF,Wt.BarcodeFormat.ITF],[nt.EAN_13,Wt.BarcodeFormat.EAN_13],[nt.EAN_8,Wt.BarcodeFormat.EAN_8],[nt.PDF_417,Wt.BarcodeFormat.PDF_417],[nt.RSS_14,Wt.BarcodeFormat.RSS_14],[nt.RSS_EXPANDED,Wt.BarcodeFormat.RSS_EXPANDED],[nt.UPC_A,Wt.BarcodeFormat.UPC_A],[nt.UPC_E,Wt.BarcodeFormat.UPC_E],[nt.UPC_EAN_EXTENSION,Wt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!D0)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=e,this.logger=s;var o=this.createZXingFormats(t),l=new Map;l.set(Wt.DecodeHintType.POSSIBLE_FORMATS,o),l.set(Wt.DecodeHintType.TRY_HARDER,!1),this.hints=l}return i.prototype.decodeAsync=function(t){var e=this;return new Promise(function(s,o){try{s(e.decode(t))}catch(l){o(l)}})},i.prototype.decode=function(t){var e=new Wt.MultiFormatReader(this.verbose,this.hints),s=new Wt.HTMLCanvasElementLuminanceSource(t),o=new Wt.BinaryBitmap(new Wt.HybridBinarizer(s)),l=e.decode(o);return{text:l.text,format:Hh.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(e,s,o){t.set(e,s)}),t},i.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},i.prototype.createZXingFormats=function(t){for(var e=[],s=0,o=t;s<o.length;s++){var l=o[s];this.formatMap.has(l)?e.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return e},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i}(),O0=function(i,t,e,s){function o(l){return l instanceof e?l:new e(function(d){d(l)})}return new(e||(e=Promise))(function(l,d){function f(y){try{m(s.next(y))}catch(w){d(w)}}function p(y){try{m(s.throw(y))}catch(w){d(w)}}function m(y){y.done?l(y.value):o(y.value).then(f,p)}m((s=s.apply(i,t||[])).next())})},k0=function(i,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(m){return function(y){return p([m,y])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(e=0)),e;)try{if(s=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return e.label++,{value:m[1],done:!1};case 5:e.label++,o=m[1],m=[0];continue;case 7:m=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){e=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){e.label=m[1];break}if(m[0]===6&&e.label<l[1]){e.label=l[1],l=m;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(m);break}l[2]&&e.ops.pop(),e.trys.pop();continue}m=t.call(i,e)}catch(y){m=[6,y],o=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Rl=function(){function i(t,e,s){if(this.formatMap=new Map([[nt.QR_CODE,"qr_code"],[nt.AZTEC,"aztec"],[nt.CODABAR,"codabar"],[nt.CODE_39,"code_39"],[nt.CODE_93,"code_93"],[nt.CODE_128,"code_128"],[nt.DATA_MATRIX,"data_matrix"],[nt.ITF,"itf"],[nt.EAN_13,"ean_13"],[nt.EAN_8,"ean_8"],[nt.PDF_417,"pdf417"],[nt.UPC_A,"upc_a"],[nt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=e,this.logger=s;var o=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},i.prototype.decodeAsync=function(t){return O0(this,void 0,void 0,function(){var e,s;return k0(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(t)];case 1:if(e=o.sent(),!e||e.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(e),[2,{text:s.rawValue,format:Hh.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(t){for(var e=null,s=0,o=0,l=t;o<l.length;o++){var d=l[o],f=d.boundingBox.width*d.boundingBox.height;f>s&&(s=f,e=d)}if(!e)throw"No largest barcode found";return e},i.prototype.createBarcodeDetectorFormats=function(t){for(var e=[],s=0,o=t;s<o.length;s++){var l=o[s];this.formatMap.has(l)?e.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:e}},i.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},i.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(e,s,o){t.set(e,s)}),t},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i}(),Ll=function(i,t,e,s){function o(l){return l instanceof e?l:new e(function(d){d(l)})}return new(e||(e=Promise))(function(l,d){function f(y){try{m(s.next(y))}catch(w){d(w)}}function p(y){try{m(s.throw(y))}catch(w){d(w)}}function m(y){y.done?l(y.value):o(y.value).then(f,p)}m((s=s.apply(i,t||[])).next())})},Pl=function(i,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(m){return function(y){return p([m,y])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(e=0)),e;)try{if(s=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return e.label++,{value:m[1],done:!1};case 5:e.label++,o=m[1],m=[0];continue;case 7:m=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){e=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){e.label=m[1];break}if(m[0]===6&&e.label<l[1]){e.label=l[1],l=m;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(m);break}l[2]&&e.ops.pop(),e.trys.pop();continue}m=t.call(i,e)}catch(y){m=[6,y],o=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},N0=function(){function i(t,e,s,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,e&&Rl.isSupported()?(this.primaryDecoder=new Rl(t,s,o),this.secondaryDecoder=new Nl(t,s,o)):this.primaryDecoder=new Nl(t,s,o)}return i.prototype.decodeAsync=function(t){return Ll(this,void 0,void 0,function(){var e;return Pl(this,function(s){switch(s.label){case 0:e=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(e),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(t){return Ll(this,void 0,void 0,function(){var e,s;return Pl(this,function(o){switch(o.label){case 0:e=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,o.sent()];case 3:if(s=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw s;case 4:return this.possiblyLogPerformance(e),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(t){if(this.verbose){var e=performance.now()-t;this.executionResults.push(e),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,e=0,s=this.executionResults;e<s.length;e++){var o=s[e];t+=o}var l=t/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i}(),xa=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function s(){this.constructor=t}t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}}(),Vr=function(i,t,e,s){function o(l){return l instanceof e?l:new e(function(d){d(l)})}return new(e||(e=Promise))(function(l,d){function f(y){try{m(s.next(y))}catch(w){d(w)}}function p(y){try{m(s.throw(y))}catch(w){d(w)}}function m(y){y.done?l(y.value):o(y.value).then(f,p)}m((s=s.apply(i,t||[])).next())})},zr=function(i,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(m){return function(y){return p([m,y])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(e=0)),e;)try{if(s=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return e.label++,{value:m[1],done:!1};case 5:e.label++,o=m[1],m=[0];continue;case 7:m=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){e=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){e.label=m[1];break}if(m[0]===6&&e.label<l[1]){e.label=l[1],l=m;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(m);break}l[2]&&e.ops.pop(),e.trys.pop();continue}m=t.call(i,e)}catch(y){m=[6,y],o=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Yh=function(){function i(t,e){this.name=t,this.track=e}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(t){var e={};e[this.name]=t;var s={advanced:[e]};return this.track.applyConstraints(s)},i.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var e=t[this.name];return e}return null},i}(),R0=function(i){xa(t,i);function t(e,s){return i.call(this,e,s)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var s={};s[this.name]=e;var o={advanced:[s]};return this.track.applyConstraints(o)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities(),s=e[this.name];return{min:s.min,max:s.max,step:s.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(Yh),L0=function(i){xa(t,i);function t(e){return i.call(this,"zoom",e)||this}return t}(R0),P0=function(i){xa(t,i);function t(e){return i.call(this,"torch",e)||this}return t}(Yh),B0=function(){function i(t){this.track=t}return i.prototype.zoomFeature=function(){return new L0(this.track)},i.prototype.torchFeature=function(){return new P0(this.track)},i}(),F0=function(){function i(t,e,s){this.isClosed=!1,this.parentElement=t,this.mediaStream=e,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return i.prototype.createVideoElement=function(t){var e=document.createElement("video");return e.style.width="".concat(t,"px"),e.style.display="block",e.muted=!0,e.setAttribute("muted","true"),e.playsInline=!0,e},i.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var e=function(){var s=t.surface.clientWidth,o=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(s,o),t.surface.removeEventListener("playing",e)};this.surface.addEventListener("playing",e),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(t,e,s,o){return Vr(this,void 0,void 0,function(){var l,d;return zr(this,function(f){switch(f.label){case 0:return l=new i(t,e,o),s.aspectRatio?(d={aspectRatio:s.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:f.sent(),f.label=2;case 2:return l.setupSurface(),[2,l]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(t){this.failIfClosed();var e=this,s=function(){setTimeout(t,200),e.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(t){return Vr(this,void 0,void 0,function(){return zr(this,function(e){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(e,s){var o=t.mediaStream.getVideoTracks(),l=o.length,d=0;t.mediaStream.getVideoTracks().forEach(function(f){t.mediaStream.removeTrack(f),f.stop(),++d,d>=l&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),e())})})},i.prototype.getCapabilities=function(){return new B0(this.getFirstTrackOrFail())},i}(),U0=function(){function i(t){this.mediaStream=t}return i.prototype.render=function(t,e,s){return Vr(this,void 0,void 0,function(){return zr(this,function(o){return[2,F0.create(t,this.mediaStream,e,s)]})})},i.create=function(t){return Vr(this,void 0,void 0,function(){var e,s;return zr(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return e={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(e)];case 1:return s=o.sent(),[2,new i(s)]}})})},i}(),Bl=function(i,t,e,s){function o(l){return l instanceof e?l:new e(function(d){d(l)})}return new(e||(e=Promise))(function(l,d){function f(y){try{m(s.next(y))}catch(w){d(w)}}function p(y){try{m(s.throw(y))}catch(w){d(w)}}function m(y){y.done?l(y.value):o(y.value).then(f,p)}m((s=s.apply(i,t||[])).next())})},Fl=function(i,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(m){return function(y){return p([m,y])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(e=0)),e;)try{if(s=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return e.label++,{value:m[1],done:!1};case 5:e.label++,o=m[1],m=[0];continue;case 7:m=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){e=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){e.label=m[1];break}if(m[0]===6&&e.label<l[1]){e.label=l[1],l=m;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(m);break}l[2]&&e.ops.pop(),e.trys.pop();continue}m=t.call(i,e)}catch(y){m=[6,y],o=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},V0=function(){function i(){}return i.failIfNotSupported=function(){return Bl(this,void 0,void 0,function(){return Fl(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(t){return Bl(this,void 0,void 0,function(){return Fl(this,function(e){return[2,U0.create(t)]})})},i}(),z0=function(i,t,e,s){function o(l){return l instanceof e?l:new e(function(d){d(l)})}return new(e||(e=Promise))(function(l,d){function f(y){try{m(s.next(y))}catch(w){d(w)}}function p(y){try{m(s.throw(y))}catch(w){d(w)}}function m(y){y.done?l(y.value):o(y.value).then(f,p)}m((s=s.apply(i,t||[])).next())})},H0=function(i,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(m){return function(y){return p([m,y])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(e=0)),e;)try{if(s=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return e.label++,{value:m[1],done:!1};case 5:e.label++,o=m[1],m=[0];continue;case 7:m=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){e=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){e.label=m[1];break}if(m[0]===6&&e.label<l[1]){e.label=l[1],l=m;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(m);break}l[2]&&e.ops.pop(),e.trys.pop();continue}m=t.call(i,e)}catch(y){m=[6,y],o=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},j0=function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var t=zn.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(t=zn.insecureContextCameraQueryError()),Promise.reject(t)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},i.getCamerasFromMediaDevices=function(){return z0(this,void 0,void 0,function(){var t,e,s,o,l,d,f;return H0(this,function(p){switch(p.label){case 0:return t=function(m){for(var y=m.getVideoTracks(),w=0,A=y;w<A.length;w++){var S=A[w];S.enabled=!1,S.stop(),m.removeTrack(S)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return e=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=p.sent(),o=[],l=0,d=s;l<d.length;l++)f=d[l],f.kind==="videoinput"&&o.push({id:f.deviceId,label:f.label});return t(e),[2,o]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,e){var s=function(l){for(var d=[],f=0,p=l;f<p.length;f++){var m=p[f];m.kind==="video"&&d.push({id:m.id,label:m.label})}t(d)},o=MediaStreamTrack;o.getSources(s)})},i}(),Jt;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})(Jt||(Jt={}));var W0=function(){function i(){this.state=Jt.NOT_STARTED,this.onGoingTransactionNewState=Jt.UNKNOWN}return i.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},i.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===Jt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Jt.UNKNOWN,this.directTransition(t)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===Jt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Jt.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Jt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(t){switch(this.state){case Jt.UNKNOWN:throw"Transition from unknown is not allowed";case Jt.NOT_STARTED:this.failIfNewStateIs(t,[Jt.PAUSED]);break;case Jt.SCANNING:break;case Jt.PAUSED:break}},i.prototype.failIfNewStateIs=function(t,e){for(var s=0,o=e;s<o.length;s++){var l=o[s];if(t===l)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},i}(),$0=function(){function i(t){this.stateManager=t}return i.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},i.prototype.directTransition=function(t){this.stateManager.directTransition(t)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===Jt.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==Jt.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Jt.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===Jt.PAUSED},i}(),Y0=function(){function i(){}return i.create=function(){return new $0(new W0)},i}(),X0=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function s(){this.constructor=t}t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}}(),ti=function(i){X0(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(ei),G0=function(){function i(t,e){this.logger=e,this.fps=ti.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=ti.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?$h.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!pi(this.qrbox)},i.create=function(t,e){return new i(t,e)},i}(),Ul=function(){function i(t,e){if(this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.element=null,this.shadingElement=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!t||!(t instanceof Element))throw"HTML Element is not valid";this.element=t,this.verbose=!1;var s;typeof e=="boolean"?this.verbose=e===!0:e&&(s=e,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new Wh(this.verbose),this.qrcode=new N0(this.getSupportedFormats(e),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Y0.create()}return i.prototype.start=function(t,e,s,o){var l=this;if(!t)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;o?d=o:d=this.verbose?this.logger.log:function(){};var f=G0.create(e,this.logger);this.clearElement();var p=!1;f.videoConstraints&&(f.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=p;this.element.style.position="relative",this.shouldScan=!0;var y=this,w=this.stateManagerProxy.startTransition(Jt.SCANNING);return new Promise(function(A,S){var M=m?f.videoConstraints:y.createVideoConstraints(t);if(!M){w.cancel(),S("videoConstraints should be defined");return}var D={};(!m||f.aspectRatio)&&(D.aspectRatio=f.aspectRatio);var k={onRenderSurfaceReady:function(R,P){y.setupUi(R,P,f),y.isScanning=!0,y.foreverScan(f,s,d)}};V0.failIfNotSupported().then(function(R){R.create(M).then(function(P){return P.render(l.element,D,k).then(function(V){y.renderedCamera=V,w.execute(),A(null)}).catch(function(V){w.cancel(),S(V)})}).catch(function(P){w.cancel(),S(zn.errorGettingUserMedia(P))})}).catch(function(R){w.cancel(),S(zn.cameraStreamingNotSupported())})})},i.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Jt.PAUSED),this.showPausedState(),(pi(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,e=function(){t.stateManagerProxy.directTransition(Jt.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){e();return}this.renderedCamera.resume(function(){e()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var e=this.stateManagerProxy.startTransition(Jt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){t.element&&t.shadingElement&&t.element.removeChild(t.shadingElement)},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),s(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),e.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(t,e){return this.scanFileV2(t,e).then(function(s){return s.decodedText})},i.prototype.scanFileV2=function(t,e){var s=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(pi(e)&&(e=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,l){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(t);var d=new Image;d.onload=function(){var f=d.width,p=d.height,m=s.element.clientWidth?s.element.clientWidth:ti.DEFAULT_WIDTH,y=Math.max(s.element.clientHeight?s.element.clientHeight:p,ti.FILE_SCAN_MIN_HEIGHT),w=s.computeCanvasDrawConfig(f,p,m,y);if(e){var A=s.createCanvasElement(m,y,"qr-canvas-visible");A.style.display="inline-block",s.element.appendChild(A);var S=A.getContext("2d");if(!S)throw"Unable to get 2d context from canvas";S.canvas.width=m,S.canvas.height=y,S.drawImage(d,0,0,f,p,w.x,w.y,w.width,w.height)}var M=ti.FILE_SCAN_HIDDEN_CANVAS_PADDING,D=Math.max(d.width,w.width),k=Math.max(d.height,w.height),R=D+2*M,P=k+2*M,V=s.createCanvasElement(R,P);s.element.appendChild(V);var W=V.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=R,W.canvas.height=P,W.drawImage(d,0,0,f,p,M,M,D,k);try{s.qrcode.decodeRobustlyAsync(V).then(function($){o(Ol.createFromQrcodeResult($))}).catch(l)}catch($){l("QR code parse error, error = ".concat($))}},d.onerror=l,d.onabort=l,d.onstalled=l,d.onsuspend=l,d.src=URL.createObjectURL(t)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return j0.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(t){if(t){if(!$h.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(t){var e=[nt.QR_CODE,nt.AZTEC,nt.CODABAR,nt.CODE_39,nt.CODE_93,nt.CODE_128,nt.DATA_MATRIX,nt.MAXICODE,nt.ITF,nt.EAN_13,nt.EAN_8,nt.PDF_417,nt.RSS_14,nt.RSS_EXPANDED,nt.UPC_A,nt.UPC_E,nt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return e;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],o=0,l=t.formatsToSupport;o<l.length;o++){var d=l[o];v0(d)?s.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},i.prototype.getUseBarCodeDetectorIfSupported=function(t){if(pi(t))return!0;if(!pi(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(pi(t.experimentalFeatures))return!0;var e=t.experimentalFeatures;return pi(e.useBarCodeDetectorIfSupported)?!0:e.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(t,e,s){var o=this,l=s.qrbox;this.validateQrboxConfig(l);var d=this.toQrdimensions(t,e,l),f=function(m){if(m<ti.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ti.MIN_QR_BOX_SIZE,"px.")},p=function(m){return m>t&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=t),m};f(d.width),f(d.height),d.width=p(d.width)},i.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(t,e,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(t,e)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return s},i.prototype.setupUi=function(t,e,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(t,e,s);var o=pi(s.qrbox)?{width:t,height:e}:s.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(t,e,o);l.height>e&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=s.isShadedBoxEnabled()&&l.height<=e,f={x:0,y:0,width:t,height:e},p=d?this.getShadedRegionBounds(t,e,l):f,m=this.createCanvasElement(p.width,p.height),y={willReadFrequently:!0},w=m.getContext("2d",y);w.canvas.width=p.width,w.canvas.height=p.height,this.element.append(m),d&&this.possiblyInsertShadingElement(this.element,t,e,l),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=w,this.canvasElement=m},i.prototype.createScannerPausedUiElement=function(t){var e=document.createElement("div");e.innerText=zn.scannerPaused(),e.style.display="none",e.style.position="absolute",e.style.top="0px",e.style.zIndex="1",e.style.background="rgba(9, 9, 9, 0.46)",e.style.color="#FFECEC",e.style.textAlign="center",e.style.width="100%",t.appendChild(e),this.scannerPausedUiElement=e},i.prototype.scanContext=function(t,e){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return t(o.text,Ol.createFromQrcodeResult(o)),s.possiblyUpdateShaders(!0),!0}).catch(function(o){s.possiblyUpdateShaders(!1);var l=zn.codeParseError(o);return e(l,jh.createFrom(l)),!1})},i.prototype.foreverScan=function(t,e,s){var o=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),d=l.videoWidth/l.clientWidth,f=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*d,m=this.qrRegion.height*f,y=this.qrRegion.x*d,w=this.qrRegion.y*f;this.context.drawImage(l,y,w,p,m,0,0,this.qrRegion.width,this.qrRegion.height);var A=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(t,e,s)},o.getTimeoutFps(t.fps))};this.scanContext(e,s).then(function(S){!S&&t.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(e,s).finally(function(){A()})):A()}).catch(function(S){o.logger.logError("Error happend while scanning context",S),A()})}},i.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var e="facingMode",s="deviceId",o={user:!0,environment:!0},l="exact",d=function(M){if(M in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},f=Object.keys(t);if(f.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(f.length," keys");var p=Object.keys(t)[0];if(p!==e&&p!==s)throw"Only '".concat(e,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(p===e){var m=t.facingMode;if(typeof m=="string"){if(d(m))return{facingMode:m}}else if(typeof m=="object")if(l in m){if(d(m["".concat(l)]))return{facingMode:{exact:m["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var y=typeof m;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var w=t.deviceId;if(typeof w=="string")return{deviceId:w};if(typeof w=="object"){if(l in w)return{deviceId:{exact:w["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var A=typeof w;throw"Invalid type of 'deviceId' = ".concat(A)}}}var S=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(S)},i.prototype.computeCanvasDrawConfig=function(t,e,s,o){if(t<=s&&e<=o){var l=(s-t)/2,d=(o-e)/2;return{x:l,y:d,width:t,height:e}}else{var f=t,p=e;return t>s&&(e=s/t*e,t=s),e>o&&(t=o/e*t,e=o),this.logger.log("Image downsampled from "+"".concat(f,"X").concat(p)+" to ".concat(t,"X").concat(e,".")),this.computeCanvasDrawConfig(t,e,s,o)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";this.element&&(this.element.innerHTML="")},i.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(e){e.style.backgroundColor=t?ti.BORDER_SHADER_MATCH_COLOR:ti.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(t,e,s){var o=t,l=e,d=document.createElement("canvas");return d.style.width="".concat(o,"px"),d.style.height="".concat(l,"px"),d.style.display="none",d.id=pi(s)?"qr-canvas":s,d},i.prototype.getShadedRegionBounds=function(t,e,s){if(s.width>t||s.height>e)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-s.width)/2,y:(e-s.height)/2,width:s.width,height:s.height}},i.prototype.possiblyInsertShadingElement=function(t,e,s,o){if(!(e-o.width<1||s-o.height<1)){this.shadingElement=document.createElement("div"),this.shadingElement.style.position="absolute";var l=(e-o.width)/2,d=(s-o.height)/2;if(this.shadingElement.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),this.shadingElement.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),this.shadingElement.style.borderTop="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),this.shadingElement.style.borderBottom="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),this.shadingElement.style.boxSizing="border-box",this.shadingElement.style.top="0px",this.shadingElement.style.bottom="0px",this.shadingElement.style.left="0px",this.shadingElement.style.right="0px",this.shadingElement.id="".concat(ti.SHADED_REGION_ELEMENT_ID),e-o.width<11||s-o.height<11)this.hasBorderShaders=!1;else{var f=5,p=40;this.insertShaderBorders(this.shadingElement,p,f,-f,null,0,!0),this.insertShaderBorders(this.shadingElement,p,f,-f,null,0,!1),this.insertShaderBorders(this.shadingElement,p,f,null,-f,0,!0),this.insertShaderBorders(this.shadingElement,p,f,null,-f,0,!1),this.insertShaderBorders(this.shadingElement,f,p+f,-f,null,-f,!0),this.insertShaderBorders(this.shadingElement,f,p+f,null,-f,-f,!0),this.insertShaderBorders(this.shadingElement,f,p+f,-f,null,-f,!1),this.insertShaderBorders(this.shadingElement,f,p+f,null,-f,-f,!1),this.hasBorderShaders=!0}t.append(this.shadingElement)}},i.prototype.insertShaderBorders=function(t,e,s,o,l,d,f){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=ti.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(e,"px"),p.style.height="".concat(s,"px"),o!==null&&(p.style.top="".concat(o,"px")),l!==null&&(p.style.bottom="".concat(l,"px")),f?p.style.left="".concat(d,"px"):p.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),t.appendChild(p)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(t){return 1e3/t},i}(),ba="data:image/svg+xml;base64,",q0=ba+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Z0=ba+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Vl=ba+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",K0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",zl=function(){function i(){}return i.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},i}(),Q0=function(){function i(){this.data=zl.createDefault();var t=localStorage.getItem(i.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return i.prototype.hasCameraPermissions=function(){return this.data.hasPermission},i.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},i.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},i.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},i.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},i.prototype.reset=function(){this.data=zl.createDefault(),this.flush()},i.prototype.flush=function(){localStorage.setItem(i.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},i.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",i}(),J0=function(){function i(){this.infoDiv=document.createElement("div")}return i.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=kl.poweredBy();var e=document.createElement("a");e.innerText="ScanApp",e.href="https://scanapp.org",e.target="new",e.style.color="white",this.infoDiv.appendChild(e);var s=document.createElement("br"),o=document.createElement("br");this.infoDiv.appendChild(s),this.infoDiv.appendChild(o);var l=document.createElement("a");l.innerText=kl.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),t.appendChild(this.infoDiv)},i.prototype.show=function(){this.infoDiv.style.display="block"},i.prototype.hide=function(){this.infoDiv.style.display="none"},i}(),t1=function(){function i(t,e){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=e,this.infoIcon=document.createElement("img")}return i.prototype.renderInto=function(t){var e=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Vl,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(s){return e.onHoverIn()},this.infoIcon.onmouseout=function(s){return e.onHoverOut()},this.infoIcon.onclick=function(s){return e.onClick()},t.appendChild(this.infoIcon)},i.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},i.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},i.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=K0,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Vl,this.infoIcon.style.opacity="0.6")},i}(),e1=function(){function i(){var t=this;this.infoDiv=new J0,this.infoIcon=new t1(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return i.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},i}(),i1=function(i,t,e,s){function o(l){return l instanceof e?l:new e(function(d){d(l)})}return new(e||(e=Promise))(function(l,d){function f(y){try{m(s.next(y))}catch(w){d(w)}}function p(y){try{m(s.throw(y))}catch(w){d(w)}}function m(y){y.done?l(y.value):o(y.value).then(f,p)}m((s=s.apply(i,t||[])).next())})},n1=function(i,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(m){return function(y){return p([m,y])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(e=0)),e;)try{if(s=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return e.label++,{value:m[1],done:!1};case 5:e.label++,o=m[1],m=[0];continue;case 7:m=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){e=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){e.label=m[1];break}if(m[0]===6&&e.label<l[1]){e.label=l[1],l=m;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(m);break}l[2]&&e.ops.pop(),e.trys.pop();continue}m=t.call(i,e)}catch(y){m=[6,y],o=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Hl=function(){function i(){}return i.hasPermissions=function(){return i1(this,void 0,void 0,function(){var t,e,s,o;return n1(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=l.sent(),e=0,s=t;e<s.length;e++)if(o=s[e],o.kind==="videoinput"&&o.label)return[2,!0];return[2,!1]}})})},i}(),Ui=function(){function i(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return i.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},i.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},i.prototype.isCameraScanRequired=function(){for(var t=0,e=this.supportedScanTypes;t<e.length;t++){var s=e[t];if(i.isCameraScanType(s))return!0}return!1},i.isCameraScanType=function(t){return t===Gi.SCAN_TYPE_CAMERA},i.isFileScanType=function(t){return t===Gi.SCAN_TYPE_FILE},i.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return ei.DEFAULT_SUPPORTED_SCAN_TYPE;var e=ei.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>e)throw"Max ".concat(e," values expected for ")+"supportedScanTypes";for(var s=0,o=t;s<o.length;s++){var l=o[s];if(!ei.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return t},i}(),je=function(){function i(){}return i.ALL_ELEMENT_CLASS="html5-qrcode-element",i.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",i.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",i.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",i.TORCH_BUTTON_ID="html5-qrcode-button-torch",i.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",i.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",i.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",i.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",i.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",i.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",i}(),vi=function(){function i(){}return i.createElement=function(t,e){var s=document.createElement(t);return s.id=e,s.classList.add(je.ALL_ELEMENT_CLASS),t==="button"&&s.setAttribute("type","button"),s},i}(),Xh=function(i,t,e,s){function o(l){return l instanceof e?l:new e(function(d){d(l)})}return new(e||(e=Promise))(function(l,d){function f(y){try{m(s.next(y))}catch(w){d(w)}}function p(y){try{m(s.throw(y))}catch(w){d(w)}}function m(y){y.done?l(y.value):o(y.value).then(f,p)}m((s=s.apply(i,t||[])).next())})},Gh=function(i,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(m){return function(y){return p([m,y])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(e=0)),e;)try{if(s=1,o&&(l=m[0]&2?o.return:m[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,m[1])).done)return l;switch(o=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return e.label++,{value:m[1],done:!1};case 5:e.label++,o=m[1],m=[0];continue;case 7:m=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){e=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){e.label=m[1];break}if(m[0]===6&&e.label<l[1]){e.label=l[1],l=m;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(m);break}l[2]&&e.ops.pop(),e.trys.pop();continue}m=t.call(i,e)}catch(y){m=[6,y],o=0}finally{s=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},jl=function(){function i(t,e,s){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=e,this.onTorchActionFailureCallback=s}return i.prototype.isTorchEnabled=function(){return this.isTorchOn},i.prototype.flipState=function(){return Xh(this,void 0,void 0,function(){var t,e;return Gh(this,function(s){switch(s.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return s.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return e=s.sent(),this.propagateFailure(t,e),this.buttonController.enable(),[3,4];case 4:return[2]}})})},i.prototype.updateUiBasedOnLatestSettings=function(t,e){t===e?(this.buttonController.setText(e?Nt.torchOffButton():Nt.torchOnButton()),this.isTorchOn=e):this.propagateFailure(e),this.buttonController.enable()},i.prototype.propagateFailure=function(t,e){var s=t?Nt.torchOnFailedMessage():Nt.torchOffFailedMessage();e&&(s+="; Error = "+e),this.onTorchActionFailureCallback(s)},i.prototype.reset=function(){this.isTorchOn=!1},i}(),s1=function(){function i(t,e){this.onTorchActionFailureCallback=e,this.torchButton=vi.createElement("button",je.TORCH_BUTTON_ID),this.torchController=new jl(t,this,e)}return i.prototype.render=function(t,e){var s=this;this.torchButton.innerText=Nt.torchOnButton(),this.torchButton.style.display=e.display,this.torchButton.style.marginLeft=e.marginLeft;var o=this;this.torchButton.addEventListener("click",function(l){return Xh(s,void 0,void 0,function(){return Gh(this,function(d){switch(d.label){case 0:return[4,o.torchController.flipState()];case 1:return d.sent(),o.torchController.isTorchEnabled()?(o.torchButton.classList.remove(je.TORCH_BUTTON_CLASS_TORCH_OFF),o.torchButton.classList.add(je.TORCH_BUTTON_CLASS_TORCH_ON)):(o.torchButton.classList.remove(je.TORCH_BUTTON_CLASS_TORCH_ON),o.torchButton.classList.add(je.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},i.prototype.updateTorchCapability=function(t){this.torchController=new jl(t,this,this.onTorchActionFailureCallback)},i.prototype.getTorchButton=function(){return this.torchButton},i.prototype.hide=function(){this.torchButton.style.display="none"},i.prototype.show=function(){this.torchButton.style.display="inline-block"},i.prototype.disable=function(){this.torchButton.disabled=!0},i.prototype.enable=function(){this.torchButton.disabled=!1},i.prototype.setText=function(t){this.torchButton.innerText=t},i.prototype.reset=function(){this.torchButton.innerText=Nt.torchOnButton(),this.torchController.reset()},i.create=function(t,e,s,o){var l=new i(e,o);return l.render(t,s),l},i}(),r1=function(){function i(t,e,s){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=e?"block":"none",t.appendChild(this.fileBasedScanRegion);var o=document.createElement("label");o.setAttribute("for",this.getFileScanInputId()),o.style.display="inline-block",this.fileBasedScanRegion.appendChild(o),this.fileSelectionButton=vi.createElement("button",je.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(f){o.click()}),o.append(this.fileSelectionButton),this.fileScanInput=vi.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",o.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(f){if(!(f==null||f.target==null)){var p=f.target;if(!(p.files&&p.files.length===0)){var m=p.files,y=m[0],w=y.name;l.setImageNameToButton(w),s(y)}}});var d=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(d),this.fileBasedScanRegion.addEventListener("dragenter",function(f){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),f.stopPropagation(),f.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(f){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),f.stopPropagation(),f.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(f){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),f.stopPropagation(),f.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(f){f.stopPropagation(),f.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var p=f.dataTransfer;if(p){var m=p.files;if(!m||m.length===0)return;for(var y=!1,w=0;w<m.length;++w){var A=m.item(w);if(A){var S=/image.*/;if(A.type.match(S)){y=!0;var M=A.name;l.setImageNameToButton(M),s(A),d.innerText=Nt.dragAndDropMessage();break}}}y||(d.innerText=Nt.dragAndDropMessageOnlyImages())}})}return i.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},i.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},i.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},i.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},i.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},i.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},i.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},i.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Nt.dragAndDropMessage(),t.style.fontWeight="400",t},i.prototype.setImageNameToButton=function(t){var e=20;if(t.length>e){var s=t.substring(0,8),o=t.length,l=t.substring(o-8,o);t="".concat(s,"....").concat(l)}var d=Nt.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=d},i.prototype.setInitialValueToButton=function(){var t=Nt.fileSelectionChooseImage()+" - "+Nt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},i.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},i.create=function(t,e,s){var o=new i(t,e,s);return o},i}(),o1=function(){function i(t){this.selectElement=vi.createElement("select",je.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return i.prototype.render=function(t){var e=document.createElement("span");e.style.marginRight="10px";var s=this.cameras.length;if(s===0)throw new Error("No cameras found");if(s===1)e.style.display="none";else{var o=Nt.selectCamera();e.innerText="".concat(o," (").concat(this.cameras.length,")  ")}for(var l=1,d=0,f=this.cameras;d<f.length;d++){var p=f[d],m=p.id,y=p.label==null?m:p.label;(!y||y==="")&&(y=[Nt.anonymousCameraPrefix(),l++].join(" "));var w=document.createElement("option");w.value=m,w.innerText=y,this.options.push(w),this.selectElement.appendChild(w)}e.appendChild(this.selectElement),t.appendChild(e)},i.prototype.disable=function(){this.selectElement.disabled=!0},i.prototype.isDisabled=function(){return this.selectElement.disabled===!0},i.prototype.enable=function(){this.selectElement.disabled=!1},i.prototype.getValue=function(){return this.selectElement.value},i.prototype.hasValue=function(t){for(var e=0,s=this.options;e<s.length;e++){var o=s[e];if(o.value===t)return!0}return!1},i.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},i.prototype.hasSingleItem=function(){return this.cameras.length===1},i.prototype.numCameras=function(){return this.cameras.length},i.create=function(t,e){var s=new i(e);return s.render(t),s},i}(),a1=function(){function i(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=vi.createElement("input",je.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return i.prototype.render=function(t,e){this.zoomElementContainer.style.display=e?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var s=Nt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(s),this.rangeText.style.marginRight="10px";var o=this;this.rangeInput.addEventListener("input",function(){return o.onValueChange()}),this.rangeInput.addEventListener("change",function(){return o.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},i.prototype.onValueChange=function(){var t=Nt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},i.prototype.setValues=function(t,e,s,o){this.rangeInput.min=t.toString(),this.rangeInput.max=e.toString(),this.rangeInput.step=o.toString(),this.rangeInput.value=s.toString(),this.onValueChange()},i.prototype.show=function(){this.zoomElementContainer.style.display="block"},i.prototype.hide=function(){this.zoomElementContainer.style.display="none"},i.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},i.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},i.create=function(t,e){var s=new i;return s.render(t,e),s},i}(),Ve;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ve||(Ve={}));function l1(i){return{fps:i.fps,qrbox:i.qrbox,aspectRatio:i.aspectRatio,disableFlip:i.disableFlip,videoConstraints:i.videoConstraints}}function c1(i,t){return{formatsToSupport:i.formatsToSupport,useBarCodeDetectorIfSupported:i.useBarCodeDetectorIfSupported,experimentalFeatures:i.experimentalFeatures,verbose:t}}var h1=function(){function i(t,e,s){this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.scpCameraScanRegion=null,this.dashboardSection=null,this.permissionButton=null,this.headerMessageContainer=null,this.qrCodeScanRegion=null,this.switchScanTypeLink=null,typeof t=="string"?this.container=this.validateInputAsStringId(t):this.container=this.validateInputAsHTMLElement(t),this.config=this.createConfig(e),this.verbose=s===!0,this.scanTypeSelector=new Ui(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Wh(this.verbose),this.persistedDataManager=new Q0,e.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return i.prototype.render=function(t,e){var s=this;if(this.lastMatchFound=null,this.qrCodeSuccessCallback=function(o,l){if(t)t(o,l);else{if(s.lastMatchFound===o)return;s.lastMatchFound=o,s.setHeaderMessage(Nt.lastMatch(o),Ve.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(o,l){e&&e(o,l)},!this.container)throw"HTML Element not found";this.container.innerHTML="",this.createBasicLayout(this.container),this.html5Qrcode=new Ul(this.qrCodeScanRegion,c1(this.config,this.verbose))},i.prototype.pause=function(t){(pi(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},i.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},i.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},i.prototype.clear=function(){var t=this,e=function(){t.container&&(t.container.innerHTML="",t.resetBasicLayout(t.container))};return this.html5Qrcode?new Promise(function(s,o){if(!t.html5Qrcode){s();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(l){if(!t.html5Qrcode){s();return}t.html5Qrcode.clear(),e(),s()}).catch(function(l){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",l),o(l)}):(t.html5Qrcode.clear(),e(),s())}):Promise.resolve()},i.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},i.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},i.prototype.validateInputAsStringId=function(t){var e=document.getElementById(t);if(!e)throw"HTML Element with id=".concat(t," not found");return e},i.prototype.validateInputAsHTMLElement=function(t){if(!t||!(t instanceof HTMLElement))throw"HTML Element is not valid";return t},i.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},i.prototype.createConfig=function(t){return t?(t.fps||(t.fps=ei.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!ei.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=ei.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=ei.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:ei.SCAN_DEFAULT_FPS,rememberLastUsedCamera:ei.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:ei.DEFAULT_SUPPORTED_SCAN_TYPE}},i.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t),this.qrCodeScanRegion=document.createElement("div");var e=this.getScanRegionId();this.qrCodeScanRegion.id=e,this.qrCodeScanRegion.style.width="100%",this.qrCodeScanRegion.style.minHeight="100px",this.qrCodeScanRegion.style.textAlign="center",t.appendChild(this.qrCodeScanRegion),Ui.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var s=document.createElement("div"),o=this.getDashboardId();s.id=o,s.style.width="100%",t.appendChild(s),this.setupInitialDashboard(s)},i.prototype.resetBasicLayout=function(t){t.style.border="none"},i.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},i.prototype.createHeader=function(t){var e=document.createElement("div");e.style.textAlign="left",e.style.margin="0px",t.appendChild(e);var s=new e1;s.renderInto(e),this.headerMessageContainer=document.createElement("div"),this.headerMessageContainer.id=this.getHeaderMessageContainerId(),this.headerMessageContainer.style.display="none",this.headerMessageContainer.style.textAlign="center",this.headerMessageContainer.style.fontSize="14px",this.headerMessageContainer.style.padding="2px 10px",this.headerMessageContainer.style.margin="4px",this.headerMessageContainer.style.borderTop="1px solid #f6f6f6",e.appendChild(this.headerMessageContainer)},i.prototype.createSection=function(t){this.dashboardSection=document.createElement("div"),this.dashboardSection.id=this.getDashboardSectionId(),this.dashboardSection.style.width="100%",this.dashboardSection.style.padding="10px 0px 10px 0px",this.dashboardSection.style.textAlign="left",t.appendChild(this.dashboardSection)},i.prototype.createCameraListUi=function(t,e,s){var o=this;o.showHideScanTypeSwapLink(!1),o.setHeaderMessage(Nt.cameraPermissionRequesting());var l=function(){s||o.createPermissionButton(t,e)};Ul.getCameras().then(function(d){o.persistedDataManager.setHasPermission(!0),o.showHideScanTypeSwapLink(!0),o.resetHeaderMessage(),d&&d.length>0?(t.removeChild(e),o.renderCameraSelection(d)):(o.setHeaderMessage(Nt.noCameraFound(),Ve.STATUS_WARNING),l())}).catch(function(d){o.persistedDataManager.setHasPermission(!1),s?s.disabled=!1:l(),o.setHeaderMessage(d,Ve.STATUS_WARNING),o.showHideScanTypeSwapLink(!0)})},i.prototype.createPermissionButton=function(t,e){var s=this,o=vi.createElement("button",this.getCameraPermissionButtonId());o.innerText=Nt.cameraPermissionTitle(),o.addEventListener("click",function(){o.disabled=!0,s.createCameraListUi(t,e,o)}),e.appendChild(o)},i.prototype.createPermissionsUi=function(t,e){var s=this;if(Ui.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Hl.hasPermissions().then(function(o){o?s.createCameraListUi(t,e):(s.persistedDataManager.setHasPermission(!1),s.createPermissionButton(t,e))}).catch(function(o){s.persistedDataManager.setHasPermission(!1),s.createPermissionButton(t,e)});return}this.createPermissionButton(t,e)},i.prototype.createSectionControlPanel=function(){var t=document.createElement("div");this.dashboardSection.appendChild(t),this.scpCameraScanRegion=document.createElement("div"),this.scpCameraScanRegion.id=this.getDashboardSectionCameraScanRegionId(),this.scpCameraScanRegion.style.display=Ui.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(this.scpCameraScanRegion);var e=document.createElement("div");e.style.textAlign="center",this.scpCameraScanRegion.appendChild(e),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(this.scpCameraScanRegion,e),this.renderFileScanUi(t)},i.prototype.renderFileScanUi=function(t){var e=Ui.isFileScanType(this.currentScanType),s=this,o=function(l){if(!s.html5Qrcode)throw"html5Qrcode not defined";Ui.isFileScanType(s.currentScanType)&&(s.setHeaderMessage(Nt.loadingImage()),s.html5Qrcode.scanFileV2(l,!0).then(function(d){s.resetHeaderMessage(),s.qrCodeSuccessCallback(d.decodedText,d)}).catch(function(d){s.setHeaderMessage(d,Ve.STATUS_WARNING),s.qrCodeErrorCallback(d,jh.createFrom(d))}))};this.fileSelectionUi=r1.create(t,e,o)},i.prototype.renderCameraSelection=function(t){var e=this,s=this;this.scpCameraScanRegion.style.textAlign="center";var o=a1.create(this.scpCameraScanRegion,!1),l=function(M){var D=M.zoomFeature();if(D.isSupported()){o.setOnCameraZoomValueChangeCallback(function(R){D.apply(R)});var k=1;e.config.defaultZoomValueIfSupported&&(k=e.config.defaultZoomValueIfSupported),k=I0(k,D.min(),D.max()),o.setValues(D.min(),D.max(),k,D.step()),o.show()}},d=o1.create(this.scpCameraScanRegion,t),f=document.createElement("span"),p=vi.createElement("button",je.CAMERA_START_BUTTON_ID);p.innerText=Nt.scanButtonStartScanningText(),f.appendChild(p);var m=vi.createElement("button",je.CAMERA_STOP_BUTTON_ID);m.innerText=Nt.scanButtonStopScanningText(),m.style.display="none",m.disabled=!0,f.appendChild(m);var y,w=function(M){if(!M.torchFeature().isSupported()){y&&y.hide();return}y?y.updateTorchCapability(M.torchFeature()):y=s1.create(f,M.torchFeature(),{display:"none",marginLeft:"5px"},function(D){s.setHeaderMessage(D,Ve.STATUS_WARNING)}),y.show()};this.scpCameraScanRegion.appendChild(f);var A=function(M){M||(p.style.display="none"),p.innerText=Nt.scanButtonStartScanningText(),p.style.opacity="1",p.disabled=!1,M&&(p.style.display="inline-block")};if(p.addEventListener("click",function(M){p.innerText=Nt.scanButtonScanningStarting(),d.disable(),p.disabled=!0,p.style.opacity="0.5",e.scanTypeSelector.hasMoreThanOneScanType()&&s.showHideScanTypeSwapLink(!1),s.resetHeaderMessage();var D=d.getValue();s.persistedDataManager.setLastUsedCameraId(D),s.html5Qrcode.start(D,l1(s.config),s.qrCodeSuccessCallback,s.qrCodeErrorCallback).then(function(k){m.disabled=!1,m.style.display="inline-block",A(!1);var R=s.html5Qrcode.getRunningTrackCameraCapabilities();e.config.showTorchButtonIfSupported===!0&&w(R),e.config.showZoomSliderIfSupported===!0&&l(R)}).catch(function(k){s.showHideScanTypeSwapLink(!0),d.enable(),A(!0),s.setHeaderMessage(k,Ve.STATUS_WARNING)})}),d.hasSingleItem()&&p.click(),m.addEventListener("click",function(M){if(!s.html5Qrcode)throw"html5Qrcode not defined";m.disabled=!0,s.html5Qrcode.stop().then(function(D){e.scanTypeSelector.hasMoreThanOneScanType()&&s.showHideScanTypeSwapLink(!0),d.enable(),p.disabled=!1,m.style.display="none",p.style.display="inline-block",y&&(y.reset(),y.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),s.insertCameraScanImageToScanRegion()}).catch(function(D){m.disabled=!1,s.setHeaderMessage(D,Ve.STATUS_WARNING)})}),s.persistedDataManager.getLastUsedCameraId()){var S=s.persistedDataManager.getLastUsedCameraId();d.hasValue(S)?(d.setValue(S),p.click()):s.persistedDataManager.resetLastUsedCameraId()}},i.prototype.createSectionSwap=function(){var t=this,e=Nt.textIfCameraScanSelected(),s=Nt.textIfFileScanSelected(),o=document.createElement("div");o.style.textAlign="center",this.switchScanTypeLink=vi.createElement("span",this.getDashboardSectionSwapLinkId()),this.switchScanTypeLink.style.textDecoration="underline",this.switchScanTypeLink.style.cursor="pointer",this.switchScanTypeLink.innerText=Ui.isCameraScanType(this.currentScanType)?e:s,this.switchScanTypeLink.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Ui.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.scpCameraScanRegion.style.display="none",t.fileSelectionUi.show(),t.switchScanTypeLink.innerText=s,t.currentScanType=Gi.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.scpCameraScanRegion.style.display="block",t.fileSelectionUi.hide(),t.switchScanTypeLink.innerText=e,t.currentScanType=Gi.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),o.appendChild(this.switchScanTypeLink),this.dashboardSection.appendChild(o)},i.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,e=this;if(this.persistedDataManager.hasCameraPermissions()){Hl.hasPermissions().then(function(s){if(s){if(!t.permissionButton)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";t.permissionButton.click()}else e.persistedDataManager.setHasPermission(!1)}).catch(function(s){e.persistedDataManager.setHasPermission(!1)});return}},i.prototype.resetHeaderMessage=function(){this.headerMessageContainer.style.display="none"},i.prototype.setHeaderMessage=function(t,e){switch(e||(e=Ve.STATUS_DEFAULT),this.headerMessageContainer.innerText=t,this.headerMessageContainer.style.display="block",e){case Ve.STATUS_SUCCESS:this.headerMessageContainer.style.background="rgba(106, 175, 80, 0.26)",this.headerMessageContainer.style.color="#477735";break;case Ve.STATUS_WARNING:this.headerMessageContainer.style.background="rgba(203, 36, 49, 0.14)",this.headerMessageContainer.style.color="#cb2431";break;case Ve.STATUS_DEFAULT:default:this.headerMessageContainer.style.background="rgba(0, 0, 0, 0)",this.headerMessageContainer.style.color="rgb(17, 17, 17)";break}},i.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.switchScanTypeLink.style.display=t?"inline-block":"none")},i.prototype.insertCameraScanImageToScanRegion=function(){var t=this,e=this;if(this.cameraScanImage){this.qrCodeScanRegion.innerHTML="<br>",this.qrCodeScanRegion.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(s){t.qrCodeScanRegion.innerHTML="<br>",t.qrCodeScanRegion.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=q0,this.cameraScanImage.alt=Nt.cameraScanAltText()},i.prototype.insertFileScanImageToScanRegion=function(){var t=this,e=this;if(this.fileScanImage){this.qrCodeScanRegion.innerHTML="<br>",this.qrCodeScanRegion.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(s){t.qrCodeScanRegion.innerHTML="<br>",t.qrCodeScanRegion.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Z0,this.fileScanImage.alt=Nt.fileScanAltText()},i.prototype.clearScanRegion=function(){this.qrCodeScanRegion.innerHTML=""},i.prototype.getDashboardSectionId=function(){return"scanner__dashboard_section"},i.prototype.getDashboardSectionCameraScanRegionId=function(){return"scanner__dashboard_section_csr"},i.prototype.getDashboardSectionSwapLinkId=function(){return je.SCAN_TYPE_CHANGE_ANCHOR_ID},i.prototype.getScanRegionId=function(){return"scanner__scan_region"},i.prototype.getDashboardId=function(){return"scanner__dashboard"},i.prototype.getHeaderMessageContainerId=function(){return"scanner__header_message"},i.prototype.getCameraPermissionButtonId=function(){return je.CAMERA_PERMISSION_BUTTON_ID},i}();class d1 extends pt{static get properties(){return{_decodedText:{type:String,state:!0},_scanner:{state:!0},mealtype:{type:String}}}constructor(){super(),this._decodedText="",this.scannericon=!1,this.mealtype=""}firstUpdated(){super.firstUpdated(),this._openScanner()}disconnectedCallback(){super.disconnectedCallback(),this._scanner.clear()}static get styles(){return yt`
            h1 {
                text-align: center;
            }
            svg {
                width: 25px;
                height: 20px;
            }
            .icon-button {
                background-color: transparent;
                border: 0px;
            }
            .container {
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
            .button {
                width: 100px;
            }
            .scanner-box {
                position: relative;
                top: 0;
                bottom: 0;
                left: 0;
                right: 0;

            }
        `}render(){return J`
            <div class="container">
                <div id="reader" class="scanner-box"></div>
                <!-- <p>${this._decodedText}</p> -->
            </div>
            `}_openScanner(){const t=(l,d)=>{this._decodedText=l,this._scanner.clear(),da(l).then(f=>{re.go(`${ut}/product/${f.id}${this.mealtype}`)}).catch(f=>{this.dispatchEvent(new CustomEvent("getBarcode",{detail:{barcode:l,error:f.message}}))})},e=(l,d)=>{},s={fps:10,qrbox:{width:250,height:250}},o=this.shadowRoot.querySelector("#reader");this._scanner=new h1(o,s),this._scanner.render(t,e)}}customElements.define("scanner-div",d1);class u1 extends pt{static get properties(){return{value:{type:String,reflect:!0},name:{type:String,reflect:!0},label:{type:String},type:{type:String},ariaLabel:{type:String}}}constructor(){super(),this.value="",this.name="",this.label="",this.type="text",this.ariaLabel=""}static get styles(){return yt`
        .background-div {
            width: calc(100vw - 80px);
            margin: 0 20px;
        }
        input {
            width: 100%;
        }
    `}render(){return J`
    <div class="background-div">
        <label for="${this.name}"></label>
        <input 
        type="text"
        name=${this.name} 
        id=${this.name} 
        .value="${this.value}" 
        aria-label=${this.ariaLabel}
        @input="${this.updateValue}" 
        />
    </div>`}updateValue(t){this.value=t.target.value,this.dispatchEvent(new CustomEvent("input-changed",{[t.target.name]:t.target.value}))}}customElements.define("search-bar",u1);class f1 extends pt{static get properties(){return{_products:{type:Object,state:!0}}}constructor(){super(),this._param=Si.location.search}static get styles(){return yt`
            .search-container {
                margin-top: 20px;
                display: flex;
            }
            svg {
                width: 25px;
                height: 20px;
            }
            .icon-button {
                background-color: transparent;
                border: 0px;
            }
        `}render(){return J`
            <div class="search-container">
                <search-bar></search-bar>
                <a class="icon-button" href="${ut}/scan/product${this._param}">
                    <svg>
                        <path d="M1.5625 6.25V3.75H4.6875" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M23.4375 6.25V3.75H20.3125" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M1.5625 13.75V16.25H4.6875" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M23.4375 13.75V16.25H20.3125" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M4.6875 5.625V9.375" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8.59375 5.625V9.375" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M20.3125 5.625V9.375" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16.4062 5.625V9.375" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12.5 5.625V9.375" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M1.5625 11.25H23.4375" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M4.6875 13.125V14.375" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8.59375 13.125V13.75" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M20.3125 13.125V14.375" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16.4062 13.125V13.75" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12.5 13.125V13.75" stroke="black" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </a>
            </div>`}}customElements.define("product-searchbar",f1);class g1 extends pt{static get properties(){return{products:{type:Array}}}constructor(){super(),this.products=[]}connectedCallback(){super.connectedCallback(),this.addEventListener("touchstart",this._startTouch),this.addEventListener("touchmove",this._touchMove),this.addEventListener("touchend",this._touchEnd)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("touchstart",this._startTouch),this.removeEventListener("touchmove",this._touchMove),this.removeEventListener("touchend",this._touchEnd)}firstUpdated(){super.firstUpdated(),this._items=this.shadowRoot.querySelectorAll(".container"),this._items.forEach(t=>{t.addEventListener("touchmove",()=>{this._item=t.firstElementChild,this._deleteDiv=t.lastElementChild.lastElementChild})})}_startTouch(t){this._width=this.shadowRoot.querySelector(".container").offsetWidth,this._startPosition=this._getPositionX(t)}_touchMove(t){this._xPosition=this._getPositionX(t),this._currentTranslateValue=this._xPosition-this._startPosition<0?this._xPosition-this._startPosition:0,requestAnimationFrame(()=>{this._width+this._currentTranslateValue<=this._width/1.5&&this._width+this._currentTranslateValue>this._width/1.55?(this._deleteDiv.style.width=`${this._width-(this._width+this._currentTranslateValue)}px`,this._item.style.transform=`translateX(${this._currentTranslateValue}px)`):this._width+this._currentTranslateValue<=this._width/1.55?(this._deleteDiv.style.width=`${this._width-(this._width/1.5+this._currentTranslateValue*.1)}px`,this._item.style.transform=`translateX(-${this._width/3-this._currentTranslateValue*.1}px)`):(this._item.style.transform=`translateX(${this._currentTranslateValue}px)`,this._deleteDiv.style.width="100px")})}_touchEnd(t){this._width+this._currentTranslateValue<=this._width/1.5&&this._removeIntake(this._item.id),this._item!==void 0&&(this._currentTranslateValue=0,setTimeout(()=>{this._deleteDiv.style.width="100px",this._item.style.transform="translateX(0)"},50))}_getPositionX(t){return t.touches[0].clientX}static get styles(){return yt`
            h1 {
                text-align: center;
            }
            .container {
                position: relative;
                display: flex;
                flex-direction: row;
                overflow: hidden;
                /* z-index: 0; */
            }
            .inner-container {
                width: 100vw;
                height: 100%;
                transform: translateX(0);
                transition: transform 0.1s ease-out;
                z-index: 1;
                background-color: white;
            }
            .product-card {
                height: 50px;
                width: 100%;
                /* margin: 12px 0; */

            }
            .product-container {
                display: flex;
                flex-direction: row;
                height: 100%;
                padding: 5px 0 5px 10px;
                align-items: center;
            }
            .food-info {
                display: flex;
            }
            img {
                width: 50px;
                height: 50px;
                object-fit: contain;
            }
            .product-info span {
                opacity: 0.5;
                font-size: 15px;
                margin: 0 4px 0 0;

            }
            .name {
                opacity: 0.85;
            }
            span {
                opacity: 0.7;
            }
            .product-column {
                display: flex;
                flex-direction: column;
                width: calc(100% - 40px);
            }
            .delete {
                display: flex;
                position: absolute;
                width: 100px;
                background-color: red;
                height: 100%;
                right: 0px;
                transition: 0.2s ease-out;
            }
            .delete > span {
                width: 100%;
                display: flex;
                /* text-align: center; */
                align-items: center;
                justify-content: center;
                color: white;
                opacity: 1;
                /* font-weight: bold; */
                /* font-size: 18px; */
            }
            .background-containter {
                display: flex;
                height: 100%;
                position: absolute;
                width: 100%;
                z-index: 0;
            }
            .background {
                height: 100%;
                position: absolute;
                width: 100%;
                background-color: #f0ebeb;
            }
            @keyframes vibrate {
                0%, 2%, 4%, 6%, 8%, 10%, 12%, 14%, 16%, 18% {
                -webkit-transform: translate3d(-1px, 0, 0);
                        transform: translate3d(-1px, 0, 0);
                }
            1%, 3%, 5%, 7%, 9%, 11%, 13%, 15%, 17%, 19% {
                -webkit-transform: translate3d(1px, 0, 0);
                        transform: translate3d(1px, 0, 0);
                }   
            20%, 100% {
                -webkit-transform: translate3d(0, 0, 0);
                        transform: translate3d(0, 0, 0);
                }
            }
        `}render(){return J`
            ${Zr(this.products,t=>t.id,t=>J`
                                <div class="container">
                                    <div class="inner-container" id="${t.id}">
                                        <div class="product-card">
                                            <div class="product-container">
                                                <div class="product-column">
                                                    <span class="name">${t.products.name}</span>
                                                    <div class="product-info">
                                                        <span>${t.products.gramsEaten} gram</span>
                                                    </div>
                                                </div>
                                                <span id="${t.id}" @click="${this.handleClick}">${t.products.nutritions.calories}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="background-containter">
                                        <div class="background">

                                        </div>
                                        <div class="delete">
                                            <span>Delete</span>
                                        </div>
                                    </div>
                                </div>

                                `)}`}handleClick(t){re.go(`${ut}/intake/${t.target.id}`)}_removeIntake(t){self.confirm("Are you sure you want to delete this product from your intake")&&Rf(t).then(e=>{this.dispatchEvent(new CustomEvent("intakeDeleted",{bubbles:!0,composed:!0}))}).catch(e=>{console.log(e)})}}customElements.define("dairy-productlist",g1);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const p1=Symbol();class js{get taskComplete(){return this.t||(this.status===1?this.t=new Promise((t,e)=>{this.i=t,this.o=e}):this.status===3?this.t=Promise.reject(this.h):this.t=Promise.resolve(this.l)),this.t}constructor(t,e,s){var l;this.u=0,this.status=0,(this.p=t).addController(this);const o=typeof e=="object"?e:{task:e,args:s};this._=o.task,this.v=o.args,this.j=o.argsEqual??m1,this.m=o.onComplete,this.g=o.onError,this.autoRun=o.autoRun??!0,"initialValue"in o&&(this.l=o.initialValue,this.status=2,this.k=(l=this.A)==null?void 0:l.call(this))}hostUpdate(){this.autoRun===!0&&this.O()}hostUpdated(){this.autoRun==="afterUpdate"&&this.O()}A(){if(this.v===void 0)return;const t=this.v();if(!Array.isArray(t))throw Error("The args function must return an array");return t}async O(){const t=this.A(),e=this.k;this.k=t,t===e||t===void 0||e!==void 0&&this.j(e,t)||await this.run(t)}async run(t){var d,f,p,m,y;let e,s;t??(t=this.A()),this.k=t,this.status===1?(d=this.T)==null||d.abort():(this.t=void 0,this.i=void 0,this.o=void 0),this.status=1,this.autoRun==="afterUpdate"?queueMicrotask(()=>this.p.requestUpdate()):this.p.requestUpdate();const o=++this.u;this.T=new AbortController;let l=!1;try{e=await this._(t,{signal:this.T.signal})}catch(w){l=!0,s=w}if(this.u===o){if(e===p1)this.status=0;else{if(l===!1){try{(f=this.m)==null||f.call(this,e)}catch{}this.status=2,(p=this.i)==null||p.call(this,e)}else{try{(m=this.g)==null||m.call(this,s)}catch{}this.status=3,(y=this.o)==null||y.call(this,s)}this.l=e,this.h=s}this.p.requestUpdate()}}abort(t){var e;this.status===1&&((e=this.T)==null||e.abort(t))}get value(){return this.l}get error(){return this.h}render(t){var e,s,o,l;switch(this.status){case 0:return(e=t.initial)==null?void 0:e.call(t);case 1:return(s=t.pending)==null?void 0:s.call(t);case 2:return(o=t.complete)==null?void 0:o.call(t,this.value);case 3:return(l=t.error)==null?void 0:l.call(t,this.error);default:throw Error("Unexpected status: "+this.status)}}}const m1=(i,t)=>i===t||i.length===t.length&&i.every((e,s)=>!ga(e,t[s]));class x1 extends pt{static get properties(){return{title:{type:String},data:{type:Array},_total:{type:Number,state:!0},mealtype:{type:String},_date:{type:String,state:!0}}}constructor(){super(),this.title="default",this.data=[],this._total=0,this.mealtype="",this._date=new Date(new Date().getTime()-new Date().getTimezoneOffset()*6e4).toISOString().split("T")[0]}connectedCallback(){super.connectedCallback(),this.data.map(t=>{this._total+=t.totalCalories})}static get styles(){return yt`
        .container {
            display: flex;
            flex-direction: column;
        }
        p {
            /* text-align: center; */
            font-size: 18px;
            margin: 0;
            /* color: #4f63f7; */
        }
        .header {
            display: flex;
            flex-direction: row;
            align-items: center;
            /* justify-content: space-between; */
            padding: 10px 0 10px 10px;
            border-bottom: 1px solid #dbd8d8;
        }
        .header > p {
            width: calc(100% - 40px);
        }
        .add-product {
            display: flex;
            flex-direction: row;
            padding: 10px 0 10px 10px;
            /* border-bottom: 1px solid #dbd8d8; */
        }
        `}render(){return J`
            <div class="container">
                <div class="header">
                    <p>${this.title}</p>
                    <span>${this._total}</span>
                </div>
                <div class="products">
                    <dairy-productlist .products=${this.data}></dairy-productlist>
                </div>
                <div class="add-product" @click="${this.handleClick}">
                    <span>Add a product</span>
                </div>
            </div>
        `}handleClick(){re.go(`${ut}/products?mealtype=${this.title.toUpperCase()}`)}}customElements.define("dairy-list",x1);class b1 extends pt{static get properties(){return{_date:{type:String,state:!0},consumed:{type:Number},daily:{type:Number},remaining:{type:Number}}}constructor(){super(),this._date=new Date(new Date().getTime()-new Date().getTimezoneOffset()*6e4).toISOString().split("T")[0],this.consumed=0,this.daily=0,this.remaining=0}static get styles(){return yt`
       
       .calories {
                background-color: white;
                display: flex;
                align-items: center;
                justify-content: space-evenly;
                padding-bottom: 20px;
            }
            .calories p {
                font-size: 20px;
                margin-bottom: 0;
            }
            .calories > div {
                display: flex;
                flex-direction: column;
                justify-content: center;
                text-align: center;
            }
            .calories span {
                opacity: 0.6;
                font-size: 14px;
                margin-top: 4px;
            }
            .minus p, .equal p {
                margin: 0;
            }
        `}render(){return J`
               <div class="calories">
                    <div class="goal">
                        <p>${this.daily}</p>
                        <span>Goal</span>
                    </div>
                    <div class="minus">
                        <p>-</p>
                    </div>
                    <div class="consumed">
                        <p>${this.consumed}</p>
                        <span>Consumed</span>
                    </div>
                    <div class="equal">
                        <p>=</p>
                    </div>
                    <div class="remaining">
                        <p>${this.remaining}</p>
                        <span>Remaining</span>
                    </div>
                    
                </div>
        `}handleClick(){re.go(`${ut}/products/search?mealtype=${this.title.toUpperCase()}`)}_changedDate(t){this._date=t.detail}}customElements.define("daily-goalinfo",b1);class y1 extends pt{static get properties(){return{_date:{state:!0},_title:{type:String,state:!0},_dateString:{type:String,state:!0},_scrollX:{type:Number,state:!0},_previous:{type:String,state:!0},_next:{type:String,state:!0}}}constructor(){super(),this._date=new Date,this._dateString=new Date(new Date().getTime()-new Date().getTimezoneOffset()*6e4).toISOString().split("T")[0],this._title="Today",this._yesterday=new Date(new Date(new Date().setDate(new Date().getDate()-1)).getTime()-new Date().getTimezoneOffset()*6e4).toISOString().split("T")[0],this._today=new Date(new Date().getTime()-new Date().getTimezoneOffset()*6e4).toISOString().split("T")[0],this._tomorrow=new Date(new Date(new Date().setDate(new Date().getDate()+1)).getTime()-new Date().getTimezoneOffset()*6e4).toISOString().split("T")[0],this._scrollX=0,this._previous="Yesterday",this._next="Tomorrow"}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}firstUpdated(){super.firstUpdated(),this._item=this.shadowRoot.querySelector(".title"),this._item.scrollLeft=(this._item.scrollWidth-this._item.clientWidth)/2,this._item.addEventListener("scroll",this._scroll.bind(this)),this._item.style="scroll-behavior: smooth",this._scrollWidth=this._item.offsetWidth}_scroll(t){this._scrollX=t.target.scrollLeft,this._scrollWidth=t.target.scrollWidth;const e=t.target.scrollLeft%t.target.offsetWidth===0?0:150;clearTimeout(t.target.scrollTimeout),t.target.scrollTimeout=setTimeout(()=>{if(!e){const o=this._scrollWidth-this._scrollWidth/3;switch(this._scrollX){case 0:this.goBack();break;case o:this.goFurther();break}}},e)}static get styles(){return yt`
        .container {
            display: flex;
            width: 100%;
            height: 50px;
            background-color: white;
            text-align: center;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        span, p {
            font-size: 20px;
        }
        span {
            opacity: 0.6;
        }
        p {
            opacity: 0.8;
            margin: 0;
            width: 110px;
        }
        .title {
            display: flex;
            width: 110px;
            scroll-snap-type: x mandatory; 
            /* scroll-behavior: smooth; */
            overflow: auto;
        }
        .previous, .next {
            scroll-snap-align: start;
            /* display: none; */
        }
        .date {
            scroll-snap-align: start;
        }
        .title::-webkit-scrollbar {
            display: none;
        }
        `}render(){return J`
           <div class="container">
                    <span @click="${this.goBack}"><</span>
                    <div class="title">
                        <div class="text-center">
                            <p class="previous">${this._previous}</p>
                        </div>
                        <div class="text-center">
                            <p class="date">${this._title}</p>
                        </div>
                        <div class="text-center">
                            <p class="next">${this._next}</p>
                        </div>
                    </div>
                    <span @click="${this.goFurther}">></span>
           </div>
        `}goBack(){this._makeDateAndTitle(-1)}goFurther(){this._makeDateAndTitle(1)}_makeDateAndTitle(t){this._date.setDate(this._date.getDate()+t),this._setDays(),this.dispatchEvent(new CustomEvent("changedDate",{detail:this._dateString,bubbles:!0,composed:!0}))}_setDays(){this._dateString=this._makeDateString(this._date);const t=new Date(this._dateString);t.setDate(t.getDate()-1),this._previous=this._makeDateString(t),t.setDate(t.getDate()+2),this._next=this._makeDateString(t),this._item.style="scroll-behavior: none",this._item.scrollLeft=(this._item.scrollWidth-this._item.clientWidth)/2,this._item.style="scroll-behavior: smooth",this._checkWhichDay()}_checkWhichDay(){const t=this._date.getTime()-new Date().getTime();switch(Math.round(t/(1e3*3600*24))){case-2:this._title=this._dateString,this._previous=this._previous,this._next="Yesterday";break;case-1:this._title="Yesterday",this._previous=this._previous,this._next="Today";break;case 0:this._title="Today",this._previous="Yesterday",this._next="Tomorrow";break;case 1:this._title="Tomorrow",this._previous="Today",this._next=this._next;break;case 2:this._title=this._dateString,this._previous="Tomorrow",this._next=this._next;break;default:this._title=this._dateString,this._next=this._next,this._previous=this._previous}}_makeDateString(t){return new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().split("T")[0]}}customElements.define("date-selector",y1);class w1 extends pt{static get properties(){return{data:{type:Object}}}constructor(){super(),this.data={},this._today=this._formatDate(new Date),this._3monthsfurther=this._formatDate(new Date(new Date().setMonth(new Date().getMonth()+3)))}static get styles(){return yt`
        h1 {
            text-align: center;
            background: white;
            margin: 0;
            padding: 10px 0;
        }
        form {
            background-color: white;
            padding: 20px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        date-picker, button-div {
          --date-picker-width: 200px;
          --button-div-width: 220px;
        }
    `}render(){return J`
                <h1>Set goal</h1>
                <form @submit="${this.submitForm}">
                    <date-picker name="startDate" label="dd-mm-yyyy" text="Start date of goal" errormessage=${"Invalid start date"} value="${this._today}" required></date-picker>
                    <date-picker name="endDate" label="dd-mm-yyyy" text="End date of goal" errormessage=${"Invalid end date"} value="${this._3monthsfurther}" required></date-picker>
                    <button-div @click="${this.handleSubmit}" value="Set goal"></button-div>
                </form>
  `}handleChange(t){if((t.target.files[0].size/1024/1024).toFixed(4)>4){this._disabled=!0,this._error="Image is to big";return}this._disabled=!1;const s=new FileReader;s.readAsBinaryString(t.target.files[0]),s.onload=()=>{this._profilePicture={imageBase64:btoa(s.result)}},this._labelImageText="Image selected"}submitForm(t){t.preventDefault();const e=t.target;if(e.checkValidity()){const s=new FormData(e);this.data=Object.fromEntries(s.entries()),Pf(this.data).then(o=>{o.ok&&this.dispatchEvent(new CustomEvent("response"))}).catch(o=>{console.log(o)})}else{let s=!1;Array.from(e.elements).map(o=>{o.id==="image"||o.type==="button"||(o.checkValidation(),!s&&!o.checkValidation()&&(s=!0,o.focus()))})}}handleSubmit(t){this.shadowRoot.querySelector("form").requestSubmit()}_formatDate(t){const e=t.getDate(),s="0"+(t.getMonth()+1),o=t.getFullYear();return e+"-"+s+"-"+o}}customElements.define("set-goal",w1);class _1 extends pt{constructor(){super();Q(this,"_dairyTask",new js(this,{task:async([e])=>(await Nf().then(s=>(this._totalCalories=s.nutritions.calories,s)).catch(s=>{throw Error(s.message)}),await Of(e).then(s=>s).catch(s=>({totalCalories:0}))),args:()=>[this._date]}));this._totalCalEaten=0,this._totalDailyCal=0,this._date=new Date(new Date().getTime()-new Date().getTimezoneOffset()*6e4).toISOString().split("T")[0]}static get properties(){return{_totalCalEaten:{type:Number,state:!0},_totalDailyCal:{type:Number,state:!0},_date:{type:String,state:!0}}}connectedCallback(){super.connectedCallback(),this.addEventListener("intakeDeleted",this._updateData)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("intakeDeleted",this._updateData)}firstUpdated(){super.firstUpdated(),this._datePicker=this.shadowRoot.querySelector("date-selector")}_updateData(){this._dairyTask.run()}static get styles(){return yt`
            h1 {
                text-align: center;
                padding: 20px 0;
                margin: auto;
                background-color: white;
            }
            .container {
                height: 100%;
                background-color: #eceaea;
            }
            .container-dairy {
                display: flex;
                flex-direction: column;
                background-color: #eceaea;
            }
            .container-dairy > dairy-list {
                margin: 10px 0;
                background-color: white;
            }
            .container-dairy > :first-child {
                margin-top: 20px;
            }
            .container-dairy > :last-child{
                margin-bottom: 20px;
                /* margin-bottom: auto; */

            }
        `}render(){return J`
        <page-div>
            <div class="container">
                <date-selector @changedDate="${this._changeDate}"></date-selector>
                ${this._dairyTask.render({pending:()=>J`
                    <daily-goalinfo></daily-goalinfo>
                    <div class="container-dairy">
                                        <dairy-list title="Breakfast"></dairy-list>
                                        <dairy-list title="Lunch"></dairy-list>
                                        <dairy-list title="Diner"></dairy-list>
                                        <dairy-list title="Snack"></dairy-list>
                                    </div>`,complete:e=>J`
                    <daily-goalinfo consumed=${e.totalCalories} daily="${this._totalCalories}" remaining="${this._totalCalories-e.totalCalories}"></daily-goalinfo>
                                    <div class="container-dairy">
                                        <dairy-list title="Breakfast" .data="${this._makeIntakeData(e.intakes,"BREAKFAST")}"></dairy-list>
                                        <dairy-list title="Lunch" .data="${this._makeIntakeData(e.intakes,"LUNCH")}"></dairy-list>
                                        <dairy-list title="Diner" .data="${this._makeIntakeData(e.intakes,"DINER")}"></dairy-list>
                                        <dairy-list title="Snack" .data="${this._makeIntakeData(e.intakes,"SNACK")}"></dairy-list>
                                    </div>`,error:e=>(this._datePicker.style="display: none;",J`<set-goal @response="${this._goalSet}"></set-goal>`)})}
            </div>
        </page-div>`}_makeIntakeData(e,s){let o=[];return e!==void 0&&e.map(l=>{l.mealType===s&&(o=[...o,{id:l.id,totalCalories:l.totalKcal,products:l.product}])}),o}_changeDate(e){this._date=e.detail}_goalSet(e){this._datePicker.style="display: block;",this._updateData()}}customElements.define("dairy-page",_1);class A1 extends pt{static get properties(){return{data:{type:Object},_error:{type:String},_disabled:{type:Boolean,state:!0},_barcode:{type:String,state:!0},_click:{type:Boolean,state:!0},_abbreviate:{type:String,state:!0},_labelImageText:{type:String,state:!0}}}constructor(){super(),this.data={},this._click=!1,this._error="",this._barcode="",this._disabled=!1,this._abbreviate="g",this._labelImageText="Select image Optional"}static get styles(){return yt`
    :host {
        width: 100%;
    }
    form {
        width: 100%;
        display: flex;
        flex-direction: column;
        overflow: auto;
      }
    h1 {
      text-align: center;
    }
    @media only screen and (max-width: 480px) and (orientation: portrait) {
      h1 {
        padding: 0 0 75px 0;
      }
      form {
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        overflow: auto;
        margin: 0 0 20px 0;
      }
      numberic-input, input-field {
        width: 100%;
        display: flex;
        flex-direction: column;
        text-align: center;
        align-items: center;
        --input-width: calc((100vw / 2) - 60px);
      }
      button-div {
        margin: 20px 0 0 0;
        width: calc((100% / 2) - 40px);
      }
      .first-row, .second-row,
      .third-row, .fourth-row {
        width: 100%;
        height: 105px;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .photo-icon {
        -webkit-tap-highlight-color: transparent;
        background: url("add_photo_icon.svg") center / contain no-repeat;
        width: 40px;
        height: 40px;
        /* background-color: #4f63f7; */
        /* border-radius: 50%; */
      }
      input[type="file"] {
        display: none
      }
      .victuals-type {
        width: 100%;
      }
      selector-picker {
        --flex-direction: row;
        --border-radius: 30px;
        --width: 100px;
        --padding: 5px 0;
        --font-size: 18px;
        --justify-content: space-around;
      }
    }
    `}render(){return J`
          <h1>Product</h1>
          <form @submit=${this.submitForm} @keyup=${this.enterKeyPressed} enctype="multipart/form-data" novalidate>
            <button type="button" @click="${this.handleClick}">Scan barcode</button>
            ${this._click?J`<scanner-div @getBarcode=${this._setBarcode}></scanner-div>`:le}
            <input-field class="barcode" name="barcode" label="Barcode" pattern=".{1,}" errormessage="Field cannot be empty" value=${this._barcode} required></input-field>
            <div class="victuals-type">
              <selector-picker 
                name="victualsType" 
                .options="${[{value:"FOOD",label:"Food",checked:!0},{value:"DRINK",label:"Drink"}]}"
                @selection-changed="${this.handleSelection}"
                required>
              </selector-picker>
            </div>
            <div class="first-row">
                <input-field name="name" label="Product name" pattern=".{1,}" errormessage="Field cannot be empty" required></input-field>
                <input-field name="brand" label="Brand name" pattern=".{1,}" errormessage="Field cannot be empty" required></input-field>
            </div>
            <div class="second-row">            
                <numberic-input name="quantity" label="Amount" pattern="([0-9]{1,3})?([\.][0-9][0-9]?)?" errormessage="Quantity cannot be more than '10000'" abbreviateType="${this._abbreviate}" value="100" required></numberic-input>
                <numberic-input name="calories" label="Calories" pattern="([0-9]{1,3})?([\.][0-9][0-9]?)?" errormessage="Calories cannot be more than 10000" abbreviateType="kcal" required></numberic-input>
            </div>
            <div class="third-row">
                <numberic-input name="fat" label="Fat" pattern="([0-9]{1,3})?([\.][0-9][0-9]?)?" errormessage="Fat cannot be more than 1000" abbreviateType="g" required></numberic-input>
                <numberic-input name="carbs" label="Carbs" pattern="([0-9]{1,3})?([\.][0-9][0-9]?)?" errormessage="Carbs cannot be more than 2000" abbreviateType="g" required></numberic-input>
            </div>
            <div class="fourth-row">
                <numberic-input name="protein" label="Protein" pattern="([0-9]{1,3})?([\.][0-9][0-9]?)?" errormessage="Protein cannot be more than 2000" abbreviateType="g" required></numberic-input>
                <numberic-input name="salt" label="Salt" pattern="([0-9]{1,3})?([\.][0-9][0-9]?)?" errormessage="Salt cannot be more than 100" abbreviateType="g" required></numberic-input>
            </div>
            <label for="image">
              ${this._labelImageText}
            </label>
            <input type="file" name="image" id="image" accept="image/*" @change="${this.handleChange}"/>
            <button-div ?disabled="${this._disabled}" value="Submit" @click=${this.handleSubmit}></button-div>
          </form>
          <error-message message="${this._error}"></error-message>
  `}handleChange(t){if((t.target.files[0].size/1024/1024).toFixed(4)>4){this._disabled=!0,this._error="Image is to big";return}this._disabled=!1;const s=new FileReader;s.readAsBinaryString(t.target.files[0]),s.onload=()=>{this._profilePicture={imageBase64:btoa(s.result)}},this._labelImageText="Image selected"}submitForm(t){t.preventDefault();const e=t.target;if(e.checkValidity())this.data=new FormData(e),Tf(this.data).then(s=>{s.ok&&(this._error="Product added")}).catch(s=>{this._error=s.message});else{let s=!1;Array.from(e.elements).map(o=>{o.id==="image"||o.type==="button"||(o.checkValidation(),!s&&!o.checkValidation()&&(s=!0,o.focus()))})}}handleSubmit(t){this.shadowRoot.querySelector("form").requestSubmit()}_setBarcode(t){this._barcode=t.detail.barcode,this.shadowRoot.querySelector(".barcode").focus()}handleClick(){this._click=!this._click}handleSelection(t){switch(t.target.value){case"FOOD":this._abbreviate="g";break;case"DRINK":this._abbreviate="ml";break}}}customElements.define("product-form",A1);class C1 extends pt{static get styles(){return yt`
            h1 {
                text-align: center;
            }
        `}render(){return J`
        <page-div>
            <product-form></product-form>
        </page-div>`}}customElements.define("addproduct-page",C1);class E1 extends pt{static get properties(){return{products:{type:Array}}}constructor(){super(),this._products=[],this._param=Si.location.params.mealtype===void 0?"":"/"+Si.location.params.mealtype}static get styles(){return yt`
            h1 {
                text-align: center;
            }
            .containter {
                display: flex;
                flex-direction: column;
            }
            .product-card {
                height: 50px;
                width: 100%;
                margin: 12px 0;

            }
            .product-container {
                display: flex;
                flex-direction: row;
                height: 100%;
                margin: 0 10px;
                padding: 5px 0 5px 10px;
                border-radius: 10px;
                box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
                /* justify-content: center; */
                align-items: center;
            }
            .food-info {
                display: flex;
            }
            img {
                width: 50px;
                height: 50px;
                object-fit: contain;
            }
            .product-info span {
                opacity: 0.5;
                font-size: 15px;
                margin: 0 4px 0 0;

            }
            .product-column {
                display: flex;
                flex-direction: column;
                width: calc(100% - 40px);
            }
            button {
                border: transparent;
                width: 32px;
                height: 32px;
                background: url("add-icon.svg") center / contain no-repeat;
                cursor: pointer;
                
            }
        `}render(){return J`
            ${Zr(this.products,t=>t.id,t=>J`
                            <div class="product-card">
                                <div class="product-container">
                                <div class="product-column">
                                    <span class="name">${t.name}</span>
                                    <div class="product-info">
                                        <span>${t.quantity} gram,</span>
                                        <span>${t.nutritions.calories} cal</span>
                                    </div>
                                </div>
                                <button @click="${this.handleClick}" id="${t.id}"></button>
                                </div>
                            </div>
                                `)}`}handleClick(t){if(Object.values(Si.location).length!==0){const e=Si.location.search;re.go(`${ut}/product/${t.target.id}${e}`);return}re.go(`${ut}/product/${t.target.id}`)}}customElements.define("products-list",E1);class S1 extends pt{constructor(){super();Q(this,"_productsTask",new js(this,{task:async()=>Mf().then(e=>e),args:()=>[]}))}static get properties(){return{}}static get styles(){return yt`
            h1 {
                text-align: center;
            }
            .containter {
                display: flex;
                flex-direction: column;
            }
            .product-card {
                height: 50px;
                width: 100%;
                margin: 12px 0;

            }
            .product-container {
                display: flex;
                flex-direction: row;
                height: 100%;
                margin: 0 10px;
                padding: 5px 0 5px 10px;
                border-radius: 10px;
                box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
                /* justify-content: center; */
                align-items: center;
            }
            .food-info {
                display: flex;
            }
            img {
                width: 50px;
                height: 50px;
                object-fit: contain;
            }
            .product-info span {
                opacity: 0.5;
                font-size: 15px;
                margin: 0 4px 0 0;

            }
            .product-column {
                display: flex;
                flex-direction: column;
                width: calc(100% - 40px);
            }
            .slide {
                position: relative;
                right: -100%;
                width: 100%;
                -webkit-animation: slide 0.5s forwards;
                animation: slide 0.5s forwards;
            }

            .back {
                position: relative;
                left: 0;
                background-color: red;
                width: 100%;
                -webkit-animation: slide 0.5s forwards;
                animation: slide 0.5s forwards;
            }

            @-webkit-keyframes slide {
                100% { right: 0; }
            }

            @keyframes slide {
                100% { right: 0; }
            }
            
        `}render(){return J`
        <page-div headerbar headerbartitle="Products" location="/dairy">
            <product-searchbar></product-searchbar>
            ${this._productsTask.render({pending:()=>J`<span>Loading...</span>`,complete:e=>J`<products-list .products="${e}"></products-list>`})}
            
        </page-div>`}}customElements.define("products-page",S1);/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Ws(i){return i+.5|0}const zi=(i,t,e)=>Math.max(Math.min(i,e),t);function ms(i){return zi(Ws(i*2.55),0,255)}function Yi(i){return zi(Ws(i*255),0,255)}function Ai(i){return zi(Ws(i/2.55)/100,0,1)}function Wl(i){return zi(Ws(i*100),0,100)}const Ge={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Xo=[..."0123456789ABCDEF"],v1=i=>Xo[i&15],I1=i=>Xo[(i&240)>>4]+Xo[i&15],ar=i=>(i&240)>>4===(i&15),T1=i=>ar(i.r)&&ar(i.g)&&ar(i.b)&&ar(i.a);function M1(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&Ge[i[1]]*17,g:255&Ge[i[2]]*17,b:255&Ge[i[3]]*17,a:t===5?Ge[i[4]]*17:255}:(t===7||t===9)&&(e={r:Ge[i[1]]<<4|Ge[i[2]],g:Ge[i[3]]<<4|Ge[i[4]],b:Ge[i[5]]<<4|Ge[i[6]],a:t===9?Ge[i[7]]<<4|Ge[i[8]]:255})),e}const D1=(i,t)=>i<255?t(i):"";function O1(i){var t=T1(i)?v1:I1;return i?"#"+t(i.r)+t(i.g)+t(i.b)+D1(i.a,t):void 0}const k1=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qh(i,t,e){const s=t*Math.min(e,1-e),o=(l,d=(l+i/30)%12)=>e-s*Math.max(Math.min(d-3,9-d,1),-1);return[o(0),o(8),o(4)]}function N1(i,t,e){const s=(o,l=(o+i/60)%6)=>e-e*t*Math.max(Math.min(l,4-l,1),0);return[s(5),s(3),s(1)]}function R1(i,t,e){const s=qh(i,1,.5);let o;for(t+e>1&&(o=1/(t+e),t*=o,e*=o),o=0;o<3;o++)s[o]*=1-t-e,s[o]+=t;return s}function L1(i,t,e,s,o){return i===o?(t-e)/s+(t<e?6:0):t===o?(e-i)/s+2:(i-t)/s+4}function ya(i){const e=i.r/255,s=i.g/255,o=i.b/255,l=Math.max(e,s,o),d=Math.min(e,s,o),f=(l+d)/2;let p,m,y;return l!==d&&(y=l-d,m=f>.5?y/(2-l-d):y/(l+d),p=L1(e,s,o,y,l),p=p*60+.5),[p|0,m||0,f]}function wa(i,t,e,s){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,s)).map(Yi)}function _a(i,t,e){return wa(qh,i,t,e)}function P1(i,t,e){return wa(R1,i,t,e)}function B1(i,t,e){return wa(N1,i,t,e)}function Zh(i){return(i%360+360)%360}function F1(i){const t=k1.exec(i);let e=255,s;if(!t)return;t[5]!==s&&(e=t[6]?ms(+t[5]):Yi(+t[5]));const o=Zh(+t[2]),l=+t[3]/100,d=+t[4]/100;return t[1]==="hwb"?s=P1(o,l,d):t[1]==="hsv"?s=B1(o,l,d):s=_a(o,l,d),{r:s[0],g:s[1],b:s[2],a:e}}function U1(i,t){var e=ya(i);e[0]=Zh(e[0]+t),e=_a(e),i.r=e[0],i.g=e[1],i.b=e[2]}function V1(i){if(!i)return;const t=ya(i),e=t[0],s=Wl(t[1]),o=Wl(t[2]);return i.a<255?`hsla(${e}, ${s}%, ${o}%, ${Ai(i.a)})`:`hsl(${e}, ${s}%, ${o}%)`}const $l={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Yl={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function z1(){const i={},t=Object.keys(Yl),e=Object.keys($l);let s,o,l,d,f;for(s=0;s<t.length;s++){for(d=f=t[s],o=0;o<e.length;o++)l=e[o],f=f.replace(l,$l[l]);l=parseInt(Yl[d],16),i[f]=[l>>16&255,l>>8&255,l&255]}return i}let lr;function H1(i){lr||(lr=z1(),lr.transparent=[0,0,0,0]);const t=lr[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const j1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function W1(i){const t=j1.exec(i);let e=255,s,o,l;if(t){if(t[7]!==s){const d=+t[7];e=t[8]?ms(d):zi(d*255,0,255)}return s=+t[1],o=+t[3],l=+t[5],s=255&(t[2]?ms(s):zi(s,0,255)),o=255&(t[4]?ms(o):zi(o,0,255)),l=255&(t[6]?ms(l):zi(l,0,255)),{r:s,g:o,b:l,a:e}}}function $1(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Ai(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const Do=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,Bn=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Y1(i,t,e){const s=Bn(Ai(i.r)),o=Bn(Ai(i.g)),l=Bn(Ai(i.b));return{r:Yi(Do(s+e*(Bn(Ai(t.r))-s))),g:Yi(Do(o+e*(Bn(Ai(t.g))-o))),b:Yi(Do(l+e*(Bn(Ai(t.b))-l))),a:i.a+e*(t.a-i.a)}}function cr(i,t,e){if(i){let s=ya(i);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=_a(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function Kh(i,t){return i&&Object.assign(t||{},i)}function Xl(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=Yi(i[3]))):(t=Kh(i,{r:0,g:0,b:0,a:1}),t.a=Yi(t.a)),t}function X1(i){return i.charAt(0)==="r"?W1(i):F1(i)}class Rs{constructor(t){if(t instanceof Rs)return t;const e=typeof t;let s;e==="object"?s=Xl(t):e==="string"&&(s=M1(t)||H1(t)||X1(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=Kh(this._rgb);return t&&(t.a=Ai(t.a)),t}set rgb(t){this._rgb=Xl(t)}rgbString(){return this._valid?$1(this._rgb):void 0}hexString(){return this._valid?O1(this._rgb):void 0}hslString(){return this._valid?V1(this._rgb):void 0}mix(t,e){if(t){const s=this.rgb,o=t.rgb;let l;const d=e===l?.5:e,f=2*d-1,p=s.a-o.a,m=((f*p===-1?f:(f+p)/(1+f*p))+1)/2;l=1-m,s.r=255&m*s.r+l*o.r+.5,s.g=255&m*s.g+l*o.g+.5,s.b=255&m*s.b+l*o.b+.5,s.a=d*s.a+(1-d)*o.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=Y1(this._rgb,t._rgb,e)),this}clone(){return new Rs(this.rgb)}alpha(t){return this._rgb.a=Yi(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Ws(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return cr(this._rgb,2,t),this}darken(t){return cr(this._rgb,2,-t),this}saturate(t){return cr(this._rgb,1,t),this}desaturate(t){return cr(this._rgb,1,-t),this}rotate(t){return U1(this._rgb,t),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function yi(){}const G1=(()=>{let i=0;return()=>i++})();function It(i){return i===null||typeof i>"u"}function $t(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ct(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function te(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function ze(i,t){return te(i)?i:t}function bt(i,t){return typeof i>"u"?t:i}const q1=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,Qh=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function zt(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function Rt(i,t,e,s){let o,l,d;if($t(i))if(l=i.length,s)for(o=l-1;o>=0;o--)t.call(e,i[o],o);else for(o=0;o<l;o++)t.call(e,i[o],o);else if(Ct(i))for(d=Object.keys(i),l=d.length,o=0;o<l;o++)t.call(e,i[d[o]],d[o])}function Hr(i,t){let e,s,o,l;if(!i||!t||i.length!==t.length)return!1;for(e=0,s=i.length;e<s;++e)if(o=i[e],l=t[e],o.datasetIndex!==l.datasetIndex||o.index!==l.index)return!1;return!0}function jr(i){if($t(i))return i.map(jr);if(Ct(i)){const t=Object.create(null),e=Object.keys(i),s=e.length;let o=0;for(;o<s;++o)t[e[o]]=jr(i[e[o]]);return t}return i}function Jh(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Z1(i,t,e,s){if(!Jh(i))return;const o=t[i],l=e[i];Ct(o)&&Ct(l)?Ls(o,l,s):t[i]=jr(l)}function Ls(i,t,e){const s=$t(t)?t:[t],o=s.length;if(!Ct(i))return i;e=e||{};const l=e.merger||Z1;let d;for(let f=0;f<o;++f){if(d=s[f],!Ct(d))continue;const p=Object.keys(d);for(let m=0,y=p.length;m<y;++m)l(p[m],i,d,e)}return i}function Ss(i,t){return Ls(i,t,{merger:K1})}function K1(i,t,e){if(!Jh(i))return;const s=t[i],o=e[i];Ct(s)&&Ct(o)?Ss(s,o):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=jr(o))}const Gl={"":i=>i,x:i=>i.x,y:i=>i.y};function Q1(i){const t=i.split("."),e=[];let s="";for(const o of t)s+=o,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function J1(i){const t=Q1(i);return e=>{for(const s of t){if(s==="")break;e=e&&e[s]}return e}}function qi(i,t){return(Gl[t]||(Gl[t]=J1(t)))(i)}function Aa(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Ps=i=>typeof i<"u",Zi=i=>typeof i=="function",ql=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0};function tg(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const Xt=Math.PI,Yt=2*Xt,eg=Yt+Xt,Wr=Number.POSITIVE_INFINITY,ig=Xt/180,oe=Xt/2,hn=Xt/4,Zl=Xt*2/3,Hi=Math.log10,xi=Math.sign;function vs(i,t,e){return Math.abs(i-t)<e}function Kl(i){const t=Math.round(i);i=vs(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(Hi(i))),s=i/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function ng(i){const t=[],e=Math.sqrt(i);let s;for(s=1;s<e;s++)i%s===0&&(t.push(s),t.push(i/s));return e===(e|0)&&t.push(e),t.sort((o,l)=>o-l).pop(),t}function jn(i){return!isNaN(parseFloat(i))&&isFinite(i)}function sg(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}function td(i,t,e){let s,o,l;for(s=0,o=i.length;s<o;s++)l=i[s][e],isNaN(l)||(t.min=Math.min(t.min,l),t.max=Math.max(t.max,l))}function si(i){return i*(Xt/180)}function Ca(i){return i*(180/Xt)}function Ql(i){if(!te(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function ed(i,t){const e=t.x-i.x,s=t.y-i.y,o=Math.sqrt(e*e+s*s);let l=Math.atan2(s,e);return l<-.5*Xt&&(l+=Yt),{angle:l,distance:o}}function Go(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function rg(i,t){return(i-t+eg)%Yt-Xt}function He(i){return(i%Yt+Yt)%Yt}function Bs(i,t,e,s){const o=He(i),l=He(t),d=He(e),f=He(l-o),p=He(d-o),m=He(o-l),y=He(o-d);return o===l||o===d||s&&l===d||f>p&&m<y}function me(i,t,e){return Math.max(t,Math.min(e,i))}function og(i){return me(i,-32768,32767)}function Ii(i,t,e,s=1e-6){return i>=Math.min(t,e)-s&&i<=Math.max(t,e)+s}function Ea(i,t,e){e=e||(d=>i[d]<t);let s=i.length-1,o=0,l;for(;s-o>1;)l=o+s>>1,e(l)?o=l:s=l;return{lo:o,hi:s}}const Ti=(i,t,e,s)=>Ea(i,e,s?o=>{const l=i[o][t];return l<e||l===e&&i[o+1][t]===e}:o=>i[o][t]<e),ag=(i,t,e)=>Ea(i,e,s=>i[s][t]>=e);function lg(i,t,e){let s=0,o=i.length;for(;s<o&&i[s]<t;)s++;for(;o>s&&i[o-1]>e;)o--;return s>0||o<i.length?i.slice(s,o):i}const id=["push","pop","shift","splice","unshift"];function cg(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),id.forEach(e=>{const s="_onData"+Aa(e),o=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...l){const d=o.apply(this,l);return i._chartjs.listeners.forEach(f=>{typeof f[s]=="function"&&f[s](...l)}),d}})})}function Jl(i,t){const e=i._chartjs;if(!e)return;const s=e.listeners,o=s.indexOf(t);o!==-1&&s.splice(o,1),!(s.length>0)&&(id.forEach(l=>{delete i[l]}),delete i._chartjs)}function nd(i){const t=new Set(i);return t.size===i.length?i:Array.from(t)}const sd=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function rd(i,t){let e=[],s=!1;return function(...o){e=o,s||(s=!0,sd.call(window,()=>{s=!1,i.apply(t,e)}))}}function hg(i,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(i,t,s)):i.apply(this,s),t}}const Sa=i=>i==="start"?"left":i==="end"?"right":"center",Ee=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,dg=(i,t,e,s)=>i===(s?"left":"right")?e:i==="center"?(t+e)/2:t;function od(i,t,e){const s=t.length;let o=0,l=s;if(i._sorted){const{iScale:d,_parsed:f}=i,p=d.axis,{min:m,max:y,minDefined:w,maxDefined:A}=d.getUserBounds();w&&(o=me(Math.min(Ti(f,p,m).lo,e?s:Ti(t,p,d.getPixelForValue(m)).lo),0,s-1)),A?l=me(Math.max(Ti(f,d.axis,y,!0).hi+1,e?0:Ti(t,p,d.getPixelForValue(y),!0).hi+1),o,s)-o:l=s-o}return{start:o,count:l}}function ad(i){const{xScale:t,yScale:e,_scaleRanges:s}=i,o={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return i._scaleRanges=o,!0;const l=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,o),l}const hr=i=>i===0||i===1,tc=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*Yt/e)),ec=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*Yt/e)+1,Is={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*oe)+1,easeOutSine:i=>Math.sin(i*oe),easeInOutSine:i=>-.5*(Math.cos(Xt*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>hr(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>hr(i)?i:tc(i,.075,.3),easeOutElastic:i=>hr(i)?i:ec(i,.075,.3),easeInOutElastic(i){return hr(i)?i:i<.5?.5*tc(i*2,.1125,.45):.5+.5*ec(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-Is.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?Is.easeInBounce(i*2)*.5:Is.easeOutBounce(i*2-1)*.5+.5};function va(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function ic(i){return va(i)?i:new Rs(i)}function Oo(i){return va(i)?i:new Rs(i).saturate(.5).darken(.1).hexString()}const ug=["x","y","borderWidth","radius","tension"],fg=["color","borderColor","backgroundColor"];function gg(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:fg},numbers:{type:"number",properties:ug}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function pg(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const nc=new Map;function mg(i,t){t=t||{};const e=i+JSON.stringify(t);let s=nc.get(e);return s||(s=new Intl.NumberFormat(i,t),nc.set(e,s)),s}function $s(i,t,e){return mg(t,e).format(i)}const ld={values(i){return $t(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";const s=this.chart.options.locale;let o,l=i;if(e.length>1){const m=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(m<1e-4||m>1e15)&&(o="scientific"),l=xg(i,e)}const d=Hi(Math.abs(l)),f=isNaN(d)?1:Math.max(Math.min(-1*Math.floor(d),20),0),p={notation:o,minimumFractionDigits:f,maximumFractionDigits:f};return Object.assign(p,this.options.ticks.format),$s(i,s,p)},logarithmic(i,t,e){if(i===0)return"0";const s=e[t].significand||i/Math.pow(10,Math.floor(Hi(i)));return[1,2,3,5,10,15].includes(s)||t>.8*e.length?ld.numeric.call(this,i,t,e):""}};function xg(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var Kr={formatters:ld};function bg(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Kr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Cn=Object.create(null),qo=Object.create(null);function Ts(i,t){if(!t)return i;const e=t.split(".");for(let s=0,o=e.length;s<o;++s){const l=e[s];i=i[l]||(i[l]=Object.create(null))}return i}function ko(i,t,e){return typeof t=="string"?Ls(Ts(i,t),e):Ls(Ts(i,""),t)}class yg{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,o)=>Oo(o.backgroundColor),this.hoverBorderColor=(s,o)=>Oo(o.borderColor),this.hoverColor=(s,o)=>Oo(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ko(this,t,e)}get(t){return Ts(this,t)}describe(t,e){return ko(qo,t,e)}override(t,e){return ko(Cn,t,e)}route(t,e,s,o){const l=Ts(this,t),d=Ts(this,s),f="_"+e;Object.defineProperties(l,{[f]:{value:l[e],writable:!0},[e]:{enumerable:!0,get(){const p=this[f],m=d[o];return Ct(p)?Object.assign({},m,p):bt(p,m)},set(p){this[f]=p}}})}apply(t){t.forEach(e=>e(this))}}var ee=new yg({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gg,pg,bg]);function wg(i){return!i||It(i.size)||It(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function $r(i,t,e,s,o){let l=t[o];return l||(l=t[o]=i.measureText(o).width,e.push(o)),l>s&&(s=l),s}function _g(i,t,e,s){s=s||{};let o=s.data=s.data||{},l=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(o=s.data={},l=s.garbageCollect=[],s.font=t),i.save(),i.font=t;let d=0;const f=e.length;let p,m,y,w,A;for(p=0;p<f;p++)if(w=e[p],w!=null&&!$t(w))d=$r(i,o,l,d,w);else if($t(w))for(m=0,y=w.length;m<y;m++)A=w[m],A!=null&&!$t(A)&&(d=$r(i,o,l,d,A));i.restore();const S=l.length/2;if(S>e.length){for(p=0;p<S;p++)delete o[l[p]];l.splice(0,S)}return d}function dn(i,t,e){const s=i.currentDevicePixelRatio,o=e!==0?Math.max(e/2,.5):0;return Math.round((t-o)*s)/s+o}function sc(i,t){t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore()}function Zo(i,t,e,s){cd(i,t,e,s,null)}function cd(i,t,e,s,o){let l,d,f,p,m,y,w,A;const S=t.pointStyle,M=t.rotation,D=t.radius;let k=(M||0)*ig;if(S&&typeof S=="object"&&(l=S.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){i.save(),i.translate(e,s),i.rotate(k),i.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),i.restore();return}if(!(isNaN(D)||D<=0)){switch(i.beginPath(),S){default:o?i.ellipse(e,s,o/2,D,0,0,Yt):i.arc(e,s,D,0,Yt),i.closePath();break;case"triangle":y=o?o/2:D,i.moveTo(e+Math.sin(k)*y,s-Math.cos(k)*D),k+=Zl,i.lineTo(e+Math.sin(k)*y,s-Math.cos(k)*D),k+=Zl,i.lineTo(e+Math.sin(k)*y,s-Math.cos(k)*D),i.closePath();break;case"rectRounded":m=D*.516,p=D-m,d=Math.cos(k+hn)*p,w=Math.cos(k+hn)*(o?o/2-m:p),f=Math.sin(k+hn)*p,A=Math.sin(k+hn)*(o?o/2-m:p),i.arc(e-w,s-f,m,k-Xt,k-oe),i.arc(e+A,s-d,m,k-oe,k),i.arc(e+w,s+f,m,k,k+oe),i.arc(e-A,s+d,m,k+oe,k+Xt),i.closePath();break;case"rect":if(!M){p=Math.SQRT1_2*D,y=o?o/2:p,i.rect(e-y,s-p,2*y,2*p);break}k+=hn;case"rectRot":w=Math.cos(k)*(o?o/2:D),d=Math.cos(k)*D,f=Math.sin(k)*D,A=Math.sin(k)*(o?o/2:D),i.moveTo(e-w,s-f),i.lineTo(e+A,s-d),i.lineTo(e+w,s+f),i.lineTo(e-A,s+d),i.closePath();break;case"crossRot":k+=hn;case"cross":w=Math.cos(k)*(o?o/2:D),d=Math.cos(k)*D,f=Math.sin(k)*D,A=Math.sin(k)*(o?o/2:D),i.moveTo(e-w,s-f),i.lineTo(e+w,s+f),i.moveTo(e+A,s-d),i.lineTo(e-A,s+d);break;case"star":w=Math.cos(k)*(o?o/2:D),d=Math.cos(k)*D,f=Math.sin(k)*D,A=Math.sin(k)*(o?o/2:D),i.moveTo(e-w,s-f),i.lineTo(e+w,s+f),i.moveTo(e+A,s-d),i.lineTo(e-A,s+d),k+=hn,w=Math.cos(k)*(o?o/2:D),d=Math.cos(k)*D,f=Math.sin(k)*D,A=Math.sin(k)*(o?o/2:D),i.moveTo(e-w,s-f),i.lineTo(e+w,s+f),i.moveTo(e+A,s-d),i.lineTo(e-A,s+d);break;case"line":d=o?o/2:Math.cos(k)*D,f=Math.sin(k)*D,i.moveTo(e-d,s-f),i.lineTo(e+d,s+f);break;case"dash":i.moveTo(e,s),i.lineTo(e+Math.cos(k)*(o?o/2:D),s+Math.sin(k)*D);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function Mi(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function Qr(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function Jr(i){i.restore()}function Ag(i,t,e,s,o){if(!t)return i.lineTo(e.x,e.y);if(o==="middle"){const l=(t.x+e.x)/2;i.lineTo(l,t.y),i.lineTo(l,e.y)}else o==="after"!=!!s?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function Cg(i,t,e,s){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function Eg(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),It(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function Sg(i,t,e,s,o){if(o.strikethrough||o.underline){const l=i.measureText(s),d=t-l.actualBoundingBoxLeft,f=t+l.actualBoundingBoxRight,p=e-l.actualBoundingBoxAscent,m=e+l.actualBoundingBoxDescent,y=o.strikethrough?(p+m)/2:m;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=o.decorationWidth||2,i.moveTo(d,y),i.lineTo(f,y),i.stroke()}}function vg(i,t){const e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function En(i,t,e,s,o,l={}){const d=$t(t)?t:[t],f=l.strokeWidth>0&&l.strokeColor!=="";let p,m;for(i.save(),i.font=o.string,Eg(i,l),p=0;p<d.length;++p)m=d[p],l.backdrop&&vg(i,l.backdrop),f&&(l.strokeColor&&(i.strokeStyle=l.strokeColor),It(l.strokeWidth)||(i.lineWidth=l.strokeWidth),i.strokeText(m,e,s,l.maxWidth)),i.fillText(m,e,s,l.maxWidth),Sg(i,e,s,m,l),s+=Number(o.lineHeight);i.restore()}function Fs(i,t){const{x:e,y:s,w:o,h:l,radius:d}=t;i.arc(e+d.topLeft,s+d.topLeft,d.topLeft,1.5*Xt,Xt,!0),i.lineTo(e,s+l-d.bottomLeft),i.arc(e+d.bottomLeft,s+l-d.bottomLeft,d.bottomLeft,Xt,oe,!0),i.lineTo(e+o-d.bottomRight,s+l),i.arc(e+o-d.bottomRight,s+l-d.bottomRight,d.bottomRight,oe,0,!0),i.lineTo(e+o,s+d.topRight),i.arc(e+o-d.topRight,s+d.topRight,d.topRight,0,-oe,!0),i.lineTo(e+d.topLeft,s)}const Ig=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Tg=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Mg(i,t){const e=(""+i).match(Ig);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}const Dg=i=>+i||0;function Ia(i,t){const e={},s=Ct(t),o=s?Object.keys(t):t,l=Ct(i)?s?d=>bt(i[d],i[t[d]]):d=>i[d]:()=>i;for(const d of o)e[d]=Dg(l(d));return e}function hd(i){return Ia(i,{top:"y",right:"x",bottom:"y",left:"x"})}function bn(i){return Ia(i,["topLeft","topRight","bottomLeft","bottomRight"])}function ve(i){const t=hd(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ue(i,t){i=i||{},t=t||ee.font;let e=bt(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=bt(i.style,t.style);s&&!(""+s).match(Tg)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const o={family:bt(i.family,t.family),lineHeight:Mg(bt(i.lineHeight,t.lineHeight),e),size:e,style:s,weight:bt(i.weight,t.weight),string:""};return o.string=wg(o),o}function xs(i,t,e,s){let o=!0,l,d,f;for(l=0,d=i.length;l<d;++l)if(f=i[l],f!==void 0&&(t!==void 0&&typeof f=="function"&&(f=f(t),o=!1),e!==void 0&&$t(f)&&(f=f[e%f.length],o=!1),f!==void 0))return s&&!o&&(s.cacheable=!1),f}function Og(i,t,e){const{min:s,max:o}=i,l=Qh(t,(o-s)/2),d=(f,p)=>e&&f===0?0:f+p;return{min:d(s,-Math.abs(l)),max:d(o,l)}}function Qi(i,t){return Object.assign(Object.create(i),t)}function Ta(i,t=[""],e,s,o=()=>i[0]){const l=e||i;typeof s>"u"&&(s=gd("_fallback",i));const d={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:l,_fallback:s,_getTarget:o,override:f=>Ta([f,...i],t,l,s)};return new Proxy(d,{deleteProperty(f,p){return delete f[p],delete f._keys,delete i[0][p],!0},get(f,p){return ud(f,p,()=>Ug(p,t,i,f))},getOwnPropertyDescriptor(f,p){return Reflect.getOwnPropertyDescriptor(f._scopes[0],p)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(f,p){return oc(f).includes(p)},ownKeys(f){return oc(f)},set(f,p,m){const y=f._storage||(f._storage=o());return f[p]=y[p]=m,delete f._keys,!0}})}function Wn(i,t,e,s){const o={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:dd(i,s),setContext:l=>Wn(i,l,e,s),override:l=>Wn(i.override(l),t,e,s)};return new Proxy(o,{deleteProperty(l,d){return delete l[d],delete i[d],!0},get(l,d,f){return ud(l,d,()=>Ng(l,d,f))},getOwnPropertyDescriptor(l,d){return l._descriptors.allKeys?Reflect.has(i,d)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,d)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(l,d){return Reflect.has(i,d)},ownKeys(){return Reflect.ownKeys(i)},set(l,d,f){return i[d]=f,delete l[d],!0}})}function dd(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:o=t.allKeys}=i;return{allKeys:o,scriptable:e,indexable:s,isScriptable:Zi(e)?e:()=>e,isIndexable:Zi(s)?s:()=>s}}const kg=(i,t)=>i?i+Aa(t):t,Ma=(i,t)=>Ct(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ud(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t))return i[t];const s=e();return i[t]=s,s}function Ng(i,t,e){const{_proxy:s,_context:o,_subProxy:l,_descriptors:d}=i;let f=s[t];return Zi(f)&&d.isScriptable(t)&&(f=Rg(t,f,i,e)),$t(f)&&f.length&&(f=Lg(t,f,i,d.isIndexable)),Ma(t,f)&&(f=Wn(f,o,l&&l[t],d)),f}function Rg(i,t,e,s){const{_proxy:o,_context:l,_subProxy:d,_stack:f}=e;if(f.has(i))throw new Error("Recursion detected: "+Array.from(f).join("->")+"->"+i);f.add(i);let p=t(l,d||s);return f.delete(i),Ma(i,p)&&(p=Da(o._scopes,o,i,p)),p}function Lg(i,t,e,s){const{_proxy:o,_context:l,_subProxy:d,_descriptors:f}=e;if(typeof l.index<"u"&&s(i))return t[l.index%t.length];if(Ct(t[0])){const p=t,m=o._scopes.filter(y=>y!==p);t=[];for(const y of p){const w=Da(m,o,i,y);t.push(Wn(w,l,d&&d[i],f))}}return t}function fd(i,t,e){return Zi(i)?i(t,e):i}const Pg=(i,t)=>i===!0?t:typeof i=="string"?qi(t,i):void 0;function Bg(i,t,e,s,o){for(const l of t){const d=Pg(e,l);if(d){i.add(d);const f=fd(d._fallback,e,o);if(typeof f<"u"&&f!==e&&f!==s)return f}else if(d===!1&&typeof s<"u"&&e!==s)return null}return!1}function Da(i,t,e,s){const o=t._rootScopes,l=fd(t._fallback,e,s),d=[...i,...o],f=new Set;f.add(s);let p=rc(f,d,e,l||e,s);return p===null||typeof l<"u"&&l!==e&&(p=rc(f,d,l,p,s),p===null)?!1:Ta(Array.from(f),[""],o,l,()=>Fg(t,e,s))}function rc(i,t,e,s,o){for(;e;)e=Bg(i,t,e,s,o);return e}function Fg(i,t,e){const s=i._getTarget();t in s||(s[t]={});const o=s[t];return $t(o)&&Ct(e)?e:o||{}}function Ug(i,t,e,s){let o;for(const l of t)if(o=gd(kg(l,i),e),typeof o<"u")return Ma(i,o)?Da(e,s,i,o):o}function gd(i,t){for(const e of t){if(!e)continue;const s=e[i];if(typeof s<"u")return s}}function oc(i){let t=i._keys;return t||(t=i._keys=Vg(i._scopes)),t}function Vg(i){const t=new Set;for(const e of i)for(const s of Object.keys(e).filter(o=>!o.startsWith("_")))t.add(s);return Array.from(t)}function pd(i,t,e,s){const{iScale:o}=i,{key:l="r"}=this._parsing,d=new Array(s);let f,p,m,y;for(f=0,p=s;f<p;++f)m=f+e,y=t[m],d[f]={r:o.parse(qi(y,l),m)};return d}const zg=Number.EPSILON||1e-14,$n=(i,t)=>t<i.length&&!i[t].skip&&i[t],md=i=>i==="x"?"y":"x";function Hg(i,t,e,s){const o=i.skip?t:i,l=t,d=e.skip?t:e,f=Go(l,o),p=Go(d,l);let m=f/(f+p),y=p/(f+p);m=isNaN(m)?0:m,y=isNaN(y)?0:y;const w=s*m,A=s*y;return{previous:{x:l.x-w*(d.x-o.x),y:l.y-w*(d.y-o.y)},next:{x:l.x+A*(d.x-o.x),y:l.y+A*(d.y-o.y)}}}function jg(i,t,e){const s=i.length;let o,l,d,f,p,m=$n(i,0);for(let y=0;y<s-1;++y)if(p=m,m=$n(i,y+1),!(!p||!m)){if(vs(t[y],0,zg)){e[y]=e[y+1]=0;continue}o=e[y]/t[y],l=e[y+1]/t[y],f=Math.pow(o,2)+Math.pow(l,2),!(f<=9)&&(d=3/Math.sqrt(f),e[y]=o*d*t[y],e[y+1]=l*d*t[y])}}function Wg(i,t,e="x"){const s=md(e),o=i.length;let l,d,f,p=$n(i,0);for(let m=0;m<o;++m){if(d=f,f=p,p=$n(i,m+1),!f)continue;const y=f[e],w=f[s];d&&(l=(y-d[e])/3,f[`cp1${e}`]=y-l,f[`cp1${s}`]=w-l*t[m]),p&&(l=(p[e]-y)/3,f[`cp2${e}`]=y+l,f[`cp2${s}`]=w+l*t[m])}}function $g(i,t="x"){const e=md(t),s=i.length,o=Array(s).fill(0),l=Array(s);let d,f,p,m=$n(i,0);for(d=0;d<s;++d)if(f=p,p=m,m=$n(i,d+1),!!p){if(m){const y=m[t]-p[t];o[d]=y!==0?(m[e]-p[e])/y:0}l[d]=f?m?xi(o[d-1])!==xi(o[d])?0:(o[d-1]+o[d])/2:o[d-1]:o[d]}jg(i,o,l),Wg(i,l,t)}function dr(i,t,e){return Math.max(Math.min(i,e),t)}function Yg(i,t){let e,s,o,l,d,f=Mi(i[0],t);for(e=0,s=i.length;e<s;++e)d=l,l=f,f=e<s-1&&Mi(i[e+1],t),l&&(o=i[e],d&&(o.cp1x=dr(o.cp1x,t.left,t.right),o.cp1y=dr(o.cp1y,t.top,t.bottom)),f&&(o.cp2x=dr(o.cp2x,t.left,t.right),o.cp2y=dr(o.cp2y,t.top,t.bottom)))}function Xg(i,t,e,s,o){let l,d,f,p;if(t.spanGaps&&(i=i.filter(m=>!m.skip)),t.cubicInterpolationMode==="monotone")$g(i,o);else{let m=s?i[i.length-1]:i[0];for(l=0,d=i.length;l<d;++l)f=i[l],p=Hg(m,f,i[Math.min(l+1,d-(s?0:1))%d],t.tension),f.cp1x=p.previous.x,f.cp1y=p.previous.y,f.cp2x=p.next.x,f.cp2y=p.next.y,m=f}t.capBezierPoints&&Yg(i,e)}function Oa(){return typeof window<"u"&&typeof document<"u"}function ka(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Yr(i,t,e){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=i,s}const to=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function Gg(i,t){return to(i).getPropertyValue(t)}const qg=["top","right","bottom","left"];function yn(i,t,e){const s={};e=e?"-"+e:"";for(let o=0;o<4;o++){const l=qg[o];s[l]=parseFloat(i[t+"-"+l+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Zg=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function Kg(i,t){const e=i.touches,s=e&&e.length?e[0]:i,{offsetX:o,offsetY:l}=s;let d=!1,f,p;if(Zg(o,l,i.target))f=o,p=l;else{const m=t.getBoundingClientRect();f=s.clientX-m.left,p=s.clientY-m.top,d=!0}return{x:f,y:p,box:d}}function gn(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:s}=t,o=to(e),l=o.boxSizing==="border-box",d=yn(o,"padding"),f=yn(o,"border","width"),{x:p,y:m,box:y}=Kg(i,e),w=d.left+(y&&f.left),A=d.top+(y&&f.top);let{width:S,height:M}=t;return l&&(S-=d.width+f.width,M-=d.height+f.height),{x:Math.round((p-w)/S*e.width/s),y:Math.round((m-A)/M*e.height/s)}}function Qg(i,t,e){let s,o;if(t===void 0||e===void 0){const l=ka(i);if(!l)t=i.clientWidth,e=i.clientHeight;else{const d=l.getBoundingClientRect(),f=to(l),p=yn(f,"border","width"),m=yn(f,"padding");t=d.width-m.width-p.width,e=d.height-m.height-p.height,s=Yr(f.maxWidth,l,"clientWidth"),o=Yr(f.maxHeight,l,"clientHeight")}}return{width:t,height:e,maxWidth:s||Wr,maxHeight:o||Wr}}const ur=i=>Math.round(i*10)/10;function Jg(i,t,e,s){const o=to(i),l=yn(o,"margin"),d=Yr(o.maxWidth,i,"clientWidth")||Wr,f=Yr(o.maxHeight,i,"clientHeight")||Wr,p=Qg(i,t,e);let{width:m,height:y}=p;if(o.boxSizing==="content-box"){const A=yn(o,"border","width"),S=yn(o,"padding");m-=S.width+A.width,y-=S.height+A.height}return m=Math.max(0,m-l.width),y=Math.max(0,s?m/s:y-l.height),m=ur(Math.min(m,d,p.maxWidth)),y=ur(Math.min(y,f,p.maxHeight)),m&&!y&&(y=ur(m/2)),(t!==void 0||e!==void 0)&&s&&p.height&&y>p.height&&(y=p.height,m=ur(Math.floor(y*s))),{width:m,height:y}}function ac(i,t,e){const s=t||1,o=Math.floor(i.height*s),l=Math.floor(i.width*s);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const d=i.canvas;return d.style&&(e||!d.style.height&&!d.style.width)&&(d.style.height=`${i.height}px`,d.style.width=`${i.width}px`),i.currentDevicePixelRatio!==s||d.height!==o||d.width!==l?(i.currentDevicePixelRatio=s,d.height=o,d.width=l,i.ctx.setTransform(s,0,0,s,0,0),!0):!1}const tp=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};Oa()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i}();function lc(i,t){const e=Gg(i,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function pn(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function ep(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:s==="middle"?e<.5?i.y:t.y:s==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function ip(i,t,e,s){const o={x:i.cp2x,y:i.cp2y},l={x:t.cp1x,y:t.cp1y},d=pn(i,o,e),f=pn(o,l,e),p=pn(l,t,e),m=pn(d,f,e),y=pn(f,p,e);return pn(m,y,e)}const np=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,s){return e-s},leftForLtr(e,s){return e-s}}},sp=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function Hn(i,t,e){return i?np(t,e):sp()}function xd(i,t){let e,s;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=s)}function bd(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function yd(i){return i==="angle"?{between:Bs,compare:rg,normalize:He}:{between:Ii,compare:(t,e)=>t-e,normalize:t=>t}}function cc({start:i,end:t,count:e,loop:s,style:o}){return{start:i%e,end:t%e,loop:s&&(t-i+1)%e===0,style:o}}function rp(i,t,e){const{property:s,start:o,end:l}=e,{between:d,normalize:f}=yd(s),p=t.length;let{start:m,end:y,loop:w}=i,A,S;if(w){for(m+=p,y+=p,A=0,S=p;A<S&&d(f(t[m%p][s]),o,l);++A)m--,y--;m%=p,y%=p}return y<m&&(y+=p),{start:m,end:y,loop:w,style:i.style}}function wd(i,t,e){if(!e)return[i];const{property:s,start:o,end:l}=e,d=t.length,{compare:f,between:p,normalize:m}=yd(s),{start:y,end:w,loop:A,style:S}=rp(i,t,e),M=[];let D=!1,k=null,R,P,V;const W=()=>p(o,V,R)&&f(o,V)!==0,$=()=>f(l,R)===0||p(l,V,R),G=()=>D||W(),B=()=>!D||$();for(let Y=y,j=y;Y<=w;++Y)P=t[Y%d],!P.skip&&(R=m(P[s]),R!==V&&(D=p(R,o,l),k===null&&G()&&(k=f(R,o)===0?Y:j),k!==null&&B()&&(M.push(cc({start:k,end:Y,loop:A,count:d,style:S})),k=null),j=Y,V=R));return k!==null&&M.push(cc({start:k,end:w,loop:A,count:d,style:S})),M}function _d(i,t){const e=[],s=i.segments;for(let o=0;o<s.length;o++){const l=wd(s[o],i.points,t);l.length&&e.push(...l)}return e}function op(i,t,e,s){let o=0,l=t-1;if(e&&!s)for(;o<t&&!i[o].skip;)o++;for(;o<t&&i[o].skip;)o++;for(o%=t,e&&(l+=o);l>o&&i[l%t].skip;)l--;return l%=t,{start:o,end:l}}function ap(i,t,e,s){const o=i.length,l=[];let d=t,f=i[t],p;for(p=t+1;p<=e;++p){const m=i[p%o];m.skip||m.stop?f.skip||(s=!1,l.push({start:t%o,end:(p-1)%o,loop:s}),t=d=m.stop?p:null):(d=p,f.skip&&(t=p)),f=m}return d!==null&&l.push({start:t%o,end:d%o,loop:s}),l}function lp(i,t){const e=i.points,s=i.options.spanGaps,o=e.length;if(!o)return[];const l=!!i._loop,{start:d,end:f}=op(e,o,l,s);if(s===!0)return hc(i,[{start:d,end:f,loop:l}],e,t);const p=f<d?f+o:f,m=!!i._fullLoop&&d===0&&f===o-1;return hc(i,ap(e,d,p,m),e,t)}function hc(i,t,e,s){return!s||!s.setContext||!e?t:cp(i,t,e,s)}function cp(i,t,e,s){const o=i._chart.getContext(),l=dc(i.options),{_datasetIndex:d,options:{spanGaps:f}}=i,p=e.length,m=[];let y=l,w=t[0].start,A=w;function S(M,D,k,R){const P=f?-1:1;if(M!==D){for(M+=p;e[M%p].skip;)M-=P;for(;e[D%p].skip;)D+=P;M%p!==D%p&&(m.push({start:M%p,end:D%p,loop:k,style:R}),y=R,w=D%p)}}for(const M of t){w=f?w:M.start;let D=e[w%p],k;for(A=w+1;A<=M.end;A++){const R=e[A%p];k=dc(s.setContext(Qi(o,{type:"segment",p0:D,p1:R,p0DataIndex:(A-1)%p,p1DataIndex:A%p,datasetIndex:d}))),hp(k,y)&&S(w,A-1,M.loop,y),D=R,y=k}w<A-1&&S(w,A-1,M.loop,y)}return m}function dc(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function hp(i,t){if(!t)return!1;const e=[],s=function(o,l){return va(l)?(e.includes(l)||e.push(l),e.indexOf(l)):l};return JSON.stringify(i,s)!==JSON.stringify(t,s)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class dp{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,o){const l=e.listeners[o],d=e.duration;l.forEach(f=>f({chart:t,initial:e.initial,numSteps:d,currentStep:Math.min(s-e.start,d)}))}_refresh(){this._request||(this._running=!0,this._request=sd.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,o)=>{if(!s.running||!s.items.length)return;const l=s.items;let d=l.length-1,f=!1,p;for(;d>=0;--d)p=l[d],p._active?(p._total>s.duration&&(s.duration=p._total),p.tick(t),f=!0):(l[d]=l[l.length-1],l.pop());f&&(o.draw(),this._notify(o,s,t,"progress")),l.length||(s.running=!1,this._notify(o,s,t,"complete"),s.initial=!1),e+=l.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,o)=>Math.max(s,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const s=e.items;let o=s.length-1;for(;o>=0;--o)s[o].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var wi=new dp;const uc="transparent",up={boolean(i,t,e){return e>.5?t:i},color(i,t,e){const s=ic(i||uc),o=s.valid&&ic(t||uc);return o&&o.valid?o.mix(s,e).hexString():t},number(i,t,e){return i+(t-i)*e}};class fp{constructor(t,e,s,o){const l=e[s];o=xs([t.to,o,l,t.from]);const d=xs([t.from,l,o]);this._active=!0,this._fn=t.fn||up[t.type||typeof d],this._easing=Is[t.easing]||Is.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=d,this._to=o,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);const o=this._target[this._prop],l=s-this._start,d=this._duration-l;this._start=s,this._duration=Math.floor(Math.max(d,t.duration)),this._total+=l,this._loop=!!t.loop,this._to=xs([t.to,e,o,t.from]),this._from=xs([t.from,o,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,s=this._duration,o=this._prop,l=this._from,d=this._loop,f=this._to;let p;if(this._active=l!==f&&(d||e<s),!this._active){this._target[o]=f,this._notify(!0);return}if(e<0){this._target[o]=l;return}p=e/s%2,p=d&&p>1?2-p:p,p=this._easing(Math.min(1,Math.max(0,p))),this._target[o]=this._fn(l,f,p)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){const e=t?"res":"rej",s=this._promises||[];for(let o=0;o<s.length;o++)s[o][e]()}}class Ad{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ct(t))return;const e=Object.keys(ee.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(o=>{const l=t[o];if(!Ct(l))return;const d={};for(const f of e)d[f]=l[f];($t(l.properties)&&l.properties||[o]).forEach(f=>{(f===o||!s.has(f))&&s.set(f,d)})})}_animateOptions(t,e){const s=e.options,o=pp(t,s);if(!o)return[];const l=this._createAnimations(o,s);return s.$shared&&gp(t.options.$animations,s).then(()=>{t.options=s},()=>{}),l}_createAnimations(t,e){const s=this._properties,o=[],l=t.$animations||(t.$animations={}),d=Object.keys(e),f=Date.now();let p;for(p=d.length-1;p>=0;--p){const m=d[p];if(m.charAt(0)==="$")continue;if(m==="options"){o.push(...this._animateOptions(t,e));continue}const y=e[m];let w=l[m];const A=s.get(m);if(w)if(A&&w.active()){w.update(A,y,f);continue}else w.cancel();if(!A||!A.duration){t[m]=y;continue}l[m]=w=new fp(A,t,m,y),o.push(w)}return o}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const s=this._createAnimations(t,e);if(s.length)return wi.add(this._chart,s),!0}}function gp(i,t){const e=[],s=Object.keys(t);for(let o=0;o<s.length;o++){const l=i[s[o]];l&&l.active()&&e.push(l.wait())}return Promise.all(e)}function pp(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function fc(i,t){const e=i&&i.options||{},s=e.reverse,o=e.min===void 0?t:0,l=e.max===void 0?t:0;return{start:s?l:o,end:s?o:l}}function mp(i,t,e){if(e===!1)return!1;const s=fc(i,e),o=fc(t,e);return{top:o.end,right:s.end,bottom:o.start,left:s.start}}function xp(i){let t,e,s,o;return Ct(i)?(t=i.top,e=i.right,s=i.bottom,o=i.left):t=e=s=o=i,{top:t,right:e,bottom:s,left:o,disabled:i===!1}}function Cd(i,t){const e=[],s=i._getSortedDatasetMetas(t);let o,l;for(o=0,l=s.length;o<l;++o)e.push(s[o].index);return e}function gc(i,t,e,s={}){const o=i.keys,l=s.mode==="single";let d,f,p,m;if(t!==null){for(d=0,f=o.length;d<f;++d){if(p=+o[d],p===e){if(s.all)continue;break}m=i.values[p],te(m)&&(l||t===0||xi(t)===xi(m))&&(t+=m)}return t}}function bp(i){const t=Object.keys(i),e=new Array(t.length);let s,o,l;for(s=0,o=t.length;s<o;++s)l=t[s],e[s]={x:l,y:i[l]};return e}function pc(i,t){const e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function yp(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function wp(i){const{min:t,max:e,minDefined:s,maxDefined:o}=i.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:o?e:Number.POSITIVE_INFINITY}}function _p(i,t,e){const s=i[t]||(i[t]={});return s[e]||(s[e]={})}function mc(i,t,e,s){for(const o of t.getMatchingVisibleMetas(s).reverse()){const l=i[o.index];if(e&&l>0||!e&&l<0)return o.index}return null}function xc(i,t){const{chart:e,_cachedMeta:s}=i,o=e._stacks||(e._stacks={}),{iScale:l,vScale:d,index:f}=s,p=l.axis,m=d.axis,y=yp(l,d,s),w=t.length;let A;for(let S=0;S<w;++S){const M=t[S],{[p]:D,[m]:k}=M,R=M._stacks||(M._stacks={});A=R[m]=_p(o,y,D),A[f]=k,A._top=mc(A,d,!0,s.type),A._bottom=mc(A,d,!1,s.type);const P=A._visualValues||(A._visualValues={});P[f]=k}}function No(i,t){const e=i.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function Ap(i,t){return Qi(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Cp(i,t,e){return Qi(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function hs(i,t){const e=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){t=t||i._parsed;for(const o of t){const l=o._stacks;if(!l||l[s]===void 0||l[s][e]===void 0)return;delete l[s][e],l[s]._visualValues!==void 0&&l[s]._visualValues[e]!==void 0&&delete l[s]._visualValues[e]}}}const Ro=i=>i==="reset"||i==="none",bc=(i,t)=>t?i:Object.assign({},i),Ep=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:Cd(e,!0),values:null};class ri{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=pc(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&hs(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,s=this.getDataset(),o=(w,A,S,M)=>w==="x"?A:w==="r"?M:S,l=e.xAxisID=bt(s.xAxisID,No(t,"x")),d=e.yAxisID=bt(s.yAxisID,No(t,"y")),f=e.rAxisID=bt(s.rAxisID,No(t,"r")),p=e.indexAxis,m=e.iAxisID=o(p,l,d,f),y=e.vAxisID=o(p,d,l,f);e.xScale=this.getScaleForId(l),e.yScale=this.getScaleForId(d),e.rScale=this.getScaleForId(f),e.iScale=this.getScaleForId(m),e.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Jl(this._data,this),t._stacked&&hs(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),s=this._data;if(Ct(e))this._data=bp(e);else if(s!==e){if(s){Jl(s,this);const o=this._cachedMeta;hs(o),o._parsed=[]}e&&Object.isExtensible(e)&&cg(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,s=this.getDataset();let o=!1;this._dataCheck();const l=e._stacked;e._stacked=pc(e.vScale,e),e.stack!==s.stack&&(o=!0,hs(e),e.stack=s.stack),this._resyncElements(t),(o||l!==e._stacked)&&xc(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:s,_data:o}=this,{iScale:l,_stacked:d}=s,f=l.axis;let p=t===0&&e===o.length?!0:s._sorted,m=t>0&&s._parsed[t-1],y,w,A;if(this._parsing===!1)s._parsed=o,s._sorted=!0,A=o;else{$t(o[t])?A=this.parseArrayData(s,o,t,e):Ct(o[t])?A=this.parseObjectData(s,o,t,e):A=this.parsePrimitiveData(s,o,t,e);const S=()=>w[f]===null||m&&w[f]<m[f];for(y=0;y<e;++y)s._parsed[y+t]=w=A[y],p&&(S()&&(p=!1),m=w);s._sorted=p}d&&xc(this,A)}parsePrimitiveData(t,e,s,o){const{iScale:l,vScale:d}=t,f=l.axis,p=d.axis,m=l.getLabels(),y=l===d,w=new Array(o);let A,S,M;for(A=0,S=o;A<S;++A)M=A+s,w[A]={[f]:y||l.parse(m[M],M),[p]:d.parse(e[M],M)};return w}parseArrayData(t,e,s,o){const{xScale:l,yScale:d}=t,f=new Array(o);let p,m,y,w;for(p=0,m=o;p<m;++p)y=p+s,w=e[y],f[p]={x:l.parse(w[0],y),y:d.parse(w[1],y)};return f}parseObjectData(t,e,s,o){const{xScale:l,yScale:d}=t,{xAxisKey:f="x",yAxisKey:p="y"}=this._parsing,m=new Array(o);let y,w,A,S;for(y=0,w=o;y<w;++y)A=y+s,S=e[A],m[y]={x:l.parse(qi(S,f),A),y:d.parse(qi(S,p),A)};return m}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,s){const o=this.chart,l=this._cachedMeta,d=e[t.axis],f={keys:Cd(o,!0),values:e._stacks[t.axis]._visualValues};return gc(f,d,l.index,{mode:s})}updateRangeFromParsed(t,e,s,o){const l=s[e.axis];let d=l===null?NaN:l;const f=o&&s._stacks[e.axis];o&&f&&(o.values=f,d=gc(o,l,this._cachedMeta.index)),t.min=Math.min(t.min,d),t.max=Math.max(t.max,d)}getMinMax(t,e){const s=this._cachedMeta,o=s._parsed,l=s._sorted&&t===s.iScale,d=o.length,f=this._getOtherScale(t),p=Ep(e,s,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:w}=wp(f);let A,S;function M(){S=o[A];const D=S[f.axis];return!te(S[t.axis])||y>D||w<D}for(A=0;A<d&&!(!M()&&(this.updateRangeFromParsed(m,t,S,p),l));++A);if(l){for(A=d-1;A>=0;--A)if(!M()){this.updateRangeFromParsed(m,t,S,p);break}}return m}getAllParsedValues(t){const e=this._cachedMeta._parsed,s=[];let o,l,d;for(o=0,l=e.length;o<l;++o)d=e[o][t.axis],te(d)&&s.push(d);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,s=e.iScale,o=e.vScale,l=this.getParsed(t);return{label:s?""+s.getLabelForValue(l[s.axis]):"",value:o?""+o.getLabelForValue(l[o.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=xp(bt(this.options.clip,mp(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,s=this._cachedMeta,o=s.data||[],l=e.chartArea,d=[],f=this._drawStart||0,p=this._drawCount||o.length-f,m=this.options.drawActiveElementsOnTop;let y;for(s.dataset&&s.dataset.draw(t,l,f,p),y=f;y<f+p;++y){const w=o[y];w.hidden||(w.active&&m?d.push(w):w.draw(t,l))}for(y=0;y<d.length;++y)d[y].draw(t,l)}getStyle(t,e){const s=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,e,s){const o=this.getDataset();let l;if(t>=0&&t<this._cachedMeta.data.length){const d=this._cachedMeta.data[t];l=d.$context||(d.$context=Cp(this.getContext(),t,d)),l.parsed=this.getParsed(t),l.raw=o.data[t],l.index=l.dataIndex=t}else l=this.$context||(this.$context=Ap(this.chart.getContext(),this.index)),l.dataset=o,l.index=l.datasetIndex=this.index;return l.active=!!e,l.mode=s,l}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",s){const o=e==="active",l=this._cachedDataOpts,d=t+"-"+e,f=l[d],p=this.enableOptionSharing&&Ps(s);if(f)return bc(f,p);const m=this.chart.config,y=m.datasetElementScopeKeys(this._type,t),w=o?[`${t}Hover`,"hover",t,""]:[t,""],A=m.getOptionScopes(this.getDataset(),y),S=Object.keys(ee.elements[t]),M=()=>this.getContext(s,o,e),D=m.resolveNamedOptions(A,S,M,w);return D.$shared&&(D.$shared=p,l[d]=Object.freeze(bc(D,p))),D}_resolveAnimations(t,e,s){const o=this.chart,l=this._cachedDataOpts,d=`animation-${e}`,f=l[d];if(f)return f;let p;if(o.options.animation!==!1){const y=this.chart.config,w=y.datasetAnimationScopeKeys(this._type,e),A=y.getOptionScopes(this.getDataset(),w);p=y.createResolver(A,this.getContext(t,s,e))}const m=new Ad(o,p&&p.animations);return p&&p._cacheable&&(l[d]=Object.freeze(m)),m}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Ro(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const s=this.resolveDataElementOptions(t,e),o=this._sharedOptions,l=this.getSharedOptions(s),d=this.includeOptions(e,l)||l!==o;return this.updateSharedOptions(l,e,s),{sharedOptions:l,includeOptions:d}}updateElement(t,e,s,o){Ro(o)?Object.assign(t,s):this._resolveAnimations(e,o).update(t,s)}updateSharedOptions(t,e,s){t&&!Ro(e)&&this._resolveAnimations(void 0,e).update(t,s)}_setStyle(t,e,s,o){t.active=o;const l=this.getStyle(e,o);this._resolveAnimations(e,s,o).update(t,{options:!o&&this.getSharedOptions(l)||l})}removeHoverStyle(t,e,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,e,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,s=this._cachedMeta.data;for(const[f,p,m]of this._syncList)this[f](p,m);this._syncList=[];const o=s.length,l=e.length,d=Math.min(l,o);d&&this.parse(0,d),l>o?this._insertElements(o,l-o,t):l<o&&this._removeElements(l,o-l)}_insertElements(t,e,s=!0){const o=this._cachedMeta,l=o.data,d=t+e;let f;const p=m=>{for(m.length+=e,f=m.length-1;f>=d;f--)m[f]=m[f-e]};for(p(l),f=t;f<d;++f)l[f]=new this.dataElementType;this._parsing&&p(o._parsed),this.parse(t,e),s&&this.updateElements(l,t,e,"reset")}updateElements(t,e,s,o){}_removeElements(t,e){const s=this._cachedMeta;if(this._parsing){const o=s._parsed.splice(t,e);s._stacked&&hs(s,o)}s.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,s,o]=t;this[e](s,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Q(ri,"defaults",{}),Q(ri,"datasetElementType",null),Q(ri,"dataElementType",null);function Sp(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let s=[];for(let o=0,l=e.length;o<l;o++)s=s.concat(e[o].controller.getAllParsedValues(i));i._cache.$bar=nd(s.sort((o,l)=>o-l))}return i._cache.$bar}function vp(i){const t=i.iScale,e=Sp(t,i.type);let s=t._length,o,l,d,f;const p=()=>{d===32767||d===-32768||(Ps(f)&&(s=Math.min(s,Math.abs(d-f)||s)),f=d)};for(o=0,l=e.length;o<l;++o)d=t.getPixelForValue(e[o]),p();for(f=void 0,o=0,l=t.ticks.length;o<l;++o)d=t.getPixelForTick(o),p();return s}function Ip(i,t,e,s){const o=e.barThickness;let l,d;return It(o)?(l=t.min*e.categoryPercentage,d=e.barPercentage):(l=o*s,d=1),{chunk:l/s,ratio:d,start:t.pixels[i]-l/2}}function Tp(i,t,e,s){const o=t.pixels,l=o[i];let d=i>0?o[i-1]:null,f=i<o.length-1?o[i+1]:null;const p=e.categoryPercentage;d===null&&(d=l-(f===null?t.end-t.start:f-l)),f===null&&(f=l+l-d);const m=l-(l-Math.min(d,f))/2*p;return{chunk:Math.abs(f-d)/2*p/s,ratio:e.barPercentage,start:m}}function Mp(i,t,e,s){const o=e.parse(i[0],s),l=e.parse(i[1],s),d=Math.min(o,l),f=Math.max(o,l);let p=d,m=f;Math.abs(d)>Math.abs(f)&&(p=f,m=d),t[e.axis]=m,t._custom={barStart:p,barEnd:m,start:o,end:l,min:d,max:f}}function Ed(i,t,e,s){return $t(i)?Mp(i,t,e,s):t[e.axis]=e.parse(i,s),t}function yc(i,t,e,s){const o=i.iScale,l=i.vScale,d=o.getLabels(),f=o===l,p=[];let m,y,w,A;for(m=e,y=e+s;m<y;++m)A=t[m],w={},w[o.axis]=f||o.parse(d[m],m),p.push(Ed(A,w,l,m));return p}function Lo(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function Dp(i,t,e){return i!==0?xi(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Op(i){let t,e,s,o,l;return i.horizontal?(t=i.base>i.x,e="left",s="right"):(t=i.base<i.y,e="bottom",s="top"),t?(o="end",l="start"):(o="start",l="end"),{start:e,end:s,reverse:t,top:o,bottom:l}}function kp(i,t,e,s){let o=t.borderSkipped;const l={};if(!o){i.borderSkipped=l;return}if(o===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:d,end:f,reverse:p,top:m,bottom:y}=Op(i);o==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===s?o=m:(e._bottom||0)===s?o=y:(l[wc(y,d,f,p)]=!0,o=m)),l[wc(o,d,f,p)]=!0,i.borderSkipped=l}function wc(i,t,e,s){return s?(i=Np(i,t,e),i=_c(i,e,t)):i=_c(i,t,e),i}function Np(i,t,e){return i===t?e:i===e?t:i}function _c(i,t,e){return i==="start"?t:i==="end"?e:i}function Rp(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}class vr extends ri{parsePrimitiveData(t,e,s,o){return yc(t,e,s,o)}parseArrayData(t,e,s,o){return yc(t,e,s,o)}parseObjectData(t,e,s,o){const{iScale:l,vScale:d}=t,{xAxisKey:f="x",yAxisKey:p="y"}=this._parsing,m=l.axis==="x"?f:p,y=d.axis==="x"?f:p,w=[];let A,S,M,D;for(A=s,S=s+o;A<S;++A)D=e[A],M={},M[l.axis]=l.parse(qi(D,m),A),w.push(Ed(qi(D,y),M,d,A));return w}updateRangeFromParsed(t,e,s,o){super.updateRangeFromParsed(t,e,s,o);const l=s._custom;l&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,l.min),t.max=Math.max(t.max,l.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:s,vScale:o}=e,l=this.getParsed(t),d=l._custom,f=Lo(d)?"["+d.start+", "+d.end+"]":""+o.getLabelForValue(l[o.axis]);return{label:""+s.getLabelForValue(l[s.axis]),value:f}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,s,o){const l=o==="reset",{index:d,_cachedMeta:{vScale:f}}=this,p=f.getBasePixel(),m=f.isHorizontal(),y=this._getRuler(),{sharedOptions:w,includeOptions:A}=this._getSharedOptions(e,o);for(let S=e;S<e+s;S++){const M=this.getParsed(S),D=l||It(M[f.axis])?{base:p,head:p}:this._calculateBarValuePixels(S),k=this._calculateBarIndexPixels(S,y),R=(M._stacks||{})[f.axis],P={horizontal:m,base:D.base,enableBorderRadius:!R||Lo(M._custom)||d===R._top||d===R._bottom,x:m?D.head:k.center,y:m?k.center:D.head,height:m?k.size:Math.abs(D.size),width:m?Math.abs(D.size):k.size};A&&(P.options=w||this.resolveDataElementOptions(S,t[S].active?"active":o));const V=P.options||t[S].options;kp(P,V,R,d),Rp(P,V,y.ratio),this.updateElement(t[S],S,P,o)}}_getStacks(t,e){const{iScale:s}=this._cachedMeta,o=s.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),l=s.options.stacked,d=[],f=p=>{const m=p.controller.getParsed(e),y=m&&m[p.vScale.axis];if(It(y)||isNaN(y))return!0};for(const p of o)if(!(e!==void 0&&f(p))&&((l===!1||d.indexOf(p.stack)===-1||l===void 0&&p.stack===void 0)&&d.push(p.stack),p.index===t))break;return d.length||d.push(void 0),d}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,s){const o=this._getStacks(t,s),l=e!==void 0?o.indexOf(e):-1;return l===-1?o.length-1:l}_getRuler(){const t=this.options,e=this._cachedMeta,s=e.iScale,o=[];let l,d;for(l=0,d=e.data.length;l<d;++l)o.push(s.getPixelForValue(this.getParsed(l)[s.axis],l));const f=t.barThickness;return{min:f||vp(e),pixels:o,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:f?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:s,index:o},options:{base:l,minBarLength:d}}=this,f=l||0,p=this.getParsed(t),m=p._custom,y=Lo(m);let w=p[e.axis],A=0,S=s?this.applyStack(e,p,s):w,M,D;S!==w&&(A=S-w,S=w),y&&(w=m.barStart,S=m.barEnd-m.barStart,w!==0&&xi(w)!==xi(m.barEnd)&&(A=0),A+=w);const k=!It(l)&&!y?l:A;let R=e.getPixelForValue(k);if(this.chart.getDataVisibility(t)?M=e.getPixelForValue(A+S):M=R,D=M-R,Math.abs(D)<d){D=Dp(D,e,f)*d,w===f&&(R-=D/2);const P=e.getPixelForDecimal(0),V=e.getPixelForDecimal(1),W=Math.min(P,V),$=Math.max(P,V);R=Math.max(Math.min(R,$),W),M=R+D,s&&!y&&(p._stacks[e.axis]._visualValues[o]=e.getValueForPixel(M)-e.getValueForPixel(R))}if(R===e.getPixelForValue(f)){const P=xi(D)*e.getLineWidthForValue(f)/2;R+=P,D-=P}return{size:D,base:R,head:M,center:M+D/2}}_calculateBarIndexPixels(t,e){const s=e.scale,o=this.options,l=o.skipNull,d=bt(o.maxBarThickness,1/0);let f,p;if(e.grouped){const m=l?this._getStackCount(t):e.stackCount,y=o.barThickness==="flex"?Tp(t,e,o,m):Ip(t,e,o,m),w=this._getStackIndex(this.index,this._cachedMeta.stack,l?t:void 0);f=y.start+y.chunk*w+y.chunk/2,p=Math.min(d,y.chunk*y.ratio)}else f=s.getPixelForValue(this.getParsed(t)[s.axis],t),p=Math.min(d,e.min*e.ratio);return{base:f-p/2,head:f+p/2,center:f,size:p}}draw(){const t=this._cachedMeta,e=t.vScale,s=t.data,o=s.length;let l=0;for(;l<o;++l)this.getParsed(l)[e.axis]!==null&&s[l].draw(this._ctx)}}Q(vr,"id","bar"),Q(vr,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Q(vr,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ir extends ri{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,s,o){const l=super.parsePrimitiveData(t,e,s,o);for(let d=0;d<l.length;d++)l[d]._custom=this.resolveDataElementOptions(d+s).radius;return l}parseArrayData(t,e,s,o){const l=super.parseArrayData(t,e,s,o);for(let d=0;d<l.length;d++){const f=e[s+d];l[d]._custom=bt(f[2],this.resolveDataElementOptions(d+s).radius)}return l}parseObjectData(t,e,s,o){const l=super.parseObjectData(t,e,s,o);for(let d=0;d<l.length;d++){const f=e[s+d];l[d]._custom=bt(f&&f.r&&+f.r,this.resolveDataElementOptions(d+s).radius)}return l}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let s=t.length-1;s>=0;--s)e=Math.max(e,t[s].size(this.resolveDataElementOptions(s))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:o,yScale:l}=e,d=this.getParsed(t),f=o.getLabelForValue(d.x),p=l.getLabelForValue(d.y),m=d._custom;return{label:s[t]||"",value:"("+f+", "+p+(m?", "+m:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,s,o){const l=o==="reset",{iScale:d,vScale:f}=this._cachedMeta,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(e,o),y=d.axis,w=f.axis;for(let A=e;A<e+s;A++){const S=t[A],M=!l&&this.getParsed(A),D={},k=D[y]=l?d.getPixelForDecimal(.5):d.getPixelForValue(M[y]),R=D[w]=l?f.getBasePixel():f.getPixelForValue(M[w]);D.skip=isNaN(k)||isNaN(R),m&&(D.options=p||this.resolveDataElementOptions(A,S.active?"active":o),l&&(D.options.radius=0)),this.updateElement(S,A,D,o)}}resolveDataElementOptions(t,e){const s=this.getParsed(t);let o=super.resolveDataElementOptions(t,e);o.$shared&&(o=Object.assign({},o,{$shared:!1}));const l=o.radius;return e!=="active"&&(o.radius=0),o.radius+=bt(s&&s._custom,l),o}}Q(Ir,"id","bubble"),Q(Ir,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Q(Ir,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Lp(i,t,e){let s=1,o=1,l=0,d=0;if(t<Yt){const f=i,p=f+t,m=Math.cos(f),y=Math.sin(f),w=Math.cos(p),A=Math.sin(p),S=(V,W,$)=>Bs(V,f,p,!0)?1:Math.max(W,W*e,$,$*e),M=(V,W,$)=>Bs(V,f,p,!0)?-1:Math.min(W,W*e,$,$*e),D=S(0,m,w),k=S(oe,y,A),R=M(Xt,m,w),P=M(Xt+oe,y,A);s=(D-R)/2,o=(k-P)/2,l=-(D+R)/2,d=-(k+P)/2}return{ratioX:s,ratioY:o,offsetX:l,offsetY:d}}class xn extends ri{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const s=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=s;else{let l=p=>+s[p];if(Ct(s[t])){const{key:p="value"}=this._parsing;l=m=>+qi(s[m],p)}let d,f;for(d=t,f=t+e;d<f;++d)o._parsed[d]=l(d)}}_getRotation(){return si(this.options.rotation-90)}_getCircumference(){return si(this.options.circumference)}_getRotationExtents(){let t=Yt,e=-Yt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const o=this.chart.getDatasetMeta(s).controller,l=o._getRotation(),d=o._getCircumference();t=Math.min(t,l),e=Math.max(e,l+d)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:s}=e,o=this._cachedMeta,l=o.data,d=this.getMaxBorderWidth()+this.getMaxOffset(l)+this.options.spacing,f=Math.max((Math.min(s.width,s.height)-d)/2,0),p=Math.min(q1(this.options.cutout,f),1),m=this._getRingWeight(this.index),{circumference:y,rotation:w}=this._getRotationExtents(),{ratioX:A,ratioY:S,offsetX:M,offsetY:D}=Lp(w,y,p),k=(s.width-d)/A,R=(s.height-d)/S,P=Math.max(Math.min(k,R)/2,0),V=Qh(this.options.radius,P),W=Math.max(V*p,0),$=(V-W)/this._getVisibleDatasetWeightTotal();this.offsetX=M*V,this.offsetY=D*V,o.total=this.calculateTotal(),this.outerRadius=V-$*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-$*m,0),this.updateElements(l,0,l.length,t)}_circumference(t,e){const s=this.options,o=this._cachedMeta,l=this._getCircumference();return e&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*l/Yt)}updateElements(t,e,s,o){const l=o==="reset",d=this.chart,f=d.chartArea,m=d.options.animation,y=(f.left+f.right)/2,w=(f.top+f.bottom)/2,A=l&&m.animateScale,S=A?0:this.innerRadius,M=A?0:this.outerRadius,{sharedOptions:D,includeOptions:k}=this._getSharedOptions(e,o);let R=this._getRotation(),P;for(P=0;P<e;++P)R+=this._circumference(P,l);for(P=e;P<e+s;++P){const V=this._circumference(P,l),W=t[P],$={x:y+this.offsetX,y:w+this.offsetY,startAngle:R,endAngle:R+V,circumference:V,outerRadius:M,innerRadius:S};k&&($.options=D||this.resolveDataElementOptions(P,W.active?"active":o)),R+=V,this.updateElement(W,P,$,o)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let s=0,o;for(o=0;o<e.length;o++){const l=t._parsed[o];l!==null&&!isNaN(l)&&this.chart.getDataVisibility(o)&&!e[o].hidden&&(s+=Math.abs(l))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Yt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,o=s.data.labels||[],l=$s(e._parsed[t],s.options.locale);return{label:o[t]||"",value:l}}getMaxBorderWidth(t){let e=0;const s=this.chart;let o,l,d,f,p;if(!t){for(o=0,l=s.data.datasets.length;o<l;++o)if(s.isDatasetVisible(o)){d=s.getDatasetMeta(o),t=d.data,f=d.controller;break}}if(!t)return 0;for(o=0,l=t.length;o<l;++o)p=f.resolveDataElementOptions(o),p.borderAlign!=="inner"&&(e=Math.max(e,p.borderWidth||0,p.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let s=0,o=t.length;s<o;++s){const l=this.resolveDataElementOptions(s);e=Math.max(e,l.offset||0,l.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(e+=this._getRingWeight(s));return e}_getRingWeight(t){return Math.max(bt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Q(xn,"id","doughnut"),Q(xn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Q(xn,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),Q(xn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:s,color:o}}=t.legend.options;return e.labels.map((l,d)=>{const p=t.getDatasetMeta(0).controller.getStyle(d);return{text:l,fillStyle:p.backgroundColor,strokeStyle:p.borderColor,fontColor:o,lineWidth:p.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(d),index:d}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}}});class Tr extends ri{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:s,data:o=[],_dataset:l}=e,d=this.chart._animationsDisabled;let{start:f,count:p}=od(e,o,d);this._drawStart=f,this._drawCount=p,ad(e)&&(f=0,p=o.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!l._decimated,s.points=o;const m=this.resolveDatasetElementOptions(t);this.options.showLine||(m.borderWidth=0),m.segment=this.options.segment,this.updateElement(s,void 0,{animated:!d,options:m},t),this.updateElements(o,f,p,t)}updateElements(t,e,s,o){const l=o==="reset",{iScale:d,vScale:f,_stacked:p,_dataset:m}=this._cachedMeta,{sharedOptions:y,includeOptions:w}=this._getSharedOptions(e,o),A=d.axis,S=f.axis,{spanGaps:M,segment:D}=this.options,k=jn(M)?M:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||l||o==="none",P=e+s,V=t.length;let W=e>0&&this.getParsed(e-1);for(let $=0;$<V;++$){const G=t[$],B=R?G:{};if($<e||$>=P){B.skip=!0;continue}const Y=this.getParsed($),j=It(Y[S]),ft=B[A]=d.getPixelForValue(Y[A],$),at=B[S]=l||j?f.getBasePixel():f.getPixelForValue(p?this.applyStack(f,Y,p):Y[S],$);B.skip=isNaN(ft)||isNaN(at)||j,B.stop=$>0&&Math.abs(Y[A]-W[A])>k,D&&(B.parsed=Y,B.raw=m.data[$]),w&&(B.options=y||this.resolveDataElementOptions($,G.active?"active":o)),R||this.updateElement(G,$,B,o),W=Y}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,s=e.options&&e.options.borderWidth||0,o=t.data||[];if(!o.length)return s;const l=o[0].size(this.resolveDataElementOptions(0)),d=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(s,l,d)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Q(Tr,"id","line"),Q(Tr,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Q(Tr,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ms extends ri{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,o=s.data.labels||[],l=$s(e._parsed[t].r,s.options.locale);return{label:o[t]||"",value:l}}parseObjectData(t,e,s,o){return pd.bind(this)(t,e,s,o)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,o)=>{const l=this.getParsed(o).r;!isNaN(l)&&this.chart.getDataVisibility(o)&&(l<e.min&&(e.min=l),l>e.max&&(e.max=l))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,s=t.options,o=Math.min(e.right-e.left,e.bottom-e.top),l=Math.max(o/2,0),d=Math.max(s.cutoutPercentage?l/100*s.cutoutPercentage:1,0),f=(l-d)/t.getVisibleDatasetCount();this.outerRadius=l-f*this.index,this.innerRadius=this.outerRadius-f}updateElements(t,e,s,o){const l=o==="reset",d=this.chart,p=d.options.animation,m=this._cachedMeta.rScale,y=m.xCenter,w=m.yCenter,A=m.getIndexAngle(0)-.5*Xt;let S=A,M;const D=360/this.countVisibleElements();for(M=0;M<e;++M)S+=this._computeAngle(M,o,D);for(M=e;M<e+s;M++){const k=t[M];let R=S,P=S+this._computeAngle(M,o,D),V=d.getDataVisibility(M)?m.getDistanceFromCenterForValue(this.getParsed(M).r):0;S=P,l&&(p.animateScale&&(V=0),p.animateRotate&&(R=P=A));const W={x:y,y:w,innerRadius:0,outerRadius:V,startAngle:R,endAngle:P,options:this.resolveDataElementOptions(M,k.active?"active":o)};this.updateElement(k,M,W,o)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((s,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&e++}),e}_computeAngle(t,e,s){return this.chart.getDataVisibility(t)?si(this.resolveDataElementOptions(t,e).angle||s):0}}Q(Ms,"id","polarArea"),Q(Ms,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Q(Ms,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:s,color:o}}=t.legend.options;return e.labels.map((l,d)=>{const p=t.getDatasetMeta(0).controller.getStyle(d);return{text:l,fillStyle:p.backgroundColor,strokeStyle:p.borderColor,fontColor:o,lineWidth:p.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(d),index:d}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Ko extends xn{}Q(Ko,"id","pie"),Q(Ko,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Mr extends ri{getLabelAndValue(t){const e=this._cachedMeta.vScale,s=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(s[e.axis])}}parseObjectData(t,e,s,o){return pd.bind(this)(t,e,s,o)}update(t){const e=this._cachedMeta,s=e.dataset,o=e.data||[],l=e.iScale.getLabels();if(s.points=o,t!=="resize"){const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0);const f={_loop:!0,_fullLoop:l.length===o.length,options:d};this.updateElement(s,void 0,f,t)}this.updateElements(o,0,o.length,t)}updateElements(t,e,s,o){const l=this._cachedMeta.rScale,d=o==="reset";for(let f=e;f<e+s;f++){const p=t[f],m=this.resolveDataElementOptions(f,p.active?"active":o),y=l.getPointPositionForValue(f,this.getParsed(f).r),w=d?l.xCenter:y.x,A=d?l.yCenter:y.y,S={x:w,y:A,angle:y.angle,skip:isNaN(w)||isNaN(A),options:m};this.updateElement(p,f,S,o)}}}Q(Mr,"id","radar"),Q(Mr,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Q(Mr,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Dr extends ri{getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:o,yScale:l}=e,d=this.getParsed(t),f=o.getLabelForValue(d.x),p=l.getLabelForValue(d.y);return{label:s[t]||"",value:"("+f+", "+p+")"}}update(t){const e=this._cachedMeta,{data:s=[]}=e,o=this.chart._animationsDisabled;let{start:l,count:d}=od(e,s,o);if(this._drawStart=l,this._drawCount=d,ad(e)&&(l=0,d=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:f,_dataset:p}=e;f._chart=this.chart,f._datasetIndex=this.index,f._decimated=!!p._decimated,f.points=s;const m=this.resolveDatasetElementOptions(t);m.segment=this.options.segment,this.updateElement(f,void 0,{animated:!o,options:m},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(s,l,d,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,s,o){const l=o==="reset",{iScale:d,vScale:f,_stacked:p,_dataset:m}=this._cachedMeta,y=this.resolveDataElementOptions(e,o),w=this.getSharedOptions(y),A=this.includeOptions(o,w),S=d.axis,M=f.axis,{spanGaps:D,segment:k}=this.options,R=jn(D)?D:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||l||o==="none";let V=e>0&&this.getParsed(e-1);for(let W=e;W<e+s;++W){const $=t[W],G=this.getParsed(W),B=P?$:{},Y=It(G[M]),j=B[S]=d.getPixelForValue(G[S],W),ft=B[M]=l||Y?f.getBasePixel():f.getPixelForValue(p?this.applyStack(f,G,p):G[M],W);B.skip=isNaN(j)||isNaN(ft)||Y,B.stop=W>0&&Math.abs(G[S]-V[S])>R,k&&(B.parsed=G,B.raw=m.data[W]),A&&(B.options=w||this.resolveDataElementOptions(W,$.active?"active":o)),P||this.updateElement($,W,B,o),V=G}this.updateSharedOptions(w,o,y)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let f=0;for(let p=e.length-1;p>=0;--p)f=Math.max(f,e[p].size(this.resolveDataElementOptions(p))/2);return f>0&&f}const s=t.dataset,o=s.options&&s.options.borderWidth||0;if(!e.length)return o;const l=e[0].size(this.resolveDataElementOptions(0)),d=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(o,l,d)/2}}Q(Dr,"id","scatter"),Q(Dr,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Q(Dr,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Pp=Object.freeze({__proto__:null,BarController:vr,BubbleController:Ir,DoughnutController:xn,LineController:Tr,PieController:Ko,PolarAreaController:Ms,RadarController:Mr,ScatterController:Dr});function un(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Na{constructor(t){Q(this,"options");this.options=t||{}}static override(t){Object.assign(Na.prototype,t)}init(){}formats(){return un()}parse(){return un()}format(){return un()}add(){return un()}diff(){return un()}startOf(){return un()}endOf(){return un()}}var Bp={_date:Na};function Fp(i,t,e,s){const{controller:o,data:l,_sorted:d}=i,f=o._cachedMeta.iScale;if(f&&t===f.axis&&t!=="r"&&d&&l.length){const p=f._reversePixels?ag:Ti;if(s){if(o._sharedOptions){const m=l[0],y=typeof m.getRange=="function"&&m.getRange(t);if(y){const w=p(l,t,e-y),A=p(l,t,e+y);return{lo:w.lo,hi:A.hi}}}}else return p(l,t,e)}return{lo:0,hi:l.length-1}}function Ys(i,t,e,s,o){const l=i.getSortedVisibleDatasetMetas(),d=e[t];for(let f=0,p=l.length;f<p;++f){const{index:m,data:y}=l[f],{lo:w,hi:A}=Fp(l[f],t,d,o);for(let S=w;S<=A;++S){const M=y[S];M.skip||s(M,m,S)}}}function Up(i){const t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(s,o){const l=t?Math.abs(s.x-o.x):0,d=e?Math.abs(s.y-o.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(d,2))}}function Po(i,t,e,s,o){const l=[];return!o&&!i.isPointInArea(t)||Ys(i,e,t,function(f,p,m){!o&&!Mi(f,i.chartArea,0)||f.inRange(t.x,t.y,s)&&l.push({element:f,datasetIndex:p,index:m})},!0),l}function Vp(i,t,e,s){let o=[];function l(d,f,p){const{startAngle:m,endAngle:y}=d.getProps(["startAngle","endAngle"],s),{angle:w}=ed(d,{x:t.x,y:t.y});Bs(w,m,y)&&o.push({element:d,datasetIndex:f,index:p})}return Ys(i,e,t,l),o}function zp(i,t,e,s,o,l){let d=[];const f=Up(e);let p=Number.POSITIVE_INFINITY;function m(y,w,A){const S=y.inRange(t.x,t.y,o);if(s&&!S)return;const M=y.getCenterPoint(o);if(!(!!l||i.isPointInArea(M))&&!S)return;const k=f(t,M);k<p?(d=[{element:y,datasetIndex:w,index:A}],p=k):k===p&&d.push({element:y,datasetIndex:w,index:A})}return Ys(i,e,t,m),d}function Bo(i,t,e,s,o,l){return!l&&!i.isPointInArea(t)?[]:e==="r"&&!s?Vp(i,t,e,o):zp(i,t,e,s,o,l)}function Ac(i,t,e,s,o){const l=[],d=e==="x"?"inXRange":"inYRange";let f=!1;return Ys(i,e,t,(p,m,y)=>{p[d](t[e],o)&&(l.push({element:p,datasetIndex:m,index:y}),f=f||p.inRange(t.x,t.y,o))}),s&&!f?[]:l}var Hp={evaluateInteractionItems:Ys,modes:{index(i,t,e,s){const o=gn(t,i),l=e.axis||"x",d=e.includeInvisible||!1,f=e.intersect?Po(i,o,l,s,d):Bo(i,o,l,!1,s,d),p=[];return f.length?(i.getSortedVisibleDatasetMetas().forEach(m=>{const y=f[0].index,w=m.data[y];w&&!w.skip&&p.push({element:w,datasetIndex:m.index,index:y})}),p):[]},dataset(i,t,e,s){const o=gn(t,i),l=e.axis||"xy",d=e.includeInvisible||!1;let f=e.intersect?Po(i,o,l,s,d):Bo(i,o,l,!1,s,d);if(f.length>0){const p=f[0].datasetIndex,m=i.getDatasetMeta(p).data;f=[];for(let y=0;y<m.length;++y)f.push({element:m[y],datasetIndex:p,index:y})}return f},point(i,t,e,s){const o=gn(t,i),l=e.axis||"xy",d=e.includeInvisible||!1;return Po(i,o,l,s,d)},nearest(i,t,e,s){const o=gn(t,i),l=e.axis||"xy",d=e.includeInvisible||!1;return Bo(i,o,l,e.intersect,s,d)},x(i,t,e,s){const o=gn(t,i);return Ac(i,o,"x",e.intersect,s)},y(i,t,e,s){const o=gn(t,i);return Ac(i,o,"y",e.intersect,s)}}};const Sd=["left","top","right","bottom"];function ds(i,t){return i.filter(e=>e.pos===t)}function Cc(i,t){return i.filter(e=>Sd.indexOf(e.pos)===-1&&e.box.axis===t)}function us(i,t){return i.sort((e,s)=>{const o=t?s:e,l=t?e:s;return o.weight===l.weight?o.index-l.index:o.weight-l.weight})}function jp(i){const t=[];let e,s,o,l,d,f;for(e=0,s=(i||[]).length;e<s;++e)o=i[e],{position:l,options:{stack:d,stackWeight:f=1}}=o,t.push({index:e,box:o,pos:l,horizontal:o.isHorizontal(),weight:o.weight,stack:d&&l+d,stackWeight:f});return t}function Wp(i){const t={};for(const e of i){const{stack:s,pos:o,stackWeight:l}=e;if(!s||!Sd.includes(o))continue;const d=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});d.count++,d.weight+=l}return t}function $p(i,t){const e=Wp(i),{vBoxMaxWidth:s,hBoxMaxHeight:o}=t;let l,d,f;for(l=0,d=i.length;l<d;++l){f=i[l];const{fullSize:p}=f.box,m=e[f.stack],y=m&&f.stackWeight/m.weight;f.horizontal?(f.width=y?y*s:p&&t.availableWidth,f.height=o):(f.width=s,f.height=y?y*o:p&&t.availableHeight)}return e}function Yp(i){const t=jp(i),e=us(t.filter(m=>m.box.fullSize),!0),s=us(ds(t,"left"),!0),o=us(ds(t,"right")),l=us(ds(t,"top"),!0),d=us(ds(t,"bottom")),f=Cc(t,"x"),p=Cc(t,"y");return{fullSize:e,leftAndTop:s.concat(l),rightAndBottom:o.concat(p).concat(d).concat(f),chartArea:ds(t,"chartArea"),vertical:s.concat(o).concat(p),horizontal:l.concat(d).concat(f)}}function Ec(i,t,e,s){return Math.max(i[e],t[e])+Math.max(i[s],t[s])}function vd(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function Xp(i,t,e,s){const{pos:o,box:l}=e,d=i.maxPadding;if(!Ct(o)){e.size&&(i[o]-=e.size);const w=s[e.stack]||{size:0,count:1};w.size=Math.max(w.size,e.horizontal?l.height:l.width),e.size=w.size/w.count,i[o]+=e.size}l.getPadding&&vd(d,l.getPadding());const f=Math.max(0,t.outerWidth-Ec(d,i,"left","right")),p=Math.max(0,t.outerHeight-Ec(d,i,"top","bottom")),m=f!==i.w,y=p!==i.h;return i.w=f,i.h=p,e.horizontal?{same:m,other:y}:{same:y,other:m}}function Gp(i){const t=i.maxPadding;function e(s){const o=Math.max(t[s]-i[s],0);return i[s]+=o,o}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function qp(i,t){const e=t.maxPadding;function s(o){const l={left:0,top:0,right:0,bottom:0};return o.forEach(d=>{l[d]=Math.max(t[d],e[d])}),l}return s(i?["left","right"]:["top","bottom"])}function bs(i,t,e,s){const o=[];let l,d,f,p,m,y;for(l=0,d=i.length,m=0;l<d;++l){f=i[l],p=f.box,p.update(f.width||t.w,f.height||t.h,qp(f.horizontal,t));const{same:w,other:A}=Xp(t,e,f,s);m|=w&&o.length,y=y||A,p.fullSize||o.push(f)}return m&&bs(o,t,e,s)||y}function fr(i,t,e,s,o){i.top=e,i.left=t,i.right=t+s,i.bottom=e+o,i.width=s,i.height=o}function Sc(i,t,e,s){const o=e.padding;let{x:l,y:d}=t;for(const f of i){const p=f.box,m=s[f.stack]||{count:1,placed:0,weight:1},y=f.stackWeight/m.weight||1;if(f.horizontal){const w=t.w*y,A=m.size||p.height;Ps(m.start)&&(d=m.start),p.fullSize?fr(p,o.left,d,e.outerWidth-o.right-o.left,A):fr(p,t.left+m.placed,d,w,A),m.start=d,m.placed+=w,d=p.bottom}else{const w=t.h*y,A=m.size||p.width;Ps(m.start)&&(l=m.start),p.fullSize?fr(p,l,o.top,A,e.outerHeight-o.bottom-o.top):fr(p,l,t.top+m.placed,A,w),m.start=l,m.placed+=w,l=p.right}}t.x=l,t.y=d}var Se={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,s){if(!i)return;const o=ve(i.options.layout.padding),l=Math.max(t-o.width,0),d=Math.max(e-o.height,0),f=Yp(i.boxes),p=f.vertical,m=f.horizontal;Rt(i.boxes,D=>{typeof D.beforeLayout=="function"&&D.beforeLayout()});const y=p.reduce((D,k)=>k.box.options&&k.box.options.display===!1?D:D+1,0)||1,w=Object.freeze({outerWidth:t,outerHeight:e,padding:o,availableWidth:l,availableHeight:d,vBoxMaxWidth:l/2/y,hBoxMaxHeight:d/2}),A=Object.assign({},o);vd(A,ve(s));const S=Object.assign({maxPadding:A,w:l,h:d,x:o.left,y:o.top},o),M=$p(p.concat(m),w);bs(f.fullSize,S,w,M),bs(p,S,w,M),bs(m,S,w,M)&&bs(p,S,w,M),Gp(S),Sc(f.leftAndTop,S,w,M),S.x+=S.w,S.y+=S.h,Sc(f.rightAndBottom,S,w,M),i.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},Rt(f.chartArea,D=>{const k=D.box;Object.assign(k,i.chartArea),k.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class Id{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,o){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,o?Math.floor(e/o):s)}}isAttached(t){return!0}updateConfig(t){}}class Zp extends Id{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Or="$chartjs",Kp={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},vc=i=>i===null||i==="";function Qp(i,t){const e=i.style,s=i.getAttribute("height"),o=i.getAttribute("width");if(i[Or]={initial:{height:s,width:o,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",vc(o)){const l=lc(i,"width");l!==void 0&&(i.width=l)}if(vc(s))if(i.style.height==="")i.height=i.width/(t||2);else{const l=lc(i,"height");l!==void 0&&(i.height=l)}return i}const Td=tp?{passive:!0}:!1;function Jp(i,t,e){i.addEventListener(t,e,Td)}function tm(i,t,e){i.canvas.removeEventListener(t,e,Td)}function em(i,t){const e=Kp[i.type]||i.type,{x:s,y:o}=gn(i,t);return{type:e,chart:t,native:i,x:s!==void 0?s:null,y:o!==void 0?o:null}}function Xr(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function im(i,t,e){const s=i.canvas,o=new MutationObserver(l=>{let d=!1;for(const f of l)d=d||Xr(f.addedNodes,s),d=d&&!Xr(f.removedNodes,s);d&&e()});return o.observe(document,{childList:!0,subtree:!0}),o}function nm(i,t,e){const s=i.canvas,o=new MutationObserver(l=>{let d=!1;for(const f of l)d=d||Xr(f.removedNodes,s),d=d&&!Xr(f.addedNodes,s);d&&e()});return o.observe(document,{childList:!0,subtree:!0}),o}const Us=new Map;let Ic=0;function Md(){const i=window.devicePixelRatio;i!==Ic&&(Ic=i,Us.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function sm(i,t){Us.size||window.addEventListener("resize",Md),Us.set(i,t)}function rm(i){Us.delete(i),Us.size||window.removeEventListener("resize",Md)}function om(i,t,e){const s=i.canvas,o=s&&ka(s);if(!o)return;const l=rd((f,p)=>{const m=o.clientWidth;e(f,p),m<o.clientWidth&&e()},window),d=new ResizeObserver(f=>{const p=f[0],m=p.contentRect.width,y=p.contentRect.height;m===0&&y===0||l(m,y)});return d.observe(o),sm(i,l),d}function Fo(i,t,e){e&&e.disconnect(),t==="resize"&&rm(i)}function am(i,t,e){const s=i.canvas,o=rd(l=>{i.ctx!==null&&e(em(l,i))},i);return Jp(s,t,o),o}class lm extends Id{acquireContext(t,e){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(Qp(t,e),s):null}releaseContext(t){const e=t.canvas;if(!e[Or])return!1;const s=e[Or].initial;["height","width"].forEach(l=>{const d=s[l];It(d)?e.removeAttribute(l):e.setAttribute(l,d)});const o=s.style||{};return Object.keys(o).forEach(l=>{e.style[l]=o[l]}),e.width=e.width,delete e[Or],!0}addEventListener(t,e,s){this.removeEventListener(t,e);const o=t.$proxies||(t.$proxies={}),d={attach:im,detach:nm,resize:om}[e]||am;o[e]=d(t,e,s)}removeEventListener(t,e){const s=t.$proxies||(t.$proxies={}),o=s[e];if(!o)return;({attach:Fo,detach:Fo,resize:Fo}[e]||tm)(t,e,o),s[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,o){return Jg(t,e,s,o)}isAttached(t){const e=ka(t);return!!(e&&e.isConnected)}}function cm(i){return!Oa()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?Zp:lm}var _r;let Oi=(_r=class{constructor(){Q(this,"x");Q(this,"y");Q(this,"active",!1);Q(this,"options");Q(this,"$animations")}tooltipPosition(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return jn(this.x)&&jn(this.y)}getProps(t,e){const s=this.$animations;if(!e||!s)return this;const o={};return t.forEach(l=>{o[l]=s[l]&&s[l].active()?s[l]._to:this[l]}),o}},Q(_r,"defaults",{}),Q(_r,"defaultRoutes"),_r);function hm(i,t){const e=i.options.ticks,s=dm(i),o=Math.min(e.maxTicksLimit||s,s),l=e.major.enabled?fm(t):[],d=l.length,f=l[0],p=l[d-1],m=[];if(d>o)return gm(t,m,l,d/o),m;const y=um(l,t,o);if(d>0){let w,A;const S=d>1?Math.round((p-f)/(d-1)):null;for(gr(t,m,y,It(S)?0:f-S,f),w=0,A=d-1;w<A;w++)gr(t,m,y,l[w],l[w+1]);return gr(t,m,y,p,It(S)?t.length:p+S),m}return gr(t,m,y),m}function dm(i){const t=i.options.offset,e=i._tickSize(),s=i._length/e+(t?0:1),o=i._maxLength/e;return Math.floor(Math.min(s,o))}function um(i,t,e){const s=pm(i),o=t.length/e;if(!s)return Math.max(o,1);const l=ng(s);for(let d=0,f=l.length-1;d<f;d++){const p=l[d];if(p>o)return p}return Math.max(o,1)}function fm(i){const t=[];let e,s;for(e=0,s=i.length;e<s;e++)i[e].major&&t.push(e);return t}function gm(i,t,e,s){let o=0,l=e[0],d;for(s=Math.ceil(s),d=0;d<i.length;d++)d===l&&(t.push(i[d]),o++,l=e[o*s])}function gr(i,t,e,s,o){const l=bt(s,0),d=Math.min(bt(o,i.length),i.length);let f=0,p,m,y;for(e=Math.ceil(e),o&&(p=o-s,e=p/Math.floor(p/e)),y=l;y<0;)f++,y=Math.round(l+f*e);for(m=Math.max(l,0);m<d;m++)m===y&&(t.push(i[m]),f++,y=Math.round(l+f*e))}function pm(i){const t=i.length;let e,s;if(t<2)return!1;for(s=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==s)return!1;return s}const mm=i=>i==="left"?"right":i==="right"?"left":i,Tc=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,Mc=(i,t)=>Math.min(t||i,i);function Dc(i,t){const e=[],s=i.length/t,o=i.length;let l=0;for(;l<o;l+=s)e.push(i[Math.floor(l)]);return e}function xm(i,t,e){const s=i.ticks.length,o=Math.min(t,s-1),l=i._startPixel,d=i._endPixel,f=1e-6;let p=i.getPixelForTick(o),m;if(!(e&&(s===1?m=Math.max(p-l,d-p):t===0?m=(i.getPixelForTick(1)-p)/2:m=(p-i.getPixelForTick(o-1))/2,p+=o<t?m:-m,p<l-f||p>d+f)))return p}function bm(i,t){Rt(i,e=>{const s=e.gc,o=s.length/2;let l;if(o>t){for(l=0;l<o;++l)delete e.data[s[l]];s.splice(0,o)}})}function fs(i){return i.drawTicks?i.tickLength:0}function Oc(i,t){if(!i.display)return 0;const e=ue(i.font,t),s=ve(i.padding);return($t(i.text)?i.text.length:1)*e.lineHeight+s.height}function ym(i,t){return Qi(i,{scale:t,type:"scale"})}function wm(i,t,e){return Qi(i,{tick:e,index:t,type:"tick"})}function _m(i,t,e){let s=Sa(i);return(e&&t!=="right"||!e&&t==="right")&&(s=mm(s)),s}function Am(i,t,e,s){const{top:o,left:l,bottom:d,right:f,chart:p}=i,{chartArea:m,scales:y}=p;let w=0,A,S,M;const D=d-o,k=f-l;if(i.isHorizontal()){if(S=Ee(s,l,f),Ct(e)){const R=Object.keys(e)[0],P=e[R];M=y[R].getPixelForValue(P)+D-t}else e==="center"?M=(m.bottom+m.top)/2+D-t:M=Tc(i,e,t);A=f-l}else{if(Ct(e)){const R=Object.keys(e)[0],P=e[R];S=y[R].getPixelForValue(P)-k+t}else e==="center"?S=(m.left+m.right)/2-k+t:S=Tc(i,e,t);M=Ee(s,d,o),w=e==="left"?-oe:oe}return{titleX:S,titleY:M,maxWidth:A,rotation:w}}class vn extends Oi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:o}=this;return t=ze(t,Number.POSITIVE_INFINITY),e=ze(e,Number.NEGATIVE_INFINITY),s=ze(s,Number.POSITIVE_INFINITY),o=ze(o,Number.NEGATIVE_INFINITY),{min:ze(t,s),max:ze(e,o),minDefined:te(t),maxDefined:te(e)}}getMinMax(t){let{min:e,max:s,minDefined:o,maxDefined:l}=this.getUserBounds(),d;if(o&&l)return{min:e,max:s};const f=this.getMatchingVisibleMetas();for(let p=0,m=f.length;p<m;++p)d=f[p].controller.getMinMax(this,t),o||(e=Math.min(e,d.min)),l||(s=Math.max(s,d.max));return e=l&&e>s?s:e,s=o&&e>s?e:s,{min:ze(e,ze(s,e)),max:ze(s,ze(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){zt(this.options.beforeUpdate,[this])}update(t,e,s){const{beginAtZero:o,grace:l,ticks:d}=this.options,f=d.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Og(this,l,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const p=f<this.ticks.length;this._convertTicksToLabels(p?Dc(this.ticks,f):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),d.display&&(d.autoSkip||d.source==="auto")&&(this.ticks=hm(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),p&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,s;this.isHorizontal()?(e=this.left,s=this.right):(e=this.top,s=this.bottom,t=!t),this._startPixel=e,this._endPixel=s,this._reversePixels=t,this._length=s-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){zt(this.options.afterUpdate,[this])}beforeSetDimensions(){zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){zt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),zt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let s,o,l;for(s=0,o=t.length;s<o;s++)l=t[s],l.label=zt(e.callback,[l.value,s,t],this)}afterTickToLabelConversion(){zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,s=Mc(this.ticks.length,t.ticks.maxTicksLimit),o=e.minRotation||0,l=e.maxRotation;let d=o,f,p,m;if(!this._isVisible()||!e.display||o>=l||s<=1||!this.isHorizontal()){this.labelRotation=o;return}const y=this._getLabelSizes(),w=y.widest.width,A=y.highest.height,S=me(this.chart.width-w,0,this.maxWidth);f=t.offset?this.maxWidth/s:S/(s-1),w+6>f&&(f=S/(s-(t.offset?.5:1)),p=this.maxHeight-fs(t.grid)-e.padding-Oc(t.title,this.chart.options.font),m=Math.sqrt(w*w+A*A),d=Ca(Math.min(Math.asin(me((y.highest.height+6)/f,-1,1)),Math.asin(me(p/m,-1,1))-Math.asin(me(A/m,-1,1)))),d=Math.max(o,Math.min(l,d))),this.labelRotation=d}afterCalculateLabelRotation(){zt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){zt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:s,title:o,grid:l}}=this,d=this._isVisible(),f=this.isHorizontal();if(d){const p=Oc(o,e.options.font);if(f?(t.width=this.maxWidth,t.height=fs(l)+p):(t.height=this.maxHeight,t.width=fs(l)+p),s.display&&this.ticks.length){const{first:m,last:y,widest:w,highest:A}=this._getLabelSizes(),S=s.padding*2,M=si(this.labelRotation),D=Math.cos(M),k=Math.sin(M);if(f){const R=s.mirror?0:k*w.width+D*A.height;t.height=Math.min(this.maxHeight,t.height+R+S)}else{const R=s.mirror?0:D*w.width+k*A.height;t.width=Math.min(this.maxWidth,t.width+R+S)}this._calculatePadding(m,y,k,D)}}this._handleMargins(),f?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,o){const{ticks:{align:l,padding:d},position:f}=this.options,p=this.labelRotation!==0,m=f!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let A=0,S=0;p?m?(A=o*t.width,S=s*e.height):(A=s*t.height,S=o*e.width):l==="start"?S=e.width:l==="end"?A=t.width:l!=="inner"&&(A=t.width/2,S=e.width/2),this.paddingLeft=Math.max((A-y+d)*this.width/(this.width-y),0),this.paddingRight=Math.max((S-w+d)*this.width/(this.width-w),0)}else{let y=e.height/2,w=t.height/2;l==="start"?(y=0,w=t.height):l==="end"&&(y=e.height,w=0),this.paddingTop=y+d,this.paddingBottom=w+d}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){zt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,s;for(e=0,s=t.length;e<s;e++)It(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let s=this.ticks;e<s.length&&(s=Dc(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){const{ctx:o,_longestTextCache:l}=this,d=[],f=[],p=Math.floor(e/Mc(e,s));let m=0,y=0,w,A,S,M,D,k,R,P,V,W,$;for(w=0;w<e;w+=p){if(M=t[w].label,D=this._resolveTickFontOptions(w),o.font=k=D.string,R=l[k]=l[k]||{data:{},gc:[]},P=D.lineHeight,V=W=0,!It(M)&&!$t(M))V=$r(o,R.data,R.gc,V,M),W=P;else if($t(M))for(A=0,S=M.length;A<S;++A)$=M[A],!It($)&&!$t($)&&(V=$r(o,R.data,R.gc,V,$),W+=P);d.push(V),f.push(W),m=Math.max(V,m),y=Math.max(W,y)}bm(l,e);const G=d.indexOf(m),B=f.indexOf(y),Y=j=>({width:d[j]||0,height:f[j]||0});return{first:Y(0),last:Y(e-1),widest:Y(G),highest:Y(B),widths:d,heights:f}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return og(this._alignToPixels?dn(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const s=e[t];return s.$context||(s.$context=wm(this.getContext(),t,s))}return this.$context||(this.$context=ym(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=si(this.labelRotation),s=Math.abs(Math.cos(e)),o=Math.abs(Math.sin(e)),l=this._getLabelSizes(),d=t.autoSkipPadding||0,f=l?l.widest.width+d:0,p=l?l.highest.height+d:0;return this.isHorizontal()?p*s>f*o?f/s:p/o:p*o<f*s?p/s:f/o}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,s=this.chart,o=this.options,{grid:l,position:d,border:f}=o,p=l.offset,m=this.isHorizontal(),w=this.ticks.length+(p?1:0),A=fs(l),S=[],M=f.setContext(this.getContext()),D=M.display?M.width:0,k=D/2,R=function(mt){return dn(s,mt,D)};let P,V,W,$,G,B,Y,j,ft,at,tt,gt;if(d==="top")P=R(this.bottom),B=this.bottom-A,j=P-k,at=R(t.top)+k,gt=t.bottom;else if(d==="bottom")P=R(this.top),at=t.top,gt=R(t.bottom)-k,B=P+k,j=this.top+A;else if(d==="left")P=R(this.right),G=this.right-A,Y=P-k,ft=R(t.left)+k,tt=t.right;else if(d==="right")P=R(this.left),ft=t.left,tt=R(t.right)-k,G=P+k,Y=this.left+A;else if(e==="x"){if(d==="center")P=R((t.top+t.bottom)/2+.5);else if(Ct(d)){const mt=Object.keys(d)[0],st=d[mt];P=R(this.chart.scales[mt].getPixelForValue(st))}at=t.top,gt=t.bottom,B=P+k,j=B+A}else if(e==="y"){if(d==="center")P=R((t.left+t.right)/2);else if(Ct(d)){const mt=Object.keys(d)[0],st=d[mt];P=R(this.chart.scales[mt].getPixelForValue(st))}G=P-k,Y=G-A,ft=t.left,tt=t.right}const Tt=bt(o.ticks.maxTicksLimit,w),U=Math.max(1,Math.ceil(w/Tt));for(V=0;V<w;V+=U){const mt=this.getContext(V),st=l.setContext(mt),xe=f.setContext(mt),Ht=st.lineWidth,Ie=st.color,Ji=xe.dash||[],tn=xe.dashOffset,ie=st.tickWidth,Te=st.tickColor,ne=st.tickBorderDash||[],qe=st.tickBorderDashOffset;W=xm(this,V,p),W!==void 0&&($=dn(s,W,Ht),m?G=Y=ft=tt=$:B=j=at=gt=$,S.push({tx1:G,ty1:B,tx2:Y,ty2:j,x1:ft,y1:at,x2:tt,y2:gt,width:Ht,color:Ie,borderDash:Ji,borderDashOffset:tn,tickWidth:ie,tickColor:Te,tickBorderDash:ne,tickBorderDashOffset:qe}))}return this._ticksLength=w,this._borderValue=P,S}_computeLabelItems(t){const e=this.axis,s=this.options,{position:o,ticks:l}=s,d=this.isHorizontal(),f=this.ticks,{align:p,crossAlign:m,padding:y,mirror:w}=l,A=fs(s.grid),S=A+y,M=w?-y:S,D=-si(this.labelRotation),k=[];let R,P,V,W,$,G,B,Y,j,ft,at,tt,gt="middle";if(o==="top")G=this.bottom-M,B=this._getXAxisLabelAlignment();else if(o==="bottom")G=this.top+M,B=this._getXAxisLabelAlignment();else if(o==="left"){const U=this._getYAxisLabelAlignment(A);B=U.textAlign,$=U.x}else if(o==="right"){const U=this._getYAxisLabelAlignment(A);B=U.textAlign,$=U.x}else if(e==="x"){if(o==="center")G=(t.top+t.bottom)/2+S;else if(Ct(o)){const U=Object.keys(o)[0],mt=o[U];G=this.chart.scales[U].getPixelForValue(mt)+S}B=this._getXAxisLabelAlignment()}else if(e==="y"){if(o==="center")$=(t.left+t.right)/2-S;else if(Ct(o)){const U=Object.keys(o)[0],mt=o[U];$=this.chart.scales[U].getPixelForValue(mt)}B=this._getYAxisLabelAlignment(A).textAlign}e==="y"&&(p==="start"?gt="top":p==="end"&&(gt="bottom"));const Tt=this._getLabelSizes();for(R=0,P=f.length;R<P;++R){V=f[R],W=V.label;const U=l.setContext(this.getContext(R));Y=this.getPixelForTick(R)+l.labelOffset,j=this._resolveTickFontOptions(R),ft=j.lineHeight,at=$t(W)?W.length:1;const mt=at/2,st=U.color,xe=U.textStrokeColor,Ht=U.textStrokeWidth;let Ie=B;d?($=Y,B==="inner"&&(R===P-1?Ie=this.options.reverse?"left":"right":R===0?Ie=this.options.reverse?"right":"left":Ie="center"),o==="top"?m==="near"||D!==0?tt=-at*ft+ft/2:m==="center"?tt=-Tt.highest.height/2-mt*ft+ft:tt=-Tt.highest.height+ft/2:m==="near"||D!==0?tt=ft/2:m==="center"?tt=Tt.highest.height/2-mt*ft:tt=Tt.highest.height-at*ft,w&&(tt*=-1),D!==0&&!U.showLabelBackdrop&&($+=ft/2*Math.sin(D))):(G=Y,tt=(1-at)*ft/2);let Ji;if(U.showLabelBackdrop){const tn=ve(U.backdropPadding),ie=Tt.heights[R],Te=Tt.widths[R];let ne=tt-tn.top,qe=0-tn.left;switch(gt){case"middle":ne-=ie/2;break;case"bottom":ne-=ie;break}switch(B){case"center":qe-=Te/2;break;case"right":qe-=Te;break;case"inner":R===P-1?qe-=Te:R>0&&(qe-=Te/2);break}Ji={left:qe,top:ne,width:Te+tn.width,height:ie+tn.height,color:U.backdropColor}}k.push({label:W,font:j,textOffset:tt,options:{rotation:D,color:st,strokeColor:xe,strokeWidth:Ht,textAlign:Ie,textBaseline:gt,translation:[$,G],backdrop:Ji}})}return k}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-si(this.labelRotation))return t==="top"?"left":"right";let o="center";return e.align==="start"?o="left":e.align==="end"?o="right":e.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:s,mirror:o,padding:l}}=this.options,d=this._getLabelSizes(),f=t+l,p=d.widest.width;let m,y;return e==="left"?o?(y=this.right+l,s==="near"?m="left":s==="center"?(m="center",y+=p/2):(m="right",y+=p)):(y=this.right-f,s==="near"?m="right":s==="center"?(m="center",y-=p/2):(m="left",y=this.left)):e==="right"?o?(y=this.left+l,s==="near"?m="right":s==="center"?(m="center",y-=p/2):(m="left",y-=p)):(y=this.left+f,s==="near"?m="left":s==="center"?(m="center",y+=p/2):(m="right",y=this.right)):m="right",{textAlign:m,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:s,top:o,width:l,height:d}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,o,l,d),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const o=this.ticks.findIndex(l=>l.value===t);return o>=0?e.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){const e=this.options.grid,s=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let l,d;const f=(p,m,y)=>{!y.width||!y.color||(s.save(),s.lineWidth=y.width,s.strokeStyle=y.color,s.setLineDash(y.borderDash||[]),s.lineDashOffset=y.borderDashOffset,s.beginPath(),s.moveTo(p.x,p.y),s.lineTo(m.x,m.y),s.stroke(),s.restore())};if(e.display)for(l=0,d=o.length;l<d;++l){const p=o[l];e.drawOnChartArea&&f({x:p.x1,y:p.y1},{x:p.x2,y:p.y2},p),e.drawTicks&&f({x:p.tx1,y:p.ty1},{x:p.tx2,y:p.ty2},{color:p.tickColor,width:p.tickWidth,borderDash:p.tickBorderDash,borderDashOffset:p.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:s,grid:o}}=this,l=s.setContext(this.getContext()),d=s.display?l.width:0;if(!d)return;const f=o.setContext(this.getContext(0)).lineWidth,p=this._borderValue;let m,y,w,A;this.isHorizontal()?(m=dn(t,this.left,d)-d/2,y=dn(t,this.right,f)+f/2,w=A=p):(w=dn(t,this.top,d)-d/2,A=dn(t,this.bottom,f)+f/2,m=y=p),e.save(),e.lineWidth=l.width,e.strokeStyle=l.color,e.beginPath(),e.moveTo(m,w),e.lineTo(y,A),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,o=this._computeLabelArea();o&&Qr(s,o);const l=this.getLabelItems(t);for(const d of l){const f=d.options,p=d.font,m=d.label,y=d.textOffset;En(s,m,0,y,p,f)}o&&Jr(s)}drawTitle(){const{ctx:t,options:{position:e,title:s,reverse:o}}=this;if(!s.display)return;const l=ue(s.font),d=ve(s.padding),f=s.align;let p=l.lineHeight/2;e==="bottom"||e==="center"||Ct(e)?(p+=d.bottom,$t(s.text)&&(p+=l.lineHeight*(s.text.length-1))):p+=d.top;const{titleX:m,titleY:y,maxWidth:w,rotation:A}=Am(this,p,e,f);En(t,s.text,0,0,l,{color:s.color,maxWidth:w,rotation:A,textAlign:_m(f,e,o),textBaseline:"middle",translation:[m,y]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,s=bt(t.grid&&t.grid.z,-1),o=bt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==vn.prototype.draw?[{z:e,draw:l=>{this.draw(l)}}]:[{z:s,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:e,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",o=[];let l,d;for(l=0,d=e.length;l<d;++l){const f=e[l];f[s]===this.id&&(!t||f.type===t)&&o.push(f)}return o}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return ue(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class pr{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let s;Sm(e)&&(s=this.register(e));const o=this.items,l=t.id,d=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+t);return l in o||(o[l]=t,Cm(t,d,s),this.override&&ee.override(t.id,t.overrides)),d}get(t){return this.items[t]}unregister(t){const e=this.items,s=t.id,o=this.scope;s in e&&delete e[s],o&&s in ee[o]&&(delete ee[o][s],this.override&&delete Cn[s])}}function Cm(i,t,e){const s=Ls(Object.create(null),[e?ee.get(e):{},ee.get(t),i.defaults]);ee.set(t,s),i.defaultRoutes&&Em(t,i.defaultRoutes),i.descriptors&&ee.describe(t,i.descriptors)}function Em(i,t){Object.keys(t).forEach(e=>{const s=e.split("."),o=s.pop(),l=[i].concat(s).join("."),d=t[e].split("."),f=d.pop(),p=d.join(".");ee.route(l,o,p,f)})}function Sm(i){return"id"in i&&"defaults"in i}class vm{constructor(){this.controllers=new pr(ri,"datasets",!0),this.elements=new pr(Oi,"elements"),this.plugins=new pr(Object,"plugins"),this.scales=new pr(vn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(o=>{const l=s||this._getRegistryForType(o);s||l.isForType(o)||l===this.plugins&&o.id?this._exec(t,l,o):Rt(o,d=>{const f=s||this._getRegistryForType(d);this._exec(t,f,d)})})}_exec(t,e,s){const o=Aa(t);zt(s["before"+o],[],s),e[t](s),zt(s["after"+o],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){const o=e.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return o}}var mi=new vm;class Im{constructor(){this._init=[]}notify(t,e,s,o){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const l=o?this._descriptors(t).filter(o):this._descriptors(t),d=this._notify(l,t,e,s);return e==="afterDestroy"&&(this._notify(l,t,"stop"),this._notify(this._init,t,"uninstall")),d}_notify(t,e,s,o){o=o||{};for(const l of t){const d=l.plugin,f=d[s],p=[e,o,l.options];if(zt(f,p,d)===!1&&o.cancelable)return!1}return!0}invalidate(){It(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const s=t&&t.config,o=bt(s.options&&s.options.plugins,{}),l=Tm(s);return o===!1&&!e?[]:Dm(t,l,o,e)}_notifyStateChanges(t){const e=this._oldCache||[],s=this._cache,o=(l,d)=>l.filter(f=>!d.some(p=>f.plugin.id===p.plugin.id));this._notify(o(e,s),t,"stop"),this._notify(o(s,e),t,"start")}}function Tm(i){const t={},e=[],s=Object.keys(mi.plugins.items);for(let l=0;l<s.length;l++)e.push(mi.getPlugin(s[l]));const o=i.plugins||[];for(let l=0;l<o.length;l++){const d=o[l];e.indexOf(d)===-1&&(e.push(d),t[d.id]=!0)}return{plugins:e,localIds:t}}function Mm(i,t){return!t&&i===!1?null:i===!0?{}:i}function Dm(i,{plugins:t,localIds:e},s,o){const l=[],d=i.getContext();for(const f of t){const p=f.id,m=Mm(s[p],o);m!==null&&l.push({plugin:f,options:Om(i.config,{plugin:f,local:e[p]},m,d)})}return l}function Om(i,{plugin:t,local:e},s,o){const l=i.pluginScopeKeys(t),d=i.getOptionScopes(s,l);return e&&t.defaults&&d.push(t.defaults),i.createResolver(d,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Qo(i,t){const e=ee.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function km(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function Nm(i,t){return i===t?"_index_":"_value_"}function kc(i){if(i==="x"||i==="y"||i==="r")return i}function Rm(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function Jo(i,...t){if(kc(i))return i;for(const e of t){const s=e.axis||Rm(e.position)||i.length>1&&kc(i[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Nc(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function Lm(i,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(s=>s.xAxisID===i||s.yAxisID===i);if(e.length)return Nc(i,"x",e[0])||Nc(i,"y",e[0])}return{}}function Pm(i,t){const e=Cn[i.type]||{scales:{}},s=t.scales||{},o=Qo(i.type,t),l=Object.create(null);return Object.keys(s).forEach(d=>{const f=s[d];if(!Ct(f))return console.error(`Invalid scale configuration for scale: ${d}`);if(f._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${d}`);const p=Jo(d,f,Lm(d,i),ee.scales[f.type]),m=Nm(p,o),y=e.scales||{};l[d]=Ss(Object.create(null),[{axis:p},f,y[p],y[m]])}),i.data.datasets.forEach(d=>{const f=d.type||i.type,p=d.indexAxis||Qo(f,t),y=(Cn[f]||{}).scales||{};Object.keys(y).forEach(w=>{const A=km(w,p),S=d[A+"AxisID"]||A;l[S]=l[S]||Object.create(null),Ss(l[S],[{axis:A},s[S],y[w]])})}),Object.keys(l).forEach(d=>{const f=l[d];Ss(f,[ee.scales[f.type],ee.scale])}),l}function Dd(i){const t=i.options||(i.options={});t.plugins=bt(t.plugins,{}),t.scales=Pm(i,t)}function Od(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function Bm(i){return i=i||{},i.data=Od(i.data),Dd(i),i}const Rc=new Map,kd=new Set;function mr(i,t){let e=Rc.get(i);return e||(e=t(),Rc.set(i,e),kd.add(e)),e}const gs=(i,t,e)=>{const s=qi(t,e);s!==void 0&&i.add(s)};class Fm{constructor(t){this._config=Bm(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Od(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Dd(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return mr(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return mr(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return mr(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,s=this.type;return mr(`${s}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const s=this._scopeCache;let o=s.get(t);return(!o||e)&&(o=new Map,s.set(t,o)),o}getOptionScopes(t,e,s){const{options:o,type:l}=this,d=this._cachedScopes(t,s),f=d.get(e);if(f)return f;const p=new Set;e.forEach(y=>{t&&(p.add(t),y.forEach(w=>gs(p,t,w))),y.forEach(w=>gs(p,o,w)),y.forEach(w=>gs(p,Cn[l]||{},w)),y.forEach(w=>gs(p,ee,w)),y.forEach(w=>gs(p,qo,w))});const m=Array.from(p);return m.length===0&&m.push(Object.create(null)),kd.has(e)&&d.set(e,m),m}chartOptionScopes(){const{options:t,type:e}=this;return[t,Cn[e]||{},ee.datasets[e]||{},{type:e},ee,qo]}resolveNamedOptions(t,e,s,o=[""]){const l={$shared:!0},{resolver:d,subPrefixes:f}=Lc(this._resolverCache,t,o);let p=d;if(Vm(d,e)){l.$shared=!1,s=Zi(s)?s():s;const m=this.createResolver(t,s,f);p=Wn(d,s,m)}for(const m of e)l[m]=p[m];return l}createResolver(t,e,s=[""],o){const{resolver:l}=Lc(this._resolverCache,t,s);return Ct(e)?Wn(l,e,void 0,o):l}}function Lc(i,t,e){let s=i.get(t);s||(s=new Map,i.set(t,s));const o=e.join();let l=s.get(o);return l||(l={resolver:Ta(t,e),subPrefixes:e.filter(f=>!f.toLowerCase().includes("hover"))},s.set(o,l)),l}const Um=i=>Ct(i)&&Object.getOwnPropertyNames(i).some(t=>Zi(i[t]));function Vm(i,t){const{isScriptable:e,isIndexable:s}=dd(i);for(const o of t){const l=e(o),d=s(o),f=(d||l)&&i[o];if(l&&(Zi(f)||Um(f))||d&&$t(f))return!0}return!1}var zm="4.4.1";const Hm=["top","bottom","left","right","chartArea"];function Pc(i,t){return i==="top"||i==="bottom"||Hm.indexOf(i)===-1&&t==="x"}function Bc(i,t){return function(e,s){return e[i]===s[i]?e[t]-s[t]:e[i]-s[i]}}function Fc(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),zt(e&&e.onComplete,[i],t)}function jm(i){const t=i.chart,e=t.options.animation;zt(e&&e.onProgress,[i],t)}function Nd(i){return Oa()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const kr={},Uc=i=>{const t=Nd(i);return Object.values(kr).filter(e=>e.canvas===t).pop()};function Wm(i,t,e){const s=Object.keys(i);for(const o of s){const l=+o;if(l>=t){const d=i[o];delete i[o],(e>0||l>t)&&(i[l+e]=d)}}}function $m(i,t,e,s){return!e||i.type==="mouseout"?null:s?t:i}function xr(i,t,e){return i.options.clip?i[e]:t[e]}function Ym(i,t){const{xScale:e,yScale:s}=i;return e&&s?{left:xr(e,t,"left"),right:xr(e,t,"right"),top:xr(s,t,"top"),bottom:xr(s,t,"bottom")}:t}class Ci{static register(...t){mi.add(...t),Vc()}static unregister(...t){mi.remove(...t),Vc()}constructor(t,e){const s=this.config=new Fm(e),o=Nd(t),l=Uc(o);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const d=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||cm(o)),this.platform.updateConfig(s);const f=this.platform.acquireContext(o,d.aspectRatio),p=f&&f.canvas,m=p&&p.height,y=p&&p.width;if(this.id=G1(),this.ctx=f,this.canvas=p,this.width=y,this.height=m,this._options=d,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Im,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=hg(w=>this.update(w),d.resizeDelay||0),this._dataChanges=[],kr[this.id]=this,!f||!p){console.error("Failed to create chart: can't acquire context from the given item");return}wi.listen(this,"complete",Fc),wi.listen(this,"progress",jm),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:s,height:o,_aspectRatio:l}=this;return It(t)?e&&l?l:o?s/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return mi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ac(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sc(this.canvas,this.ctx),this}stop(){return wi.stop(this),this}resize(t,e){wi.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const s=this.options,o=this.canvas,l=s.maintainAspectRatio&&this.aspectRatio,d=this.platform.getMaximumSize(o,t,e,l),f=s.devicePixelRatio||this.platform.getDevicePixelRatio(),p=this.width?"resize":"attach";this.width=d.width,this.height=d.height,this._aspectRatio=this.aspectRatio,ac(this,f,!0)&&(this.notifyPlugins("resize",{size:d}),zt(s.onResize,[this,d],this),this.attached&&this._doResize(p)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Rt(e,(s,o)=>{s.id=o})}buildOrUpdateScales(){const t=this.options,e=t.scales,s=this.scales,o=Object.keys(s).reduce((d,f)=>(d[f]=!1,d),{});let l=[];e&&(l=l.concat(Object.keys(e).map(d=>{const f=e[d],p=Jo(d,f),m=p==="r",y=p==="x";return{options:f,dposition:m?"chartArea":y?"bottom":"left",dtype:m?"radialLinear":y?"category":"linear"}}))),Rt(l,d=>{const f=d.options,p=f.id,m=Jo(p,f),y=bt(f.type,d.dtype);(f.position===void 0||Pc(f.position,m)!==Pc(d.dposition))&&(f.position=d.dposition),o[p]=!0;let w=null;if(p in s&&s[p].type===y)w=s[p];else{const A=mi.getScale(y);w=new A({id:p,type:y,ctx:this.ctx,chart:this}),s[w.id]=w}w.init(f,t)}),Rt(o,(d,f)=>{d||delete s[f]}),Rt(s,d=>{Se.configure(this,d,d.options),Se.addBox(this,d)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,s=t.length;if(t.sort((o,l)=>o.index-l.index),s>e){for(let o=e;o<s;++o)this._destroyDatasetMeta(o);t.splice(e,s-e)}this._sortedMetasets=t.slice(0).sort(Bc("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((s,o)=>{e.filter(l=>l===s._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let s,o;for(this._removeUnreferencedMetasets(),s=0,o=e.length;s<o;s++){const l=e[s];let d=this.getDatasetMeta(s);const f=l.type||this.config.type;if(d.type&&d.type!==f&&(this._destroyDatasetMeta(s),d=this.getDatasetMeta(s)),d.type=f,d.indexAxis=l.indexAxis||Qo(f,this.options),d.order=l.order||0,d.index=s,d.label=""+l.label,d.visible=this.isDatasetVisible(s),d.controller)d.controller.updateIndex(s),d.controller.linkScales();else{const p=mi.getController(f),{datasetElementType:m,dataElementType:y}=ee.datasets[f];Object.assign(p,{dataElementType:mi.getElement(y),datasetElementType:m&&mi.getElement(m)}),d.controller=new p(this,s),t.push(d.controller)}}return this._updateMetasets(),t}_resetElements(){Rt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const s=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let d=0;for(let m=0,y=this.data.datasets.length;m<y;m++){const{controller:w}=this.getDatasetMeta(m),A=!o&&l.indexOf(w)===-1;w.buildOrUpdateElements(A),d=Math.max(+w.getMaxOverflow(),d)}d=this._minPadding=s.layout.autoPadding?d:0,this._updateLayout(d),o||Rt(l,m=>{m.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Bc("z","_idx"));const{_active:f,_lastEvent:p}=this;p?this._eventHandler(p,!0):f.length&&this._updateHoverStyles(f,f,!0),this.render()}_updateScales(){Rt(this.scales,t=>{Se.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!ql(e,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:s,start:o,count:l}of e){const d=s==="_removeElements"?-l:l;Wm(t,o,d)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,s=l=>new Set(t.filter(d=>d[0]===l).map((d,f)=>f+","+d.splice(1).join(","))),o=s(0);for(let l=1;l<e;l++)if(!ql(o,s(l)))return;return Array.from(o).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Se.update(this,this.width,this.height,t);const e=this.chartArea,s=e.width<=0||e.height<=0;this._layers=[],Rt(this.boxes,o=>{s&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,l)=>{o._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,s=this.data.datasets.length;e<s;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,s=this.data.datasets.length;e<s;++e)this._updateDataset(e,Zi(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const s=this.getDatasetMeta(t),o={meta:s,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(s.controller._update(e),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wi.has(this)?this.attached&&!wi.running(this)&&wi.start(this):(this.draw(),Fc({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:o}=this._resizeBeforeDraw;this._resize(s,o),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,s=[];let o,l;for(o=0,l=e.length;o<l;++o){const d=e[o];(!t||d.visible)&&s.push(d)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,s=t._clip,o=!s.disabled,l=Ym(t,this.chartArea),d={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",d)!==!1&&(o&&Qr(e,{left:s.left===!1?0:l.left-s.left,right:s.right===!1?this.width:l.right+s.right,top:s.top===!1?0:l.top-s.top,bottom:s.bottom===!1?this.height:l.bottom+s.bottom}),t.controller.draw(),o&&Jr(e),d.cancelable=!1,this.notifyPlugins("afterDatasetDraw",d))}isPointInArea(t){return Mi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,s,o){const l=Hp.modes[e];return typeof l=="function"?l(this,t,s,o):[]}getDatasetMeta(t){const e=this.data.datasets[t],s=this._metasets;let o=s.filter(l=>l&&l._dataset===e).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},s.push(o)),o}getContext(){return this.$context||(this.$context=Qi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!e.hidden}setDatasetVisibility(t,e){const s=this.getDatasetMeta(t);s.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,s){const o=s?"show":"hide",l=this.getDatasetMeta(t),d=l.controller._resolveAnimations(void 0,o);Ps(e)?(l.data[e].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),d.update(l,{visible:s}),this.update(f=>f.datasetIndex===t?o:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),wi.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),sc(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete kr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,s=(l,d)=>{e.addEventListener(this,l,d),t[l]=d},o=(l,d,f)=>{l.offsetX=d,l.offsetY=f,this._eventHandler(l)};Rt(this.options.events,l=>s(l,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,s=(p,m)=>{e.addEventListener(this,p,m),t[p]=m},o=(p,m)=>{t[p]&&(e.removeEventListener(this,p,m),delete t[p])},l=(p,m)=>{this.canvas&&this.resize(p,m)};let d;const f=()=>{o("attach",f),this.attached=!0,this.resize(),s("resize",l),s("detach",d)};d=()=>{this.attached=!1,o("resize",l),this._stop(),this._resize(0,0),s("attach",f)},e.isAttached(this.canvas)?f():d()}unbindEvents(){Rt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Rt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,s){const o=s?"set":"remove";let l,d,f,p;for(e==="dataset"&&(l=this.getDatasetMeta(t[0].datasetIndex),l.controller["_"+o+"DatasetHoverStyle"]()),f=0,p=t.length;f<p;++f){d=t[f];const m=d&&this.getDatasetMeta(d.datasetIndex).controller;m&&m[o+"HoverStyle"](d.element,d.datasetIndex,d.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],s=t.map(({datasetIndex:l,index:d})=>{const f=this.getDatasetMeta(l);if(!f)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:f.data[d],index:d}});!Hr(s,e)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,e))}notifyPlugins(t,e,s){return this._plugins.notify(this,t,e,s)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,s){const o=this.options.hover,l=(p,m)=>p.filter(y=>!m.some(w=>y.datasetIndex===w.datasetIndex&&y.index===w.index)),d=l(e,t),f=s?t:l(t,e);d.length&&this.updateHoverStyle(d,o.mode,!1),f.length&&o.mode&&this.updateHoverStyle(f,o.mode,!0)}_eventHandler(t,e){const s={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},o=d=>(d.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,o)===!1)return;const l=this._handleEvent(t,e,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,o),(l||s.changed)&&this.render(),this}_handleEvent(t,e,s){const{_active:o=[],options:l}=this,d=e,f=this._getActiveElements(t,o,s,d),p=tg(t),m=$m(t,this._lastEvent,s,p);s&&(this._lastEvent=null,zt(l.onHover,[t,f,this],this),p&&zt(l.onClick,[t,f,this],this));const y=!Hr(f,o);return(y||e)&&(this._active=f,this._updateHoverStyles(f,o,e)),this._lastEvent=m,y}_getActiveElements(t,e,s,o){if(t.type==="mouseout")return[];if(!s)return e;const l=this.options.hover;return this.getElementsAtEventForMode(t,l.mode,l,o)}}Q(Ci,"defaults",ee),Q(Ci,"instances",kr),Q(Ci,"overrides",Cn),Q(Ci,"registry",mi),Q(Ci,"version",zm),Q(Ci,"getChart",Uc);function Vc(){return Rt(Ci.instances,i=>i._plugins.invalidate())}function Xm(i,t,e){const{startAngle:s,pixelMargin:o,x:l,y:d,outerRadius:f,innerRadius:p}=t;let m=o/f;i.beginPath(),i.arc(l,d,f,s-m,e+m),p>o?(m=o/p,i.arc(l,d,p,e+m,s-m,!0)):i.arc(l,d,o,e+oe,s-oe),i.closePath(),i.clip()}function Gm(i){return Ia(i,["outerStart","outerEnd","innerStart","innerEnd"])}function qm(i,t,e,s){const o=Gm(i.options.borderRadius),l=(e-t)/2,d=Math.min(l,s*t/2),f=p=>{const m=(e-Math.min(l,p))*s/2;return me(p,0,Math.min(l,m))};return{outerStart:f(o.outerStart),outerEnd:f(o.outerEnd),innerStart:me(o.innerStart,0,d),innerEnd:me(o.innerEnd,0,d)}}function Fn(i,t,e,s){return{x:e+i*Math.cos(t),y:s+i*Math.sin(t)}}function Gr(i,t,e,s,o,l){const{x:d,y:f,startAngle:p,pixelMargin:m,innerRadius:y}=t,w=Math.max(t.outerRadius+s+e-m,0),A=y>0?y+s+e+m:0;let S=0;const M=o-p;if(s){const U=y>0?y-s:0,mt=w>0?w-s:0,st=(U+mt)/2,xe=st!==0?M*st/(st+s):M;S=(M-xe)/2}const D=Math.max(.001,M*w-e/Xt)/w,k=(M-D)/2,R=p+k+S,P=o-k-S,{outerStart:V,outerEnd:W,innerStart:$,innerEnd:G}=qm(t,A,w,P-R),B=w-V,Y=w-W,j=R+V/B,ft=P-W/Y,at=A+$,tt=A+G,gt=R+$/at,Tt=P-G/tt;if(i.beginPath(),l){const U=(j+ft)/2;if(i.arc(d,f,w,j,U),i.arc(d,f,w,U,ft),W>0){const Ht=Fn(Y,ft,d,f);i.arc(Ht.x,Ht.y,W,ft,P+oe)}const mt=Fn(tt,P,d,f);if(i.lineTo(mt.x,mt.y),G>0){const Ht=Fn(tt,Tt,d,f);i.arc(Ht.x,Ht.y,G,P+oe,Tt+Math.PI)}const st=(P-G/A+(R+$/A))/2;if(i.arc(d,f,A,P-G/A,st,!0),i.arc(d,f,A,st,R+$/A,!0),$>0){const Ht=Fn(at,gt,d,f);i.arc(Ht.x,Ht.y,$,gt+Math.PI,R-oe)}const xe=Fn(B,R,d,f);if(i.lineTo(xe.x,xe.y),V>0){const Ht=Fn(B,j,d,f);i.arc(Ht.x,Ht.y,V,R-oe,j)}}else{i.moveTo(d,f);const U=Math.cos(j)*w+d,mt=Math.sin(j)*w+f;i.lineTo(U,mt);const st=Math.cos(ft)*w+d,xe=Math.sin(ft)*w+f;i.lineTo(st,xe)}i.closePath()}function Zm(i,t,e,s,o){const{fullCircles:l,startAngle:d,circumference:f}=t;let p=t.endAngle;if(l){Gr(i,t,e,s,p,o);for(let m=0;m<l;++m)i.fill();isNaN(f)||(p=d+(f%Yt||Yt))}return Gr(i,t,e,s,p,o),i.fill(),p}function Km(i,t,e,s,o){const{fullCircles:l,startAngle:d,circumference:f,options:p}=t,{borderWidth:m,borderJoinStyle:y,borderDash:w,borderDashOffset:A}=p,S=p.borderAlign==="inner";if(!m)return;i.setLineDash(w||[]),i.lineDashOffset=A,S?(i.lineWidth=m*2,i.lineJoin=y||"round"):(i.lineWidth=m,i.lineJoin=y||"bevel");let M=t.endAngle;if(l){Gr(i,t,e,s,M,o);for(let D=0;D<l;++D)i.stroke();isNaN(f)||(M=d+(f%Yt||Yt))}S&&Xm(i,t,M),l||(Gr(i,t,e,s,M,o),i.stroke())}class ys extends Oi{constructor(e){super();Q(this,"circumference");Q(this,"endAngle");Q(this,"fullCircles");Q(this,"innerRadius");Q(this,"outerRadius");Q(this,"pixelMargin");Q(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,o){const l=this.getProps(["x","y"],o),{angle:d,distance:f}=ed(l,{x:e,y:s}),{startAngle:p,endAngle:m,innerRadius:y,outerRadius:w,circumference:A}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],o),S=(this.options.spacing+this.options.borderWidth)/2,D=bt(A,m-p)>=Yt||Bs(d,p,m),k=Ii(f,y+S,w+S);return D&&k}getCenterPoint(e){const{x:s,y:o,startAngle:l,endAngle:d,innerRadius:f,outerRadius:p}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:m,spacing:y}=this.options,w=(l+d)/2,A=(f+p+y+m)/2;return{x:s+Math.cos(w)*A,y:o+Math.sin(w)*A}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:o}=this,l=(s.offset||0)/4,d=(s.spacing||0)/2,f=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=o>Yt?Math.floor(o/Yt):0,o===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const p=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(p)*l,Math.sin(p)*l);const m=1-Math.sin(Math.min(Xt,o||0)),y=l*m;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,Zm(e,this,y,d,f),Km(e,this,y,d,f),e.restore()}}Q(ys,"id","arc"),Q(ys,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Q(ys,"defaultRoutes",{backgroundColor:"backgroundColor"}),Q(ys,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function Rd(i,t,e=t){i.lineCap=bt(e.borderCapStyle,t.borderCapStyle),i.setLineDash(bt(e.borderDash,t.borderDash)),i.lineDashOffset=bt(e.borderDashOffset,t.borderDashOffset),i.lineJoin=bt(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=bt(e.borderWidth,t.borderWidth),i.strokeStyle=bt(e.borderColor,t.borderColor)}function Qm(i,t,e){i.lineTo(e.x,e.y)}function Jm(i){return i.stepped?Ag:i.tension||i.cubicInterpolationMode==="monotone"?Cg:Qm}function Ld(i,t,e={}){const s=i.length,{start:o=0,end:l=s-1}=e,{start:d,end:f}=t,p=Math.max(o,d),m=Math.min(l,f),y=o<d&&l<d||o>f&&l>f;return{count:s,start:p,loop:t.loop,ilen:m<p&&!y?s+m-p:m-p}}function t2(i,t,e,s){const{points:o,options:l}=t,{count:d,start:f,loop:p,ilen:m}=Ld(o,e,s),y=Jm(l);let{move:w=!0,reverse:A}=s||{},S,M,D;for(S=0;S<=m;++S)M=o[(f+(A?m-S:S))%d],!M.skip&&(w?(i.moveTo(M.x,M.y),w=!1):y(i,D,M,A,l.stepped),D=M);return p&&(M=o[(f+(A?m:0))%d],y(i,D,M,A,l.stepped)),!!p}function e2(i,t,e,s){const o=t.points,{count:l,start:d,ilen:f}=Ld(o,e,s),{move:p=!0,reverse:m}=s||{};let y=0,w=0,A,S,M,D,k,R;const P=W=>(d+(m?f-W:W))%l,V=()=>{D!==k&&(i.lineTo(y,k),i.lineTo(y,D),i.lineTo(y,R))};for(p&&(S=o[P(0)],i.moveTo(S.x,S.y)),A=0;A<=f;++A){if(S=o[P(A)],S.skip)continue;const W=S.x,$=S.y,G=W|0;G===M?($<D?D=$:$>k&&(k=$),y=(w*y+W)/++w):(V(),i.lineTo(W,$),M=G,w=0,D=k=$),R=$}V()}function ta(i){const t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?e2:t2}function i2(i){return i.stepped?ep:i.tension||i.cubicInterpolationMode==="monotone"?ip:pn}function n2(i,t,e,s){let o=t._path;o||(o=t._path=new Path2D,t.path(o,e,s)&&o.closePath()),Rd(i,t.options),i.stroke(o)}function s2(i,t,e,s){const{segments:o,options:l}=t,d=ta(t);for(const f of o)Rd(i,l,f.style),i.beginPath(),d(i,t,f,{start:e,end:e+s-1})&&i.closePath(),i.stroke()}const r2=typeof Path2D=="function";function o2(i,t,e,s){r2&&!t.options.segment?n2(i,t,e,s):s2(i,t,e,s)}class ji extends Oi{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const o=s.spanGaps?this._loop:this._fullLoop;Xg(this._points,s,t,o,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=lp(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,s=t.length;return s&&e[t[s-1].end]}interpolate(t,e){const s=this.options,o=t[e],l=this.points,d=_d(this,{property:e,start:o,end:o});if(!d.length)return;const f=[],p=i2(s);let m,y;for(m=0,y=d.length;m<y;++m){const{start:w,end:A}=d[m],S=l[w],M=l[A];if(S===M){f.push(S);continue}const D=Math.abs((o-S[e])/(M[e]-S[e])),k=p(S,M,D,s.stepped);k[e]=t[e],f.push(k)}return f.length===1?f[0]:f}pathSegment(t,e,s){return ta(this)(t,this,e,s)}path(t,e,s){const o=this.segments,l=ta(this);let d=this._loop;e=e||0,s=s||this.points.length-e;for(const f of o)d&=l(t,this,f,{start:e,end:e+s-1});return!!d}draw(t,e,s,o){const l=this.options||{};(this.points||[]).length&&l.borderWidth&&(t.save(),o2(t,this,s,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Q(ji,"id","line"),Q(ji,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Q(ji,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Q(ji,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function zc(i,t,e,s){const o=i.options,{[e]:l}=i.getProps([e],s);return Math.abs(t-l)<o.radius+o.hitRadius}class Nr extends Oi{constructor(e){super();Q(this,"parsed");Q(this,"skip");Q(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,o){const l=this.options,{x:d,y:f}=this.getProps(["x","y"],o);return Math.pow(e-d,2)+Math.pow(s-f,2)<Math.pow(l.hitRadius+l.radius,2)}inXRange(e,s){return zc(this,e,"x",s)}inYRange(e,s){return zc(this,e,"y",s)}getCenterPoint(e){const{x:s,y:o}=this.getProps(["x","y"],e);return{x:s,y:o}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const o=s&&e.borderWidth||0;return(s+o)*2}draw(e,s){const o=this.options;this.skip||o.radius<.1||!Mi(this,s,this.size(o)/2)||(e.strokeStyle=o.borderColor,e.lineWidth=o.borderWidth,e.fillStyle=o.backgroundColor,Zo(e,o,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}Q(Nr,"id","point"),Q(Nr,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Q(Nr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Pd(i,t){const{x:e,y:s,base:o,width:l,height:d}=i.getProps(["x","y","base","width","height"],t);let f,p,m,y,w;return i.horizontal?(w=d/2,f=Math.min(e,o),p=Math.max(e,o),m=s-w,y=s+w):(w=l/2,f=e-w,p=e+w,m=Math.min(s,o),y=Math.max(s,o)),{left:f,top:m,right:p,bottom:y}}function Wi(i,t,e,s){return i?0:me(t,e,s)}function a2(i,t,e){const s=i.options.borderWidth,o=i.borderSkipped,l=hd(s);return{t:Wi(o.top,l.top,0,e),r:Wi(o.right,l.right,0,t),b:Wi(o.bottom,l.bottom,0,e),l:Wi(o.left,l.left,0,t)}}function l2(i,t,e){const{enableBorderRadius:s}=i.getProps(["enableBorderRadius"]),o=i.options.borderRadius,l=bn(o),d=Math.min(t,e),f=i.borderSkipped,p=s||Ct(o);return{topLeft:Wi(!p||f.top||f.left,l.topLeft,0,d),topRight:Wi(!p||f.top||f.right,l.topRight,0,d),bottomLeft:Wi(!p||f.bottom||f.left,l.bottomLeft,0,d),bottomRight:Wi(!p||f.bottom||f.right,l.bottomRight,0,d)}}function c2(i){const t=Pd(i),e=t.right-t.left,s=t.bottom-t.top,o=a2(i,e/2,s/2),l=l2(i,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:l},inner:{x:t.left+o.l,y:t.top+o.t,w:e-o.l-o.r,h:s-o.t-o.b,radius:{topLeft:Math.max(0,l.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,l.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,l.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,l.bottomRight-Math.max(o.b,o.r))}}}}function Uo(i,t,e,s){const o=t===null,l=e===null,f=i&&!(o&&l)&&Pd(i,s);return f&&(o||Ii(t,f.left,f.right))&&(l||Ii(e,f.top,f.bottom))}function h2(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function d2(i,t){i.rect(t.x,t.y,t.w,t.h)}function Vo(i,t,e={}){const s=i.x!==e.x?-t:0,o=i.y!==e.y?-t:0,l=(i.x+i.w!==e.x+e.w?t:0)-s,d=(i.y+i.h!==e.y+e.h?t:0)-o;return{x:i.x+s,y:i.y+o,w:i.w+l,h:i.h+d,radius:i.radius}}class Rr extends Oi{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:s,backgroundColor:o}}=this,{inner:l,outer:d}=c2(this),f=h2(d.radius)?Fs:d2;t.save(),(d.w!==l.w||d.h!==l.h)&&(t.beginPath(),f(t,Vo(d,e,l)),t.clip(),f(t,Vo(l,-e,d)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),f(t,Vo(l,e)),t.fillStyle=o,t.fill(),t.restore()}inRange(t,e,s){return Uo(this,t,e,s)}inXRange(t,e){return Uo(this,t,null,e)}inYRange(t,e){return Uo(this,null,t,e)}getCenterPoint(t){const{x:e,y:s,base:o,horizontal:l}=this.getProps(["x","y","base","horizontal"],t);return{x:l?(e+o)/2:e,y:l?s:(s+o)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Q(Rr,"id","bar"),Q(Rr,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Q(Rr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var u2=Object.freeze({__proto__:null,ArcElement:ys,BarElement:Rr,LineElement:ji,PointElement:Nr});const ea=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Hc=ea.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function Bd(i){return ea[i%ea.length]}function Fd(i){return Hc[i%Hc.length]}function f2(i,t){return i.borderColor=Bd(t),i.backgroundColor=Fd(t),++t}function g2(i,t){return i.backgroundColor=i.data.map(()=>Bd(t++)),t}function p2(i,t){return i.backgroundColor=i.data.map(()=>Fd(t++)),t}function m2(i){let t=0;return(e,s)=>{const o=i.getDatasetMeta(s).controller;o instanceof xn?t=g2(e,t):o instanceof Ms?t=p2(e,t):o&&(t=f2(e,t))}}function jc(i){let t;for(t in i)if(i[t].borderColor||i[t].backgroundColor)return!0;return!1}function x2(i){return i&&(i.borderColor||i.backgroundColor)}var b2={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,t,e){if(!e.enabled)return;const{data:{datasets:s},options:o}=i.config,{elements:l}=o;if(!e.forceOverride&&(jc(s)||x2(o)||l&&jc(l)))return;const d=m2(i);s.forEach(d)}};function y2(i,t,e,s,o){const l=o.samples||s;if(l>=e)return i.slice(t,t+e);const d=[],f=(e-2)/(l-2);let p=0;const m=t+e-1;let y=t,w,A,S,M,D;for(d[p++]=i[y],w=0;w<l-2;w++){let k=0,R=0,P;const V=Math.floor((w+1)*f)+1+t,W=Math.min(Math.floor((w+2)*f)+1,e)+t,$=W-V;for(P=V;P<W;P++)k+=i[P].x,R+=i[P].y;k/=$,R/=$;const G=Math.floor(w*f)+1+t,B=Math.min(Math.floor((w+1)*f)+1,e)+t,{x:Y,y:j}=i[y];for(S=M=-1,P=G;P<B;P++)M=.5*Math.abs((Y-k)*(i[P].y-j)-(Y-i[P].x)*(R-j)),M>S&&(S=M,A=i[P],D=P);d[p++]=A,y=D}return d[p++]=i[m],d}function w2(i,t,e,s){let o=0,l=0,d,f,p,m,y,w,A,S,M,D;const k=[],R=t+e-1,P=i[t].x,W=i[R].x-P;for(d=t;d<t+e;++d){f=i[d],p=(f.x-P)/W*s,m=f.y;const $=p|0;if($===y)m<M?(M=m,w=d):m>D&&(D=m,A=d),o=(l*o+f.x)/++l;else{const G=d-1;if(!It(w)&&!It(A)){const B=Math.min(w,A),Y=Math.max(w,A);B!==S&&B!==G&&k.push({...i[B],x:o}),Y!==S&&Y!==G&&k.push({...i[Y],x:o})}d>0&&G!==S&&k.push(i[G]),k.push(f),y=$,l=0,M=D=m,w=A=S=d}}return k}function Ud(i){if(i._decimated){const t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Wc(i){i.data.datasets.forEach(t=>{Ud(t)})}function _2(i,t){const e=t.length;let s=0,o;const{iScale:l}=i,{min:d,max:f,minDefined:p,maxDefined:m}=l.getUserBounds();return p&&(s=me(Ti(t,l.axis,d).lo,0,e-1)),m?o=me(Ti(t,l.axis,f).hi+1,s,e)-s:o=e-s,{start:s,count:o}}var A2={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled){Wc(i);return}const s=i.width;i.data.datasets.forEach((o,l)=>{const{_data:d,indexAxis:f}=o,p=i.getDatasetMeta(l),m=d||o.data;if(xs([f,i.options.indexAxis])==="y"||!p.controller.supportsDecimation)return;const y=i.scales[p.xAxisID];if(y.type!=="linear"&&y.type!=="time"||i.options.parsing)return;let{start:w,count:A}=_2(p,m);const S=e.threshold||4*s;if(A<=S){Ud(o);return}It(d)&&(o._data=m,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(D){this._data=D}}));let M;switch(e.algorithm){case"lttb":M=y2(m,w,A,s,e);break;case"min-max":M=w2(m,w,A,s);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}o._decimated=M})},destroy(i){Wc(i)}};function C2(i,t,e){const s=i.segments,o=i.points,l=t.points,d=[];for(const f of s){let{start:p,end:m}=f;m=Ra(p,m,o);const y=ia(e,o[p],o[m],f.loop);if(!t.segments){d.push({source:f,target:y,start:o[p],end:o[m]});continue}const w=_d(t,y);for(const A of w){const S=ia(e,l[A.start],l[A.end],A.loop),M=wd(f,o,S);for(const D of M)d.push({source:D,target:A,start:{[e]:$c(y,S,"start",Math.max)},end:{[e]:$c(y,S,"end",Math.min)}})}}return d}function ia(i,t,e,s){if(s)return;let o=t[i],l=e[i];return i==="angle"&&(o=He(o),l=He(l)),{property:i,start:o,end:l}}function E2(i,t){const{x:e=null,y:s=null}=i||{},o=t.points,l=[];return t.segments.forEach(({start:d,end:f})=>{f=Ra(d,f,o);const p=o[d],m=o[f];s!==null?(l.push({x:p.x,y:s}),l.push({x:m.x,y:s})):e!==null&&(l.push({x:e,y:p.y}),l.push({x:e,y:m.y}))}),l}function Ra(i,t,e){for(;t>i;t--){const s=e[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function $c(i,t,e,s){return i&&t?s(i[e],t[e]):i?i[e]:t?t[e]:0}function Vd(i,t){let e=[],s=!1;return $t(i)?(s=!0,e=i):e=E2(i,t),e.length?new ji({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function Yc(i){return i&&i.fill!==!1}function S2(i,t,e){let o=i[t].fill;const l=[t];let d;if(!e)return o;for(;o!==!1&&l.indexOf(o)===-1;){if(!te(o))return o;if(d=i[o],!d)return!1;if(d.visible)return o;l.push(o),o=d.fill}return!1}function v2(i,t,e){const s=D2(i);if(Ct(s))return isNaN(s.value)?!1:s;let o=parseFloat(s);return te(o)&&Math.floor(o)===o?I2(s[0],t,o,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function I2(i,t,e,s){return(i==="-"||i==="+")&&(e=t+e),e===t||e<0||e>=s?!1:e}function T2(i,t){let e=null;return i==="start"?e=t.bottom:i==="end"?e=t.top:Ct(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}function M2(i,t,e){let s;return i==="start"?s=e:i==="end"?s=t.options.reverse?t.min:t.max:Ct(i)?s=i.value:s=t.getBaseValue(),s}function D2(i){const t=i.options,e=t.fill;let s=bt(e&&e.target,e);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function O2(i){const{scale:t,index:e,line:s}=i,o=[],l=s.segments,d=s.points,f=k2(t,e);f.push(Vd({x:null,y:t.bottom},s));for(let p=0;p<l.length;p++){const m=l[p];for(let y=m.start;y<=m.end;y++)N2(o,d[y],f)}return new ji({points:o,options:{}})}function k2(i,t){const e=[],s=i.getMatchingVisibleMetas("line");for(let o=0;o<s.length;o++){const l=s[o];if(l.index===t)break;l.hidden||e.unshift(l.dataset)}return e}function N2(i,t,e){const s=[];for(let o=0;o<e.length;o++){const l=e[o],{first:d,last:f,point:p}=R2(l,t,"x");if(!(!p||d&&f)){if(d)s.unshift(p);else if(i.push(p),!f)break}}i.push(...s)}function R2(i,t,e){const s=i.interpolate(t,e);if(!s)return{};const o=s[e],l=i.segments,d=i.points;let f=!1,p=!1;for(let m=0;m<l.length;m++){const y=l[m],w=d[y.start][e],A=d[y.end][e];if(Ii(o,w,A)){f=o===w,p=o===A;break}}return{first:f,last:p,point:s}}class zd{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,s){const{x:o,y:l,radius:d}=this;return e=e||{start:0,end:Yt},t.arc(o,l,d,e.end,e.start,!0),!s.bounds}interpolate(t){const{x:e,y:s,radius:o}=this,l=t.angle;return{x:e+Math.cos(l)*o,y:s+Math.sin(l)*o,angle:l}}}function L2(i){const{chart:t,fill:e,line:s}=i;if(te(e))return P2(t,e);if(e==="stack")return O2(i);if(e==="shape")return!0;const o=B2(i);return o instanceof zd?o:Vd(o,s)}function P2(i,t){const e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}function B2(i){return(i.scale||{}).getPointPositionForValue?U2(i):F2(i)}function F2(i){const{scale:t={},fill:e}=i,s=T2(e,t);if(te(s)){const o=t.isHorizontal();return{x:o?s:null,y:o?null:s}}return null}function U2(i){const{scale:t,fill:e}=i,s=t.options,o=t.getLabels().length,l=s.reverse?t.max:t.min,d=M2(e,t,l),f=[];if(s.grid.circular){const p=t.getPointPositionForValue(0,l);return new zd({x:p.x,y:p.y,radius:t.getDistanceFromCenterForValue(d)})}for(let p=0;p<o;++p)f.push(t.getPointPositionForValue(p,d));return f}function zo(i,t,e){const s=L2(t),{line:o,scale:l,axis:d}=t,f=o.options,p=f.fill,m=f.backgroundColor,{above:y=m,below:w=m}=p||{};s&&o.points.length&&(Qr(i,e),V2(i,{line:o,target:s,above:y,below:w,area:e,scale:l,axis:d}),Jr(i))}function V2(i,t){const{line:e,target:s,above:o,below:l,area:d,scale:f}=t,p=e._loop?"angle":t.axis;i.save(),p==="x"&&l!==o&&(Xc(i,s,d.top),Gc(i,{line:e,target:s,color:o,scale:f,property:p}),i.restore(),i.save(),Xc(i,s,d.bottom)),Gc(i,{line:e,target:s,color:l,scale:f,property:p}),i.restore()}function Xc(i,t,e){const{segments:s,points:o}=t;let l=!0,d=!1;i.beginPath();for(const f of s){const{start:p,end:m}=f,y=o[p],w=o[Ra(p,m,o)];l?(i.moveTo(y.x,y.y),l=!1):(i.lineTo(y.x,e),i.lineTo(y.x,y.y)),d=!!t.pathSegment(i,f,{move:d}),d?i.closePath():i.lineTo(w.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function Gc(i,t){const{line:e,target:s,property:o,color:l,scale:d}=t,f=C2(e,s,o);for(const{source:p,target:m,start:y,end:w}of f){const{style:{backgroundColor:A=l}={}}=p,S=s!==!0;i.save(),i.fillStyle=A,z2(i,d,S&&ia(o,y,w)),i.beginPath();const M=!!e.pathSegment(i,p);let D;if(S){M?i.closePath():qc(i,s,w,o);const k=!!s.pathSegment(i,m,{move:M,reverse:!0});D=M&&k,D||qc(i,s,y,o)}i.closePath(),i.fill(D?"evenodd":"nonzero"),i.restore()}}function z2(i,t,e){const{top:s,bottom:o}=t.chart.chartArea,{property:l,start:d,end:f}=e||{};l==="x"&&(i.beginPath(),i.rect(d,s,f-d,o-s),i.clip())}function qc(i,t,e,s){const o=t.interpolate(e,s);o&&i.lineTo(o.x,o.y)}var H2={id:"filler",afterDatasetsUpdate(i,t,e){const s=(i.data.datasets||[]).length,o=[];let l,d,f,p;for(d=0;d<s;++d)l=i.getDatasetMeta(d),f=l.dataset,p=null,f&&f.options&&f instanceof ji&&(p={visible:i.isDatasetVisible(d),index:d,fill:v2(f,d,s),chart:i,axis:l.controller.options.indexAxis,scale:l.vScale,line:f}),l.$filler=p,o.push(p);for(d=0;d<s;++d)p=o[d],!(!p||p.fill===!1)&&(p.fill=S2(o,d,e.propagate))},beforeDraw(i,t,e){const s=e.drawTime==="beforeDraw",o=i.getSortedVisibleDatasetMetas(),l=i.chartArea;for(let d=o.length-1;d>=0;--d){const f=o[d].$filler;f&&(f.line.updateControlPoints(l,f.axis),s&&f.fill&&zo(i.ctx,f,l))}},beforeDatasetsDraw(i,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const s=i.getSortedVisibleDatasetMetas();for(let o=s.length-1;o>=0;--o){const l=s[o].$filler;Yc(l)&&zo(i.ctx,l,i.chartArea)}},beforeDatasetDraw(i,t,e){const s=t.meta.$filler;!Yc(s)||e.drawTime!=="beforeDatasetDraw"||zo(i.ctx,s,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Zc=(i,t)=>{let{boxHeight:e=t,boxWidth:s=t}=i;return i.usePointStyle&&(e=Math.min(e,t),s=i.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}},j2=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class Kc extends Oi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=zt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,o)=>t.sort(s,o,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,o=ue(s.font),l=o.size,d=this._computeTitleHeight(),{boxWidth:f,itemHeight:p}=Zc(s,l);let m,y;e.font=o.string,this.isHorizontal()?(m=this.maxWidth,y=this._fitRows(d,l,f,p)+10):(y=this.maxHeight,m=this._fitCols(d,o,f,p)+10),this.width=Math.min(m,t.maxWidth||this.maxWidth),this.height=Math.min(y,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,o){const{ctx:l,maxWidth:d,options:{labels:{padding:f}}}=this,p=this.legendHitBoxes=[],m=this.lineWidths=[0],y=o+f;let w=t;l.textAlign="left",l.textBaseline="middle";let A=-1,S=-y;return this.legendItems.forEach((M,D)=>{const k=s+e/2+l.measureText(M.text).width;(D===0||m[m.length-1]+k+2*f>d)&&(w+=y,m[m.length-(D>0?0:1)]=0,S+=y,A++),p[D]={left:0,top:S,row:A,width:k,height:o},m[m.length-1]+=k+f}),w}_fitCols(t,e,s,o){const{ctx:l,maxHeight:d,options:{labels:{padding:f}}}=this,p=this.legendHitBoxes=[],m=this.columnSizes=[],y=d-t;let w=f,A=0,S=0,M=0,D=0;return this.legendItems.forEach((k,R)=>{const{itemWidth:P,itemHeight:V}=W2(s,e,l,k,o);R>0&&S+V+2*f>y&&(w+=A+f,m.push({width:A,height:S}),M+=A+f,D++,A=S=0),p[R]={left:M,top:S,col:D,width:P,height:V},A=Math.max(A,P),S+=V+f}),w+=A,m.push({width:A,height:S}),w}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:o},rtl:l}}=this,d=Hn(l,this.left,this.width);if(this.isHorizontal()){let f=0,p=Ee(s,this.left+o,this.right-this.lineWidths[f]);for(const m of e)f!==m.row&&(f=m.row,p=Ee(s,this.left+o,this.right-this.lineWidths[f])),m.top+=this.top+t+o,m.left=d.leftForLtr(d.x(p),m.width),p+=m.width+o}else{let f=0,p=Ee(s,this.top+t+o,this.bottom-this.columnSizes[f].height);for(const m of e)m.col!==f&&(f=m.col,p=Ee(s,this.top+t+o,this.bottom-this.columnSizes[f].height)),m.top=p,m.left+=this.left+o,m.left=d.leftForLtr(d.x(m.left),m.width),p+=m.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Qr(t,this),this._draw(),Jr(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:s,ctx:o}=this,{align:l,labels:d}=t,f=ee.color,p=Hn(t.rtl,this.left,this.width),m=ue(d.font),{padding:y}=d,w=m.size,A=w/2;let S;this.drawTitle(),o.textAlign=p.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=m.string;const{boxWidth:M,boxHeight:D,itemHeight:k}=Zc(d,w),R=function(G,B,Y){if(isNaN(M)||M<=0||isNaN(D)||D<0)return;o.save();const j=bt(Y.lineWidth,1);if(o.fillStyle=bt(Y.fillStyle,f),o.lineCap=bt(Y.lineCap,"butt"),o.lineDashOffset=bt(Y.lineDashOffset,0),o.lineJoin=bt(Y.lineJoin,"miter"),o.lineWidth=j,o.strokeStyle=bt(Y.strokeStyle,f),o.setLineDash(bt(Y.lineDash,[])),d.usePointStyle){const ft={radius:D*Math.SQRT2/2,pointStyle:Y.pointStyle,rotation:Y.rotation,borderWidth:j},at=p.xPlus(G,M/2),tt=B+A;cd(o,ft,at,tt,d.pointStyleWidth&&M)}else{const ft=B+Math.max((w-D)/2,0),at=p.leftForLtr(G,M),tt=bn(Y.borderRadius);o.beginPath(),Object.values(tt).some(gt=>gt!==0)?Fs(o,{x:at,y:ft,w:M,h:D,radius:tt}):o.rect(at,ft,M,D),o.fill(),j!==0&&o.stroke()}o.restore()},P=function(G,B,Y){En(o,Y.text,G,B+k/2,m,{strikethrough:Y.hidden,textAlign:p.textAlign(Y.textAlign)})},V=this.isHorizontal(),W=this._computeTitleHeight();V?S={x:Ee(l,this.left+y,this.right-s[0]),y:this.top+y+W,line:0}:S={x:this.left+y,y:Ee(l,this.top+W+y,this.bottom-e[0].height),line:0},xd(this.ctx,t.textDirection);const $=k+y;this.legendItems.forEach((G,B)=>{o.strokeStyle=G.fontColor,o.fillStyle=G.fontColor;const Y=o.measureText(G.text).width,j=p.textAlign(G.textAlign||(G.textAlign=d.textAlign)),ft=M+A+Y;let at=S.x,tt=S.y;p.setWidth(this.width),V?B>0&&at+ft+y>this.right&&(tt=S.y+=$,S.line++,at=S.x=Ee(l,this.left+y,this.right-s[S.line])):B>0&&tt+$>this.bottom&&(at=S.x=at+e[S.line].width+y,S.line++,tt=S.y=Ee(l,this.top+W+y,this.bottom-e[S.line].height));const gt=p.x(at);if(R(gt,tt,G),at=dg(j,at+M+A,V?at+ft:this.right,t.rtl),P(p.x(at),tt,G),V)S.x+=ft+y;else if(typeof G.text!="string"){const Tt=m.lineHeight;S.y+=Hd(G,Tt)+y}else S.y+=$}),bd(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,s=ue(e.font),o=ve(e.padding);if(!e.display)return;const l=Hn(t.rtl,this.left,this.width),d=this.ctx,f=e.position,p=s.size/2,m=o.top+p;let y,w=this.left,A=this.width;if(this.isHorizontal())A=Math.max(...this.lineWidths),y=this.top+m,w=Ee(t.align,w,this.right-A);else{const M=this.columnSizes.reduce((D,k)=>Math.max(D,k.height),0);y=m+Ee(t.align,this.top,this.bottom-M-t.labels.padding-this._computeTitleHeight())}const S=Ee(f,w,w+A);d.textAlign=l.textAlign(Sa(f)),d.textBaseline="middle",d.strokeStyle=e.color,d.fillStyle=e.color,d.font=s.string,En(d,e.text,S,y,s)}_computeTitleHeight(){const t=this.options.title,e=ue(t.font),s=ve(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,o,l;if(Ii(t,this.left,this.right)&&Ii(e,this.top,this.bottom)){for(l=this.legendHitBoxes,s=0;s<l.length;++s)if(o=l[s],Ii(t,o.left,o.left+o.width)&&Ii(e,o.top,o.top+o.height))return this.legendItems[s]}return null}handleEvent(t){const e=this.options;if(!X2(t.type,e))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const o=this._hoveredItem,l=j2(o,s);o&&!l&&zt(e.onLeave,[t,o,this],this),this._hoveredItem=s,s&&!l&&zt(e.onHover,[t,s,this],this)}else s&&zt(e.onClick,[t,s,this],this)}}function W2(i,t,e,s,o){const l=$2(s,i,t,e),d=Y2(o,s,t.lineHeight);return{itemWidth:l,itemHeight:d}}function $2(i,t,e,s){let o=i.text;return o&&typeof o!="string"&&(o=o.reduce((l,d)=>l.length>d.length?l:d)),t+e.size/2+s.measureText(o).width}function Y2(i,t,e){let s=i;return typeof t.text!="string"&&(s=Hd(t,e)),s}function Hd(i,t){const e=i.text?i.text.length:0;return t*e}function X2(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var G2={id:"legend",_element:Kc,start(i,t,e){const s=i.legend=new Kc({ctx:i.ctx,options:e,chart:i});Se.configure(i,s,e),Se.addBox(i,s)},stop(i){Se.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const s=i.legend;Se.configure(i,s,e),s.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const s=t.datasetIndex,o=e.chart;o.isDatasetVisible(s)?(o.hide(s),t.hidden=!0):(o.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:o,color:l,useBorderRadius:d,borderRadius:f}}=i.legend.options;return i._getSortedDatasetMetas().map(p=>{const m=p.controller.getStyle(e?0:void 0),y=ve(m.borderWidth);return{text:t[p.index].label,fillStyle:m.backgroundColor,fontColor:l,hidden:!p.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:m.borderColor,pointStyle:s||m.pointStyle,rotation:m.rotation,textAlign:o||m.textAlign,borderRadius:d&&(f||m.borderRadius),datasetIndex:p.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class La extends Oi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const o=$t(s.text)?s.text.length:1;this._padding=ve(s.padding);const l=o*ue(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=l:this.width=l}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:s,bottom:o,right:l,options:d}=this,f=d.align;let p=0,m,y,w;return this.isHorizontal()?(y=Ee(f,s,l),w=e+t,m=l-s):(d.position==="left"?(y=s+t,w=Ee(f,o,e),p=Xt*-.5):(y=l-t,w=Ee(f,e,o),p=Xt*.5),m=o-e),{titleX:y,titleY:w,maxWidth:m,rotation:p}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const s=ue(e.font),l=s.lineHeight/2+this._padding.top,{titleX:d,titleY:f,maxWidth:p,rotation:m}=this._drawArgs(l);En(t,e.text,0,0,s,{color:e.color,maxWidth:p,rotation:m,textAlign:Sa(e.align),textBaseline:"middle",translation:[d,f]})}}function q2(i,t){const e=new La({ctx:i.ctx,options:t,chart:i});Se.configure(i,e,t),Se.addBox(i,e),i.titleBlock=e}var Z2={id:"title",_element:La,start(i,t,e){q2(i,e)},stop(i){const t=i.titleBlock;Se.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){const s=i.titleBlock;Se.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const br=new WeakMap;var K2={id:"subtitle",start(i,t,e){const s=new La({ctx:i.ctx,options:e,chart:i});Se.configure(i,s,e),Se.addBox(i,s),br.set(i,s)},stop(i){Se.removeBox(i,br.get(i)),br.delete(i)},beforeUpdate(i,t,e){const s=br.get(i);Se.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ws={average(i){if(!i.length)return!1;let t,e,s=0,o=0,l=0;for(t=0,e=i.length;t<e;++t){const d=i[t].element;if(d&&d.hasValue()){const f=d.tooltipPosition();s+=f.x,o+=f.y,++l}}return{x:s/l,y:o/l}},nearest(i,t){if(!i.length)return!1;let e=t.x,s=t.y,o=Number.POSITIVE_INFINITY,l,d,f;for(l=0,d=i.length;l<d;++l){const p=i[l].element;if(p&&p.hasValue()){const m=p.getCenterPoint(),y=Go(t,m);y<o&&(o=y,f=p)}}if(f){const p=f.tooltipPosition();e=p.x,s=p.y}return{x:e,y:s}}};function gi(i,t){return t&&($t(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function _i(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function Q2(i,t){const{element:e,datasetIndex:s,index:o}=t,l=i.getDatasetMeta(s).controller,{label:d,value:f}=l.getLabelAndValue(o);return{chart:i,label:d,parsed:l.getParsed(o),raw:i.data.datasets[s].data[o],formattedValue:f,dataset:l.getDataset(),dataIndex:o,datasetIndex:s,element:e}}function Qc(i,t){const e=i.chart.ctx,{body:s,footer:o,title:l}=i,{boxWidth:d,boxHeight:f}=t,p=ue(t.bodyFont),m=ue(t.titleFont),y=ue(t.footerFont),w=l.length,A=o.length,S=s.length,M=ve(t.padding);let D=M.height,k=0,R=s.reduce((W,$)=>W+$.before.length+$.lines.length+$.after.length,0);if(R+=i.beforeBody.length+i.afterBody.length,w&&(D+=w*m.lineHeight+(w-1)*t.titleSpacing+t.titleMarginBottom),R){const W=t.displayColors?Math.max(f,p.lineHeight):p.lineHeight;D+=S*W+(R-S)*p.lineHeight+(R-1)*t.bodySpacing}A&&(D+=t.footerMarginTop+A*y.lineHeight+(A-1)*t.footerSpacing);let P=0;const V=function(W){k=Math.max(k,e.measureText(W).width+P)};return e.save(),e.font=m.string,Rt(i.title,V),e.font=p.string,Rt(i.beforeBody.concat(i.afterBody),V),P=t.displayColors?d+2+t.boxPadding:0,Rt(s,W=>{Rt(W.before,V),Rt(W.lines,V),Rt(W.after,V)}),P=0,e.font=y.string,Rt(i.footer,V),e.restore(),k+=M.width,{width:k,height:D}}function J2(i,t){const{y:e,height:s}=t;return e<s/2?"top":e>i.height-s/2?"bottom":"center"}function tx(i,t,e,s){const{x:o,width:l}=s,d=e.caretSize+e.caretPadding;if(i==="left"&&o+l+d>t.width||i==="right"&&o-l-d<0)return!0}function ex(i,t,e,s){const{x:o,width:l}=e,{width:d,chartArea:{left:f,right:p}}=i;let m="center";return s==="center"?m=o<=(f+p)/2?"left":"right":o<=l/2?m="left":o>=d-l/2&&(m="right"),tx(m,i,t,e)&&(m="center"),m}function Jc(i,t,e){const s=e.yAlign||t.yAlign||J2(i,e);return{xAlign:e.xAlign||t.xAlign||ex(i,t,e,s),yAlign:s}}function ix(i,t){let{x:e,width:s}=i;return t==="right"?e-=s:t==="center"&&(e-=s/2),e}function nx(i,t,e){let{y:s,height:o}=i;return t==="top"?s+=e:t==="bottom"?s-=o+e:s-=o/2,s}function th(i,t,e,s){const{caretSize:o,caretPadding:l,cornerRadius:d}=i,{xAlign:f,yAlign:p}=e,m=o+l,{topLeft:y,topRight:w,bottomLeft:A,bottomRight:S}=bn(d);let M=ix(t,f);const D=nx(t,p,m);return p==="center"?f==="left"?M+=m:f==="right"&&(M-=m):f==="left"?M-=Math.max(y,A)+o:f==="right"&&(M+=Math.max(w,S)+o),{x:me(M,0,s.width-t.width),y:me(D,0,s.height-t.height)}}function yr(i,t,e){const s=ve(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-s.right:i.x+s.left}function eh(i){return gi([],_i(i))}function sx(i,t,e){return Qi(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function ih(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}const jd={beforeTitle:yi,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:yi,beforeBody:yi,beforeLabel:yi,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return It(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:yi,afterBody:yi,beforeFooter:yi,footer:yi,afterFooter:yi};function Be(i,t,e,s){const o=i[t].call(e,s);return typeof o>"u"?jd[t].call(e,s):o}class na extends Oi{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,s=this.options.setContext(this.getContext()),o=s.enabled&&e.options.animation&&s.animations,l=new Ad(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=sx(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:s}=e,o=Be(s,"beforeTitle",this,t),l=Be(s,"title",this,t),d=Be(s,"afterTitle",this,t);let f=[];return f=gi(f,_i(o)),f=gi(f,_i(l)),f=gi(f,_i(d)),f}getBeforeBody(t,e){return eh(Be(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:s}=e,o=[];return Rt(t,l=>{const d={before:[],lines:[],after:[]},f=ih(s,l);gi(d.before,_i(Be(f,"beforeLabel",this,l))),gi(d.lines,Be(f,"label",this,l)),gi(d.after,_i(Be(f,"afterLabel",this,l))),o.push(d)}),o}getAfterBody(t,e){return eh(Be(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:s}=e,o=Be(s,"beforeFooter",this,t),l=Be(s,"footer",this,t),d=Be(s,"afterFooter",this,t);let f=[];return f=gi(f,_i(o)),f=gi(f,_i(l)),f=gi(f,_i(d)),f}_createItems(t){const e=this._active,s=this.chart.data,o=[],l=[],d=[];let f=[],p,m;for(p=0,m=e.length;p<m;++p)f.push(Q2(this.chart,e[p]));return t.filter&&(f=f.filter((y,w,A)=>t.filter(y,w,A,s))),t.itemSort&&(f=f.sort((y,w)=>t.itemSort(y,w,s))),Rt(f,y=>{const w=ih(t.callbacks,y);o.push(Be(w,"labelColor",this,y)),l.push(Be(w,"labelPointStyle",this,y)),d.push(Be(w,"labelTextColor",this,y))}),this.labelColors=o,this.labelPointStyles=l,this.labelTextColors=d,this.dataPoints=f,f}update(t,e){const s=this.options.setContext(this.getContext()),o=this._active;let l,d=[];if(!o.length)this.opacity!==0&&(l={opacity:0});else{const f=ws[s.position].call(this,o,this._eventPosition);d=this._createItems(s),this.title=this.getTitle(d,s),this.beforeBody=this.getBeforeBody(d,s),this.body=this.getBody(d,s),this.afterBody=this.getAfterBody(d,s),this.footer=this.getFooter(d,s);const p=this._size=Qc(this,s),m=Object.assign({},f,p),y=Jc(this.chart,s,m),w=th(s,m,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,l={opacity:1,x:w.x,y:w.y,width:p.width,height:p.height,caretX:f.x,caretY:f.y}}this._tooltipItems=d,this.$context=void 0,l&&this._resolveAnimations().update(this,l),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,s,o){const l=this.getCaretPosition(t,s,o);e.lineTo(l.x1,l.y1),e.lineTo(l.x2,l.y2),e.lineTo(l.x3,l.y3)}getCaretPosition(t,e,s){const{xAlign:o,yAlign:l}=this,{caretSize:d,cornerRadius:f}=s,{topLeft:p,topRight:m,bottomLeft:y,bottomRight:w}=bn(f),{x:A,y:S}=t,{width:M,height:D}=e;let k,R,P,V,W,$;return l==="center"?(W=S+D/2,o==="left"?(k=A,R=k-d,V=W+d,$=W-d):(k=A+M,R=k+d,V=W-d,$=W+d),P=k):(o==="left"?R=A+Math.max(p,y)+d:o==="right"?R=A+M-Math.max(m,w)-d:R=this.caretX,l==="top"?(V=S,W=V-d,k=R-d,P=R+d):(V=S+D,W=V+d,k=R+d,P=R-d),$=V),{x1:k,x2:R,x3:P,y1:V,y2:W,y3:$}}drawTitle(t,e,s){const o=this.title,l=o.length;let d,f,p;if(l){const m=Hn(s.rtl,this.x,this.width);for(t.x=yr(this,s.titleAlign,s),e.textAlign=m.textAlign(s.titleAlign),e.textBaseline="middle",d=ue(s.titleFont),f=s.titleSpacing,e.fillStyle=s.titleColor,e.font=d.string,p=0;p<l;++p)e.fillText(o[p],m.x(t.x),t.y+d.lineHeight/2),t.y+=d.lineHeight+f,p+1===l&&(t.y+=s.titleMarginBottom-f)}}_drawColorBox(t,e,s,o,l){const d=this.labelColors[s],f=this.labelPointStyles[s],{boxHeight:p,boxWidth:m}=l,y=ue(l.bodyFont),w=yr(this,"left",l),A=o.x(w),S=p<y.lineHeight?(y.lineHeight-p)/2:0,M=e.y+S;if(l.usePointStyle){const D={radius:Math.min(m,p)/2,pointStyle:f.pointStyle,rotation:f.rotation,borderWidth:1},k=o.leftForLtr(A,m)+m/2,R=M+p/2;t.strokeStyle=l.multiKeyBackground,t.fillStyle=l.multiKeyBackground,Zo(t,D,k,R),t.strokeStyle=d.borderColor,t.fillStyle=d.backgroundColor,Zo(t,D,k,R)}else{t.lineWidth=Ct(d.borderWidth)?Math.max(...Object.values(d.borderWidth)):d.borderWidth||1,t.strokeStyle=d.borderColor,t.setLineDash(d.borderDash||[]),t.lineDashOffset=d.borderDashOffset||0;const D=o.leftForLtr(A,m),k=o.leftForLtr(o.xPlus(A,1),m-2),R=bn(d.borderRadius);Object.values(R).some(P=>P!==0)?(t.beginPath(),t.fillStyle=l.multiKeyBackground,Fs(t,{x:D,y:M,w:m,h:p,radius:R}),t.fill(),t.stroke(),t.fillStyle=d.backgroundColor,t.beginPath(),Fs(t,{x:k,y:M+1,w:m-2,h:p-2,radius:R}),t.fill()):(t.fillStyle=l.multiKeyBackground,t.fillRect(D,M,m,p),t.strokeRect(D,M,m,p),t.fillStyle=d.backgroundColor,t.fillRect(k,M+1,m-2,p-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,e,s){const{body:o}=this,{bodySpacing:l,bodyAlign:d,displayColors:f,boxHeight:p,boxWidth:m,boxPadding:y}=s,w=ue(s.bodyFont);let A=w.lineHeight,S=0;const M=Hn(s.rtl,this.x,this.width),D=function(Y){e.fillText(Y,M.x(t.x+S),t.y+A/2),t.y+=A+l},k=M.textAlign(d);let R,P,V,W,$,G,B;for(e.textAlign=d,e.textBaseline="middle",e.font=w.string,t.x=yr(this,k,s),e.fillStyle=s.bodyColor,Rt(this.beforeBody,D),S=f&&k!=="right"?d==="center"?m/2+y:m+2+y:0,W=0,G=o.length;W<G;++W){for(R=o[W],P=this.labelTextColors[W],e.fillStyle=P,Rt(R.before,D),V=R.lines,f&&V.length&&(this._drawColorBox(e,t,W,M,s),A=Math.max(w.lineHeight,p)),$=0,B=V.length;$<B;++$)D(V[$]),A=w.lineHeight;Rt(R.after,D)}S=0,A=w.lineHeight,Rt(this.afterBody,D),t.y-=l}drawFooter(t,e,s){const o=this.footer,l=o.length;let d,f;if(l){const p=Hn(s.rtl,this.x,this.width);for(t.x=yr(this,s.footerAlign,s),t.y+=s.footerMarginTop,e.textAlign=p.textAlign(s.footerAlign),e.textBaseline="middle",d=ue(s.footerFont),e.fillStyle=s.footerColor,e.font=d.string,f=0;f<l;++f)e.fillText(o[f],p.x(t.x),t.y+d.lineHeight/2),t.y+=d.lineHeight+s.footerSpacing}}drawBackground(t,e,s,o){const{xAlign:l,yAlign:d}=this,{x:f,y:p}=t,{width:m,height:y}=s,{topLeft:w,topRight:A,bottomLeft:S,bottomRight:M}=bn(o.cornerRadius);e.fillStyle=o.backgroundColor,e.strokeStyle=o.borderColor,e.lineWidth=o.borderWidth,e.beginPath(),e.moveTo(f+w,p),d==="top"&&this.drawCaret(t,e,s,o),e.lineTo(f+m-A,p),e.quadraticCurveTo(f+m,p,f+m,p+A),d==="center"&&l==="right"&&this.drawCaret(t,e,s,o),e.lineTo(f+m,p+y-M),e.quadraticCurveTo(f+m,p+y,f+m-M,p+y),d==="bottom"&&this.drawCaret(t,e,s,o),e.lineTo(f+S,p+y),e.quadraticCurveTo(f,p+y,f,p+y-S),d==="center"&&l==="left"&&this.drawCaret(t,e,s,o),e.lineTo(f,p+w),e.quadraticCurveTo(f,p,f+w,p),e.closePath(),e.fill(),o.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,s=this.$animations,o=s&&s.x,l=s&&s.y;if(o||l){const d=ws[t.position].call(this,this._active,this._eventPosition);if(!d)return;const f=this._size=Qc(this,t),p=Object.assign({},d,this._size),m=Jc(e,t,p),y=th(t,p,m,e);(o._to!==y.x||l._to!==y.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=f.width,this.height=f.height,this.caretX=d.x,this.caretY=d.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(e);const o={width:this.width,height:this.height},l={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const d=ve(e.padding),f=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&f&&(t.save(),t.globalAlpha=s,this.drawBackground(l,t,o,e),xd(t,e.textDirection),l.y+=d.top,this.drawTitle(l,t,e),this.drawBody(l,t,e),this.drawFooter(l,t,e),bd(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const s=this._active,o=t.map(({datasetIndex:f,index:p})=>{const m=this.chart.getDatasetMeta(f);if(!m)throw new Error("Cannot find a dataset at index "+f);return{datasetIndex:f,element:m.data[p],index:p}}),l=!Hr(s,o),d=this._positionChanged(o,e);(l||d)&&(this._active=o,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,s=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,l=this._active||[],d=this._getActiveElements(t,l,e,s),f=this._positionChanged(d,t),p=e||!Hr(d,l)||f;return p&&(this._active=d,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),p}_getActiveElements(t,e,s,o){const l=this.options;if(t.type==="mouseout")return[];if(!o)return e.filter(f=>this.chart.data.datasets[f.datasetIndex]&&this.chart.getDatasetMeta(f.datasetIndex).controller.getParsed(f.index)!==void 0);const d=this.chart.getElementsAtEventForMode(t,l.mode,l,s);return l.reverse&&d.reverse(),d}_positionChanged(t,e){const{caretX:s,caretY:o,options:l}=this,d=ws[l.position].call(this,t,e);return d!==!1&&(s!==d.x||o!==d.y)}}Q(na,"positioners",ws);var rx={id:"tooltip",_element:na,positioners:ws,afterInit(i,t,e){e&&(i.tooltip=new na({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){const e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jd},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},ox=Object.freeze({__proto__:null,Colors:b2,Decimation:A2,Filler:H2,Legend:G2,SubTitle:K2,Title:Z2,Tooltip:rx});const ax=(i,t,e,s)=>(typeof t=="string"?(e=i.push(t)-1,s.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function lx(i,t,e,s){const o=i.indexOf(t);if(o===-1)return ax(i,t,e,s);const l=i.lastIndexOf(t);return o!==l?e:o}const cx=(i,t)=>i===null?null:me(Math.round(i),0,t);function nh(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class sa extends vn{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const s=this.getLabels();for(const{index:o,label:l}of e)s[o]===l&&s.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(It(t))return null;const s=this.getLabels();return e=isFinite(e)&&s[e]===t?e:lx(s,t,bt(e,t),this._addedLabels),cx(e,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:s,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),e||(o=this.getLabels().length-1)),this.min=s,this.max=o}buildTicks(){const t=this.min,e=this.max,s=this.options.offset,o=[];let l=this.getLabels();l=t===0&&e===l.length-1?l:l.slice(t,e+1),this._valueRange=Math.max(l.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let d=t;d<=e;d++)o.push({value:d});return o}getLabelForValue(t){return nh.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Q(sa,"id","category"),Q(sa,"defaults",{ticks:{callback:nh}});function hx(i,t){const e=[],{bounds:o,step:l,min:d,max:f,precision:p,count:m,maxTicks:y,maxDigits:w,includeBounds:A}=i,S=l||1,M=y-1,{min:D,max:k}=t,R=!It(d),P=!It(f),V=!It(m),W=(k-D)/(w+1);let $=Kl((k-D)/M/S)*S,G,B,Y,j;if($<1e-14&&!R&&!P)return[{value:D},{value:k}];j=Math.ceil(k/$)-Math.floor(D/$),j>M&&($=Kl(j*$/M/S)*S),It(p)||(G=Math.pow(10,p),$=Math.ceil($*G)/G),o==="ticks"?(B=Math.floor(D/$)*$,Y=Math.ceil(k/$)*$):(B=D,Y=k),R&&P&&l&&sg((f-d)/l,$/1e3)?(j=Math.round(Math.min((f-d)/$,y)),$=(f-d)/j,B=d,Y=f):V?(B=R?d:B,Y=P?f:Y,j=m-1,$=(Y-B)/j):(j=(Y-B)/$,vs(j,Math.round(j),$/1e3)?j=Math.round(j):j=Math.ceil(j));const ft=Math.max(Ql($),Ql(B));G=Math.pow(10,It(p)?ft:p),B=Math.round(B*G)/G,Y=Math.round(Y*G)/G;let at=0;for(R&&(A&&B!==d?(e.push({value:d}),B<d&&at++,vs(Math.round((B+at*$)*G)/G,d,sh(d,W,i))&&at++):B<d&&at++);at<j;++at){const tt=Math.round((B+at*$)*G)/G;if(P&&tt>f)break;e.push({value:tt})}return P&&A&&Y!==f?e.length&&vs(e[e.length-1].value,f,sh(f,W,i))?e[e.length-1].value=f:e.push({value:f}):(!P||Y===f)&&e.push({value:Y}),e}function sh(i,t,{horizontal:e,minRotation:s}){const o=si(s),l=(e?Math.sin(o):Math.cos(o))||.001,d=.75*t*(""+i).length;return Math.min(t/l,d)}class qr extends vn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return It(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:o,max:l}=this;const d=p=>o=e?o:p,f=p=>l=s?l:p;if(t){const p=xi(o),m=xi(l);p<0&&m<0?f(0):p>0&&m>0&&d(0)}if(o===l){let p=l===0?1:Math.abs(l*.05);f(l+p),t||d(o-p)}this.min=o,this.max=l}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:s}=t,o;return s?(o=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),e=e||11),e&&(o=Math.min(e,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const o={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},l=this._range||this,d=hx(o,l);return t.bounds==="ticks"&&td(d,this,"value"),t.reverse?(d.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),d}configure(){const t=this.ticks;let e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const o=(s-e)/Math.max(t.length-1,1)/2;e-=o,s+=o}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return $s(t,this.chart.options.locale,this.options.ticks.format)}}class ra extends qr{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=te(t)?t:0,this.max=te(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,s=si(this.options.ticks.minRotation),o=(t?Math.sin(s):Math.cos(s))||.001,l=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,l.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Q(ra,"id","linear"),Q(ra,"defaults",{ticks:{callback:Kr.formatters.numeric}});const Vs=i=>Math.floor(Hi(i)),fn=(i,t)=>Math.pow(10,Vs(i)+t);function rh(i){return i/Math.pow(10,Vs(i))===1}function oh(i,t,e){const s=Math.pow(10,e),o=Math.floor(i/s);return Math.ceil(t/s)-o}function dx(i,t){const e=t-i;let s=Vs(e);for(;oh(i,t,s)>10;)s++;for(;oh(i,t,s)<10;)s--;return Math.min(s,Vs(i))}function ux(i,{min:t,max:e}){t=ze(i.min,t);const s=[],o=Vs(t);let l=dx(t,e),d=l<0?Math.pow(10,Math.abs(l)):1;const f=Math.pow(10,l),p=o>l?Math.pow(10,o):0,m=Math.round((t-p)*d)/d,y=Math.floor((t-p)/f/10)*f*10;let w=Math.floor((m-y)/Math.pow(10,l)),A=ze(i.min,Math.round((p+y+w*Math.pow(10,l))*d)/d);for(;A<e;)s.push({value:A,major:rh(A),significand:w}),w>=10?w=w<15?15:20:w++,w>=20&&(l++,w=2,d=l>=0?1:d),A=Math.round((p+y+w*Math.pow(10,l))*d)/d;const S=ze(i.max,A);return s.push({value:S,major:rh(S),significand:w}),s}class oa extends vn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const s=qr.prototype.parse.apply(this,[t,e]);if(s===0){this._zero=!0;return}return te(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=te(t)?Math.max(0,t):null,this.max=te(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!te(this._userMin)&&(this.min=t===fn(this.min,0)?fn(this.min,-1):fn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let s=this.min,o=this.max;const l=f=>s=t?s:f,d=f=>o=e?o:f;s===o&&(s<=0?(l(1),d(10)):(l(fn(s,-1)),d(fn(o,1)))),s<=0&&l(fn(o,-1)),o<=0&&d(fn(s,1)),this.min=s,this.max=o}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},s=ux(e,this);return t.bounds==="ticks"&&td(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":$s(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Hi(t),this._valueRange=Hi(this.max)-Hi(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Hi(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}Q(oa,"id","logarithmic"),Q(oa,"defaults",{ticks:{callback:Kr.formatters.logarithmic,major:{enabled:!0}}});function aa(i){const t=i.ticks;if(t.display&&i.display){const e=ve(t.backdropPadding);return bt(t.font&&t.font.size,ee.font.size)+e.height}return 0}function fx(i,t,e){return e=$t(e)?e:[e],{w:_g(i,t.string,e),h:e.length*t.lineHeight}}function ah(i,t,e,s,o){return i===s||i===o?{start:t-e/2,end:t+e/2}:i<s||i>o?{start:t-e,end:t}:{start:t,end:t+e}}function gx(i){const t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),s=[],o=[],l=i._pointLabels.length,d=i.options.pointLabels,f=d.centerPointLabels?Xt/l:0;for(let p=0;p<l;p++){const m=d.setContext(i.getPointLabelContext(p));o[p]=m.padding;const y=i.getPointPosition(p,i.drawingArea+o[p],f),w=ue(m.font),A=fx(i.ctx,w,i._pointLabels[p]);s[p]=A;const S=He(i.getIndexAngle(p)+f),M=Math.round(Ca(S)),D=ah(M,y.x,A.w,0,180),k=ah(M,y.y,A.h,90,270);px(e,t,S,D,k)}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=bx(i,s,o)}function px(i,t,e,s,o){const l=Math.abs(Math.sin(e)),d=Math.abs(Math.cos(e));let f=0,p=0;s.start<t.l?(f=(t.l-s.start)/l,i.l=Math.min(i.l,t.l-f)):s.end>t.r&&(f=(s.end-t.r)/l,i.r=Math.max(i.r,t.r+f)),o.start<t.t?(p=(t.t-o.start)/d,i.t=Math.min(i.t,t.t-p)):o.end>t.b&&(p=(o.end-t.b)/d,i.b=Math.max(i.b,t.b+p))}function mx(i,t,e){const s=i.drawingArea,{extra:o,additionalAngle:l,padding:d,size:f}=e,p=i.getPointPosition(t,s+o+d,l),m=Math.round(Ca(He(p.angle+oe))),y=_x(p.y,f.h,m),w=yx(m),A=wx(p.x,f.w,w);return{visible:!0,x:p.x,y,textAlign:w,left:A,top:y,right:A+f.w,bottom:y+f.h}}function xx(i,t){if(!t)return!0;const{left:e,top:s,right:o,bottom:l}=i;return!(Mi({x:e,y:s},t)||Mi({x:e,y:l},t)||Mi({x:o,y:s},t)||Mi({x:o,y:l},t))}function bx(i,t,e){const s=[],o=i._pointLabels.length,l=i.options,{centerPointLabels:d,display:f}=l.pointLabels,p={extra:aa(l)/2,additionalAngle:d?Xt/o:0};let m;for(let y=0;y<o;y++){p.padding=e[y],p.size=t[y];const w=mx(i,y,p);s.push(w),f==="auto"&&(w.visible=xx(w,m),w.visible&&(m=w))}return s}function yx(i){return i===0||i===180?"center":i<180?"left":"right"}function wx(i,t,e){return e==="right"?i-=t:e==="center"&&(i-=t/2),i}function _x(i,t,e){return e===90||e===270?i-=t/2:(e>270||e<90)&&(i-=t),i}function Ax(i,t,e){const{left:s,top:o,right:l,bottom:d}=e,{backdropColor:f}=t;if(!It(f)){const p=bn(t.borderRadius),m=ve(t.backdropPadding);i.fillStyle=f;const y=s-m.left,w=o-m.top,A=l-s+m.width,S=d-o+m.height;Object.values(p).some(M=>M!==0)?(i.beginPath(),Fs(i,{x:y,y:w,w:A,h:S,radius:p}),i.fill()):i.fillRect(y,w,A,S)}}function Cx(i,t){const{ctx:e,options:{pointLabels:s}}=i;for(let o=t-1;o>=0;o--){const l=i._pointLabelItems[o];if(!l.visible)continue;const d=s.setContext(i.getPointLabelContext(o));Ax(e,d,l);const f=ue(d.font),{x:p,y:m,textAlign:y}=l;En(e,i._pointLabels[o],p,m+f.lineHeight/2,f,{color:d.color,textAlign:y,textBaseline:"middle"})}}function Wd(i,t,e,s){const{ctx:o}=i;if(e)o.arc(i.xCenter,i.yCenter,t,0,Yt);else{let l=i.getPointPosition(0,t);o.moveTo(l.x,l.y);for(let d=1;d<s;d++)l=i.getPointPosition(d,t),o.lineTo(l.x,l.y)}}function Ex(i,t,e,s,o){const l=i.ctx,d=t.circular,{color:f,lineWidth:p}=t;!d&&!s||!f||!p||e<0||(l.save(),l.strokeStyle=f,l.lineWidth=p,l.setLineDash(o.dash),l.lineDashOffset=o.dashOffset,l.beginPath(),Wd(i,e,d,s),l.closePath(),l.stroke(),l.restore())}function Sx(i,t,e){return Qi(i,{label:e,index:t,type:"pointLabel"})}class _s extends qr{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ve(aa(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=te(t)&&!isNaN(t)?t:0,this.max=te(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/aa(this.options))}generateTickLabels(t){qr.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{const o=zt(this.options.pointLabels.callback,[e,s],this);return o||o===0?o:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?gx(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,o){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,o))}getIndexAngle(t){const e=Yt/(this._pointLabels.length||1),s=this.options.startAngle||0;return He(t*e+si(s))}getDistanceFromCenterForValue(t){if(It(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(It(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const s=e[t];return Sx(this.getContext(),t,s)}}getPointPosition(t,e,s=0){const o=this.getIndexAngle(t)-oe+s;return{x:Math.cos(o)*e+this.xCenter,y:Math.sin(o)*e+this.yCenter,angle:o}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:s,right:o,bottom:l}=this._pointLabelItems[t];return{left:e,top:s,right:o,bottom:l}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),Wd(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:s,grid:o,border:l}=e,d=this._pointLabels.length;let f,p,m;if(e.pointLabels.display&&Cx(this,d),o.display&&this.ticks.forEach((y,w)=>{if(w!==0){p=this.getDistanceFromCenterForValue(y.value);const A=this.getContext(w),S=o.setContext(A),M=l.setContext(A);Ex(this,S,p,d,M)}}),s.display){for(t.save(),f=d-1;f>=0;f--){const y=s.setContext(this.getPointLabelContext(f)),{color:w,lineWidth:A}=y;!A||!w||(t.lineWidth=A,t.strokeStyle=w,t.setLineDash(y.borderDash),t.lineDashOffset=y.borderDashOffset,p=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),m=this.getPointPosition(f,p),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(m.x,m.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;const o=this.getIndexAngle(0);let l,d;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((f,p)=>{if(p===0&&!e.reverse)return;const m=s.setContext(this.getContext(p)),y=ue(m.font);if(l=this.getDistanceFromCenterForValue(this.ticks[p].value),m.showLabelBackdrop){t.font=y.string,d=t.measureText(f.label).width,t.fillStyle=m.backdropColor;const w=ve(m.backdropPadding);t.fillRect(-d/2-w.left,-l-y.size/2-w.top,d+w.width,y.size+w.height)}En(t,f.label,0,-l,y,{color:m.color,strokeColor:m.textStrokeColor,strokeWidth:m.textStrokeWidth})}),t.restore()}drawTitle(){}}Q(_s,"id","radialLinear"),Q(_s,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Kr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),Q(_s,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Q(_s,"descriptors",{angleLines:{_fallback:"grid"}});const eo={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fe=Object.keys(eo);function lh(i,t){return i-t}function ch(i,t){if(It(t))return null;const e=i._adapter,{parser:s,round:o,isoWeekday:l}=i._parseOpts;let d=t;return typeof s=="function"&&(d=s(d)),te(d)||(d=typeof s=="string"?e.parse(d,s):e.parse(d)),d===null?null:(o&&(d=o==="week"&&(jn(l)||l===!0)?e.startOf(d,"isoWeek",l):e.startOf(d,o)),+d)}function hh(i,t,e,s){const o=Fe.length;for(let l=Fe.indexOf(i);l<o-1;++l){const d=eo[Fe[l]],f=d.steps?d.steps:Number.MAX_SAFE_INTEGER;if(d.common&&Math.ceil((e-t)/(f*d.size))<=s)return Fe[l]}return Fe[o-1]}function vx(i,t,e,s,o){for(let l=Fe.length-1;l>=Fe.indexOf(e);l--){const d=Fe[l];if(eo[d].common&&i._adapter.diff(o,s,d)>=t-1)return d}return Fe[e?Fe.indexOf(e):0]}function Ix(i){for(let t=Fe.indexOf(i)+1,e=Fe.length;t<e;++t)if(eo[Fe[t]].common)return Fe[t]}function dh(i,t,e){if(!e)i[t]=!0;else if(e.length){const{lo:s,hi:o}=Ea(e,t),l=e[s]>=t?e[s]:e[o];i[l]=!0}}function Tx(i,t,e,s){const o=i._adapter,l=+o.startOf(t[0].value,s),d=t[t.length-1].value;let f,p;for(f=l;f<=d;f=+o.add(f,1,s))p=e[f],p>=0&&(t[p].major=!0);return t}function uh(i,t,e){const s=[],o={},l=t.length;let d,f;for(d=0;d<l;++d)f=t[d],o[f]=d,s.push({value:f,major:!1});return l===0||!e?s:Tx(i,s,o,e)}class zs extends vn{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const s=t.time||(t.time={}),o=this._adapter=new Bp._date(t.adapters.date);o.init(e),Ss(s.displayFormats,o.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:ch(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,s=t.time.unit||"day";let{min:o,max:l,minDefined:d,maxDefined:f}=this.getUserBounds();function p(m){!d&&!isNaN(m.min)&&(o=Math.min(o,m.min)),!f&&!isNaN(m.max)&&(l=Math.max(l,m.max))}(!d||!f)&&(p(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&p(this.getMinMax(!1))),o=te(o)&&!isNaN(o)?o:+e.startOf(Date.now(),s),l=te(l)&&!isNaN(l)?l:+e.endOf(Date.now(),s)+1,this.min=Math.min(o,l-1),this.max=Math.max(o+1,l)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],s=t[t.length-1]),{min:e,max:s}}buildTicks(){const t=this.options,e=t.time,s=t.ticks,o=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const l=this.min,d=this.max,f=lg(o,l,d);return this._unit=e.unit||(s.autoSkip?hh(e.minUnit,this.min,this.max,this._getLabelCapacity(l)):vx(this,f.length,e.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Ix(this._unit),this.initOffsets(o),t.reverse&&f.reverse(),uh(this,f,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,s=0,o,l;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?e=1-o:e=(this.getDecimalForValue(t[1])-o)/2,l=this.getDecimalForValue(t[t.length-1]),t.length===1?s=l:s=(l-this.getDecimalForValue(t[t.length-2]))/2);const d=t.length<3?.5:.25;e=me(e,0,d),s=me(s,0,d),this._offsets={start:e,end:s,factor:1/(e+1+s)}}_generate(){const t=this._adapter,e=this.min,s=this.max,o=this.options,l=o.time,d=l.unit||hh(l.minUnit,e,s,this._getLabelCapacity(e)),f=bt(o.ticks.stepSize,1),p=d==="week"?l.isoWeekday:!1,m=jn(p)||p===!0,y={};let w=e,A,S;if(m&&(w=+t.startOf(w,"isoWeek",p)),w=+t.startOf(w,m?"day":d),t.diff(s,e,d)>1e5*f)throw new Error(e+" and "+s+" are too far apart with stepSize of "+f+" "+d);const M=o.ticks.source==="data"&&this.getDataTimestamps();for(A=w,S=0;A<s;A=+t.add(A,f,d),S++)dh(y,A,M);return(A===s||o.bounds==="ticks"||S===1)&&dh(y,A,M),Object.keys(y).sort(lh).map(D=>+D)}getLabelForValue(t){const e=this._adapter,s=this.options.time;return s.tooltipFormat?e.format(t,s.tooltipFormat):e.format(t,s.displayFormats.datetime)}format(t,e){const o=this.options.time.displayFormats,l=this._unit,d=e||o[l];return this._adapter.format(t,d)}_tickFormatFunction(t,e,s,o){const l=this.options,d=l.ticks.callback;if(d)return zt(d,[t,e,s],this);const f=l.time.displayFormats,p=this._unit,m=this._majorUnit,y=p&&f[p],w=m&&f[m],A=s[e],S=m&&w&&A&&A.major;return this._adapter.format(t,o||(S?w:y))}generateTickLabels(t){let e,s,o;for(e=0,s=t.length;e<s;++e)o=t[e],o.label=this._tickFormatFunction(o.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+s)*e.factor)}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,s=this.ctx.measureText(t).width,o=si(this.isHorizontal()?e.maxRotation:e.minRotation),l=Math.cos(o),d=Math.sin(o),f=this._resolveTickFontOptions(0).size;return{w:s*l+f*d,h:s*d+f*l}}_getLabelCapacity(t){const e=this.options.time,s=e.displayFormats,o=s[e.unit]||s.millisecond,l=this._tickFormatFunction(t,0,uh(this,[t],this._majorUnit),o),d=this._getLabelSize(l),f=Math.floor(this.isHorizontal()?this.width/d.w:this.height/d.h)-1;return f>0?f:1}getDataTimestamps(){let t=this._cache.data||[],e,s;if(t.length)return t;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(e=0,s=o.length;e<s;++e)t=t.concat(o[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,s;if(t.length)return t;const o=this.getLabels();for(e=0,s=o.length;e<s;++e)t.push(ch(this,o[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return nd(t.sort(lh))}}Q(zs,"id","time"),Q(zs,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function wr(i,t,e){let s=0,o=i.length-1,l,d,f,p;e?(t>=i[s].pos&&t<=i[o].pos&&({lo:s,hi:o}=Ti(i,"pos",t)),{pos:l,time:f}=i[s],{pos:d,time:p}=i[o]):(t>=i[s].time&&t<=i[o].time&&({lo:s,hi:o}=Ti(i,"time",t)),{time:l,pos:f}=i[s],{time:d,pos:p}=i[o]);const m=d-l;return m?f+(p-f)*(t-l)/m:f}class la extends zs{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=wr(e,this.min),this._tableRange=wr(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:s}=this,o=[],l=[];let d,f,p,m,y;for(d=0,f=t.length;d<f;++d)m=t[d],m>=e&&m<=s&&o.push(m);if(o.length<2)return[{time:e,pos:0},{time:s,pos:1}];for(d=0,f=o.length;d<f;++d)y=o[d+1],p=o[d-1],m=o[d],Math.round((y+p)/2)!==m&&l.push({time:m,pos:d/(f-1)});return l}_generate(){const t=this.min,e=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(e)||s.length===1)&&s.push(e),s.sort((o,l)=>o-l)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),s=this.getLabelTimestamps();return e.length&&s.length?t=this.normalize(e.concat(s)):t=e.length?e:s,t=this._cache.all=t,t}getDecimalForValue(t){return(wr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return wr(this._table,s*this._tableRange+this._minPos,!0)}}Q(la,"id","timeseries"),Q(la,"defaults",zs.defaults);var Mx=Object.freeze({__proto__:null,CategoryScale:sa,LinearScale:ra,LogarithmicScale:oa,RadialLinearScale:_s,TimeScale:zs,TimeSeriesScale:la});const Dx=[Pp,u2,ox,Mx];Ci.register(...Dx);class Ox extends pt{static get properties(){return{data:{type:Array},text:{type:String},secondtext:{type:String},textcolor:{type:String}}}constructor(){super(),this.data=[],this.text="default",this.secondtext="second text",this.textcolor="#000000"}firstUpdated(){super.firstUpdated(),this._renderGraph()}static get styles(){return yt`
        .container {
            width: var(--circle-width, 200px);
            height: var(--circle-height, 200px);
        }  
        `}render(){return J`
            <div class="container">
                <canvas id="chart"></canvas>
            </div>
        `}_renderGraph(){const t=this.renderRoot.querySelector("#chart").getContext("2d"),e=this.data.map(l=>l.label+" "+l.value),s=this.data.map(l=>l.label),o={id:"customCanvasBackgroundColor",beforeDraw:(l,d,f)=>{const{ctx:p}=l;p.save(),p.globalCompositeOperation="destination-over",p.fillStyle=f.color||"transparent",p.fillRect(0,0,l.width,l.height),p.restore()},afterDatasetsDraw:(l,d,f)=>{const{ctx:p}=l;p.save();const m=l.getDatasetMeta(0).data[0].x,y=l.getDatasetMeta(0).data[0].y;p.font="bold 20px Inter-SemiBold, Helvetica",p.fillStyle=this.textcolor,p.textAlign="center",p.textBaseline="middle",p.fillText(this.text,m,y-5),p.font="bold 15px Inter-SemiBold, Helvetica",p.fillText(this.secondtext,m,y+15),p.restore()}};this._chart=new Ci(t,{responsive:!0,type:"doughnut",data:{labels:s,datasets:[{label:"",data:this.data,backgroundColor:this.data.length===0?["#00C300","#00AF5B","#00977F","#007D8A","#00627A","#2F4858","#97AFB9","#647B84","#6F4F72","#A380A6"]:this.data.map(l=>l.color),borderColor:["#ffffff"],borderWidth:2,cutout:"85%"}]},options:{plugins:{datalabels:{formatter:(l,d)=>{const f=d.dataset.data.reduce((m,y)=>m+y,0);return(l/f*100).toFixed(1)+"%"},color:"#fff"},legend:{display:!1,position:"top",align:"center"}}},plugins:[o,e]})}updateChart(){this._chart.destroy(),this._renderGraph()}}customElements.define("circle-bar",Ox);class kx extends pt{static get properties(){return{_data:{type:Object,state:!0},data:{type:Object},location:{type:String},_name:{type:String,state:!0},_brand:{type:String,state:!0},_image:{type:String,state:!0},_quantity:{type:Number,state:!0},_calories:{type:Number,state:!0},_protein:{type:Number,state:!0},_carbs:{type:Number,state:!0},_fat:{type:Number,state:!0},_salt:{type:Number,state:!0},_total:{type:Number,state:!0},date:{type:String},mealtype:{type:String},_abbreviate:{type:String}}}constructor(){super(),this._data={},this.data={},this.location="",this._total=0,this._abortController=new AbortController,this.date=new Date(new Date().getTime()-new Date().getTimezoneOffset()*6e4).toISOString().split("T")[0],this.mealtype="",this._abbreviate=""}connectedCallback(){super.connectedCallback(),this._name=this.data.name,this._brand=this.data.brand,this._image=this.data.image,this._quantity=this.data.quantity!==void 0?this.data.quantity:this.data.gramsEaten,this._calories=this.data.nutritions.calories,this._protein=this.data.nutritions.protein,this._carbs=this.data.nutritions.carbs,this._fat=this.data.nutritions.fat,this._salt=this.data.nutritions.salt,this._calperg=this.data.nutritions.calories/this._quantity,this._proteinperg=this.data.nutritions.protein/this._quantity,this._carbsperg=this.data.nutritions.carbs/this._quantity,this._fatperg=this.data.nutritions.fat/this._quantity,this._saltperg=this.data.nutritions.salt/this._quantity,this._abbreviate=this.data.unit.unit,Object.entries(this.data.nutritions).map(([t,e])=>{t!=="calories"&&(this._total+=e)}),self.addEventListener("submitProduct",this._handleSubmitProduct.bind(this),{once:!0,signal:this._abortController.signal})}disconnectedCallback(){super.disconnectedCallback(),self.removeEventListener("submitProduct",this._handleSubmitProduct.bind(this)),this._abortController.abort()}static get styles(){return yt`
            img {
                object-fit: contain;
                width: 100px;
                height: 100px;
            }
            .container {
                display: flex;
                flex-direction: column;
                text-align: center;
            }
            .nutritions {
                display: flex;
                flex-direction: row;
                align-items: center;
                justify-content: center;
                width: 100%;
            }
            .percentage-protein {
                color: #32A8F0;
            }

            .percentage-fat {
                color: #F02F2F;
            }
            .percentage-carbs {
                color: #42ca5b;
            }
            .percentage-salt {
               color: #6E1FF0;
            }
            .container > span {
                margin: 20px;
            }
            h1, h2 {
                margin: 10px 0; 
            }
            .nutrition-type {
                opacity: 0.5;
            }
            .nutritions div {
                display: flex;
                flex-direction: column;
                width: 100%;
            }
            .nutritions div span:nth-child(1) {
                font-size: 12px;
            }
            .nutritions div span:nth-child(2) {
                font-size: 16px;
                font-weight: bold;
            }
            .image-form {
                display: flex;
                text-align: center;
                align-items: center;
                justify-content: space-between;
            }
            .serving {
                display: flex;
                height: 20px;
                margin: 20px 0;
                justify-content: space-between;
                border-bottom: 1px solid #dbd8d8;
            }
            .serving > span {
                margin:0 10px;
            }
            
            circle-bar {
                --circle-width: 100px;
                --circle-height: 100px;
                margin-left: 10px;
            }
            numberic-input {
                --input-width: 160px;
                --input-field-border-radius: 4px;
            }

        `}render(){return J`<div class="container">
        <h1>${this._name}, ${this._brand}</h1>
        <div class="image-form">
            <img src="${this._image}">
            <numberic-input type="number" value=${this._quantity} @input-changed="${this.handleInput}" label="amount" name="amount" abbreviateType="${this._formatAbbreviate(this._abbreviate)}"></numberic-input>
        </div>
        <div class="serving">
            <span>Serving size</span>
            <span>${this._quantity} ${this._abbreviate.slice(0,this._abbreviate.length-1)}</span>
        </div>
        <div class="nutritions">
            <circle-bar .data="${[{value:this._protein,color:"#32A8F0",label:"Protein"},{value:this._fat,color:"#F02F2F",label:"Fat"},{value:this._carbs,color:"#42ca5b",label:"Carbs"},{value:this._salt,color:"#6E1FF0",label:"Salt"}]}" title="nitritions" text="${this._calories}" secondtext="Cal" textcolor="#EF9437"></circle-bar>
                <div class="protein">
                    <span class="percentage-protein">${(this._protein/this._total*100).toFixed(1)}%</span>
                    <span>${this._protein} g</span>
                    <span class="nutrition-type">Protein</span>
                </div>
                <div class="fat">
                    <span class="percentage-fat">${(this._fat/this._total*100).toFixed(1)}%</span>
                    <span>${this._fat} g</span>
                    <span class="nutrition-type">Fat</span>
                </div>
                <div class="carbs">
                    <span class="percentage-carbs">${(this._carbs/this._total*100).toFixed(1)}%</span>
                    <span>${this._carbs} g</span>
                    <span class="nutrition-type">Carbs</span>
                </div>
                <div class="salt">
                    <span class="percentage-salt">${(this._salt/this._total*100).toFixed(1)}%</span>
                    <span>${this._salt} g</span>
                    <span class="nutrition-type">Salt</span>
                </div>
        </div>
    </div>`}handleInput(t){const e=Number(t.target.value);e>0&&(this._quantity=e,this._calories=(this._calperg*e).toFixed(0),this._protein=this._roundNumber((this._proteinperg*e).toFixed(2)),this._carbs=this._roundNumber((this._carbsperg*e).toFixed(2)),this._fat=this._roundNumber((this._fatperg*e).toFixed(2)),this._salt=this._roundNumber((this._saltperg*e).toFixed(2)),this._total=Number(this._protein)+Number(this._carbs)+Number(this._fat)+Number(this._salt),this.shadowRoot.querySelector("circle-bar").updateChart())}_roundNumber(t){const e=t.toString(),s=parseInt(e[e.length-1]),o=parseInt(e[e.length-2]);return o!==0&&s!==0||o==0&&s!==0?t:o!==0&&s===0?t*100/100:Math.round(t*10)/10}_handleSubmitProduct(){const t=this.shadowRoot.querySelector("numberic-input").value;this._data={date:this.date,mealType:this.mealtype,productIdAndAmount:{id:this.location,amount:t}},this.dispatchEvent(new CustomEvent("addProductIntake",{detail:this._data}))}_formatAbbreviate(t){const e=t.charAt(t.length-1);return t.slice(0,t.length-1)+"("+e+")"}}customElements.define("product-view",kx);class Nx extends pt{constructor(){super();Q(this,"_myTask",new js(this,{task:async([e],{signal:s})=>this._isBarcode?await da(e).then(o=>o).catch(o=>{throw new Error(o.message)}):await Dh(e).then(o=>o).catch(o=>{throw new Error(o.message)}),args:()=>[this._location]}));this._location="",this._mealtype="",this._previousRoute="",this._isBarcode=!0,this._tilte="Product"}static get properties(){return{_location:{type:String,state:!0},_mealtype:{type:String,state:!0},_previousRoute:{type:String,state:!0},_isBarcode:{type:Boolean,state:!0},_title:{type:String,state:!0}}}onBeforeEnter(e,s,o){this._previousRoute=o.__previousContext===void 0||o.__previousContext.path===ut+"/scan/product"?"/products":o.__previousContext.pathname,this._previousRoute=this._previousRoute.slice(0,ut.length)===ut?this._previousRoute.slice(ut.length):this._previousRoute,this._location=e.params.id,this._mealtype=new URLSearchParams(e.search).get("mealtype"),this._location.length!==13&&(this._isBarcode=!1),this._mealtype!==null&&(this._tilte="Add product to "+this._mealtype.toLowerCase())}static get styles(){return yt`

            .slide {
                position: absolute;
                right: -100%;
                width: 100%;
                -webkit-animation: slide 0.5s forwards;
                animation: slide 0.5s forwards;
            }

            .back {
                position: absolute;
                left: 0;
                background-color: red;
                width: 100%;
                -webkit-animation: slide 0.5s forwards;
                animation: slide 0.5s forwards;
            }

            @-webkit-keyframes slide {
                100% { right: 0; }
            }

            @keyframes slide {
                100% { right: 0; }
            }
        `}render(){return J`
        <page-div headerbar headerbartitle="${this._tilte}" checkicon location="${this._previousRoute}">
            ${this._myTask.render({pending:()=>J`<span>Loading...</span>`,complete:e=>J`<product-view class="slide" location=${e.id} mealtype="${this._mealtype}" .data="${e}"></product-view>`,error:e=>J`<span>${e.message}</span>`})}
        </page-div>
        `}}customElements.define("product-page",Nx);class Rx extends pt{static get properties(){return{_error:{type:String,state:!0},_mealtype:{type:String,state:!0}}}constructor(){super(),this._error="",this._mealtype=""}onBeforeEnter(t,e,s){this._mealtype=t.search===""?"":t.search}static get styles(){return yt`
        error-message {
            display: flex;
            justify-content: center;
            align-items: center;
            --left: 0;
        }
        `}render(){return J`
        <page-div headerbar headerbartitle="Scan barcode" location="/products">
            <scanner-div @getBarcode="${this.findProduct}" mealtype="${this._mealtype}"></scanner-div>
            <error-message message="${this._error}"></error-message>
        </page-div>
        `}findProduct(t){this._error=t.detail.error}}customElements.define("scan-page",Rx);class Lx extends pt{constructor(){super();Q(this,"_myTask",new js(this,{task:async([e],{signal:s})=>this._isBarcode?await da(e).then(o=>o).catch(o=>{throw new Error(o.message)}):await Dh(e).then(o=>o).catch(o=>{throw new Error(o.message)}),args:()=>[this._location]}));this._location="",this._mealtype="",this._previousRoute="",this._isBarcode=!0,this._tilte="Product"}static get properties(){return{_location:{type:String,state:!0},_mealtype:{type:String,state:!0},_previousRoute:{type:String,state:!0},_isBarcode:{type:Boolean,state:!0},_title:{type:String,state:!0}}}onBeforeEnter(e,s,o){this._previousRoute=o.__previousContext===void 0||o.__previousContext.path===ut+"/scan/product"?"/products":o.__previousContext.pathname,this._previousRoute=this._previousRoute.slice(0,ut.length)===ut?this._previousRoute.slice(ut.length):this._previousRoute,this._location=e.params.id,this._mealtype=new URLSearchParams(e.search).get("mealtype"),this._location.length!==13&&(this._isBarcode=!1),this._mealtype!==null&&(this._tilte="Add product to "+this._mealtype.toLowerCase())}static get styles(){return yt`

            .slide {
                position: absolute;
                right: -100%;
                width: 100%;
                -webkit-animation: slide 0.5s forwards;
                animation: slide 0.5s forwards;
            }

            .back {
                position: absolute;
                left: 0;
                background-color: red;
                width: 100%;
                -webkit-animation: slide 0.5s forwards;
                animation: slide 0.5s forwards;
            }

            @-webkit-keyframes slide {
                100% { right: 0; }
            }

            @keyframes slide {
                100% { right: 0; }
            }
        `}render(){return J`
        <page-div headerbar headerbartitle="${this._tilte}" checkicon location="${this._previousRoute}">
            ${this._myTask.render({pending:()=>J`<span>Loading...</span>`,complete:e=>J`<product-view class="slide" location=${e.id} mealtype="${this._mealtype}" .data="${e}" @addProductIntake="${this.handleSubmit}"></product-view>`,error:e=>J`<span>${e.message}</span>`})}
        </page-div>
        `}handleSubmit(e){Df(e.detail).then(s=>{s.ok&&setTimeout(()=>{re.go(`${ut}/dairy`)},250)}).catch(s=>{console.log(s)})}}customElements.define("product-intake",Lx);class Px extends pt{constructor(){super();Q(this,"_myTask",new js(this,{task:async([e],{signal:s})=>kf(e).then(o=>(this._intakeId=o.id,o.product)).catch(o=>{throw new Error(o.message)}),args:()=>[this._location]}));this._location="",this._mealtype="",this._previousRoute="",this._tilte="Product",this._intakeId="",this._data={}}static get properties(){return{_location:{type:String,state:!0},_mealtype:{type:String,state:!0},_previousRoute:{type:String,state:!0},_title:{type:String,state:!0},_intakeId:{type:String,state:!0},_data:{type:Object,state:!0}}}onBeforeEnter(e,s,o){this._previousRoute=o.__previousContext===void 0||o.__previousContext.path===ut+"/scan/product"?"/products":o.__previousContext.pathname,this._previousRoute=this._previousRoute.slice(0,ut.length)===ut?this._previousRoute.slice(ut.length):this._previousRoute,this._location=e.params.id,this._mealtype=new URLSearchParams(e.search).get("mealtype"),this._mealtype!==null&&(this._tilte="Add product to "+this._mealtype.toLowerCase())}static get styles(){return yt`

            .slide {
                position: absolute;
                right: -100%;
                width: 100%;
                -webkit-animation: slide 0.5s forwards;
                animation: slide 0.5s forwards;
            }

            .back {
                position: absolute;
                left: 0;
                background-color: red;
                width: 100%;
                -webkit-animation: slide 0.5s forwards;
                animation: slide 0.5s forwards;
            }

            @-webkit-keyframes slide {
                100% { right: 0; }
            }

            @keyframes slide {
                100% { right: 0; }
            }
        `}render(){return J`
        <page-div headerbar headerbartitle="${this._tilte}" checkicon location="${this._previousRoute}">
            ${this._myTask.render({pending:()=>J`<span>Loading...</span>`,complete:e=>J`<product-view class="slide" location=${e.id} mealtype="${this._mealtype}" .data="${e}" @addProductIntake="${this.handleSubmit}"></product-view>`,error:e=>J`<span>${e.message}</span>`})}
        </page-div>
        `}handleSubmit(e){this._data={amount:e.detail.productIdAndAmount.amount},Lf(this._intakeId,this._data).then(s=>{s.ok&&setTimeout(()=>{re.go(`${ut}/dairy`)},250)}).catch(s=>{console.log(s)})}}customElements.define("update-intake",Px);const fi=(i,t)=>{if(document.title=i.route.name,!Ih()&&i.route.path!==`${ut}/login`)return t.redirect(`${ut}/login`)},Bx=()=>{yf()};Si.setRoutes([{path:`${ut}/`,redirect:Ih()?`${ut}/home`:`${ut}/login`},{path:`${ut}/home`,name:"Home",component:"home-view",action:fi},{path:`${ut}/login`,name:"Login",component:"login-div",action:fi},{path:`${ut}/logout`,action:Bx,redirect:`${ut}/login`},{path:`${ut}/register`,name:"Register",component:"register-div",action:i=>document.title=i.route.name},{path:`${ut}/profile`,name:"Profile",component:"profile-page",action:fi},{path:`${ut}/dairy`,name:"Dairy",component:"dairy-page",action:fi},{path:`${ut}/addproduct`,name:"Add a product",component:"addproduct-page",action:fi},{path:`${ut}/products`,name:"Products",component:"products-page",action:fi},{path:`${ut}/product/:id`,name:"Product",component:"product-intake",action:fi},{path:`${ut}/products`,name:"Products",component:"products-page",action:fi},{path:`${ut}/scan/product`,name:"Scan barcode",component:"scan-page",action:fi},{path:`${ut}/intake/:id`,name:"Update intake",component:"update-intake",action:fi}]);"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(i=>{console.log("Service worker registered")}).catch(i=>{console.log("Error registering service worker",i)})});
